2025-11-28 03:23:23.803 +02:00 [DBG] Connection id "0HNHDQO7SO9UM" received FIN.
2025-11-28 03:23:23.873 +02:00 [DBG] Connection id "0HNHDQO7SO9UM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 03:23:23.876 +02:00 [DBG] Connection id "0HNHDQO7SO9UM" disconnecting.
2025-11-28 03:23:23.880 +02:00 [DBG] Connection id "0HNHDQO7SO9UM" stopped.
2025-11-28 04:56:51.690 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-28 04:56:51.836 +02:00 [DBG] Hosting starting
2025-11-28 04:56:51.854 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-28 04:56:51.867 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-28 04:56:51.884 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-28 04:56:51.906 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-28 04:56:51.924 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-28 04:56:51.950 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-28 04:56:51.955 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-28 04:56:51.957 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-28 04:56:51.958 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-28 04:56:51.965 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-28 04:56:51.968 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-28 04:56:51.971 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-28 04:56:51.974 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-28 04:56:51.979 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-28 04:56:51.981 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-28 04:56:51.983 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-28 04:56:51.984 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-28 04:56:51.988 +02:00 [DBG] Middleware loaded
2025-11-28 04:56:51.990 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-28 04:56:51.992 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-28 04:56:52.055 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-28 04:56:52.127 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-28 04:56:52.130 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-28 04:56:52.131 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-28 04:56:52.132 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-28 04:56:52.133 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-28 04:56:52.134 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-28 04:56:52.227 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-28 04:56:52.229 +02:00 [INF] Hosting environment: Development
2025-11-28 04:56:52.231 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-28 04:56:52.232 +02:00 [DBG] Hosting started
2025-11-28 04:56:52.601 +02:00 [DBG] Connection id "0HNHE5748DPVR" received FIN.
2025-11-28 04:56:52.601 +02:00 [DBG] Connection id "0HNHE5748DPVS" received FIN.
2025-11-28 04:56:52.610 +02:00 [DBG] Connection id "0HNHE5748DPVR" accepted.
2025-11-28 04:56:52.611 +02:00 [DBG] Connection id "0HNHE5748DPVS" accepted.
2025-11-28 04:56:52.613 +02:00 [DBG] Connection id "0HNHE5748DPVR" started.
2025-11-28 04:56:52.614 +02:00 [DBG] Connection id "0HNHE5748DPVS" started.
2025-11-28 04:56:52.628 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-28 04:56:52.628 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-28 04:56:52.655 +02:00 [DBG] Connection id "0HNHE5748DPVS" stopped.
2025-11-28 04:56:52.655 +02:00 [DBG] Connection id "0HNHE5748DPVR" stopped.
2025-11-28 04:56:52.659 +02:00 [DBG] Connection id "0HNHE5748DPVR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 04:56:52.659 +02:00 [DBG] Connection id "0HNHE5748DPVS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 04:56:52.745 +02:00 [DBG] Connection id "0HNHE5748DPVT" accepted.
2025-11-28 04:56:52.747 +02:00 [DBG] Connection id "0HNHE5748DPVT" started.
2025-11-28 04:56:52.791 +02:00 [DBG] Connection 0HNHE5748DPVT established using the following protocol: "Tls13"
2025-11-28 04:56:52.846 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-28 04:56:52.960 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-28 04:56:52.989 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-28 04:56:52.992 +02:00 [DBG] Request did not match any endpoints
2025-11-28 04:56:53.046 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-28 04:56:53.050 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-28 04:56:53.069 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-28 04:56:53.071 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-28 04:56:53.075 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 231.0371ms
2025-11-28 04:56:53.086 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-28 04:56:53.098 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-28 04:56:53.102 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 15.314ms
2025-11-28 04:56:53.120 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-28 04:56:53.183 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.7355ms
2025-11-28 04:56:53.255 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-28 04:56:53.262 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-28 04:56:53.264 +02:00 [DBG] Request did not match any endpoints
2025-11-28 04:56:53.321 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 66.2181ms
2025-11-28 04:57:23.390 +02:00 [DBG] Connection id "0HNHE5748DPVT" received FIN.
2025-11-28 04:57:23.402 +02:00 [DBG] Connection id "0HNHE5748DPVT" is closed. The last processed stream ID was 7.
2025-11-28 04:57:23.402 +02:00 [DBG] The connection queue processing loop for 0HNHE5748DPVT completed.
2025-11-28 04:57:23.404 +02:00 [DBG] Connection id "0HNHE5748DPVT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 04:57:23.409 +02:00 [DBG] Connection id "0HNHE5748DPVT" stopped.
2025-11-28 05:02:20.017 +02:00 [DBG] Connection id "0HNHE5748DPVU" accepted.
2025-11-28 05:02:20.019 +02:00 [DBG] Connection id "0HNHE5748DPVU" started.
2025-11-28 05:02:20.029 +02:00 [DBG] Connection 0HNHE5748DPVU established using the following protocol: "Tls13"
2025-11-28 05:02:20.034 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Services - null null
2025-11-28 05:02:20.045 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Services'
2025-11-28 05:02:20.052 +02:00 [DBG] Endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)' with route pattern 'api/Services' is valid for the request path '/api/Services'
2025-11-28 05:02:20.056 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-28 05:02:20.062 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 05:02:20.065 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 05:02:20.067 +02:00 [INF] CORS policy execution successful.
2025-11-28 05:02:20.660 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 05:02:20.664 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-28 05:02:20.691 +02:00 [INF] Route matched with {action = "GetAll", controller = "Services"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.ServicesController (Hospital).
2025-11-28 05:02:20.694 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 05:02:20.696 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 05:02:20.697 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 05:02:20.699 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 05:02:20.700 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 05:02:20.704 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-28 05:02:21.278 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-28 05:02:21.471 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-28 05:02:21.476 +02:00 [INF] get all services called at "2025-11-28T05:02:21.4763291+02:00"
2025-11-28 05:02:21.479 +02:00 [INF] Fetching all services
2025-11-28 05:02:21.974 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-28 05:02:21.978 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-28 05:02:21.982 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-28 05:02:21.984 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-28 05:02:21.986 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-28 05:02:22.118 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-28 05:02:22.121 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-28 05:02:22.297 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 05:02:22.562 +02:00 [DBG] Compiling query expression: 
'DbSet<Service>()
    .Include(s => s.Branches)'
2025-11-28 05:02:22.611 +02:00 [DBG] Including navigation: 'Service.Branches'.
2025-11-28 05:02:22.798 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Service>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Service.ServiceId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Service.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Service.Description (string), 2], [Property: Service.ImageURL (string) MaxLength(300), 3], [Property: Service.Name (string) Required MaxLength(120), 4], [Property: Service.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 5] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: BranchService (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 6], [Property: BranchService (Dictionary<string, object>).ServiceId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 7] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Branch.Address (string) MaxLength(250), 9], [Property: Branch.BranchName (string) Required MaxLength(150), 10], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 11], [Property: Branch.Description (string), 12], [Property: Branch.Email (string) MaxLength(200), 13], [Property: Branch.ImageURL (string) MaxLength(300), 14], [Property: Branch.Latitude (double?), 15], [Property: Branch.Longitude (double?), 16], [Property: Branch.Phone (string) MaxLength(25), 17], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 18] }
            4 -> 6
            5 -> 7
            6 -> 8
        SELECT s.ServiceId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, t.BranchId, t.ServiceId, t.BranchId0, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Latitude, t.Longitude, t.Phone, t.UpdatedAt
        FROM Services AS s
        LEFT JOIN 
        (
            SELECT b.BranchId, b.ServiceId, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt, b0.Description, b0.Email, b0.ImageURL, b0.Latitude, b0.Longitude, b0.Phone, b0.UpdatedAt
            FROM BranchServices AS b
            INNER JOIN Branches AS b0 ON b.BranchId == b0.BranchId
        ) AS t ON s.ServiceId == t.ServiceId
        ORDER BY s.ServiceId ASC, t.BranchId ASC, t.ServiceId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Service>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 05:02:22.827 +02:00 [DBG] Creating DbConnection.
2025-11-28 05:02:22.845 +02:00 [DBG] Created DbConnection. (17ms).
2025-11-28 05:02:22.849 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 05:02:23.469 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 05:02:23.474 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 05:02:23.478 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-11-28 05:02:23.480 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-11-28 05:02:23.488 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[ServiceId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt]
FROM [Services] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[ServiceId] = [t].[ServiceId]
ORDER BY [s].[ServiceId], [t].[BranchId], [t].[ServiceId]
2025-11-28 05:02:23.534 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[ServiceId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt]
FROM [Services] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[ServiceId] = [t].[ServiceId]
ORDER BY [s].[ServiceId], [t].[BranchId], [t].[ServiceId]
2025-11-28 05:02:23.577 +02:00 [DBG] Context 'AppDbContext' started tracking 'Service' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 05:02:23.610 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 05:02:23.631 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 05:02:23.649 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 05:02:23.651 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 05:02:23.658 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 05:02:23.663 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 120ms reading results.
2025-11-28 05:02:23.667 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 05:02:23.674 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (6ms).
2025-11-28 05:02:23.676 +02:00 [INF] 1 services retrieved
2025-11-28 05:02:23.691 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 05:02:23.694 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 05:02:23.695 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 05:02:23.696 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 05:02:23.697 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 05:02:23.698 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.ServiceDTOS.ServiceDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 05:02:23.719 +02:00 [INF] Executed action Hospital.Controllers.ServicesController.GetAll (Hospital) in 3014.6559ms
2025-11-28 05:02:23.722 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-28 05:02:23.725 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 05:02:23.729 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 05:02:23.732 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-28 05:02:23.733 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Services - 200 null application/json; charset=utf-8 3699.3515ms
2025-11-28 05:02:48.467 +02:00 [DBG] Connection id "0HNHE5748DPVU" received FIN.
2025-11-28 05:02:48.469 +02:00 [DBG] Connection id "0HNHE5748DPVU" is closed. The last processed stream ID was 1.
2025-11-28 05:02:48.469 +02:00 [DBG] The connection queue processing loop for 0HNHE5748DPVU completed.
2025-11-28 05:02:48.471 +02:00 [DBG] Connection id "0HNHE5748DPVU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 05:02:48.477 +02:00 [DBG] Connection id "0HNHE5748DPVU" stopped.
2025-11-28 05:15:00.023 +02:00 [DBG] Connection id "0HNHE5748DPVV" accepted.
2025-11-28 05:15:00.026 +02:00 [DBG] Connection id "0HNHE5748DPVV" started.
2025-11-28 05:15:00.036 +02:00 [DBG] Connection 0HNHE5748DPVV established using the following protocol: "Tls13"
2025-11-28 05:15:00.041 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Services - null null
2025-11-28 05:15:00.047 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Services'
2025-11-28 05:15:00.050 +02:00 [DBG] Endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)' with route pattern 'api/Services' is valid for the request path '/api/Services'
2025-11-28 05:15:00.053 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-28 05:15:00.054 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 05:15:00.056 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 05:15:00.057 +02:00 [INF] CORS policy execution successful.
2025-11-28 05:15:00.059 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 05:15:00.061 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-28 05:15:00.063 +02:00 [INF] Route matched with {action = "GetAll", controller = "Services"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.ServicesController (Hospital).
2025-11-28 05:15:00.066 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 05:15:00.068 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 05:15:00.070 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 05:15:00.072 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 05:15:00.073 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 05:15:00.075 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-28 05:15:00.079 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-28 05:15:00.081 +02:00 [INF] get all services called at "2025-11-28T05:15:00.0816620+02:00"
2025-11-28 05:15:00.083 +02:00 [INF] Fetching all services
2025-11-28 05:15:00.142 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 05:15:00.151 +02:00 [DBG] Creating DbConnection.
2025-11-28 05:15:00.152 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-28 05:15:00.154 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 05:15:00.214 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 05:15:00.216 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 05:15:00.218 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-28 05:15:00.219 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-28 05:15:00.221 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[ServiceId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt]
FROM [Services] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[ServiceId] = [t].[ServiceId]
ORDER BY [s].[ServiceId], [t].[BranchId], [t].[ServiceId]
2025-11-28 05:15:00.241 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[ServiceId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt]
FROM [Services] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[ServiceId] = [t].[ServiceId]
ORDER BY [s].[ServiceId], [t].[BranchId], [t].[ServiceId]
2025-11-28 05:15:00.244 +02:00 [DBG] Context 'AppDbContext' started tracking 'Service' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 05:15:00.247 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 05:15:00.250 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 05:15:00.252 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 05:15:00.253 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 05:15:00.255 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 05:15:00.256 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-28 05:15:00.258 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 05:15:00.259 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 05:15:00.261 +02:00 [INF] 1 services retrieved
2025-11-28 05:15:00.263 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 05:15:00.267 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 05:15:00.268 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 05:15:00.269 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 05:15:00.270 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 05:15:00.271 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.ServiceDTOS.ServiceDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 05:15:00.273 +02:00 [INF] Executed action Hospital.Controllers.ServicesController.GetAll (Hospital) in 198.1669ms
2025-11-28 05:15:00.275 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-28 05:15:00.277 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 05:15:00.278 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 05:15:00.280 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-28 05:15:00.282 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Services - 200 null application/json; charset=utf-8 241.1868ms
2025-11-28 05:16:48.599 +02:00 [DBG] Connection id "0HNHE5748DPVV" received FIN.
2025-11-28 05:16:48.601 +02:00 [DBG] Connection id "0HNHE5748DPVV" is closed. The last processed stream ID was 1.
2025-11-28 05:16:48.602 +02:00 [DBG] Connection id "0HNHE5748DPVV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 05:16:48.607 +02:00 [DBG] The connection queue processing loop for 0HNHE5748DPVV completed.
2025-11-28 05:16:48.608 +02:00 [DBG] Connection id "0HNHE5748DPVV" stopped.
2025-11-28 06:18:40.492 +02:00 [DBG] Connection id "0HNHE5748DQ00" accepted.
2025-11-28 06:18:40.493 +02:00 [DBG] Connection id "0HNHE5748DQ00" started.
2025-11-28 06:18:40.497 +02:00 [DBG] Connection 0HNHE5748DQ00 established using the following protocol: "Tls13"
2025-11-28 06:18:40.498 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-28 06:18:40.500 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-28 06:18:40.501 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-28 06:18:40.502 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-28 06:18:40.503 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 06:18:40.504 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 06:18:40.505 +02:00 [INF] CORS policy execution successful.
2025-11-28 06:18:40.508 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 06:18:40.509 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-28 06:18:40.515 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-28 06:18:40.516 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 06:18:40.517 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 06:18:40.518 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 06:18:40.519 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 06:18:40.520 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 06:18:40.521 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-28 06:18:40.523 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-28 06:18:40.525 +02:00 [INF] Get All Branch called at "2025-11-28T06:18:40.5256484+02:00"
2025-11-28 06:18:40.527 +02:00 [INF] Fetching all branches
2025-11-28 06:18:40.536 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 06:18:40.540 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .AsNoTracking()'
2025-11-28 06:18:40.546 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Branches AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 06:18:40.548 +02:00 [DBG] Creating DbConnection.
2025-11-28 06:18:40.548 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 06:18:40.549 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:18:40.599 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:18:40.600 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 06:18:40.601 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 06:18:40.601 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 06:18:40.602 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-28 06:18:40.614 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-28 06:18:40.616 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:18:40.616 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 06:18:40.618 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:18:40.619 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 06:18:40.622 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 06:18:40.624 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 06:18:40.624 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 06:18:40.625 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 06:18:40.625 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 06:18:40.626 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 06:18:40.628 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 106.4616ms
2025-11-28 06:18:40.628 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-28 06:18:40.629 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 06:18:40.630 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:18:40.631 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 06:18:40.632 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 133.547ms
2025-11-28 06:18:51.708 +02:00 [DBG] Connection id "0HNHE5748DQ00" received FIN.
2025-11-28 06:18:51.710 +02:00 [DBG] Connection id "0HNHE5748DQ00" is closed. The last processed stream ID was 1.
2025-11-28 06:18:51.710 +02:00 [DBG] The connection queue processing loop for 0HNHE5748DQ00 completed.
2025-11-28 06:18:51.711 +02:00 [DBG] Connection id "0HNHE5748DQ00" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 06:18:51.714 +02:00 [DBG] Connection id "0HNHE5748DQ00" stopped.
2025-11-28 06:19:52.943 +02:00 [DBG] Connection id "0HNHE5748DQ01" accepted.
2025-11-28 06:19:52.944 +02:00 [DBG] Connection id "0HNHE5748DQ01" started.
2025-11-28 06:19:52.950 +02:00 [DBG] Connection 0HNHE5748DQ01 established using the following protocol: "Tls13"
2025-11-28 06:19:52.952 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Event/GetAllEventsInSystem - null null
2025-11-28 06:19:52.955 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/GetAllEventsInSystem'
2025-11-28 06:19:52.956 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)' with route pattern 'api/Event/GetAllEventsInSystem' is valid for the request path '/api/Event/GetAllEventsInSystem'
2025-11-28 06:19:52.958 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-28 06:19:52.959 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 06:19:52.959 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 06:19:52.960 +02:00 [INF] CORS policy execution successful.
2025-11-28 06:19:52.961 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 06:19:52.963 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-28 06:19:52.967 +02:00 [INF] Route matched with {action = "GetAllEventsInSystem", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllEventsInSystem() on controller Hospital.Controllers.EventController (Hospital).
2025-11-28 06:19:52.969 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 06:19:52.971 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 06:19:52.972 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 06:19:52.974 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 06:19:52.976 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 06:19:52.977 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-28 06:19:52.980 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-28 06:19:52.983 +02:00 [INF] get all  event in system  called at "2025-11-28T06:19:52.9831126+02:00"
2025-11-28 06:19:52.985 +02:00 [INF] Fetching all events in the system
2025-11-28 06:19:52.987 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 06:19:52.990 +02:00 [DBG] Compiling query expression: 
'DbSet<Event>()
    .AsNoTracking()'
2025-11-28 06:19:52.995 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Event>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Event.EventId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Event.BranchId (int?) FK Index, 1], [Property: Event.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Event.Description (string), 3], [Property: Event.EventDate (DateTime) Required, 4], [Property: Event.ImageURL (string) MaxLength(300), 5], [Property: Event.Title (string) Required MaxLength(150), 6], [Property: Event.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 7] }
        SELECT e.EventId, e.BranchId, e.CreatedAt, e.Description, e.EventDate, e.ImageURL, e.Title, e.UpdatedAt
        FROM Events AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Event>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 06:19:52.998 +02:00 [DBG] Creating DbConnection.
2025-11-28 06:19:52.999 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-28 06:19:53.000 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:19:53.002 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:19:53.003 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 06:19:53.004 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 06:19:53.006 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 06:19:53.007 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-28 06:19:53.023 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-28 06:19:53.026 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:19:53.027 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 06:19:53.028 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:19:53.029 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 06:19:53.031 +02:00 [INF] No events found in the system
2025-11-28 06:19:53.033 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 06:19:53.034 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 06:19:53.035 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 06:19:53.036 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 06:19:53.036 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-28 06:19:53.037 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-11-28 06:19:53.039 +02:00 [INF] Executed action Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital) in 61.4516ms
2025-11-28 06:19:53.040 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-28 06:19:53.041 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 06:19:53.042 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:19:53.043 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 06:19:53.044 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Event/GetAllEventsInSystem - 404 null text/plain; charset=utf-8 91.5976ms
2025-11-28 06:19:54.784 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Event/GetAllEventsInSystem - null null
2025-11-28 06:19:54.787 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/GetAllEventsInSystem'
2025-11-28 06:19:54.788 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)' with route pattern 'api/Event/GetAllEventsInSystem' is valid for the request path '/api/Event/GetAllEventsInSystem'
2025-11-28 06:19:54.790 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-28 06:19:54.790 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 06:19:54.791 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 06:19:54.792 +02:00 [INF] CORS policy execution successful.
2025-11-28 06:19:54.792 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 06:19:54.793 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-28 06:19:54.794 +02:00 [INF] Route matched with {action = "GetAllEventsInSystem", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllEventsInSystem() on controller Hospital.Controllers.EventController (Hospital).
2025-11-28 06:19:54.795 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 06:19:54.797 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 06:19:54.797 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 06:19:54.799 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 06:19:54.800 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 06:19:54.800 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-28 06:19:54.802 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-28 06:19:54.803 +02:00 [INF] get all  event in system  called at "2025-11-28T06:19:54.8037658+02:00"
2025-11-28 06:19:54.804 +02:00 [INF] Fetching all events in the system
2025-11-28 06:19:54.805 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 06:19:54.807 +02:00 [DBG] Creating DbConnection.
2025-11-28 06:19:54.807 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 06:19:54.808 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:19:54.809 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:19:54.810 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 06:19:54.811 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 06:19:54.812 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 06:19:54.812 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-28 06:19:54.816 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-28 06:19:54.818 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:19:54.818 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 06:19:54.819 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:19:54.820 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 06:19:54.821 +02:00 [INF] No events found in the system
2025-11-28 06:19:54.822 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 06:19:54.823 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 06:19:54.823 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 06:19:54.824 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 06:19:54.824 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-28 06:19:54.825 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-11-28 06:19:54.826 +02:00 [INF] Executed action Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital) in 25.5245ms
2025-11-28 06:19:54.827 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-28 06:19:54.828 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 06:19:54.828 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:19:54.829 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 06:19:54.830 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Event/GetAllEventsInSystem - 404 null text/plain; charset=utf-8 45.9432ms
2025-11-28 06:19:58.932 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-28 06:19:58.936 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-28 06:19:58.938 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-28 06:19:58.940 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-28 06:19:58.941 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 06:19:58.942 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 06:19:58.943 +02:00 [INF] CORS policy execution successful.
2025-11-28 06:19:58.944 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 06:19:58.945 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-28 06:19:58.946 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-28 06:19:58.948 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 06:19:58.950 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 06:19:58.951 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 06:19:58.953 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 06:19:58.955 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 06:19:58.956 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-28 06:19:58.957 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-28 06:19:58.959 +02:00 [INF] Get All Branch called at "2025-11-28T06:19:58.9591156+02:00"
2025-11-28 06:19:58.960 +02:00 [INF] Fetching all branches
2025-11-28 06:19:58.961 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 06:19:58.963 +02:00 [DBG] Creating DbConnection.
2025-11-28 06:19:58.964 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 06:19:58.965 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:19:58.966 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:19:58.968 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 06:19:58.969 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 06:19:58.970 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 06:19:58.971 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-28 06:19:58.978 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-28 06:19:58.981 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:19:58.982 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 06:19:58.984 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:19:58.985 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 06:19:58.987 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 06:19:58.989 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 06:19:58.990 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 06:19:58.990 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 06:19:58.991 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 06:19:58.992 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 06:19:58.994 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 37.8299ms
2025-11-28 06:19:58.995 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-28 06:19:58.996 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 06:19:58.997 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:19:58.998 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 06:19:59.000 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 67.8271ms
2025-11-28 06:20:01.695 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - null null
2025-11-28 06:20:01.697 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/GetAll'
2025-11-28 06:20:01.699 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)' with route pattern 'api/Specializations/GetAll' is valid for the request path '/api/Specializations/GetAll'
2025-11-28 06:20:01.700 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-28 06:20:01.701 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 06:20:01.702 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 06:20:01.702 +02:00 [INF] CORS policy execution successful.
2025-11-28 06:20:01.703 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 06:20:01.704 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-28 06:20:01.708 +02:00 [INF] Route matched with {action = "GetAll", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Specialization.SpecializationDTO]]] GetAll() on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-28 06:20:01.710 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 06:20:01.711 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 06:20:01.712 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 06:20:01.714 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 06:20:01.715 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 06:20:01.716 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-28 06:20:01.718 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-28 06:20:01.722 +02:00 [INF] get all Specialization called at "2025-11-28T06:20:01.7220080+02:00"
2025-11-28 06:20:01.723 +02:00 [INF] Fetching all specializations in the system
2025-11-28 06:20:01.726 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 06:20:01.730 +02:00 [DBG] Compiling query expression: 
'DbSet<Specialization>()
    .Include(s => s.Branches)
    .Include(s => s.Doctors)
    .ThenInclude(d => d.User)'
2025-11-28 06:20:01.732 +02:00 [DBG] Including navigation: 'Specialization.Branches'.
2025-11-28 06:20:01.734 +02:00 [DBG] Including navigation: 'Specialization.Doctors'.
2025-11-28 06:20:01.736 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 06:20:01.753 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-28 06:20:01.757 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Specialization>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Specialization.Description (string), 2], [Property: Specialization.ImageURL (string) MaxLength(300), 3], [Property: Specialization.Name (string) Required MaxLength(120), 4], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 5] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: BranchSpecialization (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 6], [Property: BranchSpecialization (Dictionary<string, object>).SpecializationId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 7] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Branch.Address (string) MaxLength(250), 9], [Property: Branch.BranchName (string) Required MaxLength(150), 10], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 11], [Property: Branch.Description (string), 12], [Property: Branch.Email (string) MaxLength(200), 13], [Property: Branch.ImageURL (string) MaxLength(300), 14], [Property: Branch.Latitude (double?), 15], [Property: Branch.Longitude (double?), 16], [Property: Branch.Phone (string) MaxLength(25), 17], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 18] }
            4 -> 6
            5 -> 7
            6 -> 8
            7 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Doctor.Available (bool?), 20], [Property: Doctor.Biography (string), 21], [Property: Doctor.ConsultationFees (decimal) Required, 22], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 23], [Property: Doctor.ExperienceYears (int?), 24], [Property: Doctor.ImageURL (string) MaxLength(300), 25], [Property: Doctor.SpecializationId (int) Required FK Index, 26], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 27], [Property: Doctor.UserId (string) Required FK Index, 28] }
            8 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 29], [Property: User.AccessFailedCount (int) Required, 30], [Property: User.ConcurrencyStamp (string) Concurrency, 31], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: User.DateOfBirth (DateOnly?), 33], [Property: User.Email (string) Index MaxLength(256), 34], [Property: User.EmailConfirmed (bool) Required, 35], [Property: User.FullName (string) Required MaxLength(150), 36], [Property: User.Gender (GenderType?) MaxLength(10), 37], [Property: User.LockoutEnabled (bool) Required, 38], [Property: User.LockoutEnd (DateTimeOffset?), 39], [Property: User.NormalizedEmail (string) Index MaxLength(256), 40], [Property: User.NormalizedUserName (string) Index MaxLength(256), 41], [Property: User.PasswordHash (string), 42], [Property: User.PhoneNumber (string), 43], [Property: User.PhoneNumberConfirmed (bool) Required, 44], [Property: User.RefreshToken (string), 45], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 46], [Property: User.Role (string) Required MaxLength(50), 47], [Property: User.SecurityStamp (string), 48], [Property: User.TwoFactorEnabled (bool) Required, 49], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.UserName (string) MaxLength(256), 51] }
            9 -> 19
            10 -> 29
        SELECT s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, t.BranchId, t.SpecializationId, t.BranchId0, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Latitude, t.Longitude, t.Phone, t.UpdatedAt, t0.DoctorId, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt0, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt0, t0.UserName
        FROM Specializations AS s
        LEFT JOIN 
        (
            SELECT b.BranchId, b.SpecializationId, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt, b0.Description, b0.Email, b0.ImageURL, b0.Latitude, b0.Longitude, b0.Phone, b0.UpdatedAt
            FROM BranchSpecializations AS b
            INNER JOIN Branches AS b0 ON b.BranchId == b0.BranchId
        ) AS t ON s.SpecializationId == t.SpecializationId
        LEFT JOIN 
        (
            SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
            FROM Doctors AS d
            INNER JOIN Users AS u ON d.UserId == u.Id
        ) AS t0 ON s.SpecializationId == t0.SpecializationId
        ORDER BY s.SpecializationId ASC, t.BranchId ASC, t.SpecializationId ASC, t.BranchId0 ASC, t0.DoctorId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Specialization>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 06:20:01.759 +02:00 [DBG] Creating DbConnection.
2025-11-28 06:20:01.760 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 06:20:01.761 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:01.762 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:01.762 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 06:20:01.763 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 06:20:01.764 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 06:20:01.765 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-28 06:20:01.791 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-28 06:20:01.796 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.805 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.807 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.821 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.850 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.853 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.881 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.883 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.884 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.885 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.886 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.887 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.890 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.891 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.892 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.892 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.893 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.894 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.895 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.896 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.896 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.897 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.898 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.899 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.900 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.901 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.902 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.902 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.903 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.904 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.905 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:01.906 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:01.907 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 114ms reading results.
2025-11-28 06:20:01.908 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:01.909 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 06:20:01.915 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 06:20:01.916 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 06:20:01.917 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 06:20:01.917 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 06:20:01.918 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 06:20:01.919 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Specialization.SpecializationDTO, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 06:20:01.922 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.GetAll (Hospital) in 206.3627ms
2025-11-28 06:20:01.923 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-28 06:20:01.924 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 06:20:01.925 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:01.926 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 06:20:01.927 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - 200 null application/json; charset=utf-8 231.699ms
2025-11-28 06:20:28.118 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-28 06:20:28.120 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-28 06:20:28.121 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-28 06:20:28.122 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-28 06:20:28.124 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 06:20:28.124 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 06:20:28.125 +02:00 [INF] CORS policy execution successful.
2025-11-28 06:20:28.126 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 06:20:28.127 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-28 06:20:28.128 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-28 06:20:28.129 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 06:20:28.130 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 06:20:28.131 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 06:20:28.132 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 06:20:28.133 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 06:20:28.134 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-28 06:20:28.137 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-28 06:20:28.138 +02:00 [INF] Get All Branch called at "2025-11-28T06:20:28.1387145+02:00"
2025-11-28 06:20:28.139 +02:00 [INF] Fetching all branches
2025-11-28 06:20:28.140 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 06:20:28.142 +02:00 [DBG] Creating DbConnection.
2025-11-28 06:20:28.142 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 06:20:28.143 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:28.144 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:28.146 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 06:20:28.146 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 06:20:28.147 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 06:20:28.148 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-28 06:20:28.151 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-28 06:20:28.153 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:28.154 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 06:20:28.155 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:28.156 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 06:20:28.157 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 06:20:28.159 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 06:20:28.159 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 06:20:28.160 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 06:20:28.161 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 06:20:28.161 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 06:20:28.162 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 27.916ms
2025-11-28 06:20:28.163 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-28 06:20:28.164 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 06:20:28.165 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:28.166 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 06:20:28.167 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 48.781ms
2025-11-28 06:20:29.139 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetBy/3 - null null
2025-11-28 06:20:29.142 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetBy/3'
2025-11-28 06:20:29.143 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetById (Hospital)' with route pattern 'api/Branch/GetBy/{id}' is valid for the request path '/api/Branch/GetBy/3'
2025-11-28 06:20:29.144 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetById (Hospital)'
2025-11-28 06:20:29.145 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 06:20:29.145 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 06:20:29.146 +02:00 [INF] CORS policy execution successful.
2025-11-28 06:20:29.147 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 06:20:29.147 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetById (Hospital)'
2025-11-28 06:20:29.154 +02:00 [INF] Route matched with {action = "GetById", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-28 06:20:29.155 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 06:20:29.156 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 06:20:29.157 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 06:20:29.159 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 06:20:29.159 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 06:20:29.160 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-28 06:20:29.161 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-28 06:20:29.168 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-28 06:20:29.170 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-28 06:20:29.172 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-28 06:20:29.173 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-28 06:20:29.174 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-28 06:20:29.176 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-28 06:20:29.178 +02:00 [INF] Get Branch By Id called at "2025-11-28T06:20:29.1787502+02:00"
2025-11-28 06:20:29.179 +02:00 [INF] Fetching branch by ID: 3
2025-11-28 06:20:29.181 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 06:20:29.185 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-11-28 06:20:29.192 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 06:20:29.197 +02:00 [DBG] Creating DbConnection.
2025-11-28 06:20:29.197 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 06:20:29.198 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:29.199 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:29.200 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 06:20:29.201 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 06:20:29.204 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-28 06:20:29.207 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 06:20:29.438 +02:00 [INF] Executed DbCommand (233ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 06:20:29.440 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:29.441 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:29.443 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-28 06:20:29.444 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:29.445 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 06:20:29.447 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 06:20:29.449 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 06:20:29.449 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 06:20:29.450 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 06:20:29.450 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 06:20:29.451 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Branch.BranchDto'.
2025-11-28 06:20:29.452 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetById (Hospital) in 291.7404ms
2025-11-28 06:20:29.453 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetById (Hospital)'
2025-11-28 06:20:29.454 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 06:20:29.454 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:29.455 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 06:20:29.456 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetBy/3 - 200 null application/json; charset=utf-8 316.7418ms
2025-11-28 06:20:45.587 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-28 06:20:45.590 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-28 06:20:45.591 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-28 06:20:45.592 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-28 06:20:45.593 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 06:20:45.593 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 06:20:45.594 +02:00 [INF] CORS policy execution successful.
2025-11-28 06:20:45.595 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 06:20:45.596 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-28 06:20:45.598 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-28 06:20:45.599 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 06:20:45.600 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 06:20:45.601 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 06:20:45.602 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 06:20:45.603 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 06:20:45.604 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-28 06:20:45.605 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-28 06:20:45.607 +02:00 [INF] Get All Branch called at "2025-11-28T06:20:45.6070158+02:00"
2025-11-28 06:20:45.607 +02:00 [INF] Fetching all branches
2025-11-28 06:20:45.609 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 06:20:45.610 +02:00 [DBG] Creating DbConnection.
2025-11-28 06:20:45.611 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 06:20:45.612 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:45.613 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:45.614 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 06:20:45.614 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 06:20:45.615 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 06:20:45.616 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-28 06:20:45.618 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-28 06:20:45.620 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:45.621 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 06:20:45.622 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:45.623 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 06:20:45.624 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 06:20:45.625 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 06:20:45.626 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 06:20:45.626 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 06:20:45.627 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 06:20:45.628 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 06:20:45.629 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 24.4695ms
2025-11-28 06:20:45.630 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-28 06:20:45.631 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 06:20:45.632 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:45.632 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 06:20:45.633 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 46.7235ms
2025-11-28 06:20:49.644 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 06:20:49.646 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 06:20:49.647 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 06:20:49.648 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 06:20:49.649 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 06:20:49.650 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 06:20:49.650 +02:00 [INF] CORS policy execution successful.
2025-11-28 06:20:49.651 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 06:20:49.651 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 06:20:49.655 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 06:20:49.656 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 06:20:49.657 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 06:20:49.658 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 06:20:49.659 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 06:20:49.660 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 06:20:49.662 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 06:20:49.663 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 06:20:49.665 +02:00 [INF] get all schedule called at "2025-11-28T06:20:49.6651398+02:00"
2025-11-28 06:20:49.666 +02:00 [INF] Fetching all schedules
2025-11-28 06:20:49.668 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 06:20:49.671 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(s => s.Branch)'
2025-11-28 06:20:49.673 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-28 06:20:49.675 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 06:20:49.677 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-28 06:20:49.678 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-11-28 06:20:49.688 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Specialization.Description (string), 44], [Property: Specialization.ImageURL (string) MaxLength(300), 45], [Property: Specialization.Name (string) Required MaxLength(120), 46], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 48], [Property: Branch.Address (string) MaxLength(250), 49], [Property: Branch.BranchName (string) Required MaxLength(150), 50], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Branch.Description (string), 52], [Property: Branch.Email (string) MaxLength(200), 53], [Property: Branch.ImageURL (string) MaxLength(300), 54], [Property: Branch.Latitude (double?), 55], [Property: Branch.Longitude (double?), 56], [Property: Branch.Phone (string) MaxLength(25), 57], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 58] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s0.SpecializationId, s0.CreatedAt, s0.Description, s0.ImageURL, s0.Name, s0.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s0 ON d.SpecializationId == s0.SpecializationId
        INNER JOIN Branches AS b ON s.BranchId == b.BranchId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 06:20:49.690 +02:00 [DBG] Creating DbConnection.
2025-11-28 06:20:49.690 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 06:20:49.691 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:49.692 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:49.692 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 06:20:49.693 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 06:20:49.694 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 06:20:49.695 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 06:20:49.705 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 06:20:49.708 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.716 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.717 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.718 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.719 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.720 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.721 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.722 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.723 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.724 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.725 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.726 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.726 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.727 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.728 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.729 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.730 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.731 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.732 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.733 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.733 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.734 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.735 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.736 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.736 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.737 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.739 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.739 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.740 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.741 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.742 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.743 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.745 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.745 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.746 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.747 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.748 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.749 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 06:20:49.750 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:49.751 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 44ms reading results.
2025-11-28 06:20:49.752 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:49.753 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 06:20:49.757 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 06:20:49.759 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 06:20:49.759 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 06:20:49.760 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 06:20:49.760 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 06:20:49.761 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 06:20:49.768 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 106.3024ms
2025-11-28 06:20:49.769 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 06:20:49.770 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 06:20:49.770 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:20:49.771 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 06:20:49.772 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 128.243ms
2025-11-28 06:21:51.738 +02:00 [DBG] Connection id "0HNHE5748DQ01" received FIN.
2025-11-28 06:21:51.739 +02:00 [DBG] Connection id "0HNHE5748DQ01" is closed. The last processed stream ID was 15.
2025-11-28 06:21:51.739 +02:00 [DBG] The connection queue processing loop for 0HNHE5748DQ01 completed.
2025-11-28 06:21:51.740 +02:00 [DBG] Connection id "0HNHE5748DQ01" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 06:21:51.742 +02:00 [DBG] Connection id "0HNHE5748DQ01" stopped.
2025-11-28 06:21:55.429 +02:00 [DBG] Connection id "0HNHE5748DQ02" accepted.
2025-11-28 06:21:55.430 +02:00 [DBG] Connection id "0HNHE5748DQ02" started.
2025-11-28 06:21:55.436 +02:00 [DBG] Connection 0HNHE5748DQ02 established using the following protocol: "Tls13"
2025-11-28 06:21:55.439 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Event/GetAllEventsInSystem - null null
2025-11-28 06:21:55.443 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/GetAllEventsInSystem'
2025-11-28 06:21:55.444 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)' with route pattern 'api/Event/GetAllEventsInSystem' is valid for the request path '/api/Event/GetAllEventsInSystem'
2025-11-28 06:21:55.446 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-28 06:21:55.447 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 06:21:55.448 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 06:21:55.449 +02:00 [INF] CORS policy execution successful.
2025-11-28 06:21:55.450 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 06:21:55.452 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-28 06:21:55.453 +02:00 [INF] Route matched with {action = "GetAllEventsInSystem", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllEventsInSystem() on controller Hospital.Controllers.EventController (Hospital).
2025-11-28 06:21:55.455 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 06:21:55.456 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 06:21:55.458 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 06:21:55.459 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 06:21:55.461 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 06:21:55.463 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-28 06:21:55.466 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-28 06:21:55.467 +02:00 [INF] get all  event in system  called at "2025-11-28T06:21:55.4676225+02:00"
2025-11-28 06:21:55.468 +02:00 [INF] Fetching all events in the system
2025-11-28 06:21:55.470 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 06:21:55.473 +02:00 [DBG] Creating DbConnection.
2025-11-28 06:21:55.473 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 06:21:55.475 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:21:55.476 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:21:55.477 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 06:21:55.478 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 06:21:55.479 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 06:21:55.480 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-28 06:21:55.485 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-28 06:21:55.487 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:21:55.489 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 06:21:55.490 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:21:55.491 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 06:21:55.493 +02:00 [INF] No events found in the system
2025-11-28 06:21:55.494 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 06:21:55.496 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 06:21:55.497 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 06:21:55.498 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 06:21:55.499 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-28 06:21:55.500 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-11-28 06:21:55.501 +02:00 [INF] Executed action Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital) in 38.6256ms
2025-11-28 06:21:55.503 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-28 06:21:55.503 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 06:21:55.504 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:21:55.506 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 06:21:55.507 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Event/GetAllEventsInSystem - 404 null text/plain; charset=utf-8 68.3339ms
2025-11-28 06:22:03.025 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-28 06:22:03.028 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-28 06:22:03.029 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-28 06:22:03.030 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-28 06:22:03.031 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 06:22:03.031 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 06:22:03.032 +02:00 [INF] CORS policy execution successful.
2025-11-28 06:22:03.032 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 06:22:03.033 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-28 06:22:03.034 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-28 06:22:03.036 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 06:22:03.037 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 06:22:03.038 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 06:22:03.039 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 06:22:03.040 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 06:22:03.042 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-28 06:22:03.043 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-28 06:22:03.045 +02:00 [INF] Get All Branch called at "2025-11-28T06:22:03.0449954+02:00"
2025-11-28 06:22:03.045 +02:00 [INF] Fetching all branches
2025-11-28 06:22:03.046 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 06:22:03.048 +02:00 [DBG] Creating DbConnection.
2025-11-28 06:22:03.049 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 06:22:03.050 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:22:03.051 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:22:03.052 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 06:22:03.053 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 06:22:03.054 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 06:22:03.055 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-28 06:22:03.058 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-28 06:22:03.060 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:22:03.061 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 06:22:03.062 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:22:03.063 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 06:22:03.064 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 06:22:03.065 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 06:22:03.066 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 06:22:03.066 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 06:22:03.067 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 06:22:03.067 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 06:22:03.068 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 26.5388ms
2025-11-28 06:22:03.069 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-28 06:22:03.070 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 06:22:03.071 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 06:22:03.072 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 06:22:03.073 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 47.8382ms
2025-11-28 21:59:51.921 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-28 21:59:52.041 +02:00 [DBG] Hosting starting
2025-11-28 21:59:52.067 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-28 21:59:52.077 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-28 21:59:52.133 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-28 21:59:52.146 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-28 21:59:52.163 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-28 21:59:52.182 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-28 21:59:52.188 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-28 21:59:52.189 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-28 21:59:52.190 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-28 21:59:52.194 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-28 21:59:52.197 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-28 21:59:52.199 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-28 21:59:52.201 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-28 21:59:52.205 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-28 21:59:52.206 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-28 21:59:52.208 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-28 21:59:52.209 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-28 21:59:52.217 +02:00 [DBG] Middleware loaded
2025-11-28 21:59:52.218 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-28 21:59:52.220 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-28 21:59:52.316 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-28 21:59:52.471 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-28 21:59:52.473 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-28 21:59:52.474 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-28 21:59:52.474 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-28 21:59:52.475 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-28 21:59:52.476 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-28 21:59:52.565 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-28 21:59:52.566 +02:00 [INF] Hosting environment: Development
2025-11-28 21:59:52.567 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-28 21:59:52.569 +02:00 [DBG] Hosting started
2025-11-28 21:59:52.946 +02:00 [DBG] Connection id "0HNHEN2P10DFL" accepted.
2025-11-28 21:59:52.946 +02:00 [DBG] Connection id "0HNHEN2P10DFM" accepted.
2025-11-28 21:59:52.951 +02:00 [DBG] Connection id "0HNHEN2P10DFL" started.
2025-11-28 21:59:52.952 +02:00 [DBG] Connection id "0HNHEN2P10DFM" started.
2025-11-28 21:59:52.952 +02:00 [DBG] Connection id "0HNHEN2P10DFL" received FIN.
2025-11-28 21:59:52.952 +02:00 [DBG] Connection id "0HNHEN2P10DFM" received FIN.
2025-11-28 21:59:52.974 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-28 21:59:52.974 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-28 21:59:53.011 +02:00 [DBG] Connection id "0HNHEN2P10DFM" stopped.
2025-11-28 21:59:53.011 +02:00 [DBG] Connection id "0HNHEN2P10DFL" stopped.
2025-11-28 21:59:53.014 +02:00 [DBG] Connection id "0HNHEN2P10DFL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 21:59:53.014 +02:00 [DBG] Connection id "0HNHEN2P10DFM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 21:59:53.278 +02:00 [DBG] Connection id "0HNHEN2P10DFN" accepted.
2025-11-28 21:59:53.279 +02:00 [DBG] Connection id "0HNHEN2P10DFN" started.
2025-11-28 21:59:53.320 +02:00 [DBG] Connection 0HNHEN2P10DFN established using the following protocol: "Tls13"
2025-11-28 21:59:53.383 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-28 21:59:53.496 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-28 21:59:53.521 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-28 21:59:53.523 +02:00 [DBG] Request did not match any endpoints
2025-11-28 21:59:53.559 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-28 21:59:53.561 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-28 21:59:53.575 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-28 21:59:53.577 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-28 21:59:53.581 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 204.0575ms
2025-11-28 21:59:53.586 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-28 21:59:53.594 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-28 21:59:53.596 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 10.1216ms
2025-11-28 21:59:53.608 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-28 21:59:53.670 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.1644ms
2025-11-28 21:59:53.704 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-28 21:59:53.708 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-28 21:59:53.710 +02:00 [DBG] Request did not match any endpoints
2025-11-28 21:59:53.751 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 46.6814ms
2025-11-28 21:59:54.692 +02:00 [DBG] Connection id "0HNHEN2P10DFN" received FIN.
2025-11-28 21:59:54.696 +02:00 [DBG] The connection queue processing loop for 0HNHEN2P10DFN completed.
2025-11-28 21:59:54.697 +02:00 [DBG] Connection id "0HNHEN2P10DFN" is closed. The last processed stream ID was 7.
2025-11-28 21:59:54.698 +02:00 [DBG] Connection id "0HNHEN2P10DFN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 21:59:54.700 +02:00 [DBG] Connection id "0HNHEN2P10DFN" stopped.
2025-11-28 22:04:04.994 +02:00 [DBG] Connection id "0HNHEN2P10DFO" accepted.
2025-11-28 22:04:04.999 +02:00 [DBG] Connection id "0HNHEN2P10DFO" started.
2025-11-28 22:04:05.004 +02:00 [DBG] Connection 0HNHEN2P10DFO established using the following protocol: "Tls13"
2025-11-28 22:04:05.010 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:04:05.020 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:04:05.024 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:04:05.026 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:04:05.029 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:04:05.030 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:04:05.031 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:04:05.446 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:04:05.449 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:04:05.470 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:04:05.472 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:04:05.473 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:04:05.474 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:04:05.475 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:04:05.476 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:04:05.479 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:04:05.891 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-28 22:04:06.044 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:04:06.048 +02:00 [INF] get all schedule called at "2025-11-28T22:04:06.0479630+02:00"
2025-11-28 22:04:06.050 +02:00 [INF] Fetching all schedules
2025-11-28 22:04:06.461 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-28 22:04:06.463 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-28 22:04:06.464 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-28 22:04:06.465 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-28 22:04:06.466 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-28 22:04:06.554 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-28 22:04:06.556 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-28 22:04:06.691 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:04:06.884 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(s => s.Branch)'
2025-11-28 22:04:06.940 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-28 22:04:06.942 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 22:04:06.944 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-28 22:04:06.945 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-11-28 22:04:07.064 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Specialization.Description (string), 44], [Property: Specialization.ImageURL (string) MaxLength(300), 45], [Property: Specialization.Name (string) Required MaxLength(120), 46], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 48], [Property: Branch.Address (string) MaxLength(250), 49], [Property: Branch.BranchName (string) Required MaxLength(150), 50], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Branch.Description (string), 52], [Property: Branch.Email (string) MaxLength(200), 53], [Property: Branch.ImageURL (string) MaxLength(300), 54], [Property: Branch.Latitude (double?), 55], [Property: Branch.Longitude (double?), 56], [Property: Branch.Phone (string) MaxLength(25), 57], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 58] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s0.SpecializationId, s0.CreatedAt, s0.Description, s0.ImageURL, s0.Name, s0.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s0 ON d.SpecializationId == s0.SpecializationId
        INNER JOIN Branches AS b ON s.BranchId == b.BranchId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 22:04:07.088 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:04:07.104 +02:00 [DBG] Created DbConnection. (14ms).
2025-11-28 22:04:07.106 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:04:07.682 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:04:07.686 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:04:07.690 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-11-28 22:04:07.692 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-11-28 22:04:07.697 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:04:07.762 +02:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:04:07.791 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.820 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.827 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.854 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.856 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.884 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.886 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.900 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.901 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.915 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.916 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.917 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.918 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.919 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.920 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.921 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.924 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.925 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.926 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.927 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.928 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.929 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.930 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.930 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.931 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.932 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.933 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.934 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.935 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.936 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.937 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.938 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.939 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.940 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.941 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.942 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.943 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.944 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:07.948 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:04:07.953 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 184ms reading results.
2025-11-28 22:04:07.956 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:04:07.960 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (4ms).
2025-11-28 22:04:07.976 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:04:07.978 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:04:07.979 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:04:07.980 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:04:07.981 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:04:07.982 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:04:08.002 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 2522.4727ms
2025-11-28 22:04:08.004 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:04:08.007 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:04:08.010 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:04:08.012 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 22:04:08.014 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 3003.7094ms
2025-11-28 22:04:14.731 +02:00 [DBG] Connection id "0HNHEN2P10DFO" received FIN.
2025-11-28 22:04:14.732 +02:00 [DBG] Connection id "0HNHEN2P10DFO" is closed. The last processed stream ID was 1.
2025-11-28 22:04:14.732 +02:00 [DBG] The connection queue processing loop for 0HNHEN2P10DFO completed.
2025-11-28 22:04:14.733 +02:00 [DBG] Connection id "0HNHEN2P10DFO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 22:04:14.736 +02:00 [DBG] Connection id "0HNHEN2P10DFO" stopped.
2025-11-28 22:04:20.489 +02:00 [DBG] Connection id "0HNHEN2P10DFP" accepted.
2025-11-28 22:04:20.490 +02:00 [DBG] Connection id "0HNHEN2P10DFP" started.
2025-11-28 22:04:20.493 +02:00 [DBG] Connection 0HNHEN2P10DFP established using the following protocol: "Tls13"
2025-11-28 22:04:20.495 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 22:04:20.499 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 22:04:20.499 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 22:04:20.500 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:04:20.501 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:04:20.502 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:04:20.503 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:04:20.504 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:04:20.504 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:04:20.513 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 22:04:20.515 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:04:20.516 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:04:20.517 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:04:20.519 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:04:20.520 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:04:20.521 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:04:20.534 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:04:20.547 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:04:20.549 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 22:04:20.550 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:04:20.551 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:04:20.552 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:04:20.554 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:04:20.557 +02:00 [INF] Get  doctor By Id called at "2025-11-28T22:04:20.5575826+02:00"
2025-11-28 22:04:20.559 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 22:04:20.592 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:04:20.597 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-28 22:04:20.601 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 22:04:20.602 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-28 22:04:20.604 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-28 22:04:20.606 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-28 22:04:20.646 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-28 22:04:20.655 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 22:04:20.664 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:04:20.664 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:04:20.665 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:04:20.667 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:04:20.668 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:04:20.668 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:04:20.671 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-28 22:04:20.674 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:04:20.746 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:04:20.748 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:20.749 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:20.750 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:20.751 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:20.751 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:20.761 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:20.763 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:20.764 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:20.765 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:20.766 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:20.767 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:20.768 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:04:20.770 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 22ms reading results.
2025-11-28 22:04:20.771 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:04:20.772 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:04:20.781 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:04:20.783 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:04:20.783 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:04:20.784 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:04:20.784 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:04:20.785 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 22:04:20.798 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 277.4748ms
2025-11-28 22:04:20.799 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:04:20.800 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:04:20.801 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:04:20.802 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:04:20.803 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 307.7545ms
2025-11-28 22:04:29.247 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:04:29.250 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:04:29.251 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:04:29.252 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:04:29.253 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:04:29.254 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:04:29.255 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:04:29.257 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:04:29.258 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:04:29.259 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:04:29.260 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:04:29.261 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:04:29.262 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:04:29.264 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:04:29.264 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:04:29.266 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:04:29.268 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:04:29.268 +02:00 [INF] get all schedule called at "2025-11-28T22:04:29.2689595+02:00"
2025-11-28 22:04:29.269 +02:00 [INF] Fetching all schedules
2025-11-28 22:04:29.276 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:04:29.281 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:04:29.282 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:04:29.282 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:04:29.283 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:04:29.284 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:04:29.285 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:04:29.286 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:04:29.286 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:04:29.295 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:04:29.296 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.297 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.298 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.299 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.300 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.301 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.302 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.303 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.304 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.305 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.306 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.307 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.308 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.308 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.309 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.310 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.311 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.312 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.313 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.314 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.315 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.316 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.316 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.317 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.318 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.319 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.320 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.321 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.322 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.323 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.323 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.324 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.325 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.326 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.327 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.328 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.329 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.330 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.331 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:04:29.332 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:04:29.332 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 36ms reading results.
2025-11-28 22:04:29.334 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:04:29.335 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:04:29.336 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:04:29.337 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:04:29.338 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:04:29.338 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:04:29.339 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:04:29.340 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:04:29.341 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 75.4003ms
2025-11-28 22:04:29.342 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:04:29.343 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:04:29.344 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:04:29.345 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:04:29.346 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 98.9841ms
2025-11-28 22:06:38.940 +02:00 [DBG] Connection id "0HNHEN2P10DFP" received FIN.
2025-11-28 22:06:38.945 +02:00 [DBG] Connection id "0HNHEN2P10DFP" is closed. The last processed stream ID was 3.
2025-11-28 22:06:38.946 +02:00 [DBG] The connection queue processing loop for 0HNHEN2P10DFP completed.
2025-11-28 22:06:38.950 +02:00 [DBG] Connection id "0HNHEN2P10DFP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 22:06:38.954 +02:00 [DBG] Connection id "0HNHEN2P10DFP" stopped.
2025-11-28 22:06:42.484 +02:00 [DBG] Connection id "0HNHEN2P10DFQ" accepted.
2025-11-28 22:06:42.485 +02:00 [DBG] Connection id "0HNHEN2P10DFQ" started.
2025-11-28 22:06:42.489 +02:00 [DBG] Connection 0HNHEN2P10DFQ established using the following protocol: "Tls13"
2025-11-28 22:06:42.491 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:06:42.493 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:06:42.494 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:06:42.495 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:06:42.496 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:06:42.497 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:06:42.498 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:06:42.499 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:06:42.500 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:06:42.500 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:06:42.502 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:06:42.503 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:06:42.504 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:06:42.505 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:06:42.507 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:06:42.508 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:06:42.511 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:06:42.512 +02:00 [INF] get all schedule called at "2025-11-28T22:06:42.5127531+02:00"
2025-11-28 22:06:42.513 +02:00 [INF] Fetching all schedules
2025-11-28 22:06:42.514 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:06:42.517 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:06:42.518 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:06:42.519 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:06:42.520 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:06:42.521 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:06:42.521 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:06:42.522 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:06:42.523 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:06:42.533 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:06:42.535 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.537 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.538 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.539 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.540 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.541 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.542 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.543 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.544 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.545 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.546 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.547 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.549 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.550 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.551 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.552 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.553 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.554 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.555 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.556 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.556 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.558 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.559 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.559 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.560 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.561 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.562 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.563 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.564 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.565 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.566 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.567 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.568 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.569 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.570 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.572 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.572 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.573 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.574 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:06:42.575 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:06:42.576 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 41ms reading results.
2025-11-28 22:06:42.577 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:06:42.579 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 22:06:42.580 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:06:42.582 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:06:42.582 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:06:42.583 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:06:42.584 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:06:42.585 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:06:42.586 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 78.3298ms
2025-11-28 22:06:42.587 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:06:42.588 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:06:42.589 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:06:42.590 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 22:06:42.591 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 100.408ms
2025-11-28 22:07:09.234 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:07:09.241 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:07:09.243 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:07:09.244 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:07:09.244 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:07:09.245 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:07:09.246 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:07:09.247 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:07:09.247 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:07:09.248 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:07:09.250 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:07:09.251 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:07:09.252 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:07:09.254 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:07:09.255 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:07:09.256 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:07:09.257 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:07:09.258 +02:00 [INF] get all schedule called at "2025-11-28T22:07:09.2584283+02:00"
2025-11-28 22:07:09.259 +02:00 [INF] Fetching all schedules
2025-11-28 22:07:09.260 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:07:09.261 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:07:09.262 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:07:09.263 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:09.264 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:09.265 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:07:09.265 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:07:09.266 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:07:09.267 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:07:09.275 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:07:09.277 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.278 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.278 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.279 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.280 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.281 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.282 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.282 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.283 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.284 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.285 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.286 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.287 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.287 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.288 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.289 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.290 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.295 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.296 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.296 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.297 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.298 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.299 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.300 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.301 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.302 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.302 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.303 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.304 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.305 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.306 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.307 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.307 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.308 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.309 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.310 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.310 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.311 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.312 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:09.313 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:09.314 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 37ms reading results.
2025-11-28 22:07:09.315 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:09.316 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:07:09.317 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:07:09.319 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:07:09.319 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:07:09.320 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:07:09.320 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:07:09.321 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:07:09.322 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 66.5165ms
2025-11-28 22:07:09.323 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:07:09.324 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:07:09.325 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:09.326 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 22:07:09.328 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 93.3961ms
2025-11-28 22:07:28.060 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:07:28.062 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:07:28.063 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:07:28.064 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:07:28.064 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:07:28.065 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:07:28.065 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:07:28.066 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:07:28.067 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:07:28.067 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:07:28.069 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:07:28.069 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:07:28.070 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:07:28.071 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:07:28.072 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:07:28.073 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:07:28.074 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:07:28.075 +02:00 [INF] get all schedule called at "2025-11-28T22:07:28.0757468+02:00"
2025-11-28 22:07:28.076 +02:00 [INF] Fetching all schedules
2025-11-28 22:07:28.077 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:07:28.078 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:07:28.079 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:07:28.080 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:28.081 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:28.082 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:07:28.082 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:07:28.083 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:07:28.084 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:07:28.087 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:07:28.089 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.090 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.092 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.093 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.094 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.095 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.095 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.096 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.097 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.098 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.099 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.100 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.101 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.102 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.103 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.104 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.105 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.106 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.107 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.108 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.108 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.109 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.110 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.111 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.112 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.113 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.113 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.114 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.115 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.116 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.117 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.118 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.119 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.120 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.121 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.122 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.123 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.124 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.125 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:28.126 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:28.127 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 38ms reading results.
2025-11-28 22:07:28.128 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:28.129 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:07:28.131 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:07:28.132 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:07:28.133 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:07:28.134 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:07:28.134 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:07:28.135 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:07:28.136 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 62.754ms
2025-11-28 22:07:28.138 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:07:28.138 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:07:28.139 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:28.140 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:07:28.142 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 81.9104ms
2025-11-28 22:07:31.972 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:07:31.974 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:07:31.974 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:07:31.975 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:07:31.976 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:07:31.977 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:07:31.977 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:07:31.978 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:07:31.979 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:07:31.979 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:07:31.980 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:07:31.981 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:07:31.982 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:07:31.984 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:07:31.985 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:07:31.986 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:07:31.987 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:07:31.988 +02:00 [INF] get all schedule called at "2025-11-28T22:07:31.9880631+02:00"
2025-11-28 22:07:31.988 +02:00 [INF] Fetching all schedules
2025-11-28 22:07:31.989 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:07:31.991 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:07:31.991 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:07:31.992 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:31.993 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:31.994 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:07:31.994 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:07:31.995 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:07:31.996 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:07:32.004 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:07:32.006 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.006 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.007 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.008 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.009 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.010 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.010 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.011 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.012 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.013 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.013 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.014 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.015 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.016 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.017 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.017 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.018 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.019 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.020 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.021 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.021 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.022 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.023 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.024 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.025 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.026 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.027 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.027 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.028 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.029 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.030 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.031 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.032 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.033 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.034 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.034 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.035 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.036 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.037 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:32.038 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:32.039 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 33ms reading results.
2025-11-28 22:07:32.039 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:32.040 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:07:32.041 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:07:32.043 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:07:32.043 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:07:32.044 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:07:32.044 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:07:32.045 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:07:32.046 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 60.1309ms
2025-11-28 22:07:32.047 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:07:32.047 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:07:32.048 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:32.049 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:07:32.050 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 78.286ms
2025-11-28 22:07:40.636 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 22:07:40.639 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 22:07:40.640 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 22:07:40.641 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:07:40.642 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:07:40.642 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:07:40.643 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:07:40.643 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:07:40.644 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:07:40.645 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 22:07:40.646 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:07:40.648 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:07:40.649 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:07:40.650 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:07:40.651 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:07:40.651 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:07:40.655 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:07:40.656 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:07:40.657 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 22:07:40.657 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:07:40.658 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:07:40.659 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:07:40.660 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:07:40.661 +02:00 [INF] Get  doctor By Id called at "2025-11-28T22:07:40.6614307+02:00"
2025-11-28 22:07:40.662 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 22:07:40.663 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:07:40.664 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:07:40.665 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:07:40.665 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:40.666 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:40.667 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:07:40.668 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:07:40.669 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:07:40.669 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:07:40.679 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:07:40.681 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:40.682 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:40.683 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:40.683 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:40.684 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:40.685 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:40.686 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:40.687 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:40.688 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:40.689 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:40.690 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:40.690 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:40.691 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-28 22:07:40.692 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:40.693 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:07:40.694 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:07:40.695 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:07:40.696 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:07:40.696 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:07:40.697 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:07:40.697 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 22:07:40.698 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 46.8158ms
2025-11-28 22:07:40.699 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:07:40.700 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:07:40.701 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:40.702 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:07:40.703 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 67.8219ms
2025-11-28 22:07:54.099 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 22:07:54.102 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 22:07:54.103 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 22:07:54.104 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:07:54.105 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:07:54.106 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:07:54.107 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:07:54.108 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:07:54.108 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:07:54.109 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 22:07:54.111 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:07:54.112 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:07:54.113 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:07:54.114 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:07:54.115 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:07:54.116 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:07:54.127 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:07:54.129 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:07:54.130 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 22:07:54.131 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:07:54.132 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:07:54.133 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:07:54.134 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:07:54.134 +02:00 [INF] Get  doctor By Id called at "2025-11-28T22:07:54.1348727+02:00"
2025-11-28 22:07:54.135 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 22:07:54.136 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:07:54.138 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:07:54.139 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:07:54.139 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:54.140 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:54.141 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:07:54.142 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:07:54.143 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:07:54.144 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:07:54.155 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:07:54.157 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:54.158 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:54.159 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:54.160 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:54.160 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:54.161 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:54.162 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:54.163 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:54.164 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:54.165 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:54.166 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:07:54.167 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:54.167 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-28 22:07:54.168 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:54.169 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:07:54.171 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:07:54.172 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:07:54.173 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:07:54.174 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:07:54.174 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:07:54.175 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 22:07:54.176 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 60.2763ms
2025-11-28 22:07:54.177 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:07:54.179 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:07:54.180 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:07:54.180 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:07:54.181 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 82.967ms
2025-11-28 22:07:54.768 +02:00 [DBG] Connection id "0HNHEN2P10DFQ" received FIN.
2025-11-28 22:07:54.770 +02:00 [DBG] Connection id "0HNHEN2P10DFQ" is closed. The last processed stream ID was 11.
2025-11-28 22:07:54.770 +02:00 [DBG] The connection queue processing loop for 0HNHEN2P10DFQ completed.
2025-11-28 22:07:54.771 +02:00 [DBG] Connection id "0HNHEN2P10DFQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 22:07:54.776 +02:00 [DBG] Connection id "0HNHEN2P10DFQ" stopped.
2025-11-28 22:08:30.879 +02:00 [DBG] Connection id "0HNHEN2P10DFR" accepted.
2025-11-28 22:08:30.885 +02:00 [DBG] Connection id "0HNHEN2P10DFR" started.
2025-11-28 22:08:30.888 +02:00 [DBG] Connection 0HNHEN2P10DFR established using the following protocol: "Tls13"
2025-11-28 22:08:30.894 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:08:30.900 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:08:30.900 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:08:30.901 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:08:30.902 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:08:30.903 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:08:30.903 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:08:30.904 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:08:30.904 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:08:30.905 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:08:30.906 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:08:30.907 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:08:30.908 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:08:30.909 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:08:30.910 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:08:30.911 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:08:30.912 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:08:30.913 +02:00 [INF] get all schedule called at "2025-11-28T22:08:30.9131859+02:00"
2025-11-28 22:08:30.913 +02:00 [INF] Fetching all schedules
2025-11-28 22:08:30.914 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:08:30.915 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:08:30.916 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:08:30.917 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:08:30.918 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:08:30.918 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:08:30.919 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:08:30.920 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:08:30.921 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:08:30.929 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:08:30.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.932 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.933 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.934 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.935 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.935 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.936 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.937 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.939 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.940 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.941 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.942 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.942 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.943 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.944 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.945 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.946 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.947 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.947 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.949 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.950 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.951 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.952 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.952 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.953 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.954 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.955 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.955 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.956 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.957 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.958 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.959 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.960 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.960 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.961 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.962 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.963 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:08:30.963 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:08:30.964 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 33ms reading results.
2025-11-28 22:08:30.966 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:08:30.967 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:08:30.968 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:08:30.969 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:08:30.970 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:08:30.970 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:08:30.971 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:08:30.972 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:08:30.973 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 61.9447ms
2025-11-28 22:08:30.974 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:08:30.974 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:08:30.975 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:08:30.976 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:08:30.977 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 83.3469ms
2025-11-28 22:14:00.455 +02:00 [DBG] Connection id "0HNHEN2P10DFS" accepted.
2025-11-28 22:14:00.458 +02:00 [DBG] Connection id "0HNHEN2P10DFS" received FIN.
2025-11-28 22:14:00.461 +02:00 [DBG] Connection id "0HNHEN2P10DFS" started.
2025-11-28 22:14:00.466 +02:00 [DBG] Connection id "0HNHEN2P10DFT" accepted.
2025-11-28 22:14:00.471 +02:00 [DBG] Connection id "0HNHEN2P10DFT" started.
2025-11-28 22:14:00.471 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-28 22:14:00.475 +02:00 [DBG] Connection id "0HNHEN2P10DFS" stopped.
2025-11-28 22:14:00.476 +02:00 [DBG] Connection id "0HNHEN2P10DFS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 22:14:00.481 +02:00 [DBG] Connection 0HNHEN2P10DFT established using the following protocol: "Tls13"
2025-11-28 22:14:00.486 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAll - null null
2025-11-28 22:14:00.488 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAll'
2025-11-28 22:14:00.489 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)' with route pattern 'api/Appointment/GetAll' is valid for the request path '/api/Appointment/GetAll'
2025-11-28 22:14:00.490 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-28 22:14:00.490 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:14:00.491 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:14:00.492 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-28 22:14:00.495 +02:00 [INF] Route matched with {action = "GetAll", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 22:14:00.496 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:14:00.497 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:14:00.498 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:14:00.499 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:14:00.500 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:14:00.501 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:14:00.502 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:14:00.503 +02:00 [INF] Get All Appointments called at "2025-11-28T22:14:00.5035436+02:00"
2025-11-28 22:14:00.504 +02:00 [INF] Fetching all appointments
2025-11-28 22:14:00.506 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:14:00.508 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)'
2025-11-28 22:14:00.510 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-28 22:14:00.511 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-28 22:14:00.512 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-28 22:14:00.522 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 9], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Patient.EmergencyContact (string) MaxLength(150), 14], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Patient.UserId (string) Required FK Index, 16] }
            2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: Doctor.Available (bool?), 18], [Property: Doctor.Biography (string), 19], [Property: Doctor.ConsultationFees (decimal) Required, 20], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: Doctor.ExperienceYears (int?), 22], [Property: Doctor.ImageURL (string) MaxLength(300), 23], [Property: Doctor.SpecializationId (int) Required FK Index, 24], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 25], [Property: Doctor.UserId (string) Required FK Index, 26] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: Branch.Address (string) MaxLength(250), 28], [Property: Branch.BranchName (string) Required MaxLength(150), 29], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: Branch.Description (string), 31], [Property: Branch.Email (string) MaxLength(200), 32], [Property: Branch.ImageURL (string) MaxLength(300), 33], [Property: Branch.Latitude (double?), 34], [Property: Branch.Longitude (double?), 35], [Property: Branch.Phone (string) MaxLength(25), 36], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 22:14:00.524 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:14:00.524 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:14:00.525 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:00.561 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:00.564 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:14:00.565 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:14:00.566 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:14:00.566 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
2025-11-28 22:14:00.589 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
2025-11-28 22:14:00.596 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:00.611 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:00.613 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:00.618 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:00.619 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:00.620 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:00.621 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:00.622 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:00.623 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 31ms reading results.
2025-11-28 22:14:00.623 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:00.624 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:14:00.629 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:14:00.631 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:14:00.631 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:14:00.632 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:14:00.632 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:14:00.633 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:14:00.644 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetAll (Hospital) in 143.1291ms
2025-11-28 22:14:00.645 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-28 22:14:00.646 +02:00 [DBG] Connection id "0HNHEN2P10DFT" completed keep alive response.
2025-11-28 22:14:00.647 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:14:00.647 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:00.648 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:14:00.649 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAll - 200 null application/json; charset=utf-8 163.561ms
2025-11-28 22:14:27.006 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/patient/1 - null null
2025-11-28 22:14:27.009 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/patient/1'
2025-11-28 22:14:27.010 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)' with route pattern 'api/Appointment/patient/{patientId:int}' is valid for the request path '/api/Appointment/patient/1'
2025-11-28 22:14:27.011 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-11-28 22:14:27.012 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:14:27.012 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:14:27.013 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-11-28 22:14:27.016 +02:00 [INF] Route matched with {action = "GetByPatientId", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByPatientId(Int32) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 22:14:27.017 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:14:27.018 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:14:27.019 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:14:27.021 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:14:27.021 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:14:27.022 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:14:27.023 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:14:27.024 +02:00 [DBG] Attempting to bind parameter 'patientId' of type 'System.Int32' ...
2025-11-28 22:14:27.025 +02:00 [DBG] Attempting to bind parameter 'patientId' of type 'System.Int32' using the name 'patientId' in request data ...
2025-11-28 22:14:27.026 +02:00 [DBG] Done attempting to bind parameter 'patientId' of type 'System.Int32'.
2025-11-28 22:14:27.027 +02:00 [DBG] Done attempting to bind parameter 'patientId' of type 'System.Int32'.
2025-11-28 22:14:27.028 +02:00 [DBG] Attempting to validate the bound parameter 'patientId' of type 'System.Int32' ...
2025-11-28 22:14:27.029 +02:00 [DBG] Done attempting to validate the bound parameter 'patientId' of type 'System.Int32'.
2025-11-28 22:14:27.030 +02:00 [INF] Get Appointment by GetByPatientId  called at "2025-11-28T22:14:27.0306086+02:00"
2025-11-28 22:14:27.031 +02:00 [INF] Fetching appointments for PatientId: 1
2025-11-28 22:14:27.033 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:14:27.036 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(p => p.User)
    .Include(p => p.MedicalRecords)
    .ThenInclude(m => m.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(p => p.PatientId == __id_0)'
2025-11-28 22:14:27.037 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-28 22:14:27.038 +02:00 [DBG] Including navigation: 'Patient.MedicalRecords'.
2025-11-28 22:14:27.039 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-11-28 22:14:27.040 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 22:14:27.055 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 5], [Property: User.AccessFailedCount (int) Required, 6], [Property: User.ConcurrencyStamp (string) Concurrency, 7], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: User.DateOfBirth (DateOnly?), 9], [Property: User.Email (string) Index MaxLength(256), 10], [Property: User.EmailConfirmed (bool) Required, 11], [Property: User.FullName (string) Required MaxLength(150), 12], [Property: User.Gender (GenderType?) MaxLength(10), 13], [Property: User.LockoutEnabled (bool) Required, 14], [Property: User.LockoutEnd (DateTimeOffset?), 15], [Property: User.NormalizedEmail (string) Index MaxLength(256), 16], [Property: User.NormalizedUserName (string) Index MaxLength(256), 17], [Property: User.PasswordHash (string), 18], [Property: User.PhoneNumber (string), 19], [Property: User.PhoneNumberConfirmed (bool) Required, 20], [Property: User.RefreshToken (string), 21], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 22], [Property: User.Role (string) Required MaxLength(50), 23], [Property: User.SecurityStamp (string), 24], [Property: User.TwoFactorEnabled (bool) Required, 25], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: User.UserName (string) MaxLength(256), 27] }
                2 -> 0
                3 -> 5
                4 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 28], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 29], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: MedicalRecord.Diagnosis (string), 31], [Property: MedicalRecord.DoctorId (int) Required FK Index, 32], [Property: MedicalRecord.Notes (string), 33], [Property: MedicalRecord.PatientId (int) Required FK Index, 34], [Property: MedicalRecord.TreatmentPlan (string), 35], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
                5 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Doctor.Available (bool?), 38], [Property: Doctor.Biography (string), 39], [Property: Doctor.ConsultationFees (decimal) Required, 40], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 41], [Property: Doctor.ExperienceYears (int?), 42], [Property: Doctor.ImageURL (string) MaxLength(300), 43], [Property: Doctor.SpecializationId (int) Required FK Index, 44], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Doctor.UserId (string) Required FK Index, 46] }
                6 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
                7 -> 28
                8 -> 37
                9 -> 47
            SELECT t.PatientId, t.CreatedAt, t.EmergencyContact, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t0.RecordId, t0.AppointmentId, t0.CreatedAt, t0.Diagnosis, t0.DoctorId, t0.Notes, t0.PatientId, t0.TreatmentPlan, t0.UpdatedAt, t0.DoctorId0, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt0, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt0, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt1, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt1, t0.UserName
            FROM 
            (
                SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
                FROM Patients AS p
                INNER JOIN Users AS u ON p.UserId == u.Id
                WHERE p.PatientId == @__id_0
            ) AS t
            LEFT JOIN 
            (
                SELECT m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId AS DoctorId0, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt AS CreatedAt0, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt AS UpdatedAt0, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt AS CreatedAt1, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt AS UpdatedAt1, u0.UserName
                FROM MedicalRecords AS m
                INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
                INNER JOIN Users AS u0 ON d.UserId == u0.Id
            ) AS t0 ON t.PatientId == t0.PatientId
            ORDER BY t.PatientId ASC, t.Id ASC, t0.RecordId ASC, t0.DoctorId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 22:14:27.057 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:14:27.058 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:14:27.059 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:27.059 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:27.060 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:14:27.061 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:14:27.062 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:14:27.062 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 22:14:27.076 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 22:14:27.078 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:27.079 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:27.080 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:27.082 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:27.083 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-28 22:14:27.084 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:27.085 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:14:27.087 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Where(a => a.PatientId == __patientId_0)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)'
2025-11-28 22:14:27.089 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-28 22:14:27.090 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-28 22:14:27.096 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 9], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Doctor.Available (bool?), 13], [Property: Doctor.Biography (string), 14], [Property: Doctor.ConsultationFees (decimal) Required, 15], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 16], [Property: Doctor.ExperienceYears (int?), 17], [Property: Doctor.ImageURL (string) MaxLength(300), 18], [Property: Doctor.SpecializationId (int) Required FK Index, 19], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.UserId (string) Required FK Index, 21] }
            2 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: Branch.Address (string) MaxLength(250), 23], [Property: Branch.BranchName (string) Required MaxLength(150), 24], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 25], [Property: Branch.Description (string), 26], [Property: Branch.Email (string) MaxLength(200), 27], [Property: Branch.ImageURL (string) MaxLength(300), 28], [Property: Branch.Latitude (double?), 29], [Property: Branch.Longitude (double?), 30], [Property: Branch.Phone (string) MaxLength(25), 31], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 32] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE a.PatientId == @__patientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 22:14:27.098 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:27.099 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:27.100 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:14:27.100 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:14:27.101 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:14:27.102 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[PatientId] = @__patientId_0
2025-11-28 22:14:27.108 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__patientId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[PatientId] = @__patientId_0
2025-11-28 22:14:27.110 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:27.111 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:27.112 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:27.113 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:27.114 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:27.115 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:27.116 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-11-28 22:14:27.118 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:27.119 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 22:14:27.120 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:14:27.122 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:14:27.122 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:14:27.123 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:14:27.123 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:14:27.124 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:14:27.126 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital) in 103.4ms
2025-11-28 22:14:27.127 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-11-28 22:14:27.128 +02:00 [DBG] Connection id "0HNHEN2P10DFT" completed keep alive response.
2025-11-28 22:14:27.128 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:14:27.129 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:27.130 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 22:14:27.131 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/patient/1 - 200 null application/json; charset=utf-8 125.2488ms
2025-11-28 22:14:36.188 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 143
2025-11-28 22:14:36.190 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 22:14:36.191 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 22:14:36.192 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 22:14:36.193 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:14:36.193 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:14:36.194 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 22:14:36.197 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 22:14:36.198 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:14:36.199 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:14:36.200 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:14:36.201 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:14:36.202 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:14:36.203 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:14:36.204 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:14:36.205 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 22:14:36.206 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 22:14:36.209 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 22:14:36.215 +02:00 [DBG] Connection id "0HNHEN2P10DFT", Request id "0HNHEN2P10DFT:00000003": started reading request body.
2025-11-28 22:14:36.216 +02:00 [DBG] Connection id "0HNHEN2P10DFT", Request id "0HNHEN2P10DFT:00000003": done reading request body.
2025-11-28 22:14:36.230 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 22:14:36.231 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 22:14:36.232 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 22:14:36.233 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 22:14:36.240 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 22:14:36.242 +02:00 [INF] Add Appointment called at "2025-11-28T22:14:36.2420566+02:00"
2025-11-28 22:14:36.244 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-11-29", Shift: "Morning"
2025-11-28 22:14:36.250 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:14:36.255 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:14:36.256 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:14:36.257 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:36.257 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:36.259 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 22:14:36.265 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 22:14:36.267 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:14:36.267 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:14:36.269 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:14:36.269 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 22:14:36.281 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 22:14:36.283 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.284 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.284 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.285 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:36.286 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 22:14:36.287 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:14:36.288 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:14:36.289 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:14:36.290 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:14:36.300 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:14:36.302 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.302 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.303 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.304 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.305 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.306 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.307 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.307 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.308 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.309 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.310 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.311 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:36.312 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-28 22:14:36.314 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-11-28 22:14:36.318 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 22:14:36.319 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:14:36.320 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:14:36.321 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:14:36.322 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 22:14:36.325 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 22:14:36.327 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:36.328 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 22:14:36.334 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Any(a => a.PatientId == __patientId_0 && a.DoctorId == __doctorId_1 && a.Date == __date_2 && (int)a.Shift == (int)__shift_3)'
2025-11-28 22:14:36.339 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Appointments AS a
                WHERE (((a.PatientId == @__patientId_0) && (a.DoctorId == @__doctorId_1)) && (a.Date == @__date_2)) && (a.Shift == @__shift_3))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 22:14:36.346 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:14:36.347 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:14:36.351 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-28 22:14:36.352 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 22:14:36.370 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 22:14:36.372 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:36.374 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-28 22:14:36.388 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.394 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.395 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.396 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.399 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.402 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 22:14:36.448 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 22:14:36.456 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 22:14:36.457 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 22:14:36.458 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 22:14:36.508 +02:00 [DBG] Creating transaction savepoint.
2025-11-28 22:14:36.521 +02:00 [DBG] Created transaction savepoint.
2025-11-28 22:14:36.524 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:14:36.525 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:14:36.527 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-28 22:14:36.528 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 22:14:36.546 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 22:14:36.554 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-28 22:14:36.558 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:36.559 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-28 22:14:36.567 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:36.570 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 22:14:36.572 +02:00 [DBG] Committing transaction.
2025-11-28 22:14:36.576 +02:00 [DBG] Committed transaction.
2025-11-28 22:14:36.578 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:36.579 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:14:36.580 +02:00 [INF] Appointment created successfully with ID: 2
2025-11-28 22:14:36.583 +02:00 [DBG] Disposing transaction.
2025-11-28 22:14:36.585 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:14:36.586 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:14:36.586 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:14:36.587 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:14:36.587 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:14:36.588 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-28 22:14:36.602 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[2],action=[GetById],controller=[Appointment])
2025-11-28 22:14:36.606 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/2 and 
2025-11-28 22:14:36.608 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/2
2025-11-28 22:14:36.610 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 406.8191ms
2025-11-28 22:14:36.611 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 22:14:36.611 +02:00 [DBG] Connection id "0HNHEN2P10DFT" completed keep alive response.
2025-11-28 22:14:36.612 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:14:36.613 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:36.613 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:14:36.614 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 425.8995ms
2025-11-28 22:14:40.152 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/patient/1 - null null
2025-11-28 22:14:40.157 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/patient/1'
2025-11-28 22:14:40.158 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)' with route pattern 'api/Appointment/patient/{patientId:int}' is valid for the request path '/api/Appointment/patient/1'
2025-11-28 22:14:40.158 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-11-28 22:14:40.159 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:14:40.160 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:14:40.160 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-11-28 22:14:40.161 +02:00 [INF] Route matched with {action = "GetByPatientId", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByPatientId(Int32) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 22:14:40.162 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:14:40.163 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:14:40.164 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:14:40.165 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:14:40.166 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:14:40.167 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:14:40.168 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:14:40.169 +02:00 [DBG] Attempting to bind parameter 'patientId' of type 'System.Int32' ...
2025-11-28 22:14:40.170 +02:00 [DBG] Attempting to bind parameter 'patientId' of type 'System.Int32' using the name 'patientId' in request data ...
2025-11-28 22:14:40.171 +02:00 [DBG] Done attempting to bind parameter 'patientId' of type 'System.Int32'.
2025-11-28 22:14:40.172 +02:00 [DBG] Done attempting to bind parameter 'patientId' of type 'System.Int32'.
2025-11-28 22:14:40.172 +02:00 [DBG] Attempting to validate the bound parameter 'patientId' of type 'System.Int32' ...
2025-11-28 22:14:40.173 +02:00 [DBG] Done attempting to validate the bound parameter 'patientId' of type 'System.Int32'.
2025-11-28 22:14:40.174 +02:00 [INF] Get Appointment by GetByPatientId  called at "2025-11-28T22:14:40.1745129+02:00"
2025-11-28 22:14:40.175 +02:00 [INF] Fetching appointments for PatientId: 1
2025-11-28 22:14:40.176 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:14:40.177 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:14:40.178 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:14:40.178 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:40.179 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:40.180 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:14:40.181 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:14:40.182 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:14:40.183 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 22:14:40.186 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 22:14:40.187 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:40.188 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:40.189 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:40.190 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:40.191 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 22:14:40.192 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:40.192 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:14:40.194 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:40.195 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:40.196 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:14:40.196 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:14:40.197 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:14:40.198 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[PatientId] = @__patientId_0
2025-11-28 22:14:40.203 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__patientId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[PatientId] = @__patientId_0
2025-11-28 22:14:40.205 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:40.205 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:40.206 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:40.207 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:40.208 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:40.209 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:40.210 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:40.210 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:14:40.211 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:40.212 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-28 22:14:40.213 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:40.214 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:14:40.215 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:14:40.216 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:14:40.217 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:14:40.217 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:14:40.218 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:14:40.219 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:14:40.220 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital) in 52.8762ms
2025-11-28 22:14:40.220 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-11-28 22:14:40.221 +02:00 [DBG] Connection id "0HNHEN2P10DFT" completed keep alive response.
2025-11-28 22:14:40.222 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:14:40.222 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:14:40.223 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 22:14:40.225 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/patient/1 - 200 null application/json; charset=utf-8 72.2808ms
2025-11-28 22:24:25.138 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:24:25.145 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:24:25.146 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:24:25.147 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:24:25.148 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:24:25.149 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:24:25.149 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:24:25.150 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:24:25.151 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:24:25.152 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:24:25.153 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:24:25.154 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:24:25.155 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:24:25.156 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:24:25.158 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:24:25.159 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:24:25.160 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:24:25.161 +02:00 [INF] get all schedule called at "2025-11-28T22:24:25.1613957+02:00"
2025-11-28 22:24:25.162 +02:00 [INF] Fetching all schedules
2025-11-28 22:24:25.163 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:24:25.164 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:24:25.165 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:24:25.166 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:24:25.204 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:24:25.206 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:24:25.207 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:24:25.208 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:24:25.208 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:24:25.222 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:24:25.223 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.224 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.225 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.225 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.226 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.227 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.228 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.229 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.230 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.231 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.231 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.232 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.233 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.234 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.234 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.235 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.237 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.237 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.238 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.239 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.240 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.241 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.241 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.242 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.243 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.244 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.244 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.245 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.246 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.247 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.247 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.248 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.249 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.250 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.251 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.251 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.252 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.253 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.254 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:24:25.255 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:24:25.256 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 32ms reading results.
2025-11-28 22:24:25.257 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:24:25.258 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:24:25.259 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:24:25.260 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:24:25.261 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:24:25.261 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:24:25.262 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:24:25.262 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:24:25.263 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 104.6333ms
2025-11-28 22:24:25.267 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:24:25.269 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:24:25.270 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:24:25.271 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:24:25.272 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 133.69ms
2025-11-28 22:25:11.521 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:25:11.527 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:25:11.528 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:25:11.529 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:25:11.530 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:25:11.530 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:25:11.531 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:25:11.532 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:25:11.532 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:25:11.533 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:25:11.534 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:25:11.535 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:25:11.537 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:25:11.538 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:25:11.539 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:25:11.540 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:25:11.541 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:25:11.542 +02:00 [INF] get all schedule called at "2025-11-28T22:25:11.5422023+02:00"
2025-11-28 22:25:11.542 +02:00 [INF] Fetching all schedules
2025-11-28 22:25:11.543 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:25:11.545 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:25:11.546 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:25:11.547 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:25:11.548 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:25:11.549 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:25:11.549 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:25:11.550 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:25:11.551 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:25:11.559 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:25:11.561 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.562 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.563 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.564 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.565 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.566 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.567 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.567 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.568 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.569 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.571 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.572 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.573 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.574 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.575 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.576 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.577 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.582 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.583 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.583 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.584 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.585 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.586 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.587 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.587 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.588 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.589 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.590 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.591 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.592 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.592 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.593 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.594 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.595 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.595 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.596 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.597 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.598 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.599 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:25:11.600 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:25:11.601 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 40ms reading results.
2025-11-28 22:25:11.601 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:25:11.602 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:25:11.603 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:25:11.605 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:25:11.605 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:25:11.606 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:25:11.606 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:25:11.607 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:25:11.608 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 68.0245ms
2025-11-28 22:25:11.609 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:25:11.610 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:25:11.610 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:25:11.611 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:25:11.612 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 91.4217ms
2025-11-28 22:36:38.886 +02:00 [DBG] Connection id "0HNHEN2P10DFR" received FIN.
2025-11-28 22:36:38.891 +02:00 [DBG] Connection id "0HNHEN2P10DFR" is closed. The last processed stream ID was 5.
2025-11-28 22:36:38.892 +02:00 [DBG] The connection queue processing loop for 0HNHEN2P10DFR completed.
2025-11-28 22:36:38.895 +02:00 [DBG] Connection id "0HNHEN2P10DFR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 22:36:38.897 +02:00 [DBG] Connection id "0HNHEN2P10DFR" stopped.
2025-11-28 22:36:56.375 +02:00 [DBG] Connection id "0HNHEN2P10DFU" accepted.
2025-11-28 22:36:56.376 +02:00 [DBG] Connection id "0HNHEN2P10DFU" started.
2025-11-28 22:36:56.380 +02:00 [DBG] Connection 0HNHEN2P10DFU established using the following protocol: "Tls13"
2025-11-28 22:36:56.382 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:36:56.388 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:36:56.389 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:36:56.390 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:36:56.391 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:36:56.392 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:36:56.393 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:36:56.393 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:36:56.394 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:36:56.395 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:36:56.396 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:36:56.397 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:36:56.398 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:36:56.400 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:36:56.401 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:36:56.402 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:36:56.403 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:36:56.404 +02:00 [INF] get all schedule called at "2025-11-28T22:36:56.4042291+02:00"
2025-11-28 22:36:56.404 +02:00 [INF] Fetching all schedules
2025-11-28 22:36:56.405 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:36:56.407 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:36:56.407 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:36:56.408 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:36:56.445 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:36:56.447 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:36:56.448 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:36:56.449 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:36:56.450 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:36:56.462 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:36:56.464 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.465 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.466 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.467 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.468 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.469 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.470 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.471 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.471 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.472 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.473 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.474 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.475 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.476 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.477 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.478 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.479 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.480 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.481 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.482 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.483 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.484 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.485 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.485 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.486 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.487 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.488 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.488 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.489 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.490 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.491 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.492 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.493 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.494 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.494 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.495 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.496 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.497 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.497 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:36:56.498 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:36:56.499 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 34ms reading results.
2025-11-28 22:36:56.500 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:36:56.501 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:36:56.502 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:36:56.503 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:36:56.504 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:36:56.504 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:36:56.505 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:36:56.505 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:36:56.506 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 104.5683ms
2025-11-28 22:36:56.507 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:36:56.508 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:36:56.508 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:36:56.509 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:36:56.510 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 128.323ms
2025-11-28 22:40:16.868 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:40:16.875 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:40:16.876 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:40:16.877 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:40:16.878 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:40:16.879 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:40:16.880 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:40:16.880 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:40:16.881 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:40:16.882 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:40:16.884 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:40:16.885 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:40:16.886 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:40:16.887 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:40:16.889 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:40:16.890 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:40:16.891 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:40:16.893 +02:00 [INF] get all schedule called at "2025-11-28T22:40:16.8930747+02:00"
2025-11-28 22:40:16.893 +02:00 [INF] Fetching all schedules
2025-11-28 22:40:16.895 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:40:16.896 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:40:16.897 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:40:16.898 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:40:16.899 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:40:16.900 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:40:16.901 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:40:16.902 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:40:16.903 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:40:16.911 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:40:16.912 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.913 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.914 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.914 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.915 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.916 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.917 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.918 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.919 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.920 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.920 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.921 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.922 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.923 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.924 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.925 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.926 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.927 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.927 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.928 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.929 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.930 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.931 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.932 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.933 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.934 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.935 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.936 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.936 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.937 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.938 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.939 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.940 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.941 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.942 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.942 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.943 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.944 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:40:16.945 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:40:16.946 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 33ms reading results.
2025-11-28 22:40:16.946 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:40:16.947 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:40:16.948 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:40:16.950 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:40:16.950 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:40:16.951 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:40:16.951 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:40:16.952 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:40:16.953 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 63.1431ms
2025-11-28 22:40:16.957 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:40:16.959 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:40:16.959 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:40:16.960 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:40:16.961 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 93.3129ms
2025-11-28 22:41:16.113 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 22:41:16.119 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 22:41:16.119 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 22:41:16.120 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:41:16.121 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:41:16.122 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:41:16.123 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:41:16.123 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:41:16.124 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:41:16.125 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 22:41:16.126 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:41:16.127 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:41:16.128 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:41:16.129 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:41:16.130 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:41:16.131 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:41:16.132 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:41:16.133 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:41:16.134 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 22:41:16.135 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:41:16.136 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:41:16.137 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:41:16.138 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:41:16.139 +02:00 [INF] Get  doctor By Id called at "2025-11-28T22:41:16.1392975+02:00"
2025-11-28 22:41:16.139 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 22:41:16.140 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:41:16.142 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:41:16.142 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:41:16.143 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:41:16.144 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:41:16.145 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:41:16.145 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:41:16.146 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:41:16.147 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:41:16.158 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:41:16.160 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:41:16.161 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:41:16.161 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:41:16.162 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:41:16.163 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:41:16.164 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:41:16.165 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:41:16.166 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:41:16.167 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:41:16.167 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:41:16.168 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:41:16.169 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:41:16.170 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-28 22:41:16.171 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:41:16.172 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:41:16.173 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:41:16.174 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:41:16.174 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:41:16.175 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:41:16.175 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:41:16.176 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 22:41:16.177 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 45.5625ms
2025-11-28 22:41:16.181 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:41:16.182 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:41:16.183 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:41:16.184 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:41:16.185 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 72.5678ms
2025-11-28 22:42:15.499 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-28 22:42:15.639 +02:00 [DBG] Hosting starting
2025-11-28 22:42:15.681 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-28 22:42:15.705 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-28 22:42:15.719 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-28 22:42:15.722 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-28 22:42:15.724 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-28 22:42:15.731 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-28 22:42:15.745 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-28 22:42:15.747 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-28 22:42:15.749 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-28 22:42:15.759 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-28 22:42:15.766 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-28 22:42:15.771 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-28 22:42:15.775 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-28 22:42:15.785 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-28 22:42:15.789 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-28 22:42:15.792 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-28 22:42:15.794 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-28 22:42:15.801 +02:00 [DBG] Middleware loaded
2025-11-28 22:42:15.803 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-28 22:42:15.805 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-28 22:42:15.894 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-28 22:42:15.998 +02:00 [DBG] Connection id "0HNHENQETEHBH" received FIN.
2025-11-28 22:42:15.998 +02:00 [DBG] Connection id "0HNHENQETEHBI" received FIN.
2025-11-28 22:42:16.001 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-28 22:42:16.002 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-28 22:42:16.003 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-28 22:42:16.004 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-28 22:42:16.005 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-28 22:42:16.006 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-28 22:42:16.006 +02:00 [DBG] Connection id "0HNHENQETEHBI" accepted.
2025-11-28 22:42:16.006 +02:00 [DBG] Connection id "0HNHENQETEHBH" accepted.
2025-11-28 22:42:16.009 +02:00 [DBG] Connection id "0HNHENQETEHBI" started.
2025-11-28 22:42:16.009 +02:00 [DBG] Connection id "0HNHENQETEHBH" started.
2025-11-28 22:42:16.028 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-28 22:42:16.028 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-28 22:42:16.062 +02:00 [DBG] Connection id "0HNHENQETEHBH" stopped.
2025-11-28 22:42:16.063 +02:00 [DBG] Connection id "0HNHENQETEHBI" stopped.
2025-11-28 22:42:16.067 +02:00 [DBG] Connection id "0HNHENQETEHBH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 22:42:16.067 +02:00 [DBG] Connection id "0HNHENQETEHBI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 22:42:16.114 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-28 22:42:16.115 +02:00 [INF] Hosting environment: Development
2025-11-28 22:42:16.116 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-28 22:42:16.117 +02:00 [DBG] Hosting started
2025-11-28 22:42:16.207 +02:00 [DBG] Connection id "0HNHENQETEHBJ" accepted.
2025-11-28 22:42:16.208 +02:00 [DBG] Connection id "0HNHENQETEHBJ" started.
2025-11-28 22:42:16.244 +02:00 [DBG] Connection 0HNHENQETEHBJ established using the following protocol: "Tls13"
2025-11-28 22:42:16.294 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-28 22:42:16.360 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-28 22:42:16.381 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-28 22:42:16.383 +02:00 [DBG] Request did not match any endpoints
2025-11-28 22:42:16.419 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-28 22:42:16.422 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-28 22:42:16.434 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-28 22:42:16.435 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-28 22:42:16.438 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 149.8234ms
2025-11-28 22:42:16.445 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-28 22:42:16.452 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-28 22:42:16.454 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 8.887ms
2025-11-28 22:42:16.464 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-28 22:42:16.503 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.8351ms
2025-11-28 22:42:16.560 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-28 22:42:16.563 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-28 22:42:16.564 +02:00 [DBG] Request did not match any endpoints
2025-11-28 22:42:16.603 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 43.5482ms
2025-11-28 22:44:35.198 +02:00 [DBG] Connection id "0HNHENQETEHBK" accepted.
2025-11-28 22:44:35.203 +02:00 [DBG] Connection id "0HNHENQETEHBK" started.
2025-11-28 22:44:35.209 +02:00 [DBG] Connection 0HNHENQETEHBK established using the following protocol: "Tls13"
2025-11-28 22:44:35.214 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/News/GetAllNewsInSystem - null null
2025-11-28 22:44:35.224 +02:00 [DBG] 1 candidate(s) found for the request path '/api/News/GetAllNewsInSystem'
2025-11-28 22:44:35.228 +02:00 [DBG] Endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)' with route pattern 'api/News/GetAllNewsInSystem' is valid for the request path '/api/News/GetAllNewsInSystem'
2025-11-28 22:44:35.230 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)'
2025-11-28 22:44:35.232 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:44:35.234 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:44:35.235 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:44:35.265 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:44:35.268 +02:00 [INF] Executing endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)'
2025-11-28 22:44:35.290 +02:00 [INF] Route matched with {action = "GetAllNewsInSystem", controller = "News"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllNewsInSystem() on controller Hospital.Controllers.NewsController (Hospital).
2025-11-28 22:44:35.293 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:44:35.295 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:44:35.296 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:44:35.297 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:44:35.299 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:44:35.301 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-28 22:44:35.382 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-28 22:44:35.547 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-28 22:44:35.550 +02:00 [INF] get all News in system  called at "2025-11-28T22:44:35.5508438+02:00"
2025-11-28 22:44:35.552 +02:00 [INF] Retrieving all news in the system
2025-11-28 22:44:35.961 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-28 22:44:35.963 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-28 22:44:35.964 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-28 22:44:35.965 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-28 22:44:35.966 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-28 22:44:36.065 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-28 22:44:36.066 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-28 22:44:36.198 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:44:36.233 +02:00 [DBG] Compiling query expression: 
'DbSet<News>()
    .AsNoTracking()'
2025-11-28 22:44:36.338 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<News>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: News.NewsId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: News.BranchId (int?) FK Index, 1], [Property: News.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: News.Date (DateTime) Required, 3], [Property: News.Description (string), 4], [Property: News.ImageURL (string) MaxLength(300), 5], [Property: News.Title (string) Required MaxLength(150), 6], [Property: News.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 7] }
        SELECT n.NewsId, n.BranchId, n.CreatedAt, n.Date, n.Description, n.ImageURL, n.Title, n.UpdatedAt
        FROM News AS n), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, News>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 22:44:36.362 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:44:36.378 +02:00 [DBG] Created DbConnection. (14ms).
2025-11-28 22:44:36.381 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:44:36.575 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:44:36.578 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:44:36.583 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-11-28 22:44:36.585 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-11-28 22:44:36.590 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
2025-11-28 22:44:36.623 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
2025-11-28 22:44:36.633 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:44:36.637 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-28 22:44:36.640 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:44:36.645 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (4ms).
2025-11-28 22:44:36.647 +02:00 [INF] No news found in the system
2025-11-28 22:44:36.650 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:44:36.653 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:44:36.654 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:44:36.654 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:44:36.655 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-28 22:44:36.656 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-11-28 22:44:36.661 +02:00 [INF] Executed action Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital) in 1358.7463ms
2025-11-28 22:44:36.662 +02:00 [INF] Executed endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)'
2025-11-28 22:44:36.664 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:44:36.668 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:44:36.670 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-28 22:44:36.671 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/News/GetAllNewsInSystem - 404 null text/plain; charset=utf-8 1457.4046ms
2025-11-28 22:44:40.129 +02:00 [DBG] Connection id "0HNHENQETEHBK" received FIN.
2025-11-28 22:44:40.129 +02:00 [DBG] Connection id "0HNHENQETEHBJ" received FIN.
2025-11-28 22:44:40.137 +02:00 [DBG] Connection id "0HNHENQETEHBJ" is closed. The last processed stream ID was 7.
2025-11-28 22:44:40.137 +02:00 [DBG] Connection id "0HNHENQETEHBK" is closed. The last processed stream ID was 1.
2025-11-28 22:44:40.138 +02:00 [DBG] Connection id "0HNHENQETEHBJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 22:44:40.139 +02:00 [DBG] Connection id "0HNHENQETEHBK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 22:44:40.139 +02:00 [DBG] The connection queue processing loop for 0HNHENQETEHBJ completed.
2025-11-28 22:44:40.139 +02:00 [DBG] The connection queue processing loop for 0HNHENQETEHBK completed.
2025-11-28 22:44:40.146 +02:00 [DBG] Connection id "0HNHENQETEHBK" stopped.
2025-11-28 22:44:40.146 +02:00 [DBG] Connection id "0HNHENQETEHBJ" stopped.
2025-11-28 22:44:40.245 +02:00 [DBG] Connection id "0HNHENQETEHBL" accepted.
2025-11-28 22:44:40.246 +02:00 [DBG] Connection id "0HNHENQETEHBL" started.
2025-11-28 22:44:40.249 +02:00 [DBG] Connection 0HNHENQETEHBL established using the following protocol: "Tls13"
2025-11-28 22:44:40.251 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:44:40.255 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:44:40.256 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:44:40.258 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:44:40.259 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:44:40.261 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:44:40.262 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:44:40.264 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:44:40.265 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:44:40.270 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:44:40.272 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:44:40.273 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:44:40.274 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:44:40.276 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:44:40.277 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:44:40.278 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:44:40.280 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:44:40.283 +02:00 [INF] get all schedule called at "2025-11-28T22:44:40.2835267+02:00"
2025-11-28 22:44:40.285 +02:00 [INF] Fetching all schedules
2025-11-28 22:44:40.327 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:44:40.334 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(s => s.Branch)'
2025-11-28 22:44:40.369 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-28 22:44:40.371 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 22:44:40.373 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-28 22:44:40.375 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-11-28 22:44:40.433 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Specialization.Description (string), 44], [Property: Specialization.ImageURL (string) MaxLength(300), 45], [Property: Specialization.Name (string) Required MaxLength(120), 46], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 48], [Property: Branch.Address (string) MaxLength(250), 49], [Property: Branch.BranchName (string) Required MaxLength(150), 50], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Branch.Description (string), 52], [Property: Branch.Email (string) MaxLength(200), 53], [Property: Branch.ImageURL (string) MaxLength(300), 54], [Property: Branch.Latitude (double?), 55], [Property: Branch.Longitude (double?), 56], [Property: Branch.Phone (string) MaxLength(25), 57], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 58] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s0.SpecializationId, s0.CreatedAt, s0.Description, s0.ImageURL, s0.Name, s0.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s0 ON d.SpecializationId == s0.SpecializationId
        INNER JOIN Branches AS b ON s.BranchId == b.BranchId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 22:44:40.437 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:44:40.438 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:44:40.439 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:44:40.441 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:44:40.442 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:44:40.443 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:44:40.443 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:44:40.444 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:44:40.455 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:44:40.480 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.514 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.522 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.551 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.553 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.585 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.586 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.602 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.603 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.616 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.617 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.618 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.620 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.620 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.621 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.622 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.625 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.626 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.627 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.628 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.629 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.630 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.631 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.631 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.632 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.633 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.634 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.635 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.636 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.637 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.638 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.639 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.640 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.641 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.641 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.642 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.643 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.644 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.645 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:40.646 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:44:40.647 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 189ms reading results.
2025-11-28 22:44:40.648 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:44:40.649 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:44:40.662 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:44:40.663 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:44:40.664 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:44:40.664 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:44:40.665 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:44:40.666 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:44:40.682 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 404.5047ms
2025-11-28 22:44:40.684 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:44:40.685 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:44:40.685 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:44:40.686 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:44:40.688 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 436.8941ms
2025-11-28 22:44:44.778 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 22:44:44.780 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 22:44:44.781 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 22:44:44.782 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:44:44.783 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:44:44.784 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:44:44.785 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:44:44.787 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:44:44.788 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:44:44.796 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 22:44:44.797 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:44:44.798 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:44:44.799 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:44:44.801 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:44:44.802 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:44:44.803 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:44:44.817 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:44:44.830 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:44:44.833 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 22:44:44.836 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:44:44.837 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:44:44.838 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:44:44.841 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:44:44.843 +02:00 [INF] Get  doctor By Id called at "2025-11-28T22:44:44.8437965+02:00"
2025-11-28 22:44:44.845 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 22:44:44.853 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:44:44.859 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-28 22:44:44.863 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 22:44:44.864 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-28 22:44:44.866 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-28 22:44:44.867 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-28 22:44:44.911 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-28 22:44:44.919 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 22:44:44.926 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:44:44.926 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:44:44.927 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:44:44.928 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:44:44.929 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:44:44.929 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:44:44.932 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-28 22:44:44.935 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:44:44.961 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:44:44.962 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:44.963 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:44.964 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:44.965 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:44.966 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:44.976 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:44.979 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:44.979 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:44.980 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:44.982 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:44.982 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:44:44.984 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:44:44.985 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 22ms reading results.
2025-11-28 22:44:44.986 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:44:44.987 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:44:44.996 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:44:44.998 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:44:44.998 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:44:44.999 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:44:44.999 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:44:45.000 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 22:44:45.013 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 210.0696ms
2025-11-28 22:44:45.014 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:44:45.015 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:44:45.016 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:44:45.017 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:44:45.018 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 240.1515ms
2025-11-28 22:48:12.585 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:48:12.595 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:48:12.595 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:48:12.596 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:48:12.597 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:48:12.598 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:48:12.599 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:48:12.599 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:48:12.600 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:48:12.601 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:48:12.602 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:48:12.603 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:48:12.604 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:48:12.605 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:48:12.607 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:48:12.608 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:48:12.609 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:48:12.610 +02:00 [INF] get all schedule called at "2025-11-28T22:48:12.6102962+02:00"
2025-11-28 22:48:12.610 +02:00 [INF] Fetching all schedules
2025-11-28 22:48:12.612 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:48:12.616 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:48:12.616 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:48:12.617 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:48:12.618 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:48:12.619 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:48:12.620 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:48:12.620 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:48:12.621 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:48:12.628 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:48:12.629 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.630 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.631 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.632 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.633 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.634 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.634 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.635 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.636 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.637 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.638 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.638 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.639 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.640 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.641 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.642 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.643 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.644 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.645 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.646 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.646 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.647 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.648 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.649 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.650 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.650 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.651 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.652 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.653 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.654 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.655 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.655 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.656 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.657 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.658 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.659 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.660 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.661 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.662 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:12.663 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:48:12.664 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 34ms reading results.
2025-11-28 22:48:12.665 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:48:12.666 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 22:48:12.668 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:48:12.669 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:48:12.670 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:48:12.670 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:48:12.671 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:48:12.672 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:48:12.673 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 65.2568ms
2025-11-28 22:48:12.674 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:48:12.675 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:48:12.676 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:48:12.676 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:48:12.677 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 92.0353ms
2025-11-28 22:48:21.222 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:48:21.225 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:48:21.226 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:48:21.227 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:48:21.228 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:48:21.228 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:48:21.229 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:48:21.230 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:48:21.231 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:48:21.231 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:48:21.232 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:48:21.233 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:48:21.235 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:48:21.236 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:48:21.237 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:48:21.238 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:48:21.241 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:48:21.242 +02:00 [INF] get all schedule called at "2025-11-28T22:48:21.2424536+02:00"
2025-11-28 22:48:21.243 +02:00 [INF] Fetching all schedules
2025-11-28 22:48:21.243 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:48:21.245 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:48:21.245 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:48:21.246 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:48:21.247 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:48:21.248 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:48:21.248 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:48:21.249 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:48:21.250 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:48:21.257 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:48:21.259 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.260 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.261 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.262 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.263 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.264 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.264 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.265 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.266 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.267 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.268 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.269 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.270 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.271 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.272 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.272 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.274 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.274 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.276 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.277 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.277 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.278 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.279 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.280 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.281 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.281 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.282 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.283 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.284 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.285 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.286 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.287 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.287 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.288 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.289 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.290 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.291 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.292 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.293 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:48:21.294 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:48:21.294 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 35ms reading results.
2025-11-28 22:48:21.295 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:48:21.296 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:48:21.298 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:48:21.299 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:48:21.300 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:48:21.300 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:48:21.300 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:48:21.301 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:48:21.303 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 64.6973ms
2025-11-28 22:48:21.304 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:48:21.305 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:48:21.306 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:48:21.307 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:48:21.308 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 86.0104ms
2025-11-28 22:53:50.104 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 22:53:50.110 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 22:53:50.111 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 22:53:50.112 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:53:50.113 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:53:50.113 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:53:50.114 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:53:50.115 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:53:50.115 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:53:50.116 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 22:53:50.117 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:53:50.118 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:53:50.119 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:53:50.120 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:53:50.121 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:53:50.122 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:53:50.126 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:53:50.132 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:53:50.133 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 22:53:50.134 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:53:50.135 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:53:50.136 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:53:50.137 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:53:50.138 +02:00 [INF] Get  doctor By Id called at "2025-11-28T22:53:50.1381173+02:00"
2025-11-28 22:53:50.138 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 22:53:50.140 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:53:50.141 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:53:50.142 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:53:50.142 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:53:50.143 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:53:50.144 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:53:50.145 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:53:50.146 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:53:50.147 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:53:50.158 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:53:50.160 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:53:50.161 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:53:50.162 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:53:50.163 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:53:50.164 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:53:50.165 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:53:50.166 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:53:50.167 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:53:50.167 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:53:50.168 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:53:50.169 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:53:50.170 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:53:50.171 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-28 22:53:50.172 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:53:50.173 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:53:50.174 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:53:50.175 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:53:50.176 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:53:50.176 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:53:50.177 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:53:50.178 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 22:53:50.179 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 56.5694ms
2025-11-28 22:53:50.180 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:53:50.181 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:53:50.181 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:53:50.182 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:53:50.183 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 80.0562ms
2025-11-28 22:54:26.468 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:54:26.470 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:54:26.471 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:54:26.472 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:54:26.473 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:54:26.473 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:54:26.474 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:54:26.475 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:54:26.475 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:54:26.476 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:54:26.477 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:54:26.478 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:54:26.479 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:54:26.480 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:54:26.481 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:54:26.482 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:54:26.483 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:54:26.484 +02:00 [INF] get all schedule called at "2025-11-28T22:54:26.4845371+02:00"
2025-11-28 22:54:26.485 +02:00 [INF] Fetching all schedules
2025-11-28 22:54:26.486 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:54:26.489 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:54:26.489 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:54:26.490 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:26.491 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:26.492 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:54:26.493 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:54:26.494 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:54:26.494 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:54:26.502 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:54:26.504 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.505 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.506 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.506 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.507 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.508 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.509 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.510 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.511 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.512 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.512 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.513 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.514 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.515 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.516 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.517 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.518 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.519 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.520 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.520 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.521 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.522 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.523 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.524 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.525 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.526 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.526 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.527 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.528 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.529 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.530 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.532 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.533 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.534 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.534 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.535 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.536 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.537 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.538 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:26.539 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:26.540 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 35ms reading results.
2025-11-28 22:54:26.541 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:26.542 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:54:26.543 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:54:26.544 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:54:26.545 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:54:26.545 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:54:26.546 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:54:26.547 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:54:26.548 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 65.712ms
2025-11-28 22:54:26.549 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:54:26.550 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:54:26.551 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:26.552 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 22:54:26.553 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 85.5489ms
2025-11-28 22:54:35.133 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 22:54:35.135 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 22:54:35.136 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 22:54:35.137 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:54:35.138 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:54:35.139 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:54:35.140 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:54:35.140 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:54:35.141 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:54:35.143 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 22:54:35.144 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:54:35.146 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:54:35.148 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:54:35.149 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:54:35.150 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:54:35.151 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:54:35.164 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:54:35.165 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:54:35.166 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 22:54:35.167 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:54:35.168 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:54:35.169 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:54:35.169 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:54:35.170 +02:00 [INF] Get  doctor By Id called at "2025-11-28T22:54:35.1706682+02:00"
2025-11-28 22:54:35.171 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 22:54:35.172 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:54:35.173 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:54:35.174 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:54:35.175 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:35.175 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:35.176 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:54:35.177 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:54:35.178 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:54:35.178 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:54:35.188 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:54:35.189 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:35.190 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:35.191 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:35.192 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:35.192 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:35.193 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:35.194 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:35.195 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:35.196 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:35.197 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:35.197 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:35.198 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:35.199 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-28 22:54:35.200 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:35.201 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:54:35.202 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:54:35.203 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:54:35.204 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:54:35.204 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:54:35.205 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:54:35.206 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 22:54:35.207 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 55.2782ms
2025-11-28 22:54:35.208 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:54:35.209 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:54:35.209 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:35.210 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:54:35.211 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 79.0029ms
2025-11-28 22:54:38.029 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:54:38.031 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:54:38.032 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:54:38.034 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:54:38.034 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:54:38.035 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:54:38.036 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:54:38.036 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:54:38.037 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:54:38.038 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:54:38.039 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:54:38.040 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:54:38.041 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:54:38.042 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:54:38.043 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:54:38.044 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:54:38.046 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:54:38.047 +02:00 [INF] get all schedule called at "2025-11-28T22:54:38.0475288+02:00"
2025-11-28 22:54:38.048 +02:00 [INF] Fetching all schedules
2025-11-28 22:54:38.049 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:54:38.051 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:54:38.051 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:54:38.052 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:38.053 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:38.054 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:54:38.055 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:54:38.055 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:54:38.057 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:54:38.062 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:54:38.064 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.065 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.066 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.067 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.067 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.068 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.069 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.070 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.071 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.072 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.073 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.073 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.074 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.075 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.076 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.077 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.078 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.079 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.080 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.081 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.081 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.082 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.083 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.084 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.085 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.086 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.087 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.088 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.089 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.089 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.090 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.091 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.092 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.093 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.094 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.095 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.096 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.097 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.098 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:38.099 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:38.100 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 36ms reading results.
2025-11-28 22:54:38.101 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:38.102 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:54:38.103 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:54:38.104 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:54:38.105 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:54:38.105 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:54:38.106 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:54:38.107 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:54:38.108 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 63.2279ms
2025-11-28 22:54:38.108 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:54:38.109 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:54:38.110 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:38.111 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 22:54:38.112 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 83.3491ms
2025-11-28 22:54:42.063 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 22:54:42.066 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 22:54:42.066 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 22:54:42.067 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:54:42.068 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:54:42.068 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:54:42.069 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:54:42.070 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:54:42.070 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:54:42.071 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 22:54:42.072 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:54:42.073 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:54:42.074 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:54:42.075 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:54:42.076 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:54:42.077 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:54:42.078 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:54:42.079 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:54:42.080 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 22:54:42.081 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:54:42.082 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:54:42.083 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:54:42.084 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:54:42.084 +02:00 [INF] Get  doctor By Id called at "2025-11-28T22:54:42.0849365+02:00"
2025-11-28 22:54:42.085 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 22:54:42.086 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:54:42.088 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:54:42.088 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:54:42.089 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:42.089 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:42.090 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:54:42.091 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:54:42.092 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:54:42.093 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:54:42.096 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:54:42.097 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:42.098 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:42.099 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:42.100 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:42.101 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:42.101 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:42.102 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:42.103 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:42.104 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:42.105 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:42.105 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:42.106 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:42.107 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-28 22:54:42.108 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:42.109 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:54:42.110 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:54:42.111 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:54:42.112 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:54:42.112 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:54:42.113 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:54:42.114 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 22:54:42.115 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 37.615ms
2025-11-28 22:54:42.116 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:54:42.117 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:54:42.118 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:42.118 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:54:42.119 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 56.2821ms
2025-11-28 22:54:45.440 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:54:45.442 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:54:45.444 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:54:45.445 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:54:45.446 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:54:45.447 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:54:45.447 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:54:45.448 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:54:45.448 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:54:45.449 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:54:45.451 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:54:45.452 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:54:45.453 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:54:45.454 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:54:45.455 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:54:45.456 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:54:45.457 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:54:45.458 +02:00 [INF] get all schedule called at "2025-11-28T22:54:45.4582602+02:00"
2025-11-28 22:54:45.458 +02:00 [INF] Fetching all schedules
2025-11-28 22:54:45.459 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:54:45.461 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:54:45.461 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:54:45.462 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:45.463 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:45.464 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:54:45.464 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:54:45.465 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:54:45.466 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:54:45.469 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:54:45.471 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.471 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.472 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.473 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.474 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.475 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.476 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.476 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.477 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.478 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.479 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.480 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.481 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.482 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.482 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.483 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.484 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.485 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.486 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.487 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.488 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.489 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.489 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.490 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.491 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.492 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.493 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.493 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.494 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.495 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.496 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.497 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.497 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.498 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.499 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.500 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.501 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.502 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.502 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:45.503 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:45.504 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 33ms reading results.
2025-11-28 22:54:45.505 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:45.506 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:54:45.507 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:54:45.508 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:54:45.509 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:54:45.509 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:54:45.510 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:54:45.510 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:54:45.511 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 55.407ms
2025-11-28 22:54:45.512 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:54:45.513 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:54:45.514 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:45.515 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:54:45.516 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 75.8437ms
2025-11-28 22:54:51.318 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/2 - null null
2025-11-28 22:54:51.321 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/2'
2025-11-28 22:54:51.322 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/2'
2025-11-28 22:54:51.323 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:54:51.323 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:54:51.324 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:54:51.325 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:54:51.325 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:54:51.326 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:54:51.327 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 22:54:51.328 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:54:51.329 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:54:51.329 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:54:51.331 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:54:51.332 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:54:51.333 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:54:51.334 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:54:51.335 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:54:51.336 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 22:54:51.337 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:54:51.338 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:54:51.339 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:54:51.339 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:54:51.340 +02:00 [INF] Get  doctor By Id called at "2025-11-28T22:54:51.3409767+02:00"
2025-11-28 22:54:51.341 +02:00 [INF] Fetching doctor with ID 2
2025-11-28 22:54:51.342 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:54:51.344 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:54:51.344 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:54:51.345 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:51.346 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:51.346 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:54:51.347 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:54:51.348 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:54:51.349 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:54:51.352 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:54:51.354 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:51.355 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:51.355 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:51.356 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:51.357 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:51.358 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:51.359 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:51.360 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:51.361 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:54:51.361 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:51.362 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-28 22:54:51.363 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:51.364 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:54:51.365 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:54:51.367 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:54:51.367 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:54:51.368 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:54:51.368 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:54:51.369 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 22:54:51.370 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 37.5297ms
2025-11-28 22:54:51.371 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:54:51.372 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:54:51.373 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:54:51.373 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:54:51.374 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/2 - 200 null application/json; charset=utf-8 56.1667ms
2025-11-28 22:55:37.452 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 22:55:37.454 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 22:55:37.455 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 22:55:37.456 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:55:37.457 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:55:37.457 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:55:37.458 +02:00 [DBG] The request is a preflight request.
2025-11-28 22:55:37.459 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 8.3474ms
2025-11-28 22:55:37.464 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 22:55:37.467 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 22:55:37.468 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 22:55:37.468 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 22:55:37.469 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:55:37.470 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:55:37.470 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:55:37.471 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:55:37.471 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 22:55:37.475 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 22:55:37.476 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:55:37.477 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:55:37.478 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:55:37.479 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:55:37.480 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:55:37.481 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:55:37.482 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:55:37.483 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 22:55:37.485 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 22:55:37.488 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 22:55:37.497 +02:00 [DBG] Connection id "0HNHENQETEHBL", Request id "0HNHENQETEHBL:00000019": started reading request body.
2025-11-28 22:55:37.498 +02:00 [DBG] Connection id "0HNHENQETEHBL", Request id "0HNHENQETEHBL:00000019": done reading request body.
2025-11-28 22:55:37.511 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 22:55:37.512 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 22:55:37.513 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 22:55:37.514 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 22:55:37.522 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 22:55:37.523 +02:00 [INF] Add Appointment called at "2025-11-28T22:55:37.5236168+02:00"
2025-11-28 22:55:37.526 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 2, Date: "2025-11-30", Shift: "Morning"
2025-11-28 22:55:37.533 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:55:37.538 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:55:37.538 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:55:37.539 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:37.540 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:37.542 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 22:55:37.547 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 22:55:37.550 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(p => p.User)
    .Include(p => p.MedicalRecords)
    .ThenInclude(m => m.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(p => p.PatientId == __id_0)'
2025-11-28 22:55:37.552 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-28 22:55:37.553 +02:00 [DBG] Including navigation: 'Patient.MedicalRecords'.
2025-11-28 22:55:37.554 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-11-28 22:55:37.555 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 22:55:37.568 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 5], [Property: User.AccessFailedCount (int) Required, 6], [Property: User.ConcurrencyStamp (string) Concurrency, 7], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: User.DateOfBirth (DateOnly?), 9], [Property: User.Email (string) Index MaxLength(256), 10], [Property: User.EmailConfirmed (bool) Required, 11], [Property: User.FullName (string) Required MaxLength(150), 12], [Property: User.Gender (GenderType?) MaxLength(10), 13], [Property: User.LockoutEnabled (bool) Required, 14], [Property: User.LockoutEnd (DateTimeOffset?), 15], [Property: User.NormalizedEmail (string) Index MaxLength(256), 16], [Property: User.NormalizedUserName (string) Index MaxLength(256), 17], [Property: User.PasswordHash (string), 18], [Property: User.PhoneNumber (string), 19], [Property: User.PhoneNumberConfirmed (bool) Required, 20], [Property: User.RefreshToken (string), 21], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 22], [Property: User.Role (string) Required MaxLength(50), 23], [Property: User.SecurityStamp (string), 24], [Property: User.TwoFactorEnabled (bool) Required, 25], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: User.UserName (string) MaxLength(256), 27] }
                2 -> 0
                3 -> 5
                4 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 28], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 29], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: MedicalRecord.Diagnosis (string), 31], [Property: MedicalRecord.DoctorId (int) Required FK Index, 32], [Property: MedicalRecord.Notes (string), 33], [Property: MedicalRecord.PatientId (int) Required FK Index, 34], [Property: MedicalRecord.TreatmentPlan (string), 35], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
                5 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Doctor.Available (bool?), 38], [Property: Doctor.Biography (string), 39], [Property: Doctor.ConsultationFees (decimal) Required, 40], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 41], [Property: Doctor.ExperienceYears (int?), 42], [Property: Doctor.ImageURL (string) MaxLength(300), 43], [Property: Doctor.SpecializationId (int) Required FK Index, 44], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Doctor.UserId (string) Required FK Index, 46] }
                6 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
                7 -> 28
                8 -> 37
                9 -> 47
            SELECT t.PatientId, t.CreatedAt, t.EmergencyContact, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t0.RecordId, t0.AppointmentId, t0.CreatedAt, t0.Diagnosis, t0.DoctorId, t0.Notes, t0.PatientId, t0.TreatmentPlan, t0.UpdatedAt, t0.DoctorId0, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt0, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt0, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt1, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt1, t0.UserName
            FROM 
            (
                SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
                FROM Patients AS p
                INNER JOIN Users AS u ON p.UserId == u.Id
                WHERE p.PatientId == @__id_0
            ) AS t
            LEFT JOIN 
            (
                SELECT m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId AS DoctorId0, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt AS CreatedAt0, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt AS UpdatedAt0, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt AS CreatedAt1, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt AS UpdatedAt1, u0.UserName
                FROM MedicalRecords AS m
                INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
                INNER JOIN Users AS u0 ON d.UserId == u0.Id
            ) AS t0 ON t.PatientId == t0.PatientId
            ORDER BY t.PatientId ASC, t.Id ASC, t0.RecordId ASC, t0.DoctorId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 22:55:37.571 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:55:37.572 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:55:37.573 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 22:55:37.574 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 22:55:37.586 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 22:55:37.591 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.597 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.598 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.599 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:37.600 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-28 22:55:37.601 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:55:37.602 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:55:37.603 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:55:37.604 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:55:37.613 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:55:37.614 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.615 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.616 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.617 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.618 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.619 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.620 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.620 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.622 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.623 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:37.624 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-28 22:55:37.626 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-11-28 22:55:37.630 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 22:55:37.631 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:55:37.632 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:55:37.633 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:55:37.634 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 22:55:37.636 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 22:55:37.638 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:37.639 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 22:55:37.646 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Any(a => a.PatientId == __patientId_0 && a.DoctorId == __doctorId_1 && a.Date == __date_2 && (int)a.Shift == (int)__shift_3)'
2025-11-28 22:55:37.650 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Appointments AS a
                WHERE (((a.PatientId == @__patientId_0) && (a.DoctorId == @__doctorId_1)) && (a.Date == @__date_2)) && (a.Shift == @__shift_3))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 22:55:37.658 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:55:37.659 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:55:37.662 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-28 22:55:37.663 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 22:55:37.668 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 22:55:37.670 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:37.671 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 22:55:37.687 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.706 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.708 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.710 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.713 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.716 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 22:55:37.765 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 22:55:37.773 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 22:55:37.774 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 22:55:37.775 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 22:55:37.824 +02:00 [DBG] Creating transaction savepoint.
2025-11-28 22:55:37.833 +02:00 [DBG] Created transaction savepoint.
2025-11-28 22:55:37.835 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:55:37.836 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:55:37.838 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-28 22:55:37.839 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 22:55:37.843 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 22:55:37.851 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-28 22:55:37.856 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:37.857 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-28 22:55:37.864 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.867 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 22:55:37.870 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Payment.PaymentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.884 +02:00 [DBG] The navigation 'Payment.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.885 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.886 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.887 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 22:55:37.895 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 22:55:37.896 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 22:55:37.897 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 22:55:37.897 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 22:55:37.899 +02:00 [DBG] Creating transaction savepoint.
2025-11-28 22:55:37.900 +02:00 [DBG] Created transaction savepoint.
2025-11-28 22:55:37.901 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:55:37.902 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:55:37.904 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-28 22:55:37.905 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-28 22:55:37.912 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-28 22:55:37.914 +02:00 [DBG] The foreign key property 'Payment.PaymentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-28 22:55:37.916 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:37.917 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 22:55:37.919 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:37.920 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 22:55:37.922 +02:00 [DBG] Committing transaction.
2025-11-28 22:55:37.925 +02:00 [DBG] Committed transaction.
2025-11-28 22:55:37.927 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:37.928 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:55:37.929 +02:00 [INF] Appointment created successfully with ID: 3
2025-11-28 22:55:37.933 +02:00 [DBG] Disposing transaction.
2025-11-28 22:55:37.935 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:55:37.936 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:55:37.937 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:55:37.937 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:55:37.938 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:55:37.939 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-28 22:55:37.953 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[3],action=[GetById],controller=[Appointment])
2025-11-28 22:55:37.956 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/3 and 
2025-11-28 22:55:37.959 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/3
2025-11-28 22:55:37.963 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 481.8254ms
2025-11-28 22:55:37.964 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 22:55:37.965 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:55:37.966 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:37.966 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:55:37.967 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 503.3344ms
2025-11-28 22:55:40.225 +02:00 [DBG] Connection id "0HNHENQETEHBL" received FIN.
2025-11-28 22:55:40.226 +02:00 [DBG] Connection id "0HNHENQETEHBL" is closed. The last processed stream ID was 25.
2025-11-28 22:55:40.226 +02:00 [DBG] The connection queue processing loop for 0HNHENQETEHBL completed.
2025-11-28 22:55:40.227 +02:00 [DBG] Connection id "0HNHENQETEHBL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 22:55:40.229 +02:00 [DBG] Connection id "0HNHENQETEHBL" stopped.
2025-11-28 22:55:42.280 +02:00 [DBG] Connection id "0HNHENQETEHBM" accepted.
2025-11-28 22:55:42.281 +02:00 [DBG] Connection id "0HNHENQETEHBM" started.
2025-11-28 22:55:42.283 +02:00 [DBG] Connection 0HNHENQETEHBM established using the following protocol: "Tls13"
2025-11-28 22:55:42.286 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:55:42.292 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:55:42.293 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:55:42.294 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:55:42.295 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:55:42.296 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:55:42.297 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:55:42.297 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:55:42.298 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:55:42.299 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:55:42.300 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:55:42.302 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:55:42.303 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:55:42.304 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:55:42.305 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:55:42.306 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:55:42.307 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:55:42.308 +02:00 [INF] get all schedule called at "2025-11-28T22:55:42.3084502+02:00"
2025-11-28 22:55:42.309 +02:00 [INF] Fetching all schedules
2025-11-28 22:55:42.310 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:55:42.311 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:55:42.312 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:55:42.313 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:42.314 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:42.315 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:55:42.315 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:55:42.316 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:55:42.317 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:55:42.325 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:55:42.327 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.328 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.329 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.330 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.330 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.331 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.332 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.333 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.334 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.335 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.336 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.337 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.338 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.338 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.339 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.340 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.342 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.342 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.343 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.344 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.345 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.346 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.347 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.348 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.349 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.350 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.351 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.352 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.352 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.353 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.354 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.355 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.356 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.357 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.358 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.359 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.359 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.360 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.361 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:42.362 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:42.363 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 35ms reading results.
2025-11-28 22:55:42.364 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:42.365 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:55:42.366 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:55:42.367 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:55:42.368 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:55:42.368 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:55:42.369 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:55:42.370 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:55:42.371 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 64.8491ms
2025-11-28 22:55:42.371 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:55:42.372 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:55:42.373 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:42.374 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:55:42.375 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 90.0695ms
2025-11-28 22:55:54.432 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/2 - null null
2025-11-28 22:55:54.434 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/2'
2025-11-28 22:55:54.435 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/2'
2025-11-28 22:55:54.437 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:55:54.437 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:55:54.438 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:55:54.439 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:55:54.439 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:55:54.440 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:55:54.441 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 22:55:54.442 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:55:54.443 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:55:54.444 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:55:54.445 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:55:54.446 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:55:54.447 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:55:54.448 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:55:54.449 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:55:54.449 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 22:55:54.450 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:55:54.451 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:55:54.452 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:55:54.453 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:55:54.453 +02:00 [INF] Get  doctor By Id called at "2025-11-28T22:55:54.4539288+02:00"
2025-11-28 22:55:54.454 +02:00 [INF] Fetching doctor with ID 2
2025-11-28 22:55:54.455 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:55:54.456 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:55:54.457 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:55:54.457 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:54.458 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:54.459 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:55:54.460 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:55:54.461 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:55:54.461 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:55:54.471 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:55:54.473 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:54.473 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:54.474 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:54.475 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:54.476 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:54.477 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:54.477 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:54.478 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:54.479 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:54.480 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:54.481 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-28 22:55:54.482 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:54.483 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:55:54.484 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:55:54.485 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:55:54.486 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:55:54.486 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:55:54.487 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:55:54.488 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 22:55:54.489 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 42.3885ms
2025-11-28 22:55:54.490 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:55:54.491 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:55:54.492 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:54.493 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:55:54.494 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/2 - 200 null application/json; charset=utf-8 62.1879ms
2025-11-28 22:55:57.511 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 22:55:57.513 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 22:55:57.514 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 22:55:57.514 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:55:57.515 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:55:57.516 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:55:57.516 +02:00 [DBG] The request is a preflight request.
2025-11-28 22:55:57.517 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.4801ms
2025-11-28 22:55:57.518 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 22:55:57.520 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 22:55:57.521 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 22:55:57.522 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 22:55:57.523 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:55:57.524 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:55:57.524 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:55:57.525 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:55:57.525 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 22:55:57.526 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 22:55:57.528 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:55:57.529 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:55:57.530 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:55:57.532 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:55:57.533 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:55:57.534 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:55:57.535 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:55:57.536 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 22:55:57.537 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 22:55:57.538 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 22:55:57.539 +02:00 [DBG] Connection id "0HNHENQETEHBM", Request id "0HNHENQETEHBM:00000007": started reading request body.
2025-11-28 22:55:57.540 +02:00 [DBG] Connection id "0HNHENQETEHBM", Request id "0HNHENQETEHBM:00000007": done reading request body.
2025-11-28 22:55:57.541 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 22:55:57.541 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 22:55:57.542 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 22:55:57.543 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 22:55:57.544 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 22:55:57.545 +02:00 [INF] Add Appointment called at "2025-11-28T22:55:57.5453970+02:00"
2025-11-28 22:55:57.546 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 2, Date: "2025-11-30", Shift: "Morning"
2025-11-28 22:55:57.547 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:55:57.549 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:55:57.550 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:55:57.551 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:57.552 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:57.552 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 22:55:57.553 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 22:55:57.554 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:55:57.555 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:55:57.556 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:55:57.556 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 22:55:57.568 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 22:55:57.569 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:57.571 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:57.571 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:57.572 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:57.573 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 22:55:57.574 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:55:57.575 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:55:57.576 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:55:57.577 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:55:57.585 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:55:57.587 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:57.588 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:57.588 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:57.589 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:57.590 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:57.591 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:57.592 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:57.592 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:57.593 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:55:57.594 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:57.595 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-28 22:55:57.596 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:55:57.597 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:55:57.598 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:55:57.599 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 22:55:57.601 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 22:55:57.602 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:57.603 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 22:55:57.604 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:55:57.605 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:55:57.606 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:55:57.607 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 22:55:57.611 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 22:55:57.612 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:57.613 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 22:55:57.656 +02:00 [DBG] Rolling back transaction.
2025-11-28 22:55:57.658 +02:00 [DBG] Rolled back transaction.
2025-11-28 22:55:57.659 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:57.660 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:55:57.661 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 2
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 22:55:57.692 +02:00 [DBG] Disposing transaction.
2025-11-28 22:55:57.726 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 191.8159ms
2025-11-28 22:55:57.727 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 22:55:57.776 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 22:55:57.795 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:55:57.795 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:55:57.796 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:55:57.797 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 279.3635ms
2025-11-28 22:56:34.492 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 22:56:34.498 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 22:56:34.498 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 22:56:34.499 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:56:34.500 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:56:34.500 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:56:34.501 +02:00 [DBG] The request is a preflight request.
2025-11-28 22:56:34.501 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 9.3077ms
2025-11-28 22:56:34.503 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 22:56:34.506 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 22:56:34.506 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 22:56:34.508 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 22:56:34.508 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:56:34.509 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:56:34.509 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:56:34.510 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:56:34.511 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 22:56:34.511 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 22:56:34.512 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:56:34.513 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:56:34.514 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:56:34.515 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:56:34.516 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:56:34.517 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:56:34.518 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:56:34.519 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 22:56:34.520 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 22:56:34.521 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 22:56:34.522 +02:00 [DBG] Connection id "0HNHENQETEHBM", Request id "0HNHENQETEHBM:0000000B": started reading request body.
2025-11-28 22:56:34.523 +02:00 [DBG] Connection id "0HNHENQETEHBM", Request id "0HNHENQETEHBM:0000000B": done reading request body.
2025-11-28 22:56:34.524 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 22:56:34.524 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 22:56:34.525 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 22:56:34.526 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 22:56:34.527 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 22:56:34.528 +02:00 [INF] Add Appointment called at "2025-11-28T22:56:34.5284247+02:00"
2025-11-28 22:56:34.529 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 2, Date: "2025-11-30", Shift: "Morning"
2025-11-28 22:56:34.530 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:56:34.536 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:56:34.537 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:56:34.538 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:34.539 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:34.539 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 22:56:34.540 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 22:56:34.541 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:56:34.542 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:56:34.543 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:56:34.544 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 22:56:34.554 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 22:56:34.555 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:34.556 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:34.557 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:34.558 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:34.558 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 22:56:34.560 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:56:34.560 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:56:34.561 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:56:34.562 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:56:34.570 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:56:34.572 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:34.573 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:34.574 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:34.575 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:34.575 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:34.576 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:34.577 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:34.578 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:34.578 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:34.579 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:34.580 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-28 22:56:34.581 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:56:34.582 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:56:34.582 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:56:34.583 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 22:56:34.585 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 22:56:34.587 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:34.588 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 22:56:34.589 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:56:34.590 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:56:34.590 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:56:34.591 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 22:56:34.595 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 22:56:34.596 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:34.597 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 22:56:34.612 +02:00 [DBG] Rolling back transaction.
2025-11-28 22:56:34.613 +02:00 [DBG] Rolled back transaction.
2025-11-28 22:56:34.614 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:34.615 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:56:34.616 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 2
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 22:56:34.630 +02:00 [DBG] Disposing transaction.
2025-11-28 22:56:34.657 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 140.2241ms
2025-11-28 22:56:34.658 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 22:56:34.695 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 22:56:34.700 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:56:34.701 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:34.702 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:56:34.703 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 199.684ms
2025-11-28 22:56:37.685 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 22:56:37.687 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 22:56:37.688 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 22:56:37.689 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:56:37.690 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:56:37.691 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:56:37.691 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:56:37.692 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:56:37.692 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:56:37.693 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 22:56:37.694 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:56:37.695 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:56:37.696 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:56:37.698 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:56:37.699 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:56:37.699 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:56:37.700 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 22:56:37.701 +02:00 [INF] get all schedule called at "2025-11-28T22:56:37.7016850+02:00"
2025-11-28 22:56:37.702 +02:00 [INF] Fetching all schedules
2025-11-28 22:56:37.703 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:56:37.704 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:56:37.705 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:56:37.706 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:37.706 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:37.707 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:56:37.708 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:56:37.709 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:56:37.710 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:56:37.717 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 22:56:37.719 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.720 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.721 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.722 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.722 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.723 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.724 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.725 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.726 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.727 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.727 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.728 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.729 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.730 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.731 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.732 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.733 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.734 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.735 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.735 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.736 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.737 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.738 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.739 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.740 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.741 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.741 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.742 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.743 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.745 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.746 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.747 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.747 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.748 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.749 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.750 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.751 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.751 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:37.753 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:37.753 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 34ms reading results.
2025-11-28 22:56:37.754 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:37.755 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:56:37.756 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:56:37.758 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:56:37.758 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:56:37.759 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:56:37.759 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:56:37.760 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 22:56:37.761 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 61.7683ms
2025-11-28 22:56:37.762 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 22:56:37.763 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:56:37.764 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:37.764 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:56:37.765 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 80.877ms
2025-11-28 22:56:41.920 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 22:56:41.922 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 22:56:41.923 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 22:56:41.925 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:56:41.925 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:56:41.926 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:56:41.927 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:56:41.927 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:56:41.928 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:56:41.929 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 22:56:41.930 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:56:41.931 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:56:41.932 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:56:41.933 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:56:41.934 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:56:41.935 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:56:41.936 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 22:56:41.937 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:56:41.938 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 22:56:41.939 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:56:41.939 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:56:41.940 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 22:56:41.941 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 22:56:41.942 +02:00 [INF] Get  doctor By Id called at "2025-11-28T22:56:41.9424724+02:00"
2025-11-28 22:56:41.943 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 22:56:41.943 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:56:41.945 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:56:41.946 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:56:41.946 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:41.947 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:41.948 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:56:41.949 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:56:41.950 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:56:41.950 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:56:41.961 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:56:41.963 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:41.964 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:41.965 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:41.966 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:41.967 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:41.968 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:41.969 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:41.970 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:41.971 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:41.972 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:41.973 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:41.973 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:41.974 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-28 22:56:41.975 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:41.976 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:56:41.977 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:56:41.979 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:56:41.979 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:56:41.980 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:56:41.980 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:56:41.981 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 22:56:41.983 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 48.0382ms
2025-11-28 22:56:41.984 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 22:56:41.985 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:56:41.985 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:41.987 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 22:56:41.988 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 67.9641ms
2025-11-28 22:56:46.260 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 22:56:46.261 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 22:56:46.262 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 22:56:46.263 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:56:46.263 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:56:46.264 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:56:46.264 +02:00 [DBG] The request is a preflight request.
2025-11-28 22:56:46.265 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.328ms
2025-11-28 22:56:46.266 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 22:56:46.269 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 22:56:46.270 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 22:56:46.271 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 22:56:46.271 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 22:56:46.272 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 22:56:46.272 +02:00 [INF] CORS policy execution successful.
2025-11-28 22:56:46.273 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 22:56:46.274 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 22:56:46.274 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 22:56:46.276 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 22:56:46.276 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 22:56:46.277 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 22:56:46.279 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 22:56:46.280 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 22:56:46.281 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:56:46.282 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 22:56:46.283 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 22:56:46.284 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 22:56:46.285 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 22:56:46.285 +02:00 [DBG] Connection id "0HNHENQETEHBM", Request id "0HNHENQETEHBM:00000013": started reading request body.
2025-11-28 22:56:46.286 +02:00 [DBG] Connection id "0HNHENQETEHBM", Request id "0HNHENQETEHBM:00000013": done reading request body.
2025-11-28 22:56:46.287 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 22:56:46.288 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 22:56:46.288 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 22:56:46.289 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 22:56:46.290 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 22:56:46.291 +02:00 [INF] Add Appointment called at "2025-11-28T22:56:46.2912718+02:00"
2025-11-28 22:56:46.291 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-11-30", Shift: "Evening"
2025-11-28 22:56:46.293 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 22:56:46.294 +02:00 [DBG] Creating DbConnection.
2025-11-28 22:56:46.294 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 22:56:46.295 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:46.296 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:46.297 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 22:56:46.297 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 22:56:46.299 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:56:46.299 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:56:46.300 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:56:46.301 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 22:56:46.310 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 22:56:46.312 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.313 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.314 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.315 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:46.315 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 22:56:46.317 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:56:46.317 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:56:46.318 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:56:46.319 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:56:46.327 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 22:56:46.329 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.330 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.331 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.332 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.333 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.334 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.334 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.335 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.336 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.337 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.337 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.338 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:46.339 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-28 22:56:46.341 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:56:46.341 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:56:46.342 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:56:46.343 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 22:56:46.345 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 22:56:46.347 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:46.347 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 22:56:46.349 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:56:46.349 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 22:56:46.350 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:56:46.351 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 22:56:46.354 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 22:56:46.355 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:46.356 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 22:56:46.358 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.359 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.360 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.361 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.362 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.362 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 22:56:46.363 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 22:56:46.364 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 22:56:46.365 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 22:56:46.365 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 22:56:46.366 +02:00 [DBG] Creating transaction savepoint.
2025-11-28 22:56:46.368 +02:00 [DBG] Created transaction savepoint.
2025-11-28 22:56:46.373 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 22:56:46.375 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-28 22:56:46.376 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 22:56:46.377 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 22:56:46.381 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 22:56:46.382 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-28 22:56:46.383 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:46.384 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 22:56:46.385 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 22:56:46.386 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 22:56:46.387 +02:00 [DBG] Committing transaction.
2025-11-28 22:56:46.388 +02:00 [DBG] Committed transaction.
2025-11-28 22:56:46.388 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:46.389 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 22:56:46.390 +02:00 [INF] Appointment created successfully with ID: 4
2025-11-28 22:56:46.390 +02:00 [DBG] Disposing transaction.
2025-11-28 22:56:46.391 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 22:56:46.392 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 22:56:46.393 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 22:56:46.393 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 22:56:46.394 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 22:56:46.395 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-28 22:56:46.396 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[4],action=[GetById],controller=[Appointment])
2025-11-28 22:56:46.397 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/4 and 
2025-11-28 22:56:46.398 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/4
2025-11-28 22:56:46.399 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 118.3431ms
2025-11-28 22:56:46.400 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 22:56:46.401 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 22:56:46.402 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 22:56:46.403 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 22:56:46.404 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 137.4743ms
2025-11-28 22:56:50.233 +02:00 [DBG] Connection id "0HNHENQETEHBM" received FIN.
2025-11-28 22:56:50.234 +02:00 [DBG] Connection id "0HNHENQETEHBM" is closed. The last processed stream ID was 19.
2025-11-28 22:56:50.234 +02:00 [DBG] The connection queue processing loop for 0HNHENQETEHBM completed.
2025-11-28 22:56:50.235 +02:00 [DBG] Connection id "0HNHENQETEHBM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 22:56:50.237 +02:00 [DBG] Connection id "0HNHENQETEHBM" stopped.
2025-11-28 23:13:17.399 +02:00 [DBG] Connection id "0HNHENQETEHBN" accepted.
2025-11-28 23:13:17.399 +02:00 [DBG] Connection id "0HNHENQETEHBN" received FIN.
2025-11-28 23:13:17.408 +02:00 [DBG] Connection id "0HNHENQETEHBO" accepted.
2025-11-28 23:13:17.404 +02:00 [DBG] Connection id "0HNHENQETEHBN" started.
2025-11-28 23:13:17.412 +02:00 [DBG] Connection id "0HNHENQETEHBO" started.
2025-11-28 23:13:17.414 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-28 23:13:17.416 +02:00 [DBG] Connection id "0HNHENQETEHBN" stopped.
2025-11-28 23:13:17.417 +02:00 [DBG] Connection id "0HNHENQETEHBN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:13:17.418 +02:00 [DBG] Connection 0HNHENQETEHBO established using the following protocol: "Tls13"
2025-11-28 23:13:17.422 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 143
2025-11-28 23:13:17.424 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:13:17.425 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:13:17.426 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:13:17.426 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:13:17.427 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:13:17.427 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:13:17.428 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:13:17.429 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:13:17.430 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:13:17.431 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:13:17.432 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:13:17.433 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:13:17.434 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:13:17.435 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:13:17.436 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:13:17.436 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:13:17.437 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:13:17.439 +02:00 [DBG] Connection id "0HNHENQETEHBO", Request id "0HNHENQETEHBO:00000001": started reading request body.
2025-11-28 23:13:17.440 +02:00 [DBG] Connection id "0HNHENQETEHBO", Request id "0HNHENQETEHBO:00000001": done reading request body.
2025-11-28 23:13:17.441 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:13:17.442 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:13:17.443 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:13:17.443 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:13:17.444 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:13:17.445 +02:00 [INF] Add Appointment called at "2025-11-28T23:13:17.4456170+02:00"
2025-11-28 23:13:17.446 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-11-29", Shift: "Morning"
2025-11-28 23:13:17.447 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:13:17.449 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:13:17.449 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:13:17.450 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:17.493 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:17.495 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:13:17.496 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:13:17.498 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:13:17.498 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:13:17.499 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:13:17.500 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:13:17.518 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:13:17.519 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:17.520 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:17.521 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:17.522 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:17.523 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:13:17.524 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:13:17.525 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:13:17.526 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:13:17.526 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:13:17.538 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:13:17.540 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:17.541 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:17.541 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:17.542 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:17.543 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:17.544 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:17.545 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:17.546 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:17.546 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:17.547 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:17.548 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:17.549 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:17.550 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-28 23:13:17.551 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:13:17.552 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:13:17.552 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:13:17.553 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:13:17.556 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:13:17.557 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:17.558 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:13:17.559 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:13:17.560 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:13:17.560 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:13:17.561 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:13:17.566 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:13:17.567 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:17.568 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:13:17.586 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:13:17.587 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:13:17.587 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:17.588 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:13:17.589 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 1
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 23:13:17.603 +02:00 [DBG] Disposing transaction.
2025-11-28 23:13:17.630 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 196.5643ms
2025-11-28 23:13:17.632 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:13:17.662 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:13:17.670 +02:00 [DBG] Connection id "0HNHENQETEHBO" completed keep alive response.
2025-11-28 23:13:17.671 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:13:17.672 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:17.673 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:13:17.674 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 400 null application/json 251.6949ms
2025-11-28 23:13:26.134 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 143
2025-11-28 23:13:26.136 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:13:26.137 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:13:26.138 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:13:26.139 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:13:26.139 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:13:26.140 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:13:26.141 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:13:26.142 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:13:26.143 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:13:26.144 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:13:26.145 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:13:26.146 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:13:26.147 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:13:26.148 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:13:26.149 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:13:26.150 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:13:26.151 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:13:26.151 +02:00 [DBG] Connection id "0HNHENQETEHBO", Request id "0HNHENQETEHBO:00000002": started reading request body.
2025-11-28 23:13:26.152 +02:00 [DBG] Connection id "0HNHENQETEHBO", Request id "0HNHENQETEHBO:00000002": done reading request body.
2025-11-28 23:13:26.159 +02:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.DateOnly. Path: $.date | LineNumber: 4 | BytePositionInLine: 22.
2025-11-28 23:13:26.160 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:13:26.161 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:13:26.162 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:13:26.163 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:13:26.165 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-28 23:13:26.167 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-28 23:13:26.167 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:13:26.169 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:13:26.169 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-28 23:13:26.171 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-28 23:13:26.172 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-28 23:13:26.188 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 40.6096ms
2025-11-28 23:13:26.189 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:13:26.189 +02:00 [DBG] Connection id "0HNHENQETEHBO" completed keep alive response.
2025-11-28 23:13:26.190 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 400 null application/problem+json; charset=utf-8 56.5637ms
2025-11-28 23:13:38.650 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 143
2025-11-28 23:13:38.653 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:13:38.654 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:13:38.655 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:13:38.656 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:13:38.657 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:13:38.657 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:13:38.658 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:13:38.662 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:13:38.663 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:13:38.665 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:13:38.666 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:13:38.668 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:13:38.669 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:13:38.670 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:13:38.671 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:13:38.672 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:13:38.673 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:13:38.674 +02:00 [DBG] Connection id "0HNHENQETEHBO", Request id "0HNHENQETEHBO:00000003": started reading request body.
2025-11-28 23:13:38.675 +02:00 [DBG] Connection id "0HNHENQETEHBO", Request id "0HNHENQETEHBO:00000003": done reading request body.
2025-11-28 23:13:38.676 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:13:38.677 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:13:38.678 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:13:38.679 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:13:38.681 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:13:38.682 +02:00 [INF] Add Appointment called at "2025-11-28T23:13:38.6826879+02:00"
2025-11-28 23:13:38.683 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-11-28", Shift: "Morning"
2025-11-28 23:13:38.685 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:13:38.687 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:13:38.688 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:13:38.689 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:38.691 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:38.692 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:13:38.693 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:13:38.694 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:13:38.695 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:13:38.696 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 23:13:38.698 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:13:38.714 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:13:38.717 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:38.719 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:38.720 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:38.722 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:38.724 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-11-28 23:13:38.726 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:13:38.728 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:13:38.729 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 23:13:38.730 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:13:38.746 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:13:38.748 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:38.749 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:38.750 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:38.751 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:38.752 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:38.753 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:38.754 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:38.756 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:38.757 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:38.758 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:38.759 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:38.760 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:38.761 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-28 23:13:38.762 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:13:38.763 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:13:38.764 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 23:13:38.765 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:13:38.769 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:13:38.770 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:38.771 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:13:38.792 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:13:38.793 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:13:38.794 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:38.795 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:13:38.796 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 1
System.ArgumentException: Cannot book appointment: the selected shift (10:00 - 13:00) has already passed.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 102
2025-11-28 23:13:38.810 +02:00 [DBG] Disposing transaction.
2025-11-28 23:13:38.837 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 168.6654ms
2025-11-28 23:13:38.838 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:13:38.869 +02:00 [ERR]  Exception caught: Cannot book appointment: the selected shift (10:00 - 13:00) has already passed.
System.ArgumentException: Cannot book appointment: the selected shift (10:00 - 13:00) has already passed.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 102
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:13:38.873 +02:00 [DBG] Connection id "0HNHENQETEHBO" completed keep alive response.
2025-11-28 23:13:38.874 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:13:38.874 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:38.875 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:13:38.876 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 400 null application/json 226.2828ms
2025-11-28 23:13:44.660 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 143
2025-11-28 23:13:44.662 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:13:44.662 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:13:44.663 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:13:44.664 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:13:44.664 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:13:44.665 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:13:44.666 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:13:44.667 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:13:44.668 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:13:44.669 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:13:44.670 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:13:44.671 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:13:44.672 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:13:44.673 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:13:44.673 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:13:44.674 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:13:44.675 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:13:44.676 +02:00 [DBG] Connection id "0HNHENQETEHBO", Request id "0HNHENQETEHBO:00000004": started reading request body.
2025-11-28 23:13:44.677 +02:00 [DBG] Connection id "0HNHENQETEHBO", Request id "0HNHENQETEHBO:00000004": done reading request body.
2025-11-28 23:13:44.678 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:13:44.678 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:13:44.679 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:13:44.680 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:13:44.681 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:13:44.682 +02:00 [INF] Add Appointment called at "2025-11-28T23:13:44.6820709+02:00"
2025-11-28 23:13:44.682 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-12-28", Shift: "Morning"
2025-11-28 23:13:44.684 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:13:44.685 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:13:44.685 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:13:44.686 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:44.687 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:44.687 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:13:44.688 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:13:44.689 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:13:44.690 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:13:44.691 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:13:44.692 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:13:44.701 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:13:44.703 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.704 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.705 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.706 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:44.707 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:13:44.708 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:13:44.708 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:13:44.709 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:13:44.710 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:13:44.718 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:13:44.719 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.720 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.721 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.722 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.723 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.724 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.724 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.725 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.726 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.727 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.728 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.729 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:44.729 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-28 23:13:44.731 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:13:44.731 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:13:44.732 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:13:44.733 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:13:44.736 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:13:44.737 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:44.738 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:13:44.739 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:13:44.740 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:13:44.740 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:13:44.741 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:13:44.745 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:13:44.747 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:44.748 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:13:44.750 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.751 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.752 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.752 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.753 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.754 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:13:44.755 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:13:44.756 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:13:44.756 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:13:44.757 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:13:44.758 +02:00 [DBG] Creating transaction savepoint.
2025-11-28 23:13:44.760 +02:00 [DBG] Created transaction savepoint.
2025-11-28 23:13:44.760 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:13:44.761 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:13:44.762 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:13:44.762 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:13:44.766 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:13:44.768 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-28 23:13:44.768 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:44.769 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:13:44.770 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:13:44.771 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 23:13:44.772 +02:00 [DBG] Committing transaction.
2025-11-28 23:13:44.773 +02:00 [DBG] Committed transaction.
2025-11-28 23:13:44.774 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:44.774 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:13:44.775 +02:00 [INF] Appointment created successfully with ID: 5
2025-11-28 23:13:44.776 +02:00 [DBG] Disposing transaction.
2025-11-28 23:13:44.776 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:13:44.778 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:13:44.778 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:13:44.779 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:13:44.779 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:13:44.780 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-28 23:13:44.781 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[5],action=[GetById],controller=[Appointment])
2025-11-28 23:13:44.782 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/5 and 
2025-11-28 23:13:44.783 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/5
2025-11-28 23:13:44.784 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 112.0397ms
2025-11-28 23:13:44.785 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:13:44.785 +02:00 [DBG] Connection id "0HNHENQETEHBO" completed keep alive response.
2025-11-28 23:13:44.786 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:13:44.787 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:13:44.788 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:13:44.789 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 128.8856ms
2025-11-28 23:28:32.592 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-28 23:28:32.736 +02:00 [DBG] Hosting starting
2025-11-28 23:28:32.762 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-28 23:28:32.772 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-28 23:28:32.780 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-28 23:28:32.782 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-28 23:28:32.784 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-28 23:28:32.789 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-28 23:28:32.793 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-28 23:28:32.794 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-28 23:28:32.795 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-28 23:28:32.801 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-28 23:28:32.805 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-28 23:28:32.808 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-28 23:28:32.811 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-28 23:28:32.816 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-28 23:28:32.818 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-28 23:28:32.820 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-28 23:28:32.822 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-28 23:28:32.829 +02:00 [DBG] Middleware loaded
2025-11-28 23:28:32.831 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-28 23:28:32.834 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-28 23:28:32.922 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-28 23:28:33.007 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-28 23:28:33.008 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-28 23:28:33.009 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-28 23:28:33.010 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-28 23:28:33.010 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-28 23:28:33.011 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-28 23:28:33.087 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-28 23:28:33.088 +02:00 [INF] Hosting environment: Development
2025-11-28 23:28:33.089 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-28 23:28:33.090 +02:00 [DBG] Hosting started
2025-11-28 23:28:33.153 +02:00 [DBG] Connection id "0HNHEOKAIETC1" received FIN.
2025-11-28 23:28:33.158 +02:00 [DBG] Connection id "0HNHEOKAIETC1" accepted.
2025-11-28 23:28:33.161 +02:00 [DBG] Connection id "0HNHEOKAIETC1" started.
2025-11-28 23:28:33.174 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-28 23:28:33.202 +02:00 [DBG] Connection id "0HNHEOKAIETC1" stopped.
2025-11-28 23:28:33.206 +02:00 [DBG] Connection id "0HNHEOKAIETC1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:28:33.416 +02:00 [DBG] Connection id "0HNHEOKAIETC2" accepted.
2025-11-28 23:28:33.417 +02:00 [DBG] Connection id "0HNHEOKAIETC2" started.
2025-11-28 23:28:33.448 +02:00 [DBG] Connection 0HNHEOKAIETC2 established using the following protocol: "Tls13"
2025-11-28 23:28:33.509 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-28 23:28:33.583 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-28 23:28:33.605 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-28 23:28:33.607 +02:00 [DBG] Request did not match any endpoints
2025-11-28 23:28:33.655 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-28 23:28:33.658 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-28 23:28:33.673 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-28 23:28:33.675 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-28 23:28:33.679 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 177.3402ms
2025-11-28 23:28:33.711 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-28 23:28:33.711 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-28 23:28:33.728 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-28 23:28:33.733 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 22.5875ms
2025-11-28 23:28:33.759 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.6229ms
2025-11-28 23:28:33.807 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-28 23:28:33.810 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-28 23:28:33.811 +02:00 [DBG] Request did not match any endpoints
2025-11-28 23:28:33.841 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 33.759ms
2025-11-28 23:28:36.875 +02:00 [DBG] Connection id "0HNHEOKAIETC3" accepted.
2025-11-28 23:28:36.876 +02:00 [DBG] Connection id "0HNHEOKAIETC3" started.
2025-11-28 23:28:36.880 +02:00 [DBG] Connection 0HNHEOKAIETC3 established using the following protocol: "Tls13"
2025-11-28 23:28:36.883 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:28:36.888 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:28:36.891 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:28:36.893 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:28:36.895 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:28:36.897 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:28:36.899 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:28:36.937 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:28:36.939 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:28:36.955 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:28:36.957 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:28:36.958 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:28:36.960 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:28:36.961 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:28:36.962 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:28:36.964 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:28:37.049 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-28 23:28:37.214 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:28:37.216 +02:00 [INF] get all schedule called at "2025-11-28T23:28:37.2165020+02:00"
2025-11-28 23:28:37.218 +02:00 [INF] Fetching all schedules
2025-11-28 23:28:37.622 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-28 23:28:37.623 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-28 23:28:37.624 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-28 23:28:37.625 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-28 23:28:37.627 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-28 23:28:37.714 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-28 23:28:37.716 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-28 23:28:37.843 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:28:37.877 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(s => s.Branch)'
2025-11-28 23:28:37.934 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-28 23:28:37.936 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 23:28:37.937 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-28 23:28:37.939 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-11-28 23:28:38.062 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Specialization.Description (string), 44], [Property: Specialization.ImageURL (string) MaxLength(300), 45], [Property: Specialization.Name (string) Required MaxLength(120), 46], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 48], [Property: Branch.Address (string) MaxLength(250), 49], [Property: Branch.BranchName (string) Required MaxLength(150), 50], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Branch.Description (string), 52], [Property: Branch.Email (string) MaxLength(200), 53], [Property: Branch.ImageURL (string) MaxLength(300), 54], [Property: Branch.Latitude (double?), 55], [Property: Branch.Longitude (double?), 56], [Property: Branch.Phone (string) MaxLength(25), 57], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 58] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s0.SpecializationId, s0.CreatedAt, s0.Description, s0.ImageURL, s0.Name, s0.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s0 ON d.SpecializationId == s0.SpecializationId
        INNER JOIN Branches AS b ON s.BranchId == b.BranchId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 23:28:38.087 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:28:38.102 +02:00 [DBG] Created DbConnection. (13ms).
2025-11-28 23:28:38.106 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:38.294 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:38.297 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:28:38.303 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-11-28 23:28:38.305 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-11-28 23:28:38.310 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:28:38.350 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:28:38.379 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.418 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.429 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.458 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.460 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.489 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.491 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.507 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.508 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.523 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.525 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.526 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.527 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.528 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.529 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.530 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.533 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.534 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.535 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.536 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.536 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.538 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.539 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.540 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.541 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.541 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.542 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.543 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.545 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.545 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.546 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.547 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.548 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.549 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.550 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.551 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.552 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.553 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.554 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:38.558 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:38.563 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 207ms reading results.
2025-11-28 23:28:38.566 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:38.570 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (4ms).
2025-11-28 23:28:38.584 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:28:38.586 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:28:38.587 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:28:38.588 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:28:38.589 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:28:38.590 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:28:38.607 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 1642.3558ms
2025-11-28 23:28:38.609 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:28:38.611 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:28:38.614 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:38.616 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 23:28:38.617 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 1734.5658ms
2025-11-28 23:28:42.728 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 23:28:42.733 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 23:28:42.734 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 23:28:42.735 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:28:42.736 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:28:42.737 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:28:42.737 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:28:42.739 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:28:42.740 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:28:42.750 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:28:42.751 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:28:42.752 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:28:42.753 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:28:42.755 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:28:42.755 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:28:42.757 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:28:42.769 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:28:42.777 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:28:42.780 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:28:42.782 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:28:42.783 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:28:42.784 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:28:42.786 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:28:42.789 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:28:42.7892861+02:00"
2025-11-28 23:28:42.790 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 23:28:42.824 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:28:42.829 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-28 23:28:42.834 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 23:28:42.835 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-28 23:28:42.837 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-28 23:28:42.839 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-28 23:28:42.886 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-28 23:28:42.895 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:28:42.903 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:28:42.904 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:28:42.905 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:42.906 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:42.907 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:28:42.908 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:28:42.910 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-28 23:28:42.913 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:28:42.943 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:28:42.945 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:42.947 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:42.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:42.949 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:42.949 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:42.959 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:42.962 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:42.963 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:42.964 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:42.965 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:42.966 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:42.967 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:42.969 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 23ms reading results.
2025-11-28 23:28:42.970 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:42.971 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:28:42.981 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:28:42.982 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:28:42.983 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:28:42.983 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:28:42.984 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:28:42.985 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:28:42.998 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 241.1641ms
2025-11-28 23:28:42.999 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:28:43.000 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:28:43.001 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:43.002 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:28:43.003 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 274.9642ms
2025-11-28 23:28:49.176 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:28:49.178 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:28:49.178 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:28:49.179 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:28:49.180 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:28:49.181 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:28:49.181 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:28:49.183 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 7.0141ms
2025-11-28 23:28:49.185 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:28:49.187 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:28:49.187 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:28:49.188 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:28:49.189 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:28:49.189 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:28:49.190 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:28:49.192 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:28:49.193 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:28:49.196 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:28:49.197 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:28:49.198 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:28:49.199 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:28:49.200 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:28:49.201 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:28:49.202 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:28:49.204 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:28:49.205 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:28:49.207 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:28:49.208 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:28:49.216 +02:00 [DBG] Connection id "0HNHEOKAIETC3", Request id "0HNHEOKAIETC3:00000007": started reading request body.
2025-11-28 23:28:49.217 +02:00 [DBG] Connection id "0HNHEOKAIETC3", Request id "0HNHEOKAIETC3:00000007": done reading request body.
2025-11-28 23:28:49.230 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:28:49.231 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:28:49.232 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:28:49.233 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:28:49.240 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:28:49.241 +02:00 [INF] Add Appointment called at "2025-11-28T23:28:49.2417753+02:00"
2025-11-28 23:28:49.244 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-11-30", Shift: "Evening"
2025-11-28 23:28:49.256 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:28:49.261 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:28:49.261 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:28:49.262 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:49.263 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:49.265 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:28:49.272 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:28:49.277 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(p => p.User)
    .Include(p => p.MedicalRecords)
    .ThenInclude(m => m.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(p => p.PatientId == __id_0)'
2025-11-28 23:28:49.279 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-28 23:28:49.280 +02:00 [DBG] Including navigation: 'Patient.MedicalRecords'.
2025-11-28 23:28:49.281 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-11-28 23:28:49.282 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 23:28:49.298 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 5], [Property: User.AccessFailedCount (int) Required, 6], [Property: User.ConcurrencyStamp (string) Concurrency, 7], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: User.DateOfBirth (DateOnly?), 9], [Property: User.Email (string) Index MaxLength(256), 10], [Property: User.EmailConfirmed (bool) Required, 11], [Property: User.FullName (string) Required MaxLength(150), 12], [Property: User.Gender (GenderType?) MaxLength(10), 13], [Property: User.LockoutEnabled (bool) Required, 14], [Property: User.LockoutEnd (DateTimeOffset?), 15], [Property: User.NormalizedEmail (string) Index MaxLength(256), 16], [Property: User.NormalizedUserName (string) Index MaxLength(256), 17], [Property: User.PasswordHash (string), 18], [Property: User.PhoneNumber (string), 19], [Property: User.PhoneNumberConfirmed (bool) Required, 20], [Property: User.RefreshToken (string), 21], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 22], [Property: User.Role (string) Required MaxLength(50), 23], [Property: User.SecurityStamp (string), 24], [Property: User.TwoFactorEnabled (bool) Required, 25], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: User.UserName (string) MaxLength(256), 27] }
                2 -> 0
                3 -> 5
                4 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 28], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 29], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: MedicalRecord.Diagnosis (string), 31], [Property: MedicalRecord.DoctorId (int) Required FK Index, 32], [Property: MedicalRecord.Notes (string), 33], [Property: MedicalRecord.PatientId (int) Required FK Index, 34], [Property: MedicalRecord.TreatmentPlan (string), 35], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
                5 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Doctor.Available (bool?), 38], [Property: Doctor.Biography (string), 39], [Property: Doctor.ConsultationFees (decimal) Required, 40], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 41], [Property: Doctor.ExperienceYears (int?), 42], [Property: Doctor.ImageURL (string) MaxLength(300), 43], [Property: Doctor.SpecializationId (int) Required FK Index, 44], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Doctor.UserId (string) Required FK Index, 46] }
                6 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
                7 -> 28
                8 -> 37
                9 -> 47
            SELECT t.PatientId, t.CreatedAt, t.EmergencyContact, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t0.RecordId, t0.AppointmentId, t0.CreatedAt, t0.Diagnosis, t0.DoctorId, t0.Notes, t0.PatientId, t0.TreatmentPlan, t0.UpdatedAt, t0.DoctorId0, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt0, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt0, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt1, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt1, t0.UserName
            FROM 
            (
                SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
                FROM Patients AS p
                INNER JOIN Users AS u ON p.UserId == u.Id
                WHERE p.PatientId == @__id_0
            ) AS t
            LEFT JOIN 
            (
                SELECT m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId AS DoctorId0, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt AS CreatedAt0, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt AS UpdatedAt0, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt AS CreatedAt1, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt AS UpdatedAt1, u0.UserName
                FROM MedicalRecords AS m
                INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
                INNER JOIN Users AS u0 ON d.UserId == u0.Id
            ) AS t0 ON t.PatientId == t0.PatientId
            ORDER BY t.PatientId ASC, t.Id ASC, t0.RecordId ASC, t0.DoctorId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:28:49.301 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:28:49.302 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:28:49.303 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 23:28:49.304 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:28:49.318 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:28:49.323 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:49.329 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:49.330 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:49.331 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:49.332 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-28 23:28:49.335 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:28:49.336 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:28:49.337 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:28:49.338 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:28:49.347 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:28:49.349 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:49.350 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:49.351 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:49.352 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:49.353 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:49.354 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:49.355 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:49.356 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:49.357 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:49.358 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:49.358 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:49.359 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:49.360 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-28 23:28:49.363 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-11-28 23:28:49.367 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:28:49.368 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:28:49.369 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:28:49.370 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:28:49.370 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:28:49.374 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:28:49.375 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:49.376 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:28:49.384 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Any(a => a.PatientId == __patientId_0 && a.DoctorId == __doctorId_1 && a.Date == __date_2 && (int)a.Shift == (int)__shift_3)'
2025-11-28 23:28:49.389 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Appointments AS a
                WHERE (((a.PatientId == @__patientId_0) && (a.DoctorId == @__doctorId_1)) && (a.Date == @__date_2)) && (a.Shift == @__shift_3))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:28:49.397 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:28:49.398 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:28:49.402 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-28 23:28:49.403 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:28:49.410 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:28:49.413 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:49.414 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-28 23:28:49.446 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:28:49.449 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:28:49.451 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:49.452 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:28:49.453 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 1
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 23:28:49.475 +02:00 [DBG] Disposing transaction.
2025-11-28 23:28:49.509 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 307.1917ms
2025-11-28 23:28:49.511 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:28:49.559 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:28:49.567 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:28:49.568 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:49.569 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:28:49.570 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 385.7211ms
2025-11-28 23:28:54.776 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:28:54.778 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:28:54.778 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:28:54.779 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:28:54.780 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:28:54.780 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:28:54.781 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:28:54.782 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 6.1339ms
2025-11-28 23:28:54.787 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:28:54.790 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:28:54.791 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:28:54.792 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:28:54.792 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:28:54.793 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:28:54.794 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:28:54.795 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:28:54.796 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:28:54.797 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:28:54.798 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:28:54.799 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:28:54.801 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:28:54.802 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:28:54.804 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:28:54.805 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:28:54.811 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:28:54.814 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:28:54.815 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:28:54.817 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:28:54.819 +02:00 [DBG] Connection id "0HNHEOKAIETC3", Request id "0HNHEOKAIETC3:0000000B": started reading request body.
2025-11-28 23:28:54.820 +02:00 [DBG] Connection id "0HNHEOKAIETC3", Request id "0HNHEOKAIETC3:0000000B": done reading request body.
2025-11-28 23:28:54.821 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:28:54.823 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:28:54.824 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:28:54.825 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:28:54.827 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:28:54.829 +02:00 [INF] Add Appointment called at "2025-11-28T23:28:54.8290660+02:00"
2025-11-28 23:28:54.830 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-11-30", Shift: "Evening"
2025-11-28 23:28:54.832 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:28:54.837 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:28:54.838 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-28 23:28:54.839 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:54.841 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:54.842 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:28:54.843 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:28:54.845 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:28:54.846 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:28:54.847 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:28:54.848 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:28:54.863 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:28:54.866 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:54.867 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:54.868 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:54.869 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:54.870 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-28 23:28:54.872 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:28:54.873 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:28:54.874 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:28:54.875 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:28:54.887 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:28:54.889 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:54.889 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:54.890 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:54.891 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:54.892 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:54.893 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:54.894 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:54.895 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:54.896 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:54.897 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:54.898 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:54.899 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:54.900 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-28 23:28:54.901 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:28:54.901 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:28:54.902 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:28:54.903 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:28:54.907 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:28:54.908 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:54.909 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:28:54.910 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:28:54.911 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:28:54.912 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:28:54.913 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:28:54.917 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:28:54.919 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:54.920 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:28:54.938 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:28:54.939 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:28:54.940 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:54.941 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 23:28:54.942 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 1
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 23:28:54.959 +02:00 [DBG] Disposing transaction.
2025-11-28 23:28:54.990 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 184.6291ms
2025-11-28 23:28:54.991 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:28:55.022 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:28:55.028 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:28:55.029 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:55.030 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:28:55.031 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 244.5358ms
2025-11-28 23:28:58.262 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:28:58.266 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:28:58.267 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:28:58.268 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:28:58.269 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:28:58.270 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:28:58.270 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:28:58.271 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:28:58.272 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:28:58.273 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:28:58.274 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:28:58.275 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:28:58.276 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:28:58.277 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:28:58.278 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:28:58.279 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:28:58.281 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:28:58.282 +02:00 [INF] get all schedule called at "2025-11-28T23:28:58.2821709+02:00"
2025-11-28 23:28:58.283 +02:00 [INF] Fetching all schedules
2025-11-28 23:28:58.284 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:28:58.286 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:28:58.286 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:28:58.287 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:58.288 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:58.289 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:28:58.289 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:28:58.290 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:28:58.291 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:28:58.298 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:28:58.300 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.301 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.302 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.303 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.304 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.305 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.306 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.306 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.307 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.308 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.309 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.310 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.311 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.312 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.313 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.314 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.315 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.316 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.316 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.317 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.318 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.319 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.320 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.321 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.322 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.322 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.323 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.324 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.325 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.326 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.327 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.328 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.329 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.329 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.330 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.331 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.332 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.333 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.334 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:28:58.335 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:58.336 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 35ms reading results.
2025-11-28 23:28:58.337 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:58.338 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:28:58.339 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:28:58.340 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:28:58.341 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:28:58.341 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:28:58.342 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:28:58.343 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:28:58.344 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 64.3649ms
2025-11-28 23:28:58.345 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:28:58.346 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:28:58.346 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:28:58.347 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:28:58.348 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 85.8462ms
2025-11-28 23:29:05.198 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 23:29:05.202 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 23:29:05.204 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 23:29:05.205 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:29:05.205 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:29:05.206 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:29:05.206 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:29:05.207 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:29:05.208 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:29:05.209 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:29:05.210 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:29:05.211 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:29:05.212 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:29:05.213 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:29:05.213 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:29:05.214 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:29:05.217 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:29:05.218 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:29:05.219 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:29:05.220 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:29:05.221 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:29:05.222 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:29:05.223 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:29:05.224 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:29:05.2241855+02:00"
2025-11-28 23:29:05.224 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 23:29:05.225 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:29:05.227 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:29:05.227 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:29:05.228 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:05.229 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:05.230 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:05.231 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:05.231 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:29:05.232 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:29:05.243 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:29:05.245 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:05.246 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:05.246 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:05.248 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:05.248 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:05.249 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:05.250 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:05.251 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:05.252 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:05.253 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:05.254 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:05.255 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:05.255 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-28 23:29:05.256 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:05.257 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:29:05.258 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:29:05.260 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:29:05.260 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:29:05.261 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:29:05.261 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:29:05.262 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:29:05.263 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 48.7474ms
2025-11-28 23:29:05.264 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:29:05.265 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:29:05.266 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:05.267 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:29:05.268 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 70.0917ms
2025-11-28 23:29:08.041 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:29:08.043 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:29:08.044 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:29:08.044 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:29:08.045 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:29:08.046 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:29:08.046 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:29:08.047 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.6293ms
2025-11-28 23:29:08.048 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:29:08.050 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:29:08.051 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:29:08.052 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:29:08.053 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:29:08.054 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:29:08.054 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:29:08.055 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:29:08.056 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:29:08.056 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:29:08.057 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:29:08.058 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:29:08.059 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:29:08.060 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:29:08.061 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:29:08.062 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:29:08.063 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:29:08.064 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:29:08.065 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:29:08.066 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:29:08.067 +02:00 [DBG] Connection id "0HNHEOKAIETC3", Request id "0HNHEOKAIETC3:00000013": started reading request body.
2025-11-28 23:29:08.068 +02:00 [DBG] Connection id "0HNHEOKAIETC3", Request id "0HNHEOKAIETC3:00000013": done reading request body.
2025-11-28 23:29:08.068 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:29:08.069 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:29:08.070 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:29:08.071 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:29:08.071 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:29:08.072 +02:00 [INF] Add Appointment called at "2025-11-28T23:29:08.0727041+02:00"
2025-11-28 23:29:08.073 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-11-30", Shift: "Evening"
2025-11-28 23:29:08.074 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:29:08.080 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:29:08.081 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:29:08.081 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:08.082 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:08.083 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:29:08.084 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:29:08.085 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:08.086 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:08.086 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:29:08.087 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:29:08.098 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:29:08.100 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:08.101 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:08.102 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:08.103 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:08.104 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:29:08.105 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:08.105 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:08.106 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:29:08.107 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:29:08.115 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:29:08.117 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:08.118 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:08.119 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:08.120 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:08.121 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:08.122 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:08.123 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:08.124 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:08.124 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:08.125 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:08.126 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:08.127 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:08.128 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-28 23:29:08.129 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:08.130 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:08.131 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:29:08.131 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:29:08.134 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:29:08.135 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:08.136 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:29:08.137 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:08.138 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:08.139 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:29:08.139 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:29:08.143 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:29:08.145 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:08.145 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:29:08.162 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:29:08.163 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:29:08.163 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:08.164 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:29:08.165 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 1
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 23:29:08.180 +02:00 [DBG] Disposing transaction.
2025-11-28 23:29:08.210 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 147.9655ms
2025-11-28 23:29:08.211 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:29:08.242 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:29:08.246 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:29:08.247 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:08.248 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 23:29:08.249 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 200.9956ms
2025-11-28 23:29:10.573 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:29:10.576 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:29:10.577 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:29:10.578 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:29:10.579 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:29:10.580 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:29:10.580 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:29:10.581 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:29:10.582 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:29:10.583 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:29:10.585 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:29:10.585 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:29:10.586 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:29:10.587 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:29:10.588 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:29:10.589 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:29:10.591 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:29:10.592 +02:00 [INF] get all schedule called at "2025-11-28T23:29:10.5928398+02:00"
2025-11-28 23:29:10.593 +02:00 [INF] Fetching all schedules
2025-11-28 23:29:10.594 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:29:10.595 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:29:10.596 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:29:10.597 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:10.598 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:10.598 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:10.599 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:10.600 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:29:10.601 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:29:10.608 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:29:10.610 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.611 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.612 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.613 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.614 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.615 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.615 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.616 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.617 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.618 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.619 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.620 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.621 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.621 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.622 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.623 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.624 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.625 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.626 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.627 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.628 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.629 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.630 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.631 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.631 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.632 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.633 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.634 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.635 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.636 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.637 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.637 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.638 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.639 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.640 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.641 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.642 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.643 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.643 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:10.644 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:10.645 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 35ms reading results.
2025-11-28 23:29:10.647 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:10.648 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:29:10.649 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:29:10.650 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:29:10.651 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:29:10.652 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:29:10.652 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:29:10.653 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:29:10.654 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 64.8653ms
2025-11-28 23:29:10.655 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:29:10.656 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:29:10.657 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:10.658 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:29:10.659 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 85.7333ms
2025-11-28 23:29:19.364 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/3 - null null
2025-11-28 23:29:19.366 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/3'
2025-11-28 23:29:19.367 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/3'
2025-11-28 23:29:19.368 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:29:19.369 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:29:19.369 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:29:19.370 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:29:19.371 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:29:19.371 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:29:19.372 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:29:19.373 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:29:19.374 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:29:19.375 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:29:19.376 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:29:19.377 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:29:19.378 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:29:19.386 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:29:19.387 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:29:19.388 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:29:19.389 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:29:19.389 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:29:19.390 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:29:19.391 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:29:19.392 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:29:19.3924213+02:00"
2025-11-28 23:29:19.392 +02:00 [INF] Fetching doctor with ID 3
2025-11-28 23:29:19.394 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:29:19.395 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:29:19.396 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:29:19.396 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:19.397 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:19.398 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:19.399 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:19.400 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:29:19.401 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:29:19.410 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:29:19.412 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:19.413 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:19.414 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:19.415 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:19.415 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:19.416 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:19.417 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:19.418 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:19.419 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:19.419 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:19.420 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-28 23:29:19.421 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:19.422 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:29:19.423 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:29:19.424 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:29:19.425 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:29:19.425 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:29:19.426 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:29:19.427 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:29:19.428 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 49.6164ms
2025-11-28 23:29:19.429 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:29:19.429 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:29:19.430 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:19.431 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:29:19.432 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/3 - 200 null application/json; charset=utf-8 67.5447ms
2025-11-28 23:29:26.267 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:29:26.269 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:29:26.269 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:29:26.270 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:29:26.271 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:29:26.271 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:29:26.272 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:29:26.272 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.7642ms
2025-11-28 23:29:26.274 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:29:26.277 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:29:26.277 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:29:26.278 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:29:26.279 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:29:26.279 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:29:26.280 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:29:26.281 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:29:26.282 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:29:26.282 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:29:26.284 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:29:26.284 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:29:26.285 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:29:26.286 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:29:26.287 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:29:26.288 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:29:26.290 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:29:26.291 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:29:26.292 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:29:26.293 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:29:26.294 +02:00 [DBG] Connection id "0HNHEOKAIETC3", Request id "0HNHEOKAIETC3:0000001B": started reading request body.
2025-11-28 23:29:26.295 +02:00 [DBG] Connection id "0HNHEOKAIETC3", Request id "0HNHEOKAIETC3:0000001B": done reading request body.
2025-11-28 23:29:26.296 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:29:26.296 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:29:26.297 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:29:26.298 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:29:26.299 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:29:26.300 +02:00 [INF] Add Appointment called at "2025-11-28T23:29:26.3004354+02:00"
2025-11-28 23:29:26.300 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 3, Date: "2025-12-02", Shift: "Morning"
2025-11-28 23:29:26.302 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:29:26.303 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:29:26.304 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:29:26.305 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:26.305 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:26.306 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:29:26.307 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:29:26.308 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:26.309 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:26.310 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:29:26.310 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:29:26.320 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:29:26.322 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.323 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.324 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.325 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:26.326 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:29:26.327 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:26.328 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:26.328 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:29:26.329 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:29:26.337 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:29:26.339 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.340 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.341 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.341 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.342 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.343 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.344 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.345 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.346 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.347 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:26.348 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-28 23:29:26.349 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:26.349 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:26.350 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:29:26.351 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:29:26.353 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:29:26.355 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:26.355 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:29:26.357 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:26.357 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:26.358 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:29:26.359 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:29:26.363 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:29:26.365 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:26.365 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:29:26.381 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.400 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.403 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.405 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.409 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.413 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:29:26.464 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:29:26.472 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:29:26.473 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:29:26.475 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:29:26.525 +02:00 [DBG] Creating transaction savepoint.
2025-11-28 23:29:26.534 +02:00 [DBG] Created transaction savepoint.
2025-11-28 23:29:26.537 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:26.537 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:26.540 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-28 23:29:26.540 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:29:26.545 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:29:26.553 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-28 23:29:26.558 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:26.559 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-28 23:29:26.567 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:26.569 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 23:29:26.571 +02:00 [DBG] Committing transaction.
2025-11-28 23:29:26.573 +02:00 [DBG] Committed transaction.
2025-11-28 23:29:26.574 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:26.575 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:29:26.576 +02:00 [INF] Appointment created successfully with ID: 6
2025-11-28 23:29:26.579 +02:00 [DBG] Disposing transaction.
2025-11-28 23:29:26.581 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:29:26.582 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:29:26.583 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:29:26.583 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:29:26.583 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:29:26.584 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-28 23:29:26.597 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[6],action=[GetById],controller=[Appointment])
2025-11-28 23:29:26.600 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/6 and 
2025-11-28 23:29:26.601 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/6
2025-11-28 23:29:26.606 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 317.5349ms
2025-11-28 23:29:26.607 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:29:26.608 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:29:26.609 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:26.609 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:29:26.610 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payments/6/paymob - null null
2025-11-28 23:29:26.611 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 337.174ms
2025-11-28 23:29:26.612 +02:00 [DBG] No candidates found for the request path '/api/Payments/6/paymob'
2025-11-28 23:29:26.615 +02:00 [DBG] Request did not match any endpoints
2025-11-28 23:29:26.616 +02:00 [DBG] OPTIONS requests are not supported
2025-11-28 23:29:26.616 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:29:26.617 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:29:26.617 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:29:26.618 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payments/6/paymob - 204 null null 7.7147ms
2025-11-28 23:29:26.619 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payments/6/paymob - application/json 2
2025-11-28 23:29:26.622 +02:00 [DBG] No candidates found for the request path '/api/Payments/6/paymob'
2025-11-28 23:29:26.622 +02:00 [DBG] Request did not match any endpoints
2025-11-28 23:29:26.623 +02:00 [DBG] POST requests are not supported
2025-11-28 23:29:26.623 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:29:26.624 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:29:26.625 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:29:26.625 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payments/6/paymob - 404 0 null 6.2353ms
2025-11-28 23:29:26.628 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7217/api/Payments/6/paymob, Response status code: 404
2025-11-28 23:29:26.629 +02:00 [DBG] Connection id "0HNHEOKAIETC3", Request id "0HNHEOKAIETC3:0000001F": started reading request body.
2025-11-28 23:29:26.630 +02:00 [DBG] Connection id "0HNHEOKAIETC3", Request id "0HNHEOKAIETC3:0000001F": done reading request body.
2025-11-28 23:29:31.027 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:29:31.029 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:29:31.030 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:29:31.031 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:29:31.031 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:29:31.032 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:29:31.033 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:29:31.033 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:29:31.034 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:29:31.035 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:29:31.036 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:29:31.037 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:29:31.038 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:29:31.039 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:29:31.040 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:29:31.041 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:29:31.042 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:29:31.043 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:29:31.043 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:29:31.044 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:29:31.045 +02:00 [DBG] Connection id "0HNHEOKAIETC3", Request id "0HNHEOKAIETC3:00000021": started reading request body.
2025-11-28 23:29:31.046 +02:00 [DBG] Connection id "0HNHEOKAIETC3", Request id "0HNHEOKAIETC3:00000021": done reading request body.
2025-11-28 23:29:31.047 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:29:31.048 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:29:31.048 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:29:31.049 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:29:31.050 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:29:31.051 +02:00 [INF] Add Appointment called at "2025-11-28T23:29:31.0513093+02:00"
2025-11-28 23:29:31.051 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 3, Date: "2025-12-02", Shift: "Morning"
2025-11-28 23:29:31.053 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:29:31.054 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:29:31.055 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:29:31.055 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:31.056 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:31.057 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:29:31.058 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:29:31.059 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:31.059 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:31.060 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:29:31.061 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:29:31.071 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:29:31.073 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:31.074 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:31.075 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:31.076 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:31.077 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:29:31.078 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:31.078 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:31.079 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:29:31.080 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:29:31.089 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:29:31.091 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:31.091 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:31.092 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:31.093 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:31.094 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:31.095 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:31.096 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:31.097 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:31.098 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:29:31.099 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:31.100 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-28 23:29:31.101 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:31.102 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:31.103 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:29:31.104 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:29:31.106 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:29:31.108 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:31.109 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:29:31.110 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:29:31.111 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:29:31.112 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:29:31.113 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:29:31.116 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:29:31.118 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:31.118 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:29:31.136 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:29:31.137 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:29:31.137 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:31.138 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:29:31.139 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 3
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 23:29:31.154 +02:00 [DBG] Disposing transaction.
2025-11-28 23:29:31.184 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 143.0274ms
2025-11-28 23:29:31.185 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:29:31.218 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:29:31.223 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:29:31.224 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:29:31.225 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 23:29:31.226 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 199.1909ms
2025-11-28 23:31:29.381 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/3 - null null
2025-11-28 23:31:29.387 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/3'
2025-11-28 23:31:29.388 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/3'
2025-11-28 23:31:29.389 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:31:29.390 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:31:29.391 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:31:29.392 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:31:29.392 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:31:29.393 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:31:29.394 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:31:29.395 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:31:29.396 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:31:29.397 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:31:29.398 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:31:29.399 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:31:29.400 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:31:29.401 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:31:29.402 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:31:29.403 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:31:29.404 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:31:29.405 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:31:29.406 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:31:29.407 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:31:29.407 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:31:29.4079203+02:00"
2025-11-28 23:31:29.408 +02:00 [INF] Fetching doctor with ID 3
2025-11-28 23:31:29.409 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:31:29.411 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:31:29.411 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:31:29.412 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:31:29.413 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:31:29.414 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:31:29.414 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:31:29.415 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:31:29.416 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:31:29.432 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:31:29.434 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:31:29.435 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:31:29.436 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:31:29.437 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:31:29.438 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:31:29.438 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:31:29.439 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:31:29.440 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:31:29.441 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:31:29.441 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:31:29.442 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-28 23:31:29.443 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:31:29.444 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:31:29.445 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:31:29.446 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:31:29.447 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:31:29.447 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:31:29.447 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:31:29.448 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:31:29.449 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 49.2278ms
2025-11-28 23:31:29.450 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:31:29.451 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:31:29.452 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:31:29.452 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:31:29.453 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/3 - 200 null application/json; charset=utf-8 72.6129ms
2025-11-28 23:32:00.565 +02:00 [DBG] Connection id "0HNHEOKAIETC2" received FIN.
2025-11-28 23:32:00.565 +02:00 [DBG] Connection id "0HNHEOKAIETC3" received FIN.
2025-11-28 23:32:00.572 +02:00 [DBG] Connection id "0HNHEOKAIETC2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:32:00.572 +02:00 [DBG] Connection id "0HNHEOKAIETC3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:32:00.575 +02:00 [DBG] Connection id "0HNHEOKAIETC3" is closed. The last processed stream ID was 35.
2025-11-28 23:32:00.575 +02:00 [DBG] Connection id "0HNHEOKAIETC2" is closed. The last processed stream ID was 7.
2025-11-28 23:32:00.582 +02:00 [DBG] The connection queue processing loop for 0HNHEOKAIETC2 completed.
2025-11-28 23:32:00.582 +02:00 [DBG] The connection queue processing loop for 0HNHEOKAIETC3 completed.
2025-11-28 23:32:00.584 +02:00 [DBG] Connection id "0HNHEOKAIETC3" stopped.
2025-11-28 23:32:00.584 +02:00 [DBG] Connection id "0HNHEOKAIETC2" stopped.
2025-11-28 23:32:18.987 +02:00 [DBG] Connection id "0HNHEOKAIETC4" accepted.
2025-11-28 23:32:18.987 +02:00 [DBG] Connection id "0HNHEOKAIETC4" started.
2025-11-28 23:32:18.990 +02:00 [DBG] Connection 0HNHEOKAIETC4 established using the following protocol: "Tls13"
2025-11-28 23:32:18.992 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:32:18.993 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:32:18.994 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:32:18.995 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:32:18.995 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:32:18.996 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:32:18.997 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:32:18.997 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.6962ms
2025-11-28 23:32:18.999 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:32:19.001 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:32:19.002 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:32:19.002 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:32:19.003 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:32:19.004 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:32:19.004 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:32:19.005 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:32:19.006 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:32:19.006 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:32:19.007 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:32:19.008 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:32:19.009 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:32:19.010 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:32:19.011 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:32:19.012 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:32:19.013 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:32:19.014 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:32:19.014 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:32:19.015 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:32:19.016 +02:00 [DBG] Connection id "0HNHEOKAIETC4", Request id "0HNHEOKAIETC4:00000003": started reading request body.
2025-11-28 23:32:19.017 +02:00 [DBG] Connection id "0HNHEOKAIETC4", Request id "0HNHEOKAIETC4:00000003": done reading request body.
2025-11-28 23:32:19.018 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:32:19.019 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:32:19.019 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:32:19.020 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:32:19.021 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:32:19.022 +02:00 [INF] Add Appointment called at "2025-11-28T23:32:19.0221418+02:00"
2025-11-28 23:32:19.022 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 3, Date: "2025-12-02", Shift: "Morning"
2025-11-28 23:32:19.024 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:32:19.025 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:32:19.025 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:32:19.026 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:19.027 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:19.028 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:32:19.028 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:32:19.029 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:32:19.030 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:32:19.031 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:32:19.032 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:32:19.045 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:32:19.047 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:19.048 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:19.048 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:19.049 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:19.050 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:32:19.051 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:32:19.052 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:32:19.053 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:32:19.054 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:32:19.063 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:32:19.065 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:19.066 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:19.067 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:19.067 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:19.068 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:19.070 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:19.071 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:19.072 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:19.073 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:19.074 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:19.075 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-28 23:32:19.076 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:32:19.077 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:32:19.078 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:32:19.079 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:32:19.081 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:32:19.083 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:19.083 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:32:19.085 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:32:19.085 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:32:19.086 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:32:19.087 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:32:19.090 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:32:19.092 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:19.092 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:32:19.107 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:32:19.108 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:32:19.108 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:19.109 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:32:19.110 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 3
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 23:32:19.124 +02:00 [DBG] Disposing transaction.
2025-11-28 23:32:19.151 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 139.4958ms
2025-11-28 23:32:19.153 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:32:19.184 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:32:19.188 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:32:19.190 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:19.191 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 23:32:19.192 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 193.6453ms
2025-11-28 23:32:20.567 +02:00 [DBG] Connection id "0HNHEOKAIETC4" received FIN.
2025-11-28 23:32:20.568 +02:00 [DBG] Connection id "0HNHEOKAIETC4" is closed. The last processed stream ID was 3.
2025-11-28 23:32:20.568 +02:00 [DBG] The connection queue processing loop for 0HNHEOKAIETC4 completed.
2025-11-28 23:32:20.569 +02:00 [DBG] Connection id "0HNHEOKAIETC4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:32:20.571 +02:00 [DBG] Connection id "0HNHEOKAIETC4" stopped.
2025-11-28 23:32:20.859 +02:00 [DBG] Connection id "0HNHEOKAIETC5" accepted.
2025-11-28 23:32:20.860 +02:00 [DBG] Connection id "0HNHEOKAIETC5" started.
2025-11-28 23:32:20.863 +02:00 [DBG] Connection 0HNHEOKAIETC5 established using the following protocol: "Tls13"
2025-11-28 23:32:20.865 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:32:20.868 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:32:20.869 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:32:20.870 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:32:20.871 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:32:20.872 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:32:20.872 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:32:20.873 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:32:20.874 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:32:20.875 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:32:20.876 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:32:20.877 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:32:20.879 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:32:20.880 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:32:20.881 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:32:20.882 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:32:20.883 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:32:20.884 +02:00 [INF] get all schedule called at "2025-11-28T23:32:20.8840120+02:00"
2025-11-28 23:32:20.884 +02:00 [INF] Fetching all schedules
2025-11-28 23:32:20.885 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:32:20.887 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:32:20.888 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:32:20.888 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:20.889 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:20.890 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:32:20.890 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:32:20.891 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:32:20.892 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:32:20.899 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:32:20.901 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.902 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.903 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.904 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.904 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.905 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.906 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.907 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.908 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.909 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.909 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.910 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.911 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.912 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.913 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.913 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.915 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.916 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.916 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.917 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.918 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.919 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.920 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.920 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.921 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.922 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.923 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.924 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.924 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.925 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.926 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.927 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.928 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.929 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.929 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.930 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.932 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.933 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:20.934 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:20.935 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 34ms reading results.
2025-11-28 23:32:20.936 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:20.937 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 23:32:20.939 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:32:20.940 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:32:20.941 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:32:20.941 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:32:20.942 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:32:20.943 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:32:20.944 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 62.2343ms
2025-11-28 23:32:20.945 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:32:20.945 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:32:20.946 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:20.947 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:32:20.948 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 82.7795ms
2025-11-28 23:32:33.978 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 23:32:33.980 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 23:32:33.981 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 23:32:33.982 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:32:33.983 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:32:33.983 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:32:33.984 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:32:33.984 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:32:33.985 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:32:33.986 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:32:33.987 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:32:33.988 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:32:33.989 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:32:33.990 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:32:33.991 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:32:33.992 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:32:33.993 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:32:33.994 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:32:33.995 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:32:33.996 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:32:33.997 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:32:33.998 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:32:33.999 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:32:34.000 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:32:34.0000956+02:00"
2025-11-28 23:32:34.000 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 23:32:34.002 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:32:34.003 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:32:34.003 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:32:34.004 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:34.005 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:34.006 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:32:34.007 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:32:34.008 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:32:34.008 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:32:34.018 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:32:34.020 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:34.021 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:34.022 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:34.023 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:34.023 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:34.024 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:34.025 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:34.026 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:34.027 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:34.028 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:34.028 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:34.029 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:34.030 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-28 23:32:34.031 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:34.032 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:32:34.033 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:32:34.034 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:32:34.034 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:32:34.035 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:32:34.035 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:32:34.036 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:32:34.037 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 45.0721ms
2025-11-28 23:32:34.038 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:32:34.039 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:32:34.040 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:34.041 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:32:34.041 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 64.1101ms
2025-11-28 23:32:35.569 +02:00 [DBG] Connection id "0HNHEOKAIETC5" received FIN.
2025-11-28 23:32:35.571 +02:00 [DBG] Connection id "0HNHEOKAIETC5" is closed. The last processed stream ID was 3.
2025-11-28 23:32:35.571 +02:00 [DBG] The connection queue processing loop for 0HNHEOKAIETC5 completed.
2025-11-28 23:32:35.572 +02:00 [DBG] Connection id "0HNHEOKAIETC5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:32:35.574 +02:00 [DBG] Connection id "0HNHEOKAIETC5" stopped.
2025-11-28 23:32:37.562 +02:00 [DBG] Connection id "0HNHEOKAIETC6" accepted.
2025-11-28 23:32:37.563 +02:00 [DBG] Connection id "0HNHEOKAIETC6" started.
2025-11-28 23:32:37.565 +02:00 [DBG] Connection 0HNHEOKAIETC6 established using the following protocol: "Tls13"
2025-11-28 23:32:37.567 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:32:37.569 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:32:37.569 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:32:37.570 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:32:37.571 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:32:37.571 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:32:37.572 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:32:37.572 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.7514ms
2025-11-28 23:32:37.574 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:32:37.576 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:32:37.577 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:32:37.578 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:32:37.579 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:32:37.579 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:32:37.580 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:32:37.581 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:32:37.581 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:32:37.582 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:32:37.583 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:32:37.584 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:32:37.585 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:32:37.586 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:32:37.587 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:32:37.588 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:32:37.589 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:32:37.590 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:32:37.591 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:32:37.592 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:32:37.592 +02:00 [DBG] Connection id "0HNHEOKAIETC6", Request id "0HNHEOKAIETC6:00000003": started reading request body.
2025-11-28 23:32:37.593 +02:00 [DBG] Connection id "0HNHEOKAIETC6", Request id "0HNHEOKAIETC6:00000003": done reading request body.
2025-11-28 23:32:37.594 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:32:37.595 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:32:37.596 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:32:37.597 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:32:37.598 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:32:37.598 +02:00 [INF] Add Appointment called at "2025-11-28T23:32:37.5989827+02:00"
2025-11-28 23:32:37.599 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-12-04", Shift: "Evening"
2025-11-28 23:32:37.601 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:32:37.602 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:32:37.602 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:32:37.603 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:37.604 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:37.605 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:32:37.606 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:32:37.607 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:32:37.607 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:32:37.608 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:32:37.609 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:32:37.619 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:32:37.620 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.621 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.622 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.623 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:37.624 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-28 23:32:37.626 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:32:37.626 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:32:37.627 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:32:37.628 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:32:37.635 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:32:37.637 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.638 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.639 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.640 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.640 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.641 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.642 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.643 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.644 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.644 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.645 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.646 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:37.647 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-28 23:32:37.648 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:32:37.649 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:32:37.650 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:32:37.650 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:32:37.653 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:32:37.655 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:37.656 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:32:37.657 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:32:37.658 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:32:37.659 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:32:37.659 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:32:37.663 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:32:37.664 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:37.665 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:32:37.668 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.669 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.669 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.670 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.671 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.672 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:32:37.673 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:32:37.674 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:32:37.674 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:32:37.675 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:32:37.677 +02:00 [DBG] Creating transaction savepoint.
2025-11-28 23:32:37.678 +02:00 [DBG] Created transaction savepoint.
2025-11-28 23:32:37.679 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:32:37.679 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:32:37.680 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:32:37.681 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:32:37.685 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:32:37.687 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-28 23:32:37.688 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:37.689 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:32:37.690 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:32:37.691 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 23:32:37.692 +02:00 [DBG] Committing transaction.
2025-11-28 23:32:37.692 +02:00 [DBG] Committed transaction.
2025-11-28 23:32:37.693 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:37.694 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:32:37.695 +02:00 [INF] Appointment created successfully with ID: 7
2025-11-28 23:32:37.695 +02:00 [DBG] Disposing transaction.
2025-11-28 23:32:37.696 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:32:37.697 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:32:37.698 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:32:37.698 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:32:37.699 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:32:37.699 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-28 23:32:37.701 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[7],action=[GetById],controller=[Appointment])
2025-11-28 23:32:37.702 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/7 and 
2025-11-28 23:32:37.703 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/7
2025-11-28 23:32:37.704 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 115.8603ms
2025-11-28 23:32:37.705 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:32:37.705 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:32:37.706 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:32:37.707 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:32:37.707 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payments/7/paymob - null null
2025-11-28 23:32:37.708 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 134.7478ms
2025-11-28 23:32:37.710 +02:00 [DBG] No candidates found for the request path '/api/Payments/7/paymob'
2025-11-28 23:32:37.712 +02:00 [DBG] Request did not match any endpoints
2025-11-28 23:32:37.713 +02:00 [DBG] OPTIONS requests are not supported
2025-11-28 23:32:37.713 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:32:37.714 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:32:37.714 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:32:37.715 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payments/7/paymob - 204 null null 7.7895ms
2025-11-28 23:32:37.716 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payments/7/paymob - application/json 2
2025-11-28 23:32:37.719 +02:00 [DBG] No candidates found for the request path '/api/Payments/7/paymob'
2025-11-28 23:32:37.720 +02:00 [DBG] Request did not match any endpoints
2025-11-28 23:32:37.721 +02:00 [DBG] POST requests are not supported
2025-11-28 23:32:37.721 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:32:37.722 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:32:37.723 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:32:37.723 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payments/7/paymob - 404 0 null 7.2558ms
2025-11-28 23:32:37.726 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7217/api/Payments/7/paymob, Response status code: 404
2025-11-28 23:32:37.727 +02:00 [DBG] Connection id "0HNHEOKAIETC6", Request id "0HNHEOKAIETC6:00000007": started reading request body.
2025-11-28 23:32:37.728 +02:00 [DBG] Connection id "0HNHEOKAIETC6", Request id "0HNHEOKAIETC6:00000007": done reading request body.
2025-11-28 23:32:45.570 +02:00 [DBG] Connection id "0HNHEOKAIETC6" received FIN.
2025-11-28 23:32:45.572 +02:00 [DBG] Connection id "0HNHEOKAIETC6" is closed. The last processed stream ID was 7.
2025-11-28 23:32:45.572 +02:00 [DBG] The connection queue processing loop for 0HNHEOKAIETC6 completed.
2025-11-28 23:32:45.573 +02:00 [DBG] Connection id "0HNHEOKAIETC6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:32:45.575 +02:00 [DBG] Connection id "0HNHEOKAIETC6" stopped.
2025-11-28 23:35:10.391 +02:00 [DBG] Connection id "0HNHEOKAIETC7" accepted.
2025-11-28 23:35:10.396 +02:00 [DBG] Connection id "0HNHEOKAIETC7" started.
2025-11-28 23:35:10.401 +02:00 [DBG] Connection 0HNHEOKAIETC7 established using the following protocol: "Tls13"
2025-11-28 23:35:10.407 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 23:35:10.414 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 23:35:10.415 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 23:35:10.416 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:35:10.417 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:35:10.418 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:35:10.418 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:35:10.419 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:35:10.420 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:35:10.421 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:35:10.422 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:35:10.423 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:35:10.424 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:35:10.426 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:35:10.427 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:35:10.428 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:35:10.429 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:35:10.430 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:35:10.431 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:35:10.432 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:35:10.433 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:35:10.434 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:35:10.435 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:35:10.437 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:35:10.4369680+02:00"
2025-11-28 23:35:10.437 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 23:35:10.438 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:35:10.440 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:35:10.441 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:35:10.441 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:35:10.442 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:35:10.443 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:35:10.444 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:35:10.445 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:35:10.446 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:35:10.456 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:35:10.457 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:35:10.458 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:35:10.459 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:35:10.460 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:35:10.461 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:35:10.461 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:35:10.462 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:35:10.463 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:35:10.464 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:35:10.464 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:35:10.465 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:35:10.466 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:35:10.467 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-28 23:35:10.468 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:35:10.468 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:35:10.469 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:35:10.471 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:35:10.471 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:35:10.472 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:35:10.472 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:35:10.473 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:35:10.474 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 45.9736ms
2025-11-28 23:35:10.475 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:35:10.475 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:35:10.476 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:35:10.477 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:35:10.478 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 70.7568ms
2025-11-28 23:35:15.591 +02:00 [DBG] Connection id "0HNHEOKAIETC7" received FIN.
2025-11-28 23:35:15.592 +02:00 [DBG] Connection id "0HNHEOKAIETC7" is closed. The last processed stream ID was 1.
2025-11-28 23:35:15.592 +02:00 [DBG] The connection queue processing loop for 0HNHEOKAIETC7 completed.
2025-11-28 23:35:15.593 +02:00 [DBG] Connection id "0HNHEOKAIETC7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:35:15.596 +02:00 [DBG] Connection id "0HNHEOKAIETC7" stopped.
2025-11-28 23:37:33.094 +02:00 [DBG] Connection id "0HNHEOKAIETC8" accepted.
2025-11-28 23:37:33.097 +02:00 [DBG] Connection id "0HNHEOKAIETC8" started.
2025-11-28 23:37:33.104 +02:00 [DBG] Connection 0HNHEOKAIETC8 established using the following protocol: "Tls13"
2025-11-28 23:37:33.111 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 23:37:33.118 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 23:37:33.119 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 23:37:33.120 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:37:33.121 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:37:33.122 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:37:33.123 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:37:33.124 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:37:33.125 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:37:33.125 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:37:33.127 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:37:33.128 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:37:33.129 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:37:33.131 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:37:33.132 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:37:33.133 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:37:33.134 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:37:33.135 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:37:33.136 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:37:33.137 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:37:33.138 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:37:33.139 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:37:33.140 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:37:33.142 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:37:33.1420215+02:00"
2025-11-28 23:37:33.142 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 23:37:33.144 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:37:33.146 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:37:33.146 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:37:33.147 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:37:33.148 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:37:33.150 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:37:33.151 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:37:33.152 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 23:37:33.153 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:37:33.177 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:37:33.180 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:33.181 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:33.182 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:33.183 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:33.184 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:33.185 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:33.186 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:33.188 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:33.188 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:33.190 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:33.191 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:33.192 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:37:33.193 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-28 23:37:33.194 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:37:33.195 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:37:33.196 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:37:33.198 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:37:33.198 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:37:33.199 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:37:33.199 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:37:33.200 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:37:33.201 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 68.556ms
2025-11-28 23:37:33.202 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:37:33.203 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:37:33.204 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:37:33.205 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:37:33.206 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 95.5992ms
2025-11-28 23:37:35.612 +02:00 [DBG] Connection id "0HNHEOKAIETC8" received FIN.
2025-11-28 23:37:35.613 +02:00 [DBG] Connection id "0HNHEOKAIETC8" is closed. The last processed stream ID was 1.
2025-11-28 23:37:35.613 +02:00 [DBG] The connection queue processing loop for 0HNHEOKAIETC8 completed.
2025-11-28 23:37:35.614 +02:00 [DBG] Connection id "0HNHEOKAIETC8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:37:35.617 +02:00 [DBG] Connection id "0HNHEOKAIETC8" stopped.
2025-11-28 23:37:58.205 +02:00 [DBG] Connection id "0HNHEOKAIETC9" accepted.
2025-11-28 23:37:58.211 +02:00 [DBG] Connection id "0HNHEOKAIETC9" started.
2025-11-28 23:37:58.216 +02:00 [DBG] Connection 0HNHEOKAIETC9 established using the following protocol: "Tls13"
2025-11-28 23:37:58.223 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 23:37:58.234 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 23:37:58.235 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 23:37:58.236 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:37:58.237 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:37:58.238 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:37:58.238 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:37:58.239 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:37:58.240 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:37:58.241 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:37:58.242 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:37:58.244 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:37:58.245 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:37:58.246 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:37:58.247 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:37:58.249 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:37:58.250 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:37:58.251 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:37:58.252 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:37:58.253 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:37:58.254 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:37:58.255 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:37:58.257 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:37:58.258 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:37:58.2583890+02:00"
2025-11-28 23:37:58.259 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 23:37:58.260 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:37:58.262 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:37:58.262 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:37:58.263 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:37:58.264 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:37:58.265 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:37:58.266 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:37:58.267 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:37:58.268 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:37:58.280 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:37:58.282 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:58.284 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:58.285 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:58.286 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:58.287 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:58.288 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:58.289 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:58.290 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:58.291 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:58.292 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:58.293 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:37:58.294 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:37:58.295 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-28 23:37:58.296 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:37:58.297 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:37:58.298 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:37:58.299 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:37:58.300 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:37:58.301 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:37:58.301 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:37:58.302 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:37:58.303 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 54.6031ms
2025-11-28 23:37:58.304 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:37:58.306 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:37:58.306 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:37:58.307 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 23:37:58.309 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 85.7557ms
2025-11-28 23:38:05.617 +02:00 [DBG] Connection id "0HNHEOKAIETC9" received FIN.
2025-11-28 23:38:05.618 +02:00 [DBG] Connection id "0HNHEOKAIETC9" is closed. The last processed stream ID was 1.
2025-11-28 23:38:05.618 +02:00 [DBG] The connection queue processing loop for 0HNHEOKAIETC9 completed.
2025-11-28 23:38:05.619 +02:00 [DBG] Connection id "0HNHEOKAIETC9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:38:05.621 +02:00 [DBG] Connection id "0HNHEOKAIETC9" stopped.
2025-11-28 23:38:12.137 +02:00 [DBG] Connection id "0HNHEOKAIETCA" accepted.
2025-11-28 23:38:12.138 +02:00 [DBG] Connection id "0HNHEOKAIETCA" started.
2025-11-28 23:38:12.141 +02:00 [DBG] Connection 0HNHEOKAIETCA established using the following protocol: "Tls13"
2025-11-28 23:38:12.143 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:38:12.145 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:38:12.146 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:38:12.147 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:38:12.147 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:38:12.148 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:38:12.148 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:38:12.149 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 6.2593ms
2025-11-28 23:38:12.151 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:38:12.153 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:38:12.154 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:38:12.155 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:38:12.156 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:38:12.156 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:38:12.157 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:38:12.158 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:38:12.159 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:38:12.160 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:38:12.161 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:38:12.162 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:38:12.162 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:38:12.163 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:38:12.164 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:38:12.165 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:38:12.167 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:38:12.168 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:38:12.168 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:38:12.169 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:38:12.170 +02:00 [DBG] Connection id "0HNHEOKAIETCA", Request id "0HNHEOKAIETCA:00000003": started reading request body.
2025-11-28 23:38:12.171 +02:00 [DBG] Connection id "0HNHEOKAIETCA", Request id "0HNHEOKAIETCA:00000003": done reading request body.
2025-11-28 23:38:12.172 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:38:12.173 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:38:12.174 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:38:12.174 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:38:12.175 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:38:12.176 +02:00 [INF] Add Appointment called at "2025-11-28T23:38:12.1764180+02:00"
2025-11-28 23:38:12.176 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-12-04", Shift: "Evening"
2025-11-28 23:38:12.178 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:38:12.180 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:38:12.180 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:38:12.181 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:38:12.182 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:38:12.182 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:38:12.183 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:38:12.184 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:38:12.185 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:38:12.186 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:38:12.187 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:38:12.202 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:38:12.203 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:12.204 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:12.205 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:12.206 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:38:12.206 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:38:12.207 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:38:12.208 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:38:12.209 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:38:12.210 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:38:12.219 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:38:12.221 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:12.222 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:12.223 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:12.224 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:12.224 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:12.225 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:12.226 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:12.227 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:12.228 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:12.229 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:12.230 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:12.230 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:38:12.231 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-28 23:38:12.232 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:38:12.233 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:38:12.234 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:38:12.234 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:38:12.237 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:38:12.239 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:38:12.239 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:38:12.241 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:38:12.241 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:38:12.242 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:38:12.243 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:38:12.247 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:38:12.250 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:38:12.250 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:38:12.269 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:38:12.269 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:38:12.270 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:38:12.271 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:38:12.271 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 1
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 23:38:12.285 +02:00 [DBG] Disposing transaction.
2025-11-28 23:38:12.312 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 146.6785ms
2025-11-28 23:38:12.313 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:38:12.349 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:38:12.354 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:38:12.355 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:38:12.356 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:38:12.357 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 206.6375ms
2025-11-28 23:38:14.195 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:38:14.197 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:38:14.198 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:38:14.200 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:38:14.200 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:38:14.201 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:38:14.202 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:38:14.202 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:38:14.203 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:38:14.204 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:38:14.205 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:38:14.206 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:38:14.207 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:38:14.208 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:38:14.209 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:38:14.209 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:38:14.211 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:38:14.212 +02:00 [INF] get all schedule called at "2025-11-28T23:38:14.2122893+02:00"
2025-11-28 23:38:14.213 +02:00 [INF] Fetching all schedules
2025-11-28 23:38:14.214 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:38:14.215 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:38:14.216 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:38:14.217 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:38:14.218 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:38:14.218 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:38:14.219 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:38:14.220 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:38:14.221 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:38:14.229 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:38:14.230 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.231 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.232 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.233 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.234 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.235 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.235 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.236 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.237 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.238 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.239 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.239 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.240 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.241 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.242 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.243 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.244 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.245 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.245 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.246 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.247 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.248 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.249 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.249 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.250 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.251 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.252 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.253 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.253 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.254 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.255 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.256 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.257 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.257 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.258 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.259 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.260 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.261 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.261 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:38:14.262 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:38:14.263 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 32ms reading results.
2025-11-28 23:38:14.264 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:38:14.265 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:38:14.266 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:38:14.267 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:38:14.268 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:38:14.268 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:38:14.269 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:38:14.270 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:38:14.271 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 61.5791ms
2025-11-28 23:38:14.272 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:38:14.273 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:38:14.273 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:38:14.274 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:38:14.275 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 80.0496ms
2025-11-28 23:38:15.619 +02:00 [DBG] Connection id "0HNHEOKAIETCA" received FIN.
2025-11-28 23:38:15.620 +02:00 [DBG] Connection id "0HNHEOKAIETCA" is closed. The last processed stream ID was 5.
2025-11-28 23:38:15.620 +02:00 [DBG] The connection queue processing loop for 0HNHEOKAIETCA completed.
2025-11-28 23:38:15.621 +02:00 [DBG] Connection id "0HNHEOKAIETCA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:38:15.623 +02:00 [DBG] Connection id "0HNHEOKAIETCA" stopped.
2025-11-28 23:39:12.685 +02:00 [DBG] Connection id "0HNHEOKAIETCB" accepted.
2025-11-28 23:39:12.685 +02:00 [DBG] Connection id "0HNHEOKAIETCB" received FIN.
2025-11-28 23:39:12.690 +02:00 [DBG] Connection id "0HNHEOKAIETCB" started.
2025-11-28 23:39:12.693 +02:00 [DBG] Connection id "0HNHEOKAIETCC" accepted.
2025-11-28 23:39:12.701 +02:00 [DBG] Connection id "0HNHEOKAIETCC" started.
2025-11-28 23:39:12.701 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-28 23:39:12.704 +02:00 [DBG] Connection id "0HNHEOKAIETCB" stopped.
2025-11-28 23:39:12.705 +02:00 [DBG] Connection id "0HNHEOKAIETCB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:39:12.706 +02:00 [DBG] Connection 0HNHEOKAIETCC established using the following protocol: "Tls13"
2025-11-28 23:39:12.711 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Auth/register - application/json 169
2025-11-28 23:39:12.714 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/register'
2025-11-28 23:39:12.714 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)' with route pattern 'api/Auth/register' is valid for the request path '/api/Auth/register'
2025-11-28 23:39:12.715 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)'
2025-11-28 23:39:12.716 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:39:12.717 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:39:12.718 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)'
2025-11-28 23:39:12.721 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterAsync(Hospital.Domain.Models.RegisterModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-28 23:39:12.723 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:39:12.724 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:39:12.725 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:39:12.726 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:39:12.727 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:39:12.728 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-28 23:39:12.730 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-28 23:39:12.731 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel' ...
2025-11-28 23:39:12.732 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel' using the name '' in request data ...
2025-11-28 23:39:12.733 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:39:12.735 +02:00 [DBG] Connection id "0HNHEOKAIETCC", Request id "0HNHEOKAIETCC:00000001": started reading request body.
2025-11-28 23:39:12.736 +02:00 [DBG] Connection id "0HNHEOKAIETCC", Request id "0HNHEOKAIETCC:00000001": done reading request body.
2025-11-28 23:39:12.738 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.RegisterModel'
2025-11-28 23:39:12.738 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel'.
2025-11-28 23:39:12.739 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.RegisterModel'.
2025-11-28 23:39:12.740 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.RegisterModel' ...
2025-11-28 23:39:12.742 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.RegisterModel'.
2025-11-28 23:39:12.744 +02:00 [INF] Register called at "2025-11-28T23:39:12.7442339+02:00"
2025-11-28 23:39:12.748 +02:00 [INF] Registration attempt for email: nour22110@gmail.com, role: Patient
2025-11-28 23:39:12.752 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:39:12.754 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-11-28 23:39:12.759 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:39:12.763 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:39:12.763 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:39:12.764 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.765 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.765 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:12.766 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:12.767 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:12.768 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-28 23:39:12.773 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-28 23:39:12.774 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.775 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:39:12.776 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.777 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:12.780 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-11-28 23:39:12.784 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:39:12.785 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.786 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.787 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:12.787 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:12.788 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:12.789 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-28 23:39:12.793 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-28 23:39:12.795 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.796 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:39:12.797 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.798 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:12.801 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-11-28 23:39:12.805 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(1) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:39:12.807 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.808 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.809 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:12.809 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:12.810 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:12.811 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-28 23:39:12.816 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-28 23:39:12.820 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:12.826 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.827 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-28 23:39:12.828 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.828 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:12.910 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.911 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.912 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:12.914 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-11-28 23:39:12.916 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-28 23:39:12.917 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-28 23:39:12.920 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-28 23:39:12.922 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.923 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:39:12.925 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.926 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 23:39:12.935 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:12.937 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:39:12.940 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:39:12.942 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:39:12.943 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:39:12.945 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:39:12.949 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.951 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.952 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:12.953 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:12.956 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-28 23:39:12.958 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-28 23:39:12.967 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-28 23:39:12.969 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.971 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:39:12.972 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.973 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 23:39:12.976 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:12.979 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 23:39:12.985 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .SingleOrDefault(r => r.NormalizedName == __normalizedRoleName_0)'
2025-11-28 23:39:12.992 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:39:12.993 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.995 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:12.996 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:12.997 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:12.998 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:12.999 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-28 23:39:13.002 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-28 23:39:13.004 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.005 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:39:13.006 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.007 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 23:39:13.020 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .FirstOrDefault(e => EF.Property<string>(e, "UserId") == __p_0 && EF.Property<string>(e, "RoleId") == __p_1)'
2025-11-28 23:39:13.027 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUserRole<string>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityUserRole<string>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUserRole<string>.UserId (string) Required PK FK AfterSave:Throw, 0], [Property: IdentityUserRole<string>.RoleId (string) Required PK FK Index AfterSave:Throw, 1] }
            SELECT TOP(1) a.UserId, a.RoleId
            FROM AspNetUserRoles AS a
            WHERE (a.UserId == @__p_0) && (a.RoleId == @__p_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityUserRole<string>>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:39:13.029 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.030 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.031 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:13.031 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:13.032 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:13.033 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-28 23:39:13.037 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-28 23:39:13.039 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.040 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:39:13.041 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.041 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:13.044 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.045 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.046 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:13.047 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:13.048 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:13.048 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-28 23:39:13.050 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-28 23:39:13.051 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.052 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:39:13.053 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.054 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:13.058 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:13.060 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.061 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.062 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:13.062 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:13.063 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:13.064 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-28 23:39:13.066 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-28 23:39:13.067 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.068 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:39:13.069 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.071 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 23:39:13.074 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:13.075 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:39:13.076 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:39:13.077 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:39:13.078 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:39:13.078 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:39:13.088 +02:00 [DBG] Executing 2 update commands as a batch.
2025-11-28 23:39:13.089 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.090 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.090 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:39:13.091 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:39:13.092 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:13.092 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:13.093 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:13.094 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-28 23:39:13.105 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-28 23:39:13.107 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.108 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:39:13.109 +02:00 [DBG] Committing transaction.
2025-11-28 23:39:13.110 +02:00 [DBG] Committed transaction.
2025-11-28 23:39:13.110 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.111 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:13.112 +02:00 [DBG] Disposing transaction.
2025-11-28 23:39:13.112 +02:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:13.114 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:13.115 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-28 23:39:13.116 +02:00 [INF] User nour22110@gmail.com assigned to role Patient
2025-11-28 23:39:13.118 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Patient.PatientId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:13.121 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:13.122 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:13.123 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:39:13.124 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:39:13.126 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:39:13.127 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:39:13.127 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:39:13.128 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.129 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.130 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:13.131 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:13.132 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:13.133 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patients] ([CreatedAt], [EmergencyContact], [UpdatedAt], [UserId])
OUTPUT INSERTED.[PatientId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-28 23:39:13.137 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Patients] ([CreatedAt], [EmergencyContact], [UpdatedAt], [UserId])
OUTPUT INSERTED.[PatientId]
VALUES (@p0, @p1, @p2, @p3);
2025-11-28 23:39:13.139 +02:00 [DBG] The foreign key property 'Patient.PatientId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-28 23:39:13.141 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.142 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:39:13.143 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.143 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:13.145 +02:00 [DBG] An entity of type 'Patient' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:13.146 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 23:39:13.147 +02:00 [INF] Patient record created for user a06c9a74-d53e-4235-a0b9-681147a73dfc
2025-11-28 23:39:13.147 +02:00 [INF] Registration successful for user nour22110@gmail.com with ID a06c9a74-d53e-4235-a0b9-681147a73dfc
2025-11-28 23:39:13.148 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:39:13.150 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:39:13.150 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:39:13.151 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:39:13.151 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:39:13.152 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Auth.RegisterDto'.
2025-11-28 23:39:13.157 +02:00 [INF] Executed action Hospital.Controllers.AuthController.RegisterAsync (Hospital) in 428.2808ms
2025-11-28 23:39:13.158 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.RegisterAsync (Hospital)'
2025-11-28 23:39:13.160 +02:00 [DBG] Connection id "0HNHEOKAIETCC" completed keep alive response.
2025-11-28 23:39:13.160 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:39:13.161 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:13.162 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:39:13.163 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Auth/register - 200 null application/json; charset=utf-8 452.0096ms
2025-11-28 23:39:30.172 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Auth/login - application/json 66
2025-11-28 23:39:30.175 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-28 23:39:30.175 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-28 23:39:30.176 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-28 23:39:30.177 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:39:30.178 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:39:30.178 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-28 23:39:30.181 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-28 23:39:30.182 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:39:30.183 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:39:30.184 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:39:30.185 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:39:30.186 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:39:30.187 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-28 23:39:30.188 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-28 23:39:30.189 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-28 23:39:30.190 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-28 23:39:30.191 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:39:30.192 +02:00 [DBG] Connection id "0HNHEOKAIETCC", Request id "0HNHEOKAIETCC:00000002": started reading request body.
2025-11-28 23:39:30.193 +02:00 [DBG] Connection id "0HNHEOKAIETCC", Request id "0HNHEOKAIETCC:00000002": done reading request body.
2025-11-28 23:39:30.194 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-28 23:39:30.195 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-28 23:39:30.196 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-28 23:39:30.197 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-28 23:39:30.198 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-28 23:39:30.200 +02:00 [INF] Login called at "2025-11-28T23:39:30.2000419+02:00"
2025-11-28 23:39:30.202 +02:00 [INF] Login attempt for email: nour22110@gmail.com
2025-11-28 23:39:30.203 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:39:30.204 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:39:30.205 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:39:30.205 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.206 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.207 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:30.208 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:30.209 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:30.209 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-28 23:39:30.213 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-28 23:39:30.215 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:30.215 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.216 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:39:30.217 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.218 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:30.293 +02:00 [DBG] Creating JWT token for user a06c9a74-d53e-4235-a0b9-681147a73dfc
2025-11-28 23:39:30.299 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2025-11-28 23:39:30.305 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 23:39:30.306 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.307 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.308 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:30.309 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:30.310 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:30.311 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-28 23:39:30.314 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-28 23:39:30.316 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.317 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:39:30.318 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.319 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:30.325 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-11-28 23:39:30.329 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 23:39:30.330 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.331 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.332 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:30.332 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:30.333 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:30.334 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-28 23:39:30.339 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-28 23:39:30.340 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.341 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:39:30.342 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.343 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:30.350 +02:00 [DBG] JWT token created for user a06c9a74-d53e-4235-a0b9-681147a73dfc, expires at "2025-11-28T22:39:30.0000000Z"
2025-11-28 23:39:30.352 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.352 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.353 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:30.354 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:30.355 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:30.356 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-28 23:39:30.357 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-28 23:39:30.359 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.360 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:39:30.361 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.362 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:30.363 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.364 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.365 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:30.366 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:30.366 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:30.367 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-28 23:39:30.370 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-28 23:39:30.372 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.372 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:39:30.374 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.374 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:30.376 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:30.377 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:39:30.377 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:39:30.378 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:39:30.379 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:39:30.379 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:39:30.380 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.381 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.382 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:30.383 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:30.384 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:30.384 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-28 23:39:30.390 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-28 23:39:30.392 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.393 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:39:30.394 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.394 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:30.395 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:30.397 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 23:39:30.444 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .FirstOrDefault(p => p.UserId == __user_Id_0)'
2025-11-28 23:39:30.447 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
            SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId
            FROM Patients AS p
            WHERE p.UserId == @__user_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:39:30.448 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.449 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.450 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:30.450 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:30.451 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:30.452 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-28 23:39:30.455 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-28 23:39:30.457 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:30.458 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:30.459 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.460 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-28 23:39:30.461 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.462 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:30.463 +02:00 [INF] Patient 2 logged in successfully
2025-11-28 23:39:30.463 +02:00 [INF] User nour22110@gmail.com logged in successfully with roles: Patient
2025-11-28 23:39:30.464 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:39:30.466 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:39:30.466 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:39:30.467 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:39:30.467 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:39:30.468 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-28 23:39:30.472 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 284.5883ms
2025-11-28 23:39:30.472 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-28 23:39:30.473 +02:00 [DBG] Connection id "0HNHEOKAIETCC" completed keep alive response.
2025-11-28 23:39:30.474 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:39:30.475 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:30.475 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:39:30.476 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 304.4136ms
2025-11-28 23:39:35.419 +02:00 [DBG] Connection id "0HNHEOKAIETCD" accepted.
2025-11-28 23:39:35.421 +02:00 [DBG] Connection id "0HNHEOKAIETCD" started.
2025-11-28 23:39:35.425 +02:00 [DBG] Connection 0HNHEOKAIETCD established using the following protocol: "Tls13"
2025-11-28 23:39:35.427 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:39:35.434 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:39:35.436 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:39:35.437 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:39:35.438 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:39:35.439 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:39:35.440 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:39:35.441 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:39:35.442 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:39:35.443 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:39:35.444 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:39:35.445 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:39:35.447 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:39:35.448 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:39:35.449 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:39:35.450 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:39:35.452 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:39:35.453 +02:00 [INF] get all schedule called at "2025-11-28T23:39:35.4536296+02:00"
2025-11-28 23:39:35.454 +02:00 [INF] Fetching all schedules
2025-11-28 23:39:35.455 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:39:35.457 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:39:35.457 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:39:35.458 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:35.459 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:35.460 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:35.461 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:35.462 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 23:39:35.463 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:39:35.472 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:39:35.474 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.475 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.476 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.477 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.478 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.479 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.480 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.481 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.482 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.483 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.484 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.485 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.486 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.487 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.488 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.490 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.491 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.492 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.493 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.494 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.495 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.496 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.497 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.498 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.499 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.500 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.501 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.501 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.502 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.503 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.504 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.505 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.506 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.507 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.508 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.509 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.510 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.511 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.512 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:35.513 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:35.514 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 39ms reading results.
2025-11-28 23:39:35.515 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:35.516 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:35.517 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:39:35.519 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:39:35.519 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:39:35.520 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:39:35.521 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:39:35.522 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:39:35.523 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 72.5873ms
2025-11-28 23:39:35.524 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:39:35.525 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:39:35.526 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:35.526 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:39:35.528 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 100.8254ms
2025-11-28 23:39:35.633 +02:00 [DBG] Connection id "0HNHEOKAIETCD" received FIN.
2025-11-28 23:39:35.634 +02:00 [DBG] Connection id "0HNHEOKAIETCD" is closed. The last processed stream ID was 1.
2025-11-28 23:39:35.634 +02:00 [DBG] The connection queue processing loop for 0HNHEOKAIETCD completed.
2025-11-28 23:39:35.635 +02:00 [DBG] Connection id "0HNHEOKAIETCD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:39:35.637 +02:00 [DBG] Connection id "0HNHEOKAIETCD" stopped.
2025-11-28 23:39:39.396 +02:00 [DBG] Connection id "0HNHEOKAIETCE" accepted.
2025-11-28 23:39:39.397 +02:00 [DBG] Connection id "0HNHEOKAIETCE" started.
2025-11-28 23:39:39.400 +02:00 [DBG] Connection 0HNHEOKAIETCE established using the following protocol: "Tls13"
2025-11-28 23:39:39.405 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 23:39:39.407 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 23:39:39.408 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 23:39:39.409 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:39:39.410 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:39:39.410 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:39:39.411 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:39:39.411 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:39:39.412 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:39:39.413 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:39:39.414 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:39:39.415 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:39:39.416 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:39:39.417 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:39:39.418 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:39:39.419 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:39:39.420 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:39:39.421 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:39:39.422 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:39:39.423 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:39:39.424 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:39:39.424 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:39:39.425 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:39:39.426 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:39:39.4266433+02:00"
2025-11-28 23:39:39.427 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 23:39:39.428 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:39:39.429 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:39:39.430 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:39:39.430 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:39.431 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:39.432 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:39.433 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:39.434 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:39.434 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:39:39.444 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:39:39.446 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:39.447 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:39.447 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:39.448 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:39.449 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:39.450 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:39.451 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:39.452 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:39.452 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:39.453 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:39.454 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:39.455 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:39.455 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-28 23:39:39.456 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:39.457 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:39.458 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:39:39.459 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:39:39.460 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:39:39.460 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:39:39.461 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:39:39.462 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:39:39.462 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 43.4097ms
2025-11-28 23:39:39.463 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:39:39.464 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:39:39.465 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:39.466 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:39:39.467 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 61.5052ms
2025-11-28 23:39:47.854 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:39:47.856 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:39:47.857 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:39:47.858 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:39:47.858 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:39:47.859 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:39:47.859 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:39:47.860 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.9086ms
2025-11-28 23:39:47.861 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:39:47.865 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:39:47.865 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:39:47.866 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:39:47.867 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:39:47.868 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:39:47.868 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:39:47.869 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:39:47.870 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:39:47.871 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:39:47.872 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:39:47.873 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:39:47.874 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:39:47.875 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:39:47.876 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:39:47.877 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:39:47.878 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:39:47.879 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:39:47.880 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:39:47.881 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:39:47.881 +02:00 [DBG] Connection id "0HNHEOKAIETCE", Request id "0HNHEOKAIETCE:00000005": started reading request body.
2025-11-28 23:39:47.882 +02:00 [DBG] Connection id "0HNHEOKAIETCE", Request id "0HNHEOKAIETCE:00000005": done reading request body.
2025-11-28 23:39:47.883 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:39:47.884 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:39:47.885 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:39:47.885 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:39:47.886 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:39:47.887 +02:00 [INF] Add Appointment called at "2025-11-28T23:39:47.8875706+02:00"
2025-11-28 23:39:47.888 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-11-30", Shift: "Evening"
2025-11-28 23:39:47.889 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:39:47.890 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:39:47.891 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:39:47.891 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:47.892 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:47.893 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:39:47.894 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:39:47.895 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:47.895 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:47.896 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:47.897 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:39:47.908 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:39:47.910 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:47.911 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:47.912 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:47.912 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:47.913 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:39:47.914 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:47.915 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:47.916 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:47.917 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:39:47.926 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:39:47.928 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:47.929 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:47.930 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:47.931 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:47.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:47.932 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:47.933 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:47.934 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:47.935 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:47.935 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:47.936 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:47.937 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:47.938 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-28 23:39:47.939 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:47.940 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:47.941 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:47.941 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:39:47.944 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:39:47.945 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:47.946 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:39:47.947 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:47.948 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:47.948 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:47.949 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:39:47.953 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:39:47.955 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:47.956 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:39:47.971 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:39:47.972 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:39:47.973 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:47.974 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 23:39:47.975 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 1
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 23:39:47.988 +02:00 [DBG] Disposing transaction.
2025-11-28 23:39:48.015 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 138.5703ms
2025-11-28 23:39:48.017 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:39:48.047 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:39:48.051 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:39:48.052 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:48.053 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 23:39:48.055 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 193.3781ms
2025-11-28 23:39:52.081 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:39:52.083 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:39:52.084 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:39:52.085 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:39:52.085 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:39:52.086 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:39:52.086 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:39:52.087 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:39:52.088 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:39:52.088 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:39:52.090 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:39:52.091 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:39:52.092 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:39:52.093 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:39:52.094 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:39:52.095 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:39:52.096 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:39:52.097 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:39:52.098 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:39:52.099 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:39:52.100 +02:00 [DBG] Connection id "0HNHEOKAIETCE", Request id "0HNHEOKAIETCE:00000007": started reading request body.
2025-11-28 23:39:52.101 +02:00 [DBG] Connection id "0HNHEOKAIETCE", Request id "0HNHEOKAIETCE:00000007": done reading request body.
2025-11-28 23:39:52.101 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:39:52.102 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:39:52.103 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:39:52.104 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:39:52.104 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:39:52.105 +02:00 [INF] Add Appointment called at "2025-11-28T23:39:52.1058010+02:00"
2025-11-28 23:39:52.106 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-11-30", Shift: "Evening"
2025-11-28 23:39:52.108 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:39:52.109 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:39:52.109 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:39:52.110 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:52.111 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:52.111 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:39:52.113 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:39:52.114 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:52.114 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:52.115 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:52.116 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:39:52.126 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:39:52.128 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:52.129 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:52.130 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:52.130 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:52.131 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:39:52.132 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:52.133 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:52.134 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:52.135 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:39:52.143 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:39:52.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:52.146 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:52.147 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:52.148 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:52.149 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:52.149 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:52.150 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:52.151 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:52.152 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:52.153 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:52.153 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:39:52.154 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:52.155 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-28 23:39:52.157 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:52.158 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:52.159 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:52.159 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:39:52.162 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:39:52.163 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:52.164 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:39:52.165 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:39:52.166 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:39:52.167 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:39:52.168 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:39:52.172 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:39:52.174 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:52.175 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:39:52.188 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:39:52.189 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:39:52.190 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:52.190 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:39:52.191 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 1
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 23:39:52.205 +02:00 [DBG] Disposing transaction.
2025-11-28 23:39:52.230 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 135.1451ms
2025-11-28 23:39:52.231 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:39:52.259 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:39:52.264 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:39:52.265 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:39:52.266 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 23:39:52.267 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 186.3573ms
2025-11-28 23:40:20.640 +02:00 [DBG] Connection id "0HNHEOKAIETCE" received FIN.
2025-11-28 23:40:20.641 +02:00 [DBG] Connection id "0HNHEOKAIETCE" is closed. The last processed stream ID was 7.
2025-11-28 23:40:20.641 +02:00 [DBG] The connection queue processing loop for 0HNHEOKAIETCE completed.
2025-11-28 23:40:20.642 +02:00 [DBG] Connection id "0HNHEOKAIETCE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:40:20.644 +02:00 [DBG] Connection id "0HNHEOKAIETCE" stopped.
2025-11-28 23:41:35.707 +02:00 [DBG] Connection id "0HNHEOKAIETCF" accepted.
2025-11-28 23:41:35.707 +02:00 [DBG] Connection id "0HNHEOKAIETCF" received FIN.
2025-11-28 23:41:35.711 +02:00 [DBG] Connection id "0HNHEOKAIETCF" started.
2025-11-28 23:41:35.716 +02:00 [DBG] Connection id "0HNHEOKAIETCG" accepted.
2025-11-28 23:41:35.718 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-28 23:41:35.718 +02:00 [DBG] Connection id "0HNHEOKAIETCG" started.
2025-11-28 23:41:35.719 +02:00 [DBG] Connection id "0HNHEOKAIETCF" stopped.
2025-11-28 23:41:35.720 +02:00 [DBG] Connection id "0HNHEOKAIETCF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:41:35.722 +02:00 [DBG] Connection 0HNHEOKAIETCG established using the following protocol: "Tls13"
2025-11-28 23:41:35.723 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Schedule - application/json 94
2025-11-28 23:41:35.725 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-28 23:41:35.725 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-28 23:41:35.726 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-28 23:41:35.727 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:41:35.728 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:41:35.728 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-28 23:41:35.731 +02:00 [INF] Route matched with {action = "Create", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Schedule.ScheduleDto]] Create(Hospital.Application.DTO.Schedule.CreateScheduleDto) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:41:35.732 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:41:35.734 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:41:35.735 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:41:35.736 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:41:35.737 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:41:35.738 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:41:35.739 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:41:35.739 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-28 23:41:35.740 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' using the name '' in request data ...
2025-11-28 23:41:35.741 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:41:35.742 +02:00 [DBG] Connection id "0HNHEOKAIETCG", Request id "0HNHEOKAIETCG:00000001": started reading request body.
2025-11-28 23:41:35.743 +02:00 [DBG] Connection id "0HNHEOKAIETCG", Request id "0HNHEOKAIETCG:00000001": done reading request body.
2025-11-28 23:41:35.745 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'
2025-11-28 23:41:35.745 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-28 23:41:35.746 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-28 23:41:35.747 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-28 23:41:35.749 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-28 23:41:35.751 +02:00 [INF] create schedule  called at "2025-11-28T23:41:35.7515152+02:00"
2025-11-28 23:41:35.754 +02:00 [INF] Creating schedule for DoctorId: 5, Day: saturday, Shift: "Afternoon"
2025-11-28 23:41:35.755 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:41:35.756 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:41:35.757 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:41:35.757 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:35.758 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:35.759 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:41:35.760 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:41:35.761 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:41:35.761 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:41:35.774 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:41:35.776 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:35.777 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:35.777 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:35.778 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:35.779 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:35.780 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:35.781 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:35.781 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:35.782 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:35.783 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:35.784 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:35.785 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:35.786 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-28 23:41:35.787 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:35.787 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:41:35.793 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Where(s => s.DayOfWeek.ToLower() == __ToLower_0)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(s => s.Branch)'
2025-11-28 23:41:35.794 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-28 23:41:35.795 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 23:41:35.796 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-28 23:41:35.797 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-11-28 23:41:35.807 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Specialization.Description (string), 44], [Property: Specialization.ImageURL (string) MaxLength(300), 45], [Property: Specialization.Name (string) Required MaxLength(120), 46], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 48], [Property: Branch.Address (string) MaxLength(250), 49], [Property: Branch.BranchName (string) Required MaxLength(150), 50], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Branch.Description (string), 52], [Property: Branch.Email (string) MaxLength(200), 53], [Property: Branch.ImageURL (string) MaxLength(300), 54], [Property: Branch.Latitude (double?), 55], [Property: Branch.Longitude (double?), 56], [Property: Branch.Phone (string) MaxLength(25), 57], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 58] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s0.SpecializationId, s0.CreatedAt, s0.Description, s0.ImageURL, s0.Name, s0.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s0 ON d.SpecializationId == s0.SpecializationId
        INNER JOIN Branches AS b ON s.BranchId == b.BranchId
        WHERE LOWER(s.DayOfWeek) == @__ToLower_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 23:41:35.810 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:35.811 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:35.812 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:41:35.813 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:41:35.813 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:41:35.814 +02:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-28 23:41:35.821 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-28 23:41:35.823 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:35.823 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:41:35.824 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:35.825 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:41:35.827 +02:00 [WRN] Duplicate schedule detected for DoctorId 5 on saturday shift "Afternoon"
2025-11-28 23:41:35.860 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.Create (Hospital) in 122.7164ms
2025-11-28 23:41:35.862 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-28 23:41:35.892 +02:00 [ERR]  Exception caught: Doctor already has a schedule for this day and shift.
System.InvalidOperationException: Doctor already has a schedule for this day and shift.
   at Hospital.Infrastructure.Services.ScheduleService.CreateAsync(CreateScheduleDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\ScheduleService.cs:line 60
   at Hospital.Controllers.ScheduleController.Create(CreateScheduleDto dto) in D:\Hospital\Hospital\Hospital\Controllers\ScheduleController.cs:line 27
   at lambda_method1203(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:41:35.897 +02:00 [DBG] Connection id "0HNHEOKAIETCG" completed keep alive response.
2025-11-28 23:41:35.898 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:41:35.898 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:35.899 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:41:35.900 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Schedule - 500 null application/json 177.1657ms
2025-11-28 23:41:45.223 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Schedule - application/json 94
2025-11-28 23:41:45.225 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-28 23:41:45.226 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-28 23:41:45.227 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-28 23:41:45.227 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:41:45.228 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:41:45.229 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-28 23:41:45.229 +02:00 [INF] Route matched with {action = "Create", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Schedule.ScheduleDto]] Create(Hospital.Application.DTO.Schedule.CreateScheduleDto) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:41:45.230 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:41:45.231 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:41:45.232 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:41:45.233 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:41:45.234 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:41:45.235 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:41:45.236 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:41:45.237 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-28 23:41:45.238 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' using the name '' in request data ...
2025-11-28 23:41:45.239 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:41:45.240 +02:00 [DBG] Connection id "0HNHEOKAIETCG", Request id "0HNHEOKAIETCG:00000002": started reading request body.
2025-11-28 23:41:45.241 +02:00 [DBG] Connection id "0HNHEOKAIETCG", Request id "0HNHEOKAIETCG:00000002": done reading request body.
2025-11-28 23:41:45.242 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'
2025-11-28 23:41:45.242 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-28 23:41:45.243 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-28 23:41:45.244 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-28 23:41:45.245 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-28 23:41:45.246 +02:00 [INF] create schedule  called at "2025-11-28T23:41:45.2463041+02:00"
2025-11-28 23:41:45.247 +02:00 [INF] Creating schedule for DoctorId: 5, Day: saturday, Shift: "Evening"
2025-11-28 23:41:45.248 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:41:45.249 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:41:45.250 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:41:45.251 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:45.251 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:45.252 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:41:45.253 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:41:45.254 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:41:45.255 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:41:45.263 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:41:45.265 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.266 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.267 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.268 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.268 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.269 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.270 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.271 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.272 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.273 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.273 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.274 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:45.275 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-28 23:41:45.276 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:45.277 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:41:45.278 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:45.279 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:45.280 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:41:45.281 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:41:45.282 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:41:45.282 +02:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-28 23:41:45.288 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-28 23:41:45.290 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:45.290 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:41:45.291 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:45.292 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:41:45.302 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Schedule.ScheduleId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.304 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.305 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.306 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.307 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:41:45.309 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:41:45.310 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:41:45.311 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:41:45.311 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:41:45.313 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:45.313 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:45.314 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:41:45.315 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:41:45.316 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 23:41:45.317 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-28 23:41:45.321 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-28 23:41:45.324 +02:00 [DBG] The foreign key property 'Schedule.ScheduleId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-28 23:41:45.325 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:45.326 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-28 23:41:45.327 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:45.328 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:41:45.329 +02:00 [DBG] An entity of type 'Schedule' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:45.330 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 23:41:45.331 +02:00 [INF] Schedule created successfully for DoctorId 5
2025-11-28 23:41:45.333 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:41:45.335 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:41:45.335 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:41:45.336 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:41:45.336 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:41:45.337 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Schedule.ScheduleDto'.
2025-11-28 23:41:45.338 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.Create (Hospital) in 102.9012ms
2025-11-28 23:41:45.339 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-28 23:41:45.340 +02:00 [DBG] Connection id "0HNHEOKAIETCG" completed keep alive response.
2025-11-28 23:41:45.341 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:41:45.341 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:45.342 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:41:45.343 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 119.6777ms
2025-11-28 23:41:50.265 +02:00 [DBG] Connection id "0HNHEOKAIETCH" accepted.
2025-11-28 23:41:50.266 +02:00 [DBG] Connection id "0HNHEOKAIETCH" started.
2025-11-28 23:41:50.270 +02:00 [DBG] Connection 0HNHEOKAIETCH established using the following protocol: "Tls13"
2025-11-28 23:41:50.272 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:41:50.274 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:41:50.275 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:41:50.276 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:41:50.277 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:41:50.278 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:41:50.279 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:41:50.280 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:41:50.281 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:41:50.281 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:41:50.283 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:41:50.284 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:41:50.285 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:41:50.286 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:41:50.287 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:41:50.288 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:41:50.289 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:41:50.290 +02:00 [INF] get all schedule called at "2025-11-28T23:41:50.2909114+02:00"
2025-11-28 23:41:50.291 +02:00 [INF] Fetching all schedules
2025-11-28 23:41:50.292 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:41:50.294 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:41:50.295 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:41:50.296 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:50.297 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:50.298 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:41:50.298 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:41:50.299 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:41:50.300 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:41:50.315 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:41:50.316 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.317 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.318 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.319 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.320 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.321 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.322 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.322 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.323 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.324 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.325 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.326 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.327 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.327 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.328 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.329 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.330 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.331 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.332 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.332 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.333 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.334 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.335 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.336 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.337 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.338 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.338 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.339 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.340 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.341 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.342 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.343 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.343 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.344 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.345 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.346 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.347 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.348 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.349 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.350 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.351 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:41:50.351 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:50.352 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 35ms reading results.
2025-11-28 23:41:50.353 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:50.354 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:41:50.355 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:41:50.357 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:41:50.357 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:41:50.358 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:41:50.358 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:41:50.359 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:41:50.360 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 71.654ms
2025-11-28 23:41:50.361 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:41:50.361 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:41:50.362 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:41:50.363 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:41:50.364 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 92.0849ms
2025-11-28 23:42:25.289 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-28 23:42:25.291 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-28 23:42:25.292 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-28 23:42:25.294 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:42:25.295 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:42:25.295 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:42:25.296 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:42:25.296 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:42:25.297 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:42:25.298 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:42:25.299 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:42:25.300 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:42:25.301 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:42:25.302 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:42:25.303 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:42:25.304 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:42:25.305 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:42:25.306 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:42:25.307 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:42:25.308 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:42:25.309 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:42:25.309 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:42:25.310 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:42:25.311 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:42:25.3115721+02:00"
2025-11-28 23:42:25.312 +02:00 [INF] Fetching doctor with ID 5
2025-11-28 23:42:25.313 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:42:25.314 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:42:25.314 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:42:25.315 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:42:25.316 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:42:25.317 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:42:25.317 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:42:25.318 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:42:25.319 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:42:25.329 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:42:25.330 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:25.331 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:25.332 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:25.333 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:25.334 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:25.334 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:25.335 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:25.336 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:25.337 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:25.338 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:25.338 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:25.339 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:25.340 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:25.341 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:42:25.342 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-28 23:42:25.343 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:42:25.343 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:42:25.344 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:42:25.346 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:42:25.346 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:42:25.347 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:42:25.347 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:42:25.348 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:42:25.350 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 45.6099ms
2025-11-28 23:42:25.351 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:42:25.356 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:42:25.357 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:42:25.358 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:42:25.359 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 70.2798ms
2025-11-28 23:42:27.773 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:42:27.775 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:42:27.776 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:42:27.776 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:42:27.777 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:42:27.777 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:42:27.778 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:42:27.779 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.8471ms
2025-11-28 23:42:27.780 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:42:27.782 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:42:27.783 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:42:27.784 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:42:27.785 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:42:27.785 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:42:27.786 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:42:27.786 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:42:27.787 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:42:27.788 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:42:27.789 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:42:27.790 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:42:27.791 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:42:27.792 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:42:27.793 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:42:27.794 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:42:27.795 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:42:27.796 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:42:27.797 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:42:27.797 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:42:27.798 +02:00 [DBG] Connection id "0HNHEOKAIETCH", Request id "0HNHEOKAIETCH:00000007": started reading request body.
2025-11-28 23:42:27.799 +02:00 [DBG] Connection id "0HNHEOKAIETCH", Request id "0HNHEOKAIETCH:00000007": done reading request body.
2025-11-28 23:42:27.800 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:42:27.801 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:42:27.801 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:42:27.802 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:42:27.803 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:42:27.804 +02:00 [INF] Add Appointment called at "2025-11-28T23:42:27.8048163+02:00"
2025-11-28 23:42:27.805 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 5, Date: "2025-11-29", Shift: "Afternoon"
2025-11-28 23:42:27.806 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:42:27.808 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:42:27.808 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:42:27.809 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:42:27.810 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:42:27.811 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:42:27.812 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:42:27.813 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:42:27.813 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:42:27.814 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:42:27.815 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:42:27.826 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:42:27.828 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.829 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.830 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.831 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:42:27.833 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-28 23:42:27.834 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:42:27.835 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:42:27.836 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:42:27.837 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:42:27.845 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:42:27.847 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.848 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.848 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.849 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.850 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.851 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.852 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.853 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.854 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.855 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.855 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.856 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.857 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.858 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:42:27.859 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-28 23:42:27.860 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:42:27.861 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:42:27.861 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:42:27.862 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:42:27.864 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:42:27.866 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:42:27.867 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:42:27.868 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:42:27.868 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:42:27.869 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:42:27.870 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:42:27.874 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:42:27.875 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:42:27.876 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:42:27.877 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.878 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.879 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.880 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.881 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.881 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:42:27.882 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:42:27.883 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:42:27.884 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:42:27.885 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:42:27.886 +02:00 [DBG] Creating transaction savepoint.
2025-11-28 23:42:27.887 +02:00 [DBG] Created transaction savepoint.
2025-11-28 23:42:27.887 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:42:27.888 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:42:27.889 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:42:27.890 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:42:27.893 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:42:27.895 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-28 23:42:27.896 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:42:27.896 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:42:27.897 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:42:27.899 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 23:42:27.899 +02:00 [DBG] Committing transaction.
2025-11-28 23:42:27.900 +02:00 [DBG] Committed transaction.
2025-11-28 23:42:27.901 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:42:27.902 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:42:27.903 +02:00 [INF] Appointment created successfully with ID: 8
2025-11-28 23:42:27.903 +02:00 [DBG] Disposing transaction.
2025-11-28 23:42:27.904 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:42:27.905 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:42:27.906 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:42:27.906 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:42:27.907 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:42:27.908 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-28 23:42:27.909 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[8],action=[GetById],controller=[Appointment])
2025-11-28 23:42:27.910 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/8 and 
2025-11-28 23:42:27.911 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/8
2025-11-28 23:42:27.912 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 118.3921ms
2025-11-28 23:42:27.913 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:42:27.914 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:42:27.915 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:42:27.916 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:42:27.917 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payments/8/paymob - null null
2025-11-28 23:42:27.917 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 137.7724ms
2025-11-28 23:42:27.919 +02:00 [DBG] No candidates found for the request path '/api/Payments/8/paymob'
2025-11-28 23:42:27.922 +02:00 [DBG] Request did not match any endpoints
2025-11-28 23:42:27.922 +02:00 [DBG] OPTIONS requests are not supported
2025-11-28 23:42:27.923 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:42:27.924 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:42:27.924 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:42:27.925 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payments/8/paymob - 204 null null 8.1378ms
2025-11-28 23:42:27.926 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payments/8/paymob - application/json 2
2025-11-28 23:42:27.928 +02:00 [DBG] No candidates found for the request path '/api/Payments/8/paymob'
2025-11-28 23:42:27.929 +02:00 [DBG] Request did not match any endpoints
2025-11-28 23:42:27.930 +02:00 [DBG] POST requests are not supported
2025-11-28 23:42:27.930 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:42:27.931 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:42:27.931 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:42:27.932 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payments/8/paymob - 404 0 null 6.5648ms
2025-11-28 23:42:27.934 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7217/api/Payments/8/paymob, Response status code: 404
2025-11-28 23:42:27.936 +02:00 [DBG] Connection id "0HNHEOKAIETCH", Request id "0HNHEOKAIETCH:0000000B": started reading request body.
2025-11-28 23:42:27.936 +02:00 [DBG] Connection id "0HNHEOKAIETCH", Request id "0HNHEOKAIETCH:0000000B": done reading request body.
2025-11-28 23:43:45.673 +02:00 [DBG] Connection id "0HNHEOKAIETCH" received FIN.
2025-11-28 23:43:45.680 +02:00 [DBG] Connection id "0HNHEOKAIETCH" is closed. The last processed stream ID was 11.
2025-11-28 23:43:45.680 +02:00 [DBG] The connection queue processing loop for 0HNHEOKAIETCH completed.
2025-11-28 23:43:45.681 +02:00 [DBG] Connection id "0HNHEOKAIETCH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:43:45.684 +02:00 [DBG] Connection id "0HNHEOKAIETCH" stopped.
2025-11-28 23:44:05.450 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-28 23:44:05.577 +02:00 [DBG] Hosting starting
2025-11-28 23:44:05.595 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-28 23:44:05.604 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-28 23:44:05.611 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-28 23:44:05.625 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-28 23:44:05.636 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-28 23:44:05.654 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-28 23:44:05.658 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-28 23:44:05.659 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-28 23:44:05.659 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-28 23:44:05.664 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-28 23:44:05.667 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-28 23:44:05.669 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-28 23:44:05.671 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-28 23:44:05.675 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-28 23:44:05.677 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-28 23:44:05.679 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-28 23:44:05.680 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-28 23:44:05.688 +02:00 [DBG] Middleware loaded
2025-11-28 23:44:05.690 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-28 23:44:05.692 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-28 23:44:05.773 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-28 23:44:05.854 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-28 23:44:05.855 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-28 23:44:05.856 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-28 23:44:05.856 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-28 23:44:05.857 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-28 23:44:05.857 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-28 23:44:05.930 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-28 23:44:05.930 +02:00 [INF] Hosting environment: Development
2025-11-28 23:44:05.931 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-28 23:44:05.932 +02:00 [DBG] Hosting started
2025-11-28 23:44:06.269 +02:00 [DBG] Connection id "0HNHEOT0LBBIU" received FIN.
2025-11-28 23:44:06.276 +02:00 [DBG] Connection id "0HNHEOT0LBBIU" accepted.
2025-11-28 23:44:06.277 +02:00 [DBG] Connection id "0HNHEOT0LBBIU" started.
2025-11-28 23:44:06.299 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-28 23:44:06.450 +02:00 [DBG] Connection id "0HNHEOT0LBBIU" stopped.
2025-11-28 23:44:06.454 +02:00 [DBG] Connection id "0HNHEOT0LBBIU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:44:06.515 +02:00 [DBG] Connection id "0HNHEOT0LBBIV" accepted.
2025-11-28 23:44:06.516 +02:00 [DBG] Connection id "0HNHEOT0LBBIV" started.
2025-11-28 23:44:06.546 +02:00 [DBG] Connection 0HNHEOT0LBBIV established using the following protocol: "Tls13"
2025-11-28 23:44:06.600 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-28 23:44:06.670 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-28 23:44:06.694 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-28 23:44:06.696 +02:00 [DBG] Request did not match any endpoints
2025-11-28 23:44:06.738 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-28 23:44:06.740 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-28 23:44:06.756 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-28 23:44:06.758 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-28 23:44:06.762 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 167.8385ms
2025-11-28 23:44:06.801 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-28 23:44:06.801 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-28 23:44:06.819 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-28 23:44:06.821 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 20.6543ms
2025-11-28 23:44:06.851 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.7359ms
2025-11-28 23:44:06.899 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-28 23:44:06.901 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-28 23:44:06.902 +02:00 [DBG] Request did not match any endpoints
2025-11-28 23:44:06.948 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 49.7967ms
2025-11-28 23:46:05.692 +02:00 [DBG] Connection id "0HNHEOT0LBBIV" received FIN.
2025-11-28 23:46:05.704 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBIV completed.
2025-11-28 23:46:05.705 +02:00 [DBG] Connection id "0HNHEOT0LBBIV" is closed. The last processed stream ID was 7.
2025-11-28 23:46:05.706 +02:00 [DBG] Connection id "0HNHEOT0LBBIV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:46:05.709 +02:00 [DBG] Connection id "0HNHEOT0LBBIV" stopped.
2025-11-28 23:46:34.346 +02:00 [DBG] Connection id "0HNHEOT0LBBJ0" accepted.
2025-11-28 23:46:34.353 +02:00 [DBG] Connection id "0HNHEOT0LBBJ0" started.
2025-11-28 23:46:34.360 +02:00 [DBG] Connection 0HNHEOT0LBBJ0 established using the following protocol: "Tls13"
2025-11-28 23:46:34.364 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-28 23:46:34.373 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-28 23:46:34.376 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-28 23:46:34.377 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:46:34.379 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:46:34.381 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:46:34.382 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:46:34.689 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:46:34.691 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:46:34.709 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:46:34.712 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:46:34.713 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:46:34.714 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:46:34.715 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:46:34.716 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:46:34.718 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:46:35.332 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-28 23:46:35.355 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:46:35.364 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:46:35.366 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:46:35.368 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:46:35.369 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:46:35.369 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:46:35.371 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:46:35.374 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:46:35.3741738+02:00"
2025-11-28 23:46:35.375 +02:00 [INF] Fetching doctor with ID 5
2025-11-28 23:46:35.819 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-28 23:46:35.821 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-28 23:46:35.822 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-28 23:46:35.823 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-28 23:46:35.824 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-28 23:46:35.915 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-28 23:46:35.917 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-28 23:46:36.049 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:46:36.239 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-28 23:46:36.284 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 23:46:36.286 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-28 23:46:36.289 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-28 23:46:36.291 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-28 23:46:36.432 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-28 23:46:36.446 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:46:36.472 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:46:36.485 +02:00 [DBG] Created DbConnection. (11ms).
2025-11-28 23:46:36.489 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:46:36.992 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:46:36.995 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:46:36.998 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-11-28 23:46:37.003 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-11-28 23:46:37.010 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:46:37.111 +02:00 [INF] Executed DbCommand (102ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:46:37.152 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:46:37.203 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:46:37.205 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:46:37.234 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:46:37.238 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:46:37.254 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:46:37.267 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:46:37.282 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:46:37.283 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:46:37.291 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:46:37.292 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:46:37.293 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:46:37.294 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:46:37.298 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:46:37.303 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 186ms reading results.
2025-11-28 23:46:37.306 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:46:37.310 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (4ms).
2025-11-28 23:46:37.326 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:46:37.329 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:46:37.329 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:46:37.330 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:46:37.331 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:46:37.332 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:46:37.361 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 2641.8983ms
2025-11-28 23:46:37.363 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:46:37.366 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:46:37.369 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:46:37.371 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 23:46:37.372 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 3009.0064ms
2025-11-28 23:46:45.699 +02:00 [DBG] Connection id "0HNHEOT0LBBJ0" received FIN.
2025-11-28 23:46:45.700 +02:00 [DBG] Connection id "0HNHEOT0LBBJ0" is closed. The last processed stream ID was 1.
2025-11-28 23:46:45.700 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJ0 completed.
2025-11-28 23:46:45.700 +02:00 [DBG] Connection id "0HNHEOT0LBBJ0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:46:45.703 +02:00 [DBG] Connection id "0HNHEOT0LBBJ0" stopped.
2025-11-28 23:47:17.353 +02:00 [DBG] Connection id "0HNHEOT0LBBJ1" accepted.
2025-11-28 23:47:17.358 +02:00 [DBG] Connection id "0HNHEOT0LBBJ1" started.
2025-11-28 23:47:17.361 +02:00 [DBG] Connection 0HNHEOT0LBBJ1 established using the following protocol: "Tls13"
2025-11-28 23:47:17.367 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:47:17.373 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:47:17.374 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:47:17.375 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:47:17.376 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:47:17.376 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:47:17.377 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:47:17.379 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 12.1693ms
2025-11-28 23:47:17.380 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:47:17.382 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:47:17.383 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:47:17.384 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:47:17.385 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:47:17.385 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:47:17.386 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:47:17.387 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:47:17.388 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:47:17.391 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:47:17.393 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:47:17.393 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:47:17.394 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:47:17.395 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:47:17.396 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:47:17.397 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:47:17.399 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:47:17.400 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:47:17.402 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:47:17.404 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:47:17.412 +02:00 [DBG] Connection id "0HNHEOT0LBBJ1", Request id "0HNHEOT0LBBJ1:00000003": started reading request body.
2025-11-28 23:47:17.413 +02:00 [DBG] Connection id "0HNHEOT0LBBJ1", Request id "0HNHEOT0LBBJ1:00000003": done reading request body.
2025-11-28 23:47:17.425 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:47:17.426 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:47:17.427 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:47:17.428 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:47:17.436 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:47:17.438 +02:00 [INF] Add Appointment called at "2025-11-28T23:47:17.4384013+02:00"
2025-11-28 23:47:17.441 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 5, Date: "2025-11-29", Shift: "Afternoon"
2025-11-28 23:47:17.478 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:47:17.484 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:47:17.485 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:47:17.486 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:17.487 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:17.489 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:47:17.495 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:47:17.499 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(p => p.User)
    .Include(p => p.MedicalRecords)
    .ThenInclude(m => m.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(p => p.PatientId == __id_0)'
2025-11-28 23:47:17.500 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-28 23:47:17.501 +02:00 [DBG] Including navigation: 'Patient.MedicalRecords'.
2025-11-28 23:47:17.502 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-11-28 23:47:17.503 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 23:47:17.520 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 5], [Property: User.AccessFailedCount (int) Required, 6], [Property: User.ConcurrencyStamp (string) Concurrency, 7], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: User.DateOfBirth (DateOnly?), 9], [Property: User.Email (string) Index MaxLength(256), 10], [Property: User.EmailConfirmed (bool) Required, 11], [Property: User.FullName (string) Required MaxLength(150), 12], [Property: User.Gender (GenderType?) MaxLength(10), 13], [Property: User.LockoutEnabled (bool) Required, 14], [Property: User.LockoutEnd (DateTimeOffset?), 15], [Property: User.NormalizedEmail (string) Index MaxLength(256), 16], [Property: User.NormalizedUserName (string) Index MaxLength(256), 17], [Property: User.PasswordHash (string), 18], [Property: User.PhoneNumber (string), 19], [Property: User.PhoneNumberConfirmed (bool) Required, 20], [Property: User.RefreshToken (string), 21], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 22], [Property: User.Role (string) Required MaxLength(50), 23], [Property: User.SecurityStamp (string), 24], [Property: User.TwoFactorEnabled (bool) Required, 25], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: User.UserName (string) MaxLength(256), 27] }
                2 -> 0
                3 -> 5
                4 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 28], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 29], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: MedicalRecord.Diagnosis (string), 31], [Property: MedicalRecord.DoctorId (int) Required FK Index, 32], [Property: MedicalRecord.Notes (string), 33], [Property: MedicalRecord.PatientId (int) Required FK Index, 34], [Property: MedicalRecord.TreatmentPlan (string), 35], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
                5 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Doctor.Available (bool?), 38], [Property: Doctor.Biography (string), 39], [Property: Doctor.ConsultationFees (decimal) Required, 40], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 41], [Property: Doctor.ExperienceYears (int?), 42], [Property: Doctor.ImageURL (string) MaxLength(300), 43], [Property: Doctor.SpecializationId (int) Required FK Index, 44], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Doctor.UserId (string) Required FK Index, 46] }
                6 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
                7 -> 28
                8 -> 37
                9 -> 47
            SELECT t.PatientId, t.CreatedAt, t.EmergencyContact, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t0.RecordId, t0.AppointmentId, t0.CreatedAt, t0.Diagnosis, t0.DoctorId, t0.Notes, t0.PatientId, t0.TreatmentPlan, t0.UpdatedAt, t0.DoctorId0, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt0, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt0, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt1, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt1, t0.UserName
            FROM 
            (
                SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
                FROM Patients AS p
                INNER JOIN Users AS u ON p.UserId == u.Id
                WHERE p.PatientId == @__id_0
            ) AS t
            LEFT JOIN 
            (
                SELECT m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId AS DoctorId0, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt AS CreatedAt0, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt AS UpdatedAt0, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt AS CreatedAt1, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt AS UpdatedAt1, u0.UserName
                FROM MedicalRecords AS m
                INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
                INNER JOIN Users AS u0 ON d.UserId == u0.Id
            ) AS t0 ON t.PatientId == t0.PatientId
            ORDER BY t.PatientId ASC, t.Id ASC, t0.RecordId ASC, t0.DoctorId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:47:17.522 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:47:17.523 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:47:17.525 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 23:47:17.526 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:47:17.538 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:47:17.543 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.550 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.551 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.552 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:17.553 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-28 23:47:17.556 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:47:17.557 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:47:17.558 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:47:17.558 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:47:17.568 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:47:17.570 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.571 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.571 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.572 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.573 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.574 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.575 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.576 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.577 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.579 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.579 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.580 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.581 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:17.582 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:17.583 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-28 23:47:17.586 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-11-28 23:47:17.590 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:47:17.591 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:47:17.592 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:47:17.593 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:47:17.594 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:47:17.597 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:47:17.599 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:17.600 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:47:17.607 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Any(a => a.PatientId == __patientId_0 && a.DoctorId == __doctorId_1 && a.Date == __date_2 && (int)a.Shift == (int)__shift_3)'
2025-11-28 23:47:17.612 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Appointments AS a
                WHERE (((a.PatientId == @__patientId_0) && (a.DoctorId == @__doctorId_1)) && (a.Date == @__date_2)) && (a.Shift == @__shift_3))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:47:17.622 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:47:17.623 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:47:17.627 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-11-28 23:47:17.628 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:47:17.634 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:47:17.637 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:17.638 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:47:17.672 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:47:17.675 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:47:17.678 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:17.679 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:47:17.680 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 5
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 23:47:17.708 +02:00 [DBG] Disposing transaction.
2025-11-28 23:47:17.741 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 344.1842ms
2025-11-28 23:47:17.743 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:47:17.792 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:47:17.808 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:47:17.809 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:17.810 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 23:47:17.812 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 431.3429ms
2025-11-28 23:47:20.311 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:47:20.313 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:47:20.314 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:47:20.315 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:47:20.316 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:47:20.316 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:47:20.317 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:47:20.319 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:47:20.320 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:47:20.323 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:47:20.325 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:47:20.326 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:47:20.327 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:47:20.328 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:47:20.329 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:47:20.330 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:47:20.332 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:47:20.334 +02:00 [INF] get all schedule called at "2025-11-28T23:47:20.3344386+02:00"
2025-11-28 23:47:20.335 +02:00 [INF] Fetching all schedules
2025-11-28 23:47:20.344 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:47:20.349 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(s => s.Branch)'
2025-11-28 23:47:20.351 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-28 23:47:20.353 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 23:47:20.354 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-28 23:47:20.355 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-11-28 23:47:20.367 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Specialization.Description (string), 44], [Property: Specialization.ImageURL (string) MaxLength(300), 45], [Property: Specialization.Name (string) Required MaxLength(120), 46], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 48], [Property: Branch.Address (string) MaxLength(250), 49], [Property: Branch.BranchName (string) Required MaxLength(150), 50], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Branch.Description (string), 52], [Property: Branch.Email (string) MaxLength(200), 53], [Property: Branch.ImageURL (string) MaxLength(300), 54], [Property: Branch.Latitude (double?), 55], [Property: Branch.Longitude (double?), 56], [Property: Branch.Phone (string) MaxLength(25), 57], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 58] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s0.SpecializationId, s0.CreatedAt, s0.Description, s0.ImageURL, s0.Name, s0.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s0 ON d.SpecializationId == s0.SpecializationId
        INNER JOIN Branches AS b ON s.BranchId == b.BranchId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 23:47:20.369 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:47:20.370 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:47:20.371 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:20.372 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:20.373 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:47:20.373 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:47:20.374 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:47:20.375 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:47:20.384 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:47:20.386 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.387 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.388 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.389 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.389 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.390 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.391 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.392 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.393 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.395 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.395 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.396 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.397 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.398 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.399 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.400 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.403 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.404 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.404 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.405 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.406 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.407 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.408 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.409 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.410 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.411 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.411 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.412 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.413 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.414 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.415 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.416 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.417 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.417 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.418 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.419 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.420 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.421 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.422 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.423 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.424 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:20.424 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:20.425 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 39ms reading results.
2025-11-28 23:47:20.426 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:20.427 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:47:20.435 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:47:20.437 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:47:20.438 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:47:20.438 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:47:20.439 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:47:20.439 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:47:20.444 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 113.8729ms
2025-11-28 23:47:20.445 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:47:20.445 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:47:20.446 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:20.447 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:47:20.448 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 137.7574ms
2025-11-28 23:47:25.705 +02:00 [DBG] Connection id "0HNHEOT0LBBJ1" received FIN.
2025-11-28 23:47:25.706 +02:00 [DBG] Connection id "0HNHEOT0LBBJ1" is closed. The last processed stream ID was 5.
2025-11-28 23:47:25.707 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJ1 completed.
2025-11-28 23:47:25.708 +02:00 [DBG] Connection id "0HNHEOT0LBBJ1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:47:25.711 +02:00 [DBG] Connection id "0HNHEOT0LBBJ1" stopped.
2025-11-28 23:47:32.193 +02:00 [DBG] Connection id "0HNHEOT0LBBJ2" accepted.
2025-11-28 23:47:32.194 +02:00 [DBG] Connection id "0HNHEOT0LBBJ2" started.
2025-11-28 23:47:32.198 +02:00 [DBG] Connection 0HNHEOT0LBBJ2 established using the following protocol: "Tls13"
2025-11-28 23:47:32.199 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/4 - null null
2025-11-28 23:47:32.203 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/4'
2025-11-28 23:47:32.204 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/4'
2025-11-28 23:47:32.205 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:47:32.206 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:47:32.206 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:47:32.207 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:47:32.208 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:47:32.209 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:47:32.209 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:47:32.210 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:47:32.211 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:47:32.212 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:47:32.213 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:47:32.214 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:47:32.215 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:47:32.220 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:47:32.221 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:47:32.222 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:47:32.223 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:47:32.224 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:47:32.225 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:47:32.226 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:47:32.226 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:47:32.2268852+02:00"
2025-11-28 23:47:32.227 +02:00 [INF] Fetching doctor with ID 4
2025-11-28 23:47:32.228 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:47:32.230 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:47:32.230 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:47:32.231 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:32.232 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:32.232 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:47:32.233 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:47:32.234 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:47:32.235 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:47:32.244 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:47:32.246 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:32.247 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:32.248 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:32.249 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:32.249 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:32.250 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:32.251 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:32.252 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:32.253 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:32.254 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:32.254 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-28 23:47:32.255 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:32.256 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:47:32.257 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:47:32.259 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:47:32.259 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:47:32.259 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:47:32.260 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:47:32.261 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:47:32.262 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 46.4687ms
2025-11-28 23:47:32.263 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:47:32.263 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:47:32.264 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:32.265 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:47:32.266 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/4 - 200 null application/json; charset=utf-8 66.9186ms
2025-11-28 23:47:34.248 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:47:34.249 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:47:34.250 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:47:34.251 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:47:34.251 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:47:34.252 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:47:34.252 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:47:34.253 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.7189ms
2025-11-28 23:47:34.255 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:47:34.257 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:47:34.258 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:47:34.259 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:47:34.259 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:47:34.260 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:47:34.260 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:47:34.261 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:47:34.262 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:47:34.262 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:47:34.264 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:47:34.265 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:47:34.265 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:47:34.266 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:47:34.267 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:47:34.268 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:47:34.270 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:47:34.271 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:47:34.272 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:47:34.273 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:47:34.274 +02:00 [DBG] Connection id "0HNHEOT0LBBJ2", Request id "0HNHEOT0LBBJ2:00000005": started reading request body.
2025-11-28 23:47:34.275 +02:00 [DBG] Connection id "0HNHEOT0LBBJ2", Request id "0HNHEOT0LBBJ2:00000005": done reading request body.
2025-11-28 23:47:34.276 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:47:34.277 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:47:34.277 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:47:34.278 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:47:34.279 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:47:34.280 +02:00 [INF] Add Appointment called at "2025-11-28T23:47:34.2807038+02:00"
2025-11-28 23:47:34.281 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 4, Date: "2025-12-02", Shift: "Afternoon"
2025-11-28 23:47:34.282 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:47:34.285 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:47:34.285 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:47:34.286 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:34.287 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:34.288 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:47:34.288 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:47:34.289 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:47:34.290 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:47:34.291 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:47:34.292 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:47:34.302 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:47:34.303 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.304 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.305 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.306 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:34.307 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:47:34.308 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:47:34.309 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:47:34.310 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:47:34.311 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:47:34.320 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:47:34.322 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.323 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.323 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.324 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.325 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.326 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.327 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.328 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.329 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.330 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:34.330 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-28 23:47:34.332 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:47:34.332 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:47:34.333 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:47:34.334 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:47:34.337 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:47:34.338 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:34.339 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:47:34.341 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:47:34.341 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:47:34.342 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:47:34.343 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:47:34.347 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:47:34.349 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:34.350 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:47:34.366 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.384 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.387 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.388 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.391 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.395 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:47:34.444 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:47:34.451 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:47:34.452 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:47:34.454 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:47:34.504 +02:00 [DBG] Creating transaction savepoint.
2025-11-28 23:47:34.513 +02:00 [DBG] Created transaction savepoint.
2025-11-28 23:47:34.515 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:47:34.516 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:47:34.519 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-28 23:47:34.520 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:47:34.526 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:47:34.535 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-28 23:47:34.539 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:34.540 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-28 23:47:34.549 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:47:34.551 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 23:47:34.554 +02:00 [DBG] Committing transaction.
2025-11-28 23:47:34.556 +02:00 [DBG] Committed transaction.
2025-11-28 23:47:34.557 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:34.557 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:47:34.559 +02:00 [INF] Appointment created successfully with ID: 9
2025-11-28 23:47:34.561 +02:00 [DBG] Disposing transaction.
2025-11-28 23:47:34.563 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:47:34.565 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:47:34.565 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:47:34.566 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:47:34.566 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:47:34.567 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-28 23:47:34.581 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[9],action=[GetById],controller=[Appointment])
2025-11-28 23:47:34.585 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/9 and 
2025-11-28 23:47:34.587 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/9
2025-11-28 23:47:34.592 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 323.7334ms
2025-11-28 23:47:34.593 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:47:34.594 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:47:34.594 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:47:34.596 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 23:47:34.596 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-28 23:47:34.597 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 342.6502ms
2025-11-28 23:47:34.599 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-28 23:47:34.601 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:47:34.602 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:47:34.602 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:47:34.603 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:47:34.604 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:47:34.604 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 8.0534ms
2025-11-28 23:47:34.606 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 19
2025-11-28 23:47:34.609 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-28 23:47:34.609 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-28 23:47:34.610 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-28 23:47:34.611 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:47:34.612 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:47:34.612 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:47:34.613 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:47:34.616 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-28 23:47:34.620 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Patient)
2025-11-28 23:47:34.623 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-28 23:47:34.624 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 401 0 null 17.7001ms
2025-11-28 23:47:34.626 +02:00 [DBG] Connection id "0HNHEOT0LBBJ2", Request id "0HNHEOT0LBBJ2:00000009": started reading request body.
2025-11-28 23:47:34.627 +02:00 [DBG] Connection id "0HNHEOT0LBBJ2", Request id "0HNHEOT0LBBJ2:00000009": done reading request body.
2025-11-28 23:47:34.635 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/refresh-token - text/plain 88
2025-11-28 23:47:34.636 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-11-28 23:47:34.637 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-11-28 23:47:34.638 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)'
2025-11-28 23:47:34.639 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:47:34.639 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:47:34.640 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:47:34.641 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:47:34.641 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)'
2025-11-28 23:47:34.645 +02:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken(Hospital.Application.DTO.Auth.RefreshToken) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-28 23:47:34.646 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:47:34.647 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:47:34.648 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:47:34.649 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:47:34.650 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:47:34.651 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-28 23:47:34.652 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-28 23:47:34.653 +02:00 [DBG] Attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken' ...
2025-11-28 23:47:34.654 +02:00 [DBG] Attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken' using the name '' in request data ...
2025-11-28 23:47:34.655 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'text/plain'.
2025-11-28 23:47:34.656 +02:00 [DBG] No input formatter was found to support the content type 'text/plain' for use with the [FromBody] attribute.
2025-11-28 23:47:34.659 +02:00 [DBG] Done attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken'.
2025-11-28 23:47:34.660 +02:00 [DBG] Done attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken'.
2025-11-28 23:47:34.660 +02:00 [DBG] Attempting to validate the bound parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken' ...
2025-11-28 23:47:34.662 +02:00 [DBG] Done attempting to validate the bound parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken'.
2025-11-28 23:47:34.663 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter'.
2025-11-28 23:47:34.665 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:47:34.666 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:47:34.667 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-28 23:47:34.669 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-28 23:47:34.670 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-11-28 23:47:34.685 +02:00 [INF] Executed action Hospital.Controllers.AuthController.RefreshToken (Hospital) in 33.9284ms
2025-11-28 23:47:34.686 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)'
2025-11-28 23:47:34.687 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/refresh-token - 415 null application/problem+json; charset=utf-8 52.4345ms
2025-11-28 23:47:34.689 +02:00 [DBG] Connection id "0HNHEOT0LBBJ2", Request id "0HNHEOT0LBBJ2:0000000B": started reading request body.
2025-11-28 23:47:34.690 +02:00 [DBG] Connection id "0HNHEOT0LBBJ2", Request id "0HNHEOT0LBBJ2:0000000B": done reading request body.
2025-11-28 23:47:35.706 +02:00 [DBG] Connection id "0HNHEOT0LBBJ2" received FIN.
2025-11-28 23:47:35.707 +02:00 [DBG] Connection id "0HNHEOT0LBBJ2" is closed. The last processed stream ID was 11.
2025-11-28 23:47:35.707 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJ2 completed.
2025-11-28 23:47:35.709 +02:00 [DBG] Connection id "0HNHEOT0LBBJ2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:47:35.711 +02:00 [DBG] Connection id "0HNHEOT0LBBJ2" stopped.
2025-11-28 23:50:12.467 +02:00 [DBG] Connection id "0HNHEOT0LBBJ3" accepted.
2025-11-28 23:50:12.472 +02:00 [DBG] Connection id "0HNHEOT0LBBJ3" started.
2025-11-28 23:50:12.476 +02:00 [DBG] Connection 0HNHEOT0LBBJ3 established using the following protocol: "Tls13"
2025-11-28 23:50:12.482 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/4 - null null
2025-11-28 23:50:12.488 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/4'
2025-11-28 23:50:12.489 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/4'
2025-11-28 23:50:12.490 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:50:12.491 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:50:12.492 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:50:12.493 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:50:12.493 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:50:12.494 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:50:12.495 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:50:12.497 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:50:12.498 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:50:12.499 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:50:12.500 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:50:12.501 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:50:12.502 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:50:12.512 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:50:12.513 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:50:12.514 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:50:12.515 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:50:12.516 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:50:12.517 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:50:12.518 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:50:12.519 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:50:12.5193104+02:00"
2025-11-28 23:50:12.519 +02:00 [INF] Fetching doctor with ID 4
2025-11-28 23:50:12.521 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:50:12.522 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:50:12.523 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:50:12.523 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:50:12.524 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:50:12.525 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:50:12.526 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:50:12.527 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:50:12.528 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:50:12.539 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:50:12.541 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:12.542 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:12.543 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:12.543 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:12.544 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:12.545 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:12.546 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:12.547 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:12.548 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:12.549 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:50:12.549 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-28 23:50:12.550 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:50:12.551 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:50:12.552 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:50:12.554 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:50:12.554 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:50:12.555 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:50:12.555 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:50:12.556 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:50:12.557 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 54.986ms
2025-11-28 23:50:12.558 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:50:12.559 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:50:12.560 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:50:12.560 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:50:12.561 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/4 - 200 null application/json; charset=utf-8 79.4011ms
2025-11-28 23:50:20.732 +02:00 [DBG] Connection id "0HNHEOT0LBBJ3" received FIN.
2025-11-28 23:50:20.732 +02:00 [DBG] Connection id "0HNHEOT0LBBJ3" is closed. The last processed stream ID was 1.
2025-11-28 23:50:20.732 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJ3 completed.
2025-11-28 23:50:20.733 +02:00 [DBG] Connection id "0HNHEOT0LBBJ3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:50:20.735 +02:00 [DBG] Connection id "0HNHEOT0LBBJ3" stopped.
2025-11-28 23:50:58.137 +02:00 [DBG] Connection id "0HNHEOT0LBBJ4" accepted.
2025-11-28 23:50:58.141 +02:00 [DBG] Connection id "0HNHEOT0LBBJ4" started.
2025-11-28 23:50:58.145 +02:00 [DBG] Connection 0HNHEOT0LBBJ4 established using the following protocol: "Tls13"
2025-11-28 23:50:58.151 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:50:58.157 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:50:58.158 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:50:58.159 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:50:58.159 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:50:58.160 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:50:58.160 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:50:58.161 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 10.1199ms
2025-11-28 23:50:58.162 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:50:58.165 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:50:58.165 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:50:58.166 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:50:58.167 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:50:58.167 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:50:58.168 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:50:58.169 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:50:58.169 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:50:58.170 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:50:58.171 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:50:58.172 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:50:58.173 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:50:58.174 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:50:58.175 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:50:58.176 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:50:58.177 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:50:58.178 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:50:58.179 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:50:58.180 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:50:58.180 +02:00 [DBG] Connection id "0HNHEOT0LBBJ4", Request id "0HNHEOT0LBBJ4:00000003": started reading request body.
2025-11-28 23:50:58.181 +02:00 [DBG] Connection id "0HNHEOT0LBBJ4", Request id "0HNHEOT0LBBJ4:00000003": done reading request body.
2025-11-28 23:50:58.182 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:50:58.183 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:50:58.184 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:50:58.184 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:50:58.185 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:50:58.186 +02:00 [INF] Add Appointment called at "2025-11-28T23:50:58.1865860+02:00"
2025-11-28 23:50:58.187 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 4, Date: "2025-12-02", Shift: "Afternoon"
2025-11-28 23:50:58.188 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:50:58.194 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:50:58.195 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:50:58.195 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:50:58.196 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:50:58.197 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:50:58.198 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:50:58.199 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:50:58.200 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:50:58.200 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:50:58.201 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:50:58.215 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:50:58.217 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:58.218 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:58.219 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:58.220 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:50:58.220 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:50:58.221 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:50:58.222 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:50:58.223 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:50:58.224 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:50:58.234 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:50:58.235 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:58.236 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:58.237 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:58.238 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:58.239 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:58.240 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:58.241 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:58.241 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:58.242 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:50:58.243 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:50:58.244 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-28 23:50:58.245 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:50:58.246 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:50:58.246 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:50:58.247 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:50:58.250 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:50:58.251 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:50:58.252 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:50:58.253 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:50:58.254 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:50:58.255 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:50:58.255 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:50:58.259 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:50:58.261 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:50:58.261 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:50:58.279 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:50:58.280 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:50:58.281 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:50:58.282 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:50:58.283 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 4
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 23:50:58.297 +02:00 [DBG] Disposing transaction.
2025-11-28 23:50:58.326 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 149.6026ms
2025-11-28 23:50:58.327 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:50:58.357 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:50:58.362 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:50:58.363 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:50:58.364 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 23:50:58.365 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 202.9449ms
2025-11-28 23:51:00.225 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:51:00.227 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:51:00.228 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:51:00.229 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:51:00.230 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:51:00.231 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:51:00.231 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:51:00.232 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:51:00.233 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:51:00.233 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:51:00.235 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:51:00.236 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:51:00.237 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:51:00.238 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:51:00.239 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:51:00.240 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:51:00.242 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:51:00.243 +02:00 [INF] get all schedule called at "2025-11-28T23:51:00.2432823+02:00"
2025-11-28 23:51:00.244 +02:00 [INF] Fetching all schedules
2025-11-28 23:51:00.244 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:51:00.246 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:51:00.247 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:51:00.247 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:00.249 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:00.249 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:00.250 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:00.251 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:00.252 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:51:00.264 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:51:00.265 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.266 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.267 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.268 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.269 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.270 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.271 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.271 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.272 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.273 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.274 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.275 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.276 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.276 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.277 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.278 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.279 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.280 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.281 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.282 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.283 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.283 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.284 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.285 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.286 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.287 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.287 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.288 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.289 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.290 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.291 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.292 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.293 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.293 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.294 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.295 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.296 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.297 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.298 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.299 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.300 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:00.301 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:00.301 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 36ms reading results.
2025-11-28 23:51:00.302 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:00.303 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:51:00.305 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:51:00.306 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:51:00.307 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:51:00.307 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:51:00.308 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:51:00.309 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:51:00.310 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 69.5119ms
2025-11-28 23:51:00.311 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:51:00.311 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:51:00.312 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:00.313 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:51:00.314 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 89.7002ms
2025-11-28 23:51:00.739 +02:00 [DBG] Connection id "0HNHEOT0LBBJ4" received FIN.
2025-11-28 23:51:00.740 +02:00 [DBG] Connection id "0HNHEOT0LBBJ4" is closed. The last processed stream ID was 5.
2025-11-28 23:51:00.740 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJ4 completed.
2025-11-28 23:51:00.741 +02:00 [DBG] Connection id "0HNHEOT0LBBJ4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:51:00.744 +02:00 [DBG] Connection id "0HNHEOT0LBBJ4" stopped.
2025-11-28 23:51:10.607 +02:00 [DBG] Connection id "0HNHEOT0LBBJ5" accepted.
2025-11-28 23:51:10.608 +02:00 [DBG] Connection id "0HNHEOT0LBBJ5" started.
2025-11-28 23:51:10.611 +02:00 [DBG] Connection 0HNHEOT0LBBJ5 established using the following protocol: "Tls13"
2025-11-28 23:51:10.612 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 23:51:10.619 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 23:51:10.620 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 23:51:10.621 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:51:10.622 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:51:10.622 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:51:10.623 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:51:10.624 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:51:10.624 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:51:10.625 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:51:10.626 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:51:10.627 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:51:10.628 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:51:10.629 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:51:10.630 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:51:10.631 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:51:10.632 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:51:10.633 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:51:10.634 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:51:10.635 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:51:10.635 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:51:10.636 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:51:10.637 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:51:10.638 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:51:10.6384712+02:00"
2025-11-28 23:51:10.639 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 23:51:10.640 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:51:10.641 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:51:10.641 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:51:10.642 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:10.643 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:10.644 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:10.645 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:10.645 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:10.647 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:51:10.664 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:51:10.666 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:10.667 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:10.668 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:10.669 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:10.670 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:10.671 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:10.672 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:10.672 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:10.673 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:10.674 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:10.675 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:10.676 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:10.677 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-28 23:51:10.678 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:10.678 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:51:10.679 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:51:10.681 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:51:10.681 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:51:10.682 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:51:10.682 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:51:10.683 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:51:10.684 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 53.4231ms
2025-11-28 23:51:10.685 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:51:10.686 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:51:10.687 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:10.687 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:51:10.688 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 76.3142ms
2025-11-28 23:51:10.740 +02:00 [DBG] Connection id "0HNHEOT0LBBJ5" received FIN.
2025-11-28 23:51:10.741 +02:00 [DBG] Connection id "0HNHEOT0LBBJ5" is closed. The last processed stream ID was 1.
2025-11-28 23:51:10.742 +02:00 [DBG] Connection id "0HNHEOT0LBBJ5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:51:10.741 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJ5 completed.
2025-11-28 23:51:10.743 +02:00 [DBG] Connection id "0HNHEOT0LBBJ5" stopped.
2025-11-28 23:51:12.722 +02:00 [DBG] Connection id "0HNHEOT0LBBJ6" accepted.
2025-11-28 23:51:12.724 +02:00 [DBG] Connection id "0HNHEOT0LBBJ6" started.
2025-11-28 23:51:12.727 +02:00 [DBG] Connection 0HNHEOT0LBBJ6 established using the following protocol: "Tls13"
2025-11-28 23:51:12.729 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:51:12.731 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:51:12.731 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:51:12.732 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:51:12.733 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:51:12.733 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:51:12.734 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:51:12.735 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.846ms
2025-11-28 23:51:12.736 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:51:12.738 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:51:12.739 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:51:12.740 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:51:12.740 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:51:12.741 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:51:12.742 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:51:12.742 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:51:12.743 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:51:12.743 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:51:12.745 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:51:12.745 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:51:12.746 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:51:12.748 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:51:12.748 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:51:12.749 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:51:12.750 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:51:12.751 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:51:12.752 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:51:12.753 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:51:12.754 +02:00 [DBG] Connection id "0HNHEOT0LBBJ6", Request id "0HNHEOT0LBBJ6:00000003": started reading request body.
2025-11-28 23:51:12.754 +02:00 [DBG] Connection id "0HNHEOT0LBBJ6", Request id "0HNHEOT0LBBJ6:00000003": done reading request body.
2025-11-28 23:51:12.755 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:51:12.756 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:51:12.757 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:51:12.757 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:51:12.758 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:51:12.759 +02:00 [INF] Add Appointment called at "2025-11-28T23:51:12.7594492+02:00"
2025-11-28 23:51:12.760 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-12-04", Shift: "Evening"
2025-11-28 23:51:12.761 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:51:12.762 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:51:12.763 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:51:12.763 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:12.764 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:12.765 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:51:12.766 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:51:12.767 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:12.768 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:12.769 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:12.770 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:51:12.781 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:51:12.783 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:12.784 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:12.784 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:12.785 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:12.786 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:51:12.787 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:12.788 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:12.789 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:12.790 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:51:12.797 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:51:12.799 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:12.800 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:12.801 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:12.802 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:12.802 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:12.803 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:12.804 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:12.805 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:12.806 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:12.806 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:12.807 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:12.808 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:12.809 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-28 23:51:12.810 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:12.811 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:12.811 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:12.812 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:51:12.814 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:51:12.816 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:12.817 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:51:12.818 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:12.819 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:12.820 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:12.820 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:51:12.824 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:51:12.826 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:12.826 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:51:12.840 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:51:12.841 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:51:12.842 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:12.843 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:51:12.844 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 1
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 23:51:12.858 +02:00 [DBG] Disposing transaction.
2025-11-28 23:51:12.906 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 157.0957ms
2025-11-28 23:51:12.908 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:51:12.938 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:51:12.943 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:51:12.944 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:12.945 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:51:12.946 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 209.9817ms
2025-11-28 23:51:15.467 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:51:15.470 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:51:15.471 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:51:15.472 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:51:15.472 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:51:15.473 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:51:15.474 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:51:15.474 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:51:15.475 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:51:15.476 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:51:15.477 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:51:15.478 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:51:15.479 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:51:15.480 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:51:15.481 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:51:15.482 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:51:15.484 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:51:15.485 +02:00 [INF] get all schedule called at "2025-11-28T23:51:15.4855263+02:00"
2025-11-28 23:51:15.486 +02:00 [INF] Fetching all schedules
2025-11-28 23:51:15.486 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:51:15.488 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:51:15.488 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:51:15.489 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:15.490 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:15.491 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:15.491 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:15.492 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:15.493 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:51:15.500 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:51:15.502 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.503 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.504 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.505 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.506 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.506 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.507 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.508 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.509 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.510 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.511 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.512 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.512 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.513 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.514 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.515 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.516 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.517 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.518 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.518 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.519 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.520 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.521 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.522 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.523 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.523 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.524 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.525 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.526 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.527 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.528 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.528 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.529 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.530 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.531 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.532 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.533 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.533 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.534 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.535 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.536 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:15.537 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:15.538 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 36ms reading results.
2025-11-28 23:51:15.539 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:15.540 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:51:15.541 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:51:15.542 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:51:15.543 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:51:15.543 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:51:15.543 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:51:15.544 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:51:15.545 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 63.9018ms
2025-11-28 23:51:15.546 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:51:15.547 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:51:15.548 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:15.549 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:51:15.549 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 82.5428ms
2025-11-28 23:51:20.741 +02:00 [DBG] Connection id "0HNHEOT0LBBJ6" received FIN.
2025-11-28 23:51:20.741 +02:00 [DBG] Connection id "0HNHEOT0LBBJ6" is closed. The last processed stream ID was 5.
2025-11-28 23:51:20.742 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJ6 completed.
2025-11-28 23:51:20.742 +02:00 [DBG] Connection id "0HNHEOT0LBBJ6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:51:20.744 +02:00 [DBG] Connection id "0HNHEOT0LBBJ6" stopped.
2025-11-28 23:51:21.447 +02:00 [DBG] Connection id "0HNHEOT0LBBJ7" accepted.
2025-11-28 23:51:21.448 +02:00 [DBG] Connection id "0HNHEOT0LBBJ7" started.
2025-11-28 23:51:21.451 +02:00 [DBG] Connection 0HNHEOT0LBBJ7 established using the following protocol: "Tls13"
2025-11-28 23:51:21.453 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-28 23:51:21.455 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-28 23:51:21.455 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-28 23:51:21.456 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:51:21.457 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:51:21.458 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:51:21.458 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:51:21.459 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:51:21.460 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:51:21.460 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:51:21.462 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:51:21.462 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:51:21.463 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:51:21.464 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:51:21.465 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:51:21.466 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:51:21.468 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:51:21.469 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:51:21.469 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:51:21.470 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:51:21.471 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:51:21.472 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:51:21.473 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:51:21.474 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:51:21.4741530+02:00"
2025-11-28 23:51:21.474 +02:00 [INF] Fetching doctor with ID 5
2025-11-28 23:51:21.475 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:51:21.477 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:51:21.477 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:51:21.478 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:21.479 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:21.480 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:21.480 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:21.481 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:21.482 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:51:21.491 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:51:21.493 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:21.494 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:21.494 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:21.495 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:21.496 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:21.497 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:21.498 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:21.499 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:21.499 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:21.500 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:21.501 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:21.502 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:21.503 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:21.504 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:21.505 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-28 23:51:21.506 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:21.506 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:51:21.508 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:51:21.509 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:51:21.509 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:51:21.510 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:51:21.510 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:51:21.511 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:51:21.512 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 45.8398ms
2025-11-28 23:51:21.513 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:51:21.514 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:51:21.515 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:21.515 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:51:21.516 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 63.7067ms
2025-11-28 23:51:23.231 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:51:23.233 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:51:23.234 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:51:23.235 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:51:23.235 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:51:23.236 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:51:23.236 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:51:23.237 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.5623ms
2025-11-28 23:51:23.238 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:51:23.241 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:51:23.241 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:51:23.242 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:51:23.243 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:51:23.243 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:51:23.244 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:51:23.245 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:51:23.245 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:51:23.246 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:51:23.247 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:51:23.248 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:51:23.249 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:51:23.250 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:51:23.251 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:51:23.252 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:51:23.252 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:51:23.253 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:51:23.254 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:51:23.255 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:51:23.256 +02:00 [DBG] Connection id "0HNHEOT0LBBJ7", Request id "0HNHEOT0LBBJ7:00000005": started reading request body.
2025-11-28 23:51:23.256 +02:00 [DBG] Connection id "0HNHEOT0LBBJ7", Request id "0HNHEOT0LBBJ7:00000005": done reading request body.
2025-11-28 23:51:23.257 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:51:23.258 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:51:23.259 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:51:23.260 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:51:23.261 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:51:23.261 +02:00 [INF] Add Appointment called at "2025-11-28T23:51:23.2618577+02:00"
2025-11-28 23:51:23.262 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 5, Date: "2025-12-04", Shift: "Afternoon"
2025-11-28 23:51:23.263 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:51:23.265 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:51:23.265 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:51:23.266 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:23.267 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:23.267 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:51:23.268 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:51:23.269 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:23.270 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:23.270 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:23.271 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:51:23.281 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:51:23.283 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.283 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.284 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.285 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:23.286 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:51:23.287 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:23.288 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:23.289 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:23.289 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:51:23.297 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:51:23.299 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.300 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.301 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.301 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.302 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.303 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.304 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.305 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.305 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.306 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.307 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.308 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.308 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.309 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:23.310 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-28 23:51:23.311 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:23.312 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:23.313 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:23.313 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:51:23.316 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:51:23.317 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:23.318 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:51:23.319 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:23.319 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:23.320 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:23.321 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:51:23.325 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:51:23.326 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:23.327 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:51:23.329 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.330 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.331 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.332 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.333 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.334 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:51:23.335 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:51:23.335 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:51:23.336 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:51:23.337 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:51:23.338 +02:00 [DBG] Creating transaction savepoint.
2025-11-28 23:51:23.339 +02:00 [DBG] Created transaction savepoint.
2025-11-28 23:51:23.340 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:23.340 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:23.341 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:23.342 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:51:23.346 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:51:23.348 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-28 23:51:23.349 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:23.350 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:51:23.351 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:23.352 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 23:51:23.353 +02:00 [DBG] Committing transaction.
2025-11-28 23:51:23.353 +02:00 [DBG] Committed transaction.
2025-11-28 23:51:23.354 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:23.355 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:51:23.356 +02:00 [INF] Appointment created successfully with ID: 10
2025-11-28 23:51:23.356 +02:00 [DBG] Disposing transaction.
2025-11-28 23:51:23.357 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:51:23.358 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:51:23.359 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:51:23.360 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:51:23.360 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:51:23.361 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-28 23:51:23.362 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[10],action=[GetById],controller=[Appointment])
2025-11-28 23:51:23.364 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/10 and 
2025-11-28 23:51:23.365 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/10
2025-11-28 23:51:23.366 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 114.391ms
2025-11-28 23:51:23.367 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:51:23.368 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:51:23.369 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:23.370 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:51:23.371 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 133.1656ms
2025-11-28 23:51:23.372 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-28 23:51:23.376 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-28 23:51:23.377 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:51:23.378 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:51:23.378 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:51:23.379 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:51:23.379 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:51:23.380 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 8.3754ms
2025-11-28 23:51:23.381 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-28 23:51:23.384 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-28 23:51:23.385 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-28 23:51:23.386 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-28 23:51:23.386 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:51:23.387 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:51:23.388 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:51:23.388 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:51:23.390 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-28 23:51:23.391 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Patient)
2025-11-28 23:51:23.392 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-28 23:51:23.392 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 401 0 null 10.9173ms
2025-11-28 23:51:23.394 +02:00 [DBG] Connection id "0HNHEOT0LBBJ7", Request id "0HNHEOT0LBBJ7:00000009": started reading request body.
2025-11-28 23:51:23.395 +02:00 [DBG] Connection id "0HNHEOT0LBBJ7", Request id "0HNHEOT0LBBJ7:00000009": done reading request body.
2025-11-28 23:51:30.742 +02:00 [DBG] Connection id "0HNHEOT0LBBJ7" received FIN.
2025-11-28 23:51:30.743 +02:00 [DBG] Connection id "0HNHEOT0LBBJ7" is closed. The last processed stream ID was 9.
2025-11-28 23:51:30.743 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJ7 completed.
2025-11-28 23:51:30.744 +02:00 [DBG] Connection id "0HNHEOT0LBBJ7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:51:30.747 +02:00 [DBG] Connection id "0HNHEOT0LBBJ7" stopped.
2025-11-28 23:51:35.565 +02:00 [DBG] Connection id "0HNHEOT0LBBJ8" accepted.
2025-11-28 23:51:35.566 +02:00 [DBG] Connection id "0HNHEOT0LBBJ8" started.
2025-11-28 23:51:35.570 +02:00 [DBG] Connection 0HNHEOT0LBBJ8 established using the following protocol: "Tls13"
2025-11-28 23:51:35.573 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:51:35.575 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:51:35.576 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:51:35.577 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:51:35.578 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:51:35.578 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:51:35.579 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:51:35.580 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:51:35.581 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:51:35.581 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:51:35.582 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:51:35.583 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:51:35.584 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:51:35.587 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:51:35.588 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:51:35.589 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:51:35.590 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:51:35.591 +02:00 [INF] get all schedule called at "2025-11-28T23:51:35.5916097+02:00"
2025-11-28 23:51:35.592 +02:00 [INF] Fetching all schedules
2025-11-28 23:51:35.593 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:51:35.594 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:51:35.595 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:51:35.596 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:35.597 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:35.597 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:35.598 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:35.599 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:35.600 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:51:35.608 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:51:35.609 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.610 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.611 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.611 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.612 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.613 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.614 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.615 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.616 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.617 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.618 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.619 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.620 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.621 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.622 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.623 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.624 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.625 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.626 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.627 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.628 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.629 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.630 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.630 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.631 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.632 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.633 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.634 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.635 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.636 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.637 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.638 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.639 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.639 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.640 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.642 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.642 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.643 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.644 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.645 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.646 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:35.647 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:35.648 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 38ms reading results.
2025-11-28 23:51:35.649 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:35.649 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:51:35.651 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:51:35.652 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:51:35.653 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:51:35.653 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:51:35.653 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:51:35.655 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:51:35.656 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 66.8135ms
2025-11-28 23:51:35.657 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:51:35.657 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:51:35.658 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:35.659 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:51:35.660 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 86.9476ms
2025-11-28 23:51:40.745 +02:00 [DBG] Connection id "0HNHEOT0LBBJ8" received FIN.
2025-11-28 23:51:40.746 +02:00 [DBG] Connection id "0HNHEOT0LBBJ8" is closed. The last processed stream ID was 1.
2025-11-28 23:51:40.746 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJ8 completed.
2025-11-28 23:51:40.747 +02:00 [DBG] Connection id "0HNHEOT0LBBJ8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:51:40.750 +02:00 [DBG] Connection id "0HNHEOT0LBBJ8" stopped.
2025-11-28 23:51:44.819 +02:00 [DBG] Connection id "0HNHEOT0LBBJ9" accepted.
2025-11-28 23:51:44.819 +02:00 [DBG] Connection id "0HNHEOT0LBBJ9" received FIN.
2025-11-28 23:51:44.819 +02:00 [DBG] Connection id "0HNHEOT0LBBJ9" started.
2025-11-28 23:51:44.820 +02:00 [DBG] Connection id "0HNHEOT0LBBJA" accepted.
2025-11-28 23:51:44.822 +02:00 [DBG] Connection id "0HNHEOT0LBBJA" started.
2025-11-28 23:51:44.822 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-28 23:51:44.825 +02:00 [DBG] Connection id "0HNHEOT0LBBJ9" stopped.
2025-11-28 23:51:44.825 +02:00 [DBG] Connection 0HNHEOT0LBBJA established using the following protocol: "Tls13"
2025-11-28 23:51:44.825 +02:00 [DBG] Connection id "0HNHEOT0LBBJ9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:51:44.829 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Auth/login - application/json 66
2025-11-28 23:51:44.832 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-28 23:51:44.833 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-28 23:51:44.834 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-28 23:51:44.834 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:51:44.835 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:51:44.836 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-28 23:51:44.839 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-28 23:51:44.840 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:51:44.841 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:51:44.842 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:51:44.843 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:51:44.844 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:51:44.845 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-28 23:51:44.846 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-28 23:51:44.846 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-28 23:51:44.847 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-28 23:51:44.848 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:51:44.850 +02:00 [DBG] Connection id "0HNHEOT0LBBJA", Request id "0HNHEOT0LBBJA:00000001": started reading request body.
2025-11-28 23:51:44.851 +02:00 [DBG] Connection id "0HNHEOT0LBBJA", Request id "0HNHEOT0LBBJA:00000001": done reading request body.
2025-11-28 23:51:44.852 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-28 23:51:44.853 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-28 23:51:44.854 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-28 23:51:44.855 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-28 23:51:44.857 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-28 23:51:44.859 +02:00 [INF] Login called at "2025-11-28T23:51:44.8591300+02:00"
2025-11-28 23:51:44.861 +02:00 [INF] Login attempt for email: nour22110@gmail.com
2025-11-28 23:51:44.864 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:51:44.866 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-11-28 23:51:44.870 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:51:44.874 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:51:44.875 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:51:44.876 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:44.877 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:44.878 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:44.878 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:44.879 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:44.880 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-28 23:51:44.885 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-28 23:51:44.886 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:44.887 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:44.888 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:51:44.889 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:44.890 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:51:44.961 +02:00 [DBG] Creating JWT token for user a06c9a74-d53e-4235-a0b9-681147a73dfc
2025-11-28 23:51:44.966 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2025-11-28 23:51:44.970 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 23:51:44.971 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:44.972 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:44.973 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:44.974 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:44.975 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:44.976 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-28 23:51:44.981 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-28 23:51:44.983 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:44.983 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:51:44.984 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:44.985 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:51:44.991 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-11-28 23:51:44.995 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 23:51:44.996 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:44.997 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:44.998 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:44.999 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:44.999 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:45.000 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-28 23:51:45.005 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-28 23:51:45.006 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.007 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:51:45.009 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.009 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:51:45.018 +02:00 [DBG] JWT token created for user a06c9a74-d53e-4235-a0b9-681147a73dfc, expires at "2025-11-28T22:51:45.0000000Z"
2025-11-28 23:51:45.020 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.021 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.022 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:45.023 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:45.024 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:45.025 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-28 23:51:45.027 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-28 23:51:45.029 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.030 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:51:45.031 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.032 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:51:45.039 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-11-28 23:51:45.045 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:51:45.047 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.048 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.049 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:45.049 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:45.051 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 23:51:45.052 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-28 23:51:45.056 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-28 23:51:45.058 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.059 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:51:45.060 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.061 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 23:51:45.070 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:45.072 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:51:45.073 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:51:45.074 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:51:45.075 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:51:45.076 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:51:45.084 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.086 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.087 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:45.088 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:45.090 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-28 23:51:45.092 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-28 23:51:45.099 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-28 23:51:45.102 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.103 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:51:45.104 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.105 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:51:45.107 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:45.108 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 23:51:45.126 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .FirstOrDefault(p => p.UserId == __user_Id_0)'
2025-11-28 23:51:45.129 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
            SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId
            FROM Patients AS p
            WHERE p.UserId == @__user_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-28 23:51:45.130 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.131 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.131 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:51:45.132 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:51:45.133 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:51:45.134 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-28 23:51:45.137 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-28 23:51:45.139 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:45.140 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:51:45.141 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.142 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:51:45.143 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.144 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:51:45.145 +02:00 [INF] Patient 2 logged in successfully
2025-11-28 23:51:45.145 +02:00 [INF] User nour22110@gmail.com logged in successfully with roles: Patient
2025-11-28 23:51:45.146 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:51:45.148 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:51:45.148 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:51:45.149 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:51:45.149 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:51:45.150 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-28 23:51:45.155 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 310.3822ms
2025-11-28 23:51:45.156 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-28 23:51:45.157 +02:00 [DBG] Connection id "0HNHEOT0LBBJA" completed keep alive response.
2025-11-28 23:51:45.157 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:51:45.158 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:51:45.159 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:51:45.160 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 330.553ms
2025-11-28 23:52:04.280 +02:00 [DBG] Connection id "0HNHEOT0LBBJB" accepted.
2025-11-28 23:52:04.281 +02:00 [DBG] Connection id "0HNHEOT0LBBJB" started.
2025-11-28 23:52:04.284 +02:00 [DBG] Connection 0HNHEOT0LBBJB established using the following protocol: "Tls13"
2025-11-28 23:52:04.285 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-28 23:52:04.287 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-28 23:52:04.288 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-28 23:52:04.289 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:52:04.290 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:52:04.290 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:52:04.291 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:52:04.291 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:52:04.292 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:52:04.293 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:52:04.294 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:52:04.295 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:52:04.296 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:52:04.297 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:52:04.298 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:52:04.299 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:52:04.300 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:52:04.301 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:52:04.302 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:52:04.303 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:52:04.304 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:52:04.305 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:52:04.305 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:52:04.306 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:52:04.3067998+02:00"
2025-11-28 23:52:04.307 +02:00 [INF] Fetching doctor with ID 5
2025-11-28 23:52:04.308 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:52:04.310 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:52:04.310 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:52:04.311 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:04.312 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:04.312 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:52:04.313 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:52:04.314 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:52:04.315 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:52:04.324 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:52:04.326 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:04.327 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:04.327 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:04.328 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:04.329 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:04.330 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:04.331 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:04.332 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:04.332 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:04.333 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:04.334 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:04.335 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:04.336 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:04.337 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:04.337 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-28 23:52:04.338 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:04.339 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:52:04.340 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:52:04.342 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:52:04.342 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:52:04.343 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:52:04.343 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:52:04.344 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:52:04.345 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 45.8634ms
2025-11-28 23:52:04.346 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:52:04.346 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:52:04.347 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:04.348 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:52:04.349 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 63.8722ms
2025-11-28 23:52:05.905 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:52:05.907 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:52:05.908 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:52:05.909 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:52:05.910 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:52:05.911 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:52:05.911 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:52:05.912 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 6.7145ms
2025-11-28 23:52:05.913 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:52:05.916 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:52:05.917 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:52:05.918 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:52:05.918 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:52:05.919 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:52:05.920 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:52:05.920 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:52:05.921 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:52:05.922 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:52:05.923 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:52:05.924 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:52:05.925 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:52:05.927 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:52:05.927 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:52:05.928 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:52:05.929 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:52:05.930 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:52:05.931 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:52:05.932 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:52:05.933 +02:00 [DBG] Connection id "0HNHEOT0LBBJB", Request id "0HNHEOT0LBBJB:00000005": started reading request body.
2025-11-28 23:52:05.933 +02:00 [DBG] Connection id "0HNHEOT0LBBJB", Request id "0HNHEOT0LBBJB:00000005": done reading request body.
2025-11-28 23:52:05.935 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:52:05.935 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:52:05.937 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:52:05.938 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:52:05.939 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:52:05.940 +02:00 [INF] Add Appointment called at "2025-11-28T23:52:05.9402679+02:00"
2025-11-28 23:52:05.940 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 5, Date: "2025-12-04", Shift: "Afternoon"
2025-11-28 23:52:05.942 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:52:05.943 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:52:05.944 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:52:05.944 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:05.945 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:05.946 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:52:05.947 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:52:05.948 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:52:05.949 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:52:05.949 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:52:05.950 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:52:05.964 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:52:05.965 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.966 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.967 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.968 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:05.969 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:52:05.971 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:52:05.972 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:52:05.973 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:52:05.974 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:52:05.985 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:52:05.987 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.988 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.989 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.989 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.990 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.991 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.992 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.993 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.994 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.995 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.996 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.997 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.998 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:05.999 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:06.000 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-28 23:52:06.001 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:52:06.002 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:52:06.003 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:52:06.004 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:52:06.007 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:52:06.008 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:06.009 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:52:06.011 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:52:06.012 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:52:06.013 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 23:52:06.014 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:52:06.018 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:52:06.020 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:06.020 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:52:06.038 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:52:06.039 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:52:06.040 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:06.041 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:52:06.042 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 5
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 23:52:06.056 +02:00 [DBG] Disposing transaction.
2025-11-28 23:52:06.086 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 157.7238ms
2025-11-28 23:52:06.087 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:52:06.126 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:52:06.130 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:52:06.131 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:06.132 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:52:06.133 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 219.4915ms
2025-11-28 23:52:10.751 +02:00 [DBG] Connection id "0HNHEOT0LBBJB" received FIN.
2025-11-28 23:52:10.751 +02:00 [DBG] Connection id "0HNHEOT0LBBJB" is closed. The last processed stream ID was 5.
2025-11-28 23:52:10.752 +02:00 [DBG] Connection id "0HNHEOT0LBBJB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:52:10.752 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJB completed.
2025-11-28 23:52:10.754 +02:00 [DBG] Connection id "0HNHEOT0LBBJB" stopped.
2025-11-28 23:52:11.640 +02:00 [DBG] Connection id "0HNHEOT0LBBJC" accepted.
2025-11-28 23:52:11.641 +02:00 [DBG] Connection id "0HNHEOT0LBBJC" started.
2025-11-28 23:52:11.645 +02:00 [DBG] Connection 0HNHEOT0LBBJC established using the following protocol: "Tls13"
2025-11-28 23:52:11.647 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:52:11.649 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:52:11.650 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:52:11.651 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:52:11.652 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:52:11.653 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:52:11.654 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:52:11.654 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:52:11.655 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:52:11.656 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:52:11.657 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:52:11.658 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:52:11.659 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:52:11.660 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:52:11.661 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:52:11.662 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:52:11.663 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:52:11.664 +02:00 [INF] get all schedule called at "2025-11-28T23:52:11.6642494+02:00"
2025-11-28 23:52:11.664 +02:00 [INF] Fetching all schedules
2025-11-28 23:52:11.665 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:52:11.667 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:52:11.667 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:52:11.668 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:11.669 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:11.670 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:52:11.671 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:52:11.671 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:52:11.672 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:52:11.680 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:52:11.681 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.682 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.683 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.684 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.685 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.686 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.686 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.687 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.688 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.689 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.690 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.691 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.692 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.692 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.693 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.694 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.695 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.696 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.697 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.698 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.700 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.701 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.702 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.703 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.703 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.704 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.705 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.706 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.707 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.708 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.708 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.709 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.710 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.711 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.712 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.713 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.714 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.715 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.716 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:52:11.717 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:11.717 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 36ms reading results.
2025-11-28 23:52:11.718 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:11.719 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:52:11.720 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:52:11.722 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:52:11.722 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:52:11.722 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:52:11.723 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:52:11.724 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:52:11.725 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 63.1758ms
2025-11-28 23:52:11.726 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:52:11.727 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:52:11.727 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:52:11.728 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:52:11.729 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 82.1813ms
2025-11-28 23:52:50.769 +02:00 [DBG] Connection id "0HNHEOT0LBBJC" received FIN.
2025-11-28 23:52:50.770 +02:00 [DBG] Connection id "0HNHEOT0LBBJC" is closed. The last processed stream ID was 1.
2025-11-28 23:52:50.770 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJC completed.
2025-11-28 23:52:50.771 +02:00 [DBG] Connection id "0HNHEOT0LBBJC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:52:50.775 +02:00 [DBG] Connection id "0HNHEOT0LBBJC" stopped.
2025-11-28 23:53:40.345 +02:00 [DBG] Connection id "0HNHEOT0LBBJD" accepted.
2025-11-28 23:53:40.350 +02:00 [DBG] Connection id "0HNHEOT0LBBJD" started.
2025-11-28 23:53:40.354 +02:00 [DBG] Connection 0HNHEOT0LBBJD established using the following protocol: "Tls13"
2025-11-28 23:53:40.359 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-28 23:53:40.365 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-28 23:53:40.365 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-28 23:53:40.366 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:53:40.367 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:53:40.368 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:53:40.368 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:53:40.369 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:53:40.370 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:53:40.370 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:53:40.371 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:53:40.372 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:53:40.373 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:53:40.375 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:53:40.376 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:53:40.377 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:53:40.378 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:53:40.379 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:53:40.379 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:53:40.380 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:53:40.381 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:53:40.382 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:53:40.383 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:53:40.384 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:53:40.3843302+02:00"
2025-11-28 23:53:40.384 +02:00 [INF] Fetching doctor with ID 1
2025-11-28 23:53:40.386 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:53:40.387 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:53:40.388 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:53:40.388 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:40.389 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:40.390 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:53:40.391 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:53:40.391 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:53:40.392 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:53:40.403 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:53:40.404 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:40.405 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:40.406 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:40.407 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:40.408 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:40.409 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:40.409 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:40.410 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:40.411 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:40.412 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:40.413 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:40.414 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:40.414 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-28 23:53:40.415 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:40.416 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:53:40.417 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:53:40.419 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:53:40.419 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:53:40.420 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:53:40.420 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:53:40.421 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:53:40.422 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 45.1133ms
2025-11-28 23:53:40.423 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:53:40.424 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:53:40.424 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:40.425 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:53:40.426 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 67.3483ms
2025-11-28 23:53:40.775 +02:00 [DBG] Connection id "0HNHEOT0LBBJD" received FIN.
2025-11-28 23:53:40.777 +02:00 [DBG] Connection id "0HNHEOT0LBBJD" is closed. The last processed stream ID was 1.
2025-11-28 23:53:40.778 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJD completed.
2025-11-28 23:53:40.779 +02:00 [DBG] Connection id "0HNHEOT0LBBJD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:53:40.781 +02:00 [DBG] Connection id "0HNHEOT0LBBJD" stopped.
2025-11-28 23:53:41.077 +02:00 [DBG] Connection id "0HNHEOT0LBBJE" accepted.
2025-11-28 23:53:41.078 +02:00 [DBG] Connection id "0HNHEOT0LBBJE" started.
2025-11-28 23:53:41.081 +02:00 [DBG] Connection 0HNHEOT0LBBJE established using the following protocol: "Tls13"
2025-11-28 23:53:41.084 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:53:41.086 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:53:41.087 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:53:41.088 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:53:41.088 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:53:41.089 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:53:41.090 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:53:41.091 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:53:41.091 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:53:41.092 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:53:41.093 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:53:41.094 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:53:41.095 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:53:41.096 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:53:41.097 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:53:41.098 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:53:41.099 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:53:41.100 +02:00 [INF] get all schedule called at "2025-11-28T23:53:41.1001623+02:00"
2025-11-28 23:53:41.100 +02:00 [INF] Fetching all schedules
2025-11-28 23:53:41.101 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:53:41.102 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:53:41.103 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:53:41.104 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:41.105 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:41.105 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:53:41.106 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:53:41.107 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:53:41.107 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:53:41.113 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:53:41.115 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.116 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.117 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.118 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.119 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.120 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.120 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.121 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.122 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.123 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.124 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.125 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.126 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.127 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.128 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.129 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.130 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.131 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.132 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.133 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.133 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.134 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.135 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.136 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.137 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.137 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.138 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.139 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.140 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.141 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.142 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.143 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.143 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.144 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.146 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.147 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.148 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.149 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.150 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.150 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:41.151 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:41.152 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 37ms reading results.
2025-11-28 23:53:41.153 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:41.154 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:53:41.155 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:53:41.156 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:53:41.157 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:53:41.157 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:53:41.158 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:53:41.159 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:53:41.160 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 62.0269ms
2025-11-28 23:53:41.161 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:53:41.162 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:53:41.163 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:41.163 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:53:41.164 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 80.8939ms
2025-11-28 23:53:49.758 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-11-28 23:53:49.760 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-28 23:53:49.760 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:53:49.761 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:53:49.762 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:53:49.763 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:53:49.763 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:53:49.764 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 6.2209ms
2025-11-28 23:53:49.765 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 54
2025-11-28 23:53:49.768 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-28 23:53:49.769 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-28 23:53:49.770 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-28 23:53:49.771 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:53:49.771 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:53:49.772 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:53:49.772 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:53:49.773 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-28 23:53:49.774 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-28 23:53:49.775 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:53:49.776 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:53:49.777 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:53:49.778 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:53:49.779 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:53:49.780 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-28 23:53:49.780 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-28 23:53:49.781 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-28 23:53:49.782 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-28 23:53:49.783 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:53:49.784 +02:00 [DBG] Connection id "0HNHEOT0LBBJE", Request id "0HNHEOT0LBBJE:00000005": started reading request body.
2025-11-28 23:53:49.785 +02:00 [DBG] Connection id "0HNHEOT0LBBJE", Request id "0HNHEOT0LBBJE:00000005": done reading request body.
2025-11-28 23:53:49.786 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-28 23:53:49.787 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-28 23:53:49.787 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-28 23:53:49.788 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-28 23:53:49.789 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-28 23:53:49.790 +02:00 [INF] Login called at "2025-11-28T23:53:49.7903820+02:00"
2025-11-28 23:53:49.791 +02:00 [INF] Login attempt for email: nour22110@gmail.com
2025-11-28 23:53:49.792 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:53:49.793 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:53:49.794 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:53:49.794 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.795 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.796 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:53:49.797 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:53:49.798 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:53:49.799 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-28 23:53:49.803 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-28 23:53:49.805 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:49.806 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.807 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:53:49.808 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.809 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:53:49.877 +02:00 [DBG] Creating JWT token for user a06c9a74-d53e-4235-a0b9-681147a73dfc
2025-11-28 23:53:49.880 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.881 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.882 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:53:49.883 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:53:49.884 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:53:49.885 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-28 23:53:49.890 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-28 23:53:49.892 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.893 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:53:49.895 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.896 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 23:53:49.898 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.899 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.900 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:53:49.901 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:53:49.902 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:53:49.903 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-28 23:53:49.907 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-28 23:53:49.908 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.909 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:53:49.910 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.911 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:53:49.912 +02:00 [DBG] JWT token created for user a06c9a74-d53e-4235-a0b9-681147a73dfc, expires at "2025-11-28T22:53:49.0000000Z"
2025-11-28 23:53:49.913 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.914 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.915 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:53:49.915 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:53:49.916 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:53:49.917 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-28 23:53:49.919 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-28 23:53:49.920 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.921 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:53:49.923 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.924 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 23:53:49.925 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.926 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.927 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:53:49.928 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:53:49.929 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:53:49.930 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-28 23:53:49.933 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-28 23:53:49.935 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.936 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:53:49.937 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.938 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:53:49.939 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:49.940 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:53:49.941 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:53:49.942 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:53:49.942 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:53:49.943 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:53:49.944 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.945 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.947 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:53:49.947 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:53:49.948 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:53:49.949 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-28 23:53:49.954 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-28 23:53:49.956 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.957 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:53:49.959 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.959 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:53:49.960 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:49.962 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 23:53:49.964 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.966 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.966 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:53:49.967 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:53:49.968 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:53:49.969 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-28 23:53:49.973 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-28 23:53:49.974 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:49.975 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:49.976 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.977 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-28 23:53:49.978 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.979 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:53:49.980 +02:00 [INF] Patient 2 logged in successfully
2025-11-28 23:53:49.980 +02:00 [INF] User nour22110@gmail.com logged in successfully with roles: Patient
2025-11-28 23:53:49.981 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:53:49.983 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:53:49.983 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:53:49.984 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:53:49.984 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:53:49.985 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-28 23:53:49.986 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 206.5069ms
2025-11-28 23:53:49.987 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-28 23:53:49.988 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:53:49.989 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:49.989 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:53:49.990 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 225.3816ms
2025-11-28 23:53:50.777 +02:00 [DBG] Connection id "0HNHEOT0LBBJE" received FIN.
2025-11-28 23:53:50.779 +02:00 [DBG] Connection id "0HNHEOT0LBBJE" is closed. The last processed stream ID was 5.
2025-11-28 23:53:50.779 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJE completed.
2025-11-28 23:53:50.780 +02:00 [DBG] Connection id "0HNHEOT0LBBJE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:53:50.783 +02:00 [DBG] Connection id "0HNHEOT0LBBJE" stopped.
2025-11-28 23:53:55.156 +02:00 [DBG] Connection id "0HNHEOT0LBBJF" accepted.
2025-11-28 23:53:55.158 +02:00 [DBG] Connection id "0HNHEOT0LBBJF" started.
2025-11-28 23:53:55.160 +02:00 [DBG] Connection 0HNHEOT0LBBJF established using the following protocol: "Tls13"
2025-11-28 23:53:55.161 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:53:55.164 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:53:55.165 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:53:55.166 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:53:55.167 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:53:55.167 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:53:55.168 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:53:55.169 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:53:55.169 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:53:55.170 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:53:55.171 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:53:55.172 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:53:55.173 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:53:55.174 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:53:55.175 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:53:55.176 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:53:55.177 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:53:55.178 +02:00 [INF] get all schedule called at "2025-11-28T23:53:55.1785950+02:00"
2025-11-28 23:53:55.179 +02:00 [INF] Fetching all schedules
2025-11-28 23:53:55.180 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:53:55.181 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:53:55.182 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:53:55.182 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:55.183 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:55.184 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:53:55.185 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:53:55.186 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:53:55.187 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:53:55.194 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:53:55.196 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.196 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.197 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.198 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.199 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.200 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.201 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.202 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.203 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.204 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.205 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.206 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.207 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.208 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.209 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.209 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.211 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.212 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.213 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.214 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.215 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.215 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.216 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.217 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.218 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.219 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.220 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.220 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.221 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.222 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.223 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.224 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.224 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.225 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.226 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.227 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.228 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.229 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.229 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.231 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.231 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:53:55.232 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:55.233 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 37ms reading results.
2025-11-28 23:53:55.234 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:55.235 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:53:55.236 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:53:55.237 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:53:55.238 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:53:55.238 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:53:55.239 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:53:55.240 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:53:55.241 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 64.2755ms
2025-11-28 23:53:55.241 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:53:55.242 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:53:55.243 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:53:55.244 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:53:55.245 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 83.461ms
2025-11-28 23:54:00.781 +02:00 [DBG] Connection id "0HNHEOT0LBBJF" received FIN.
2025-11-28 23:54:00.782 +02:00 [DBG] Connection id "0HNHEOT0LBBJF" is closed. The last processed stream ID was 1.
2025-11-28 23:54:00.782 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJF completed.
2025-11-28 23:54:00.782 +02:00 [DBG] Connection id "0HNHEOT0LBBJF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:54:00.784 +02:00 [DBG] Connection id "0HNHEOT0LBBJF" stopped.
2025-11-28 23:54:06.424 +02:00 [DBG] Connection id "0HNHEOT0LBBJG" received FIN.
2025-11-28 23:54:06.424 +02:00 [DBG] Connection id "0HNHEOT0LBBJG" accepted.
2025-11-28 23:54:06.426 +02:00 [DBG] Connection id "0HNHEOT0LBBJG" started.
2025-11-28 23:54:06.427 +02:00 [DBG] Connection id "0HNHEOT0LBBJH" accepted.
2025-11-28 23:54:06.428 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-28 23:54:06.428 +02:00 [DBG] Connection id "0HNHEOT0LBBJH" started.
2025-11-28 23:54:06.430 +02:00 [DBG] Connection id "0HNHEOT0LBBJG" stopped.
2025-11-28 23:54:06.431 +02:00 [DBG] Connection id "0HNHEOT0LBBJG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:54:06.433 +02:00 [DBG] Connection 0HNHEOT0LBBJH established using the following protocol: "Tls13"
2025-11-28 23:54:06.434 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Schedule - application/json 92
2025-11-28 23:54:06.435 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-28 23:54:06.436 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-28 23:54:06.437 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-28 23:54:06.438 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:54:06.438 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:54:06.439 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-28 23:54:06.441 +02:00 [INF] Route matched with {action = "Create", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Schedule.ScheduleDto]] Create(Hospital.Application.DTO.Schedule.CreateScheduleDto) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:54:06.443 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:54:06.443 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:54:06.444 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:54:06.445 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:54:06.446 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:54:06.447 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:54:06.448 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:54:06.449 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-28 23:54:06.450 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' using the name '' in request data ...
2025-11-28 23:54:06.450 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:54:06.452 +02:00 [DBG] Connection id "0HNHEOT0LBBJH", Request id "0HNHEOT0LBBJH:00000001": started reading request body.
2025-11-28 23:54:06.452 +02:00 [DBG] Connection id "0HNHEOT0LBBJH", Request id "0HNHEOT0LBBJH:00000001": done reading request body.
2025-11-28 23:54:06.454 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'
2025-11-28 23:54:06.455 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-28 23:54:06.455 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-28 23:54:06.456 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-28 23:54:06.458 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-28 23:54:06.459 +02:00 [INF] create schedule  called at "2025-11-28T23:54:06.4595431+02:00"
2025-11-28 23:54:06.461 +02:00 [INF] Creating schedule for DoctorId: 5, Day: friday, Shift: "Evening"
2025-11-28 23:54:06.462 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:54:06.464 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:54:06.464 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:54:06.465 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:06.466 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:06.467 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:54:06.467 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:54:06.468 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:54:06.469 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:54:06.478 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:54:06.480 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.481 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.482 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.482 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.483 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.484 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.485 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.485 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.486 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.487 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.488 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.488 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.489 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.490 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:06.491 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-28 23:54:06.492 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:06.493 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:54:06.502 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Where(s => s.DayOfWeek.ToLower() == __ToLower_0)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(s => s.Branch)'
2025-11-28 23:54:06.503 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-28 23:54:06.504 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-28 23:54:06.505 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-28 23:54:06.505 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-11-28 23:54:06.516 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Specialization.Description (string), 44], [Property: Specialization.ImageURL (string) MaxLength(300), 45], [Property: Specialization.Name (string) Required MaxLength(120), 46], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 48], [Property: Branch.Address (string) MaxLength(250), 49], [Property: Branch.BranchName (string) Required MaxLength(150), 50], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Branch.Description (string), 52], [Property: Branch.Email (string) MaxLength(200), 53], [Property: Branch.ImageURL (string) MaxLength(300), 54], [Property: Branch.Latitude (double?), 55], [Property: Branch.Longitude (double?), 56], [Property: Branch.Phone (string) MaxLength(25), 57], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 58] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s0.SpecializationId, s0.CreatedAt, s0.Description, s0.ImageURL, s0.Name, s0.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s0 ON d.SpecializationId == s0.SpecializationId
        INNER JOIN Branches AS b ON s.BranchId == b.BranchId
        WHERE LOWER(s.DayOfWeek) == @__ToLower_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-28 23:54:06.520 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:06.521 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:06.522 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:54:06.523 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:54:06.524 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:54:06.525 +02:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-28 23:54:06.532 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-28 23:54:06.534 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:06.534 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:54:06.535 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:06.536 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:54:06.547 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Schedule.ScheduleId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.549 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.550 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.551 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.552 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:54:06.553 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:54:06.554 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:54:06.555 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:54:06.555 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:54:06.557 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:06.557 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:06.558 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:54:06.559 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:54:06.560 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-28 23:54:06.561 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-28 23:54:06.565 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-28 23:54:06.567 +02:00 [DBG] The foreign key property 'Schedule.ScheduleId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-28 23:54:06.568 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:06.569 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-28 23:54:06.570 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:06.571 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:54:06.572 +02:00 [DBG] An entity of type 'Schedule' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:06.573 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 23:54:06.574 +02:00 [INF] Schedule created successfully for DoctorId 5
2025-11-28 23:54:06.576 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:54:06.578 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:54:06.578 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:54:06.578 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:54:06.579 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:54:06.580 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Schedule.ScheduleDto'.
2025-11-28 23:54:06.581 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.Create (Hospital) in 133.6915ms
2025-11-28 23:54:06.582 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-28 23:54:06.582 +02:00 [DBG] Connection id "0HNHEOT0LBBJH" completed keep alive response.
2025-11-28 23:54:06.583 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:54:06.584 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:06.584 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:54:06.585 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 151.4767ms
2025-11-28 23:54:28.885 +02:00 [DBG] Connection id "0HNHEOT0LBBJI" accepted.
2025-11-28 23:54:28.889 +02:00 [DBG] Connection id "0HNHEOT0LBBJI" started.
2025-11-28 23:54:28.895 +02:00 [DBG] Connection 0HNHEOT0LBBJI established using the following protocol: "Tls13"
2025-11-28 23:54:28.896 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:54:28.902 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:54:28.903 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:54:28.904 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:54:28.905 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:54:28.906 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:54:28.907 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:54:28.908 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:54:28.909 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:54:28.909 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:54:28.911 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:54:28.912 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:54:28.913 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:54:28.914 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:54:28.915 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:54:28.916 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:54:28.917 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:54:28.918 +02:00 [INF] get all schedule called at "2025-11-28T23:54:28.9182758+02:00"
2025-11-28 23:54:28.918 +02:00 [INF] Fetching all schedules
2025-11-28 23:54:28.919 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:54:28.921 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:54:28.922 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:54:28.923 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:28.924 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:28.924 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:54:28.925 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:54:28.926 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:54:28.927 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:54:28.934 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:54:28.936 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.937 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.939 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.940 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.941 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.942 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.943 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.944 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.945 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.946 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.946 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.947 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.949 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.950 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.951 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.952 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.952 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.953 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.954 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.955 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.956 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.957 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.958 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.958 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.959 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.960 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.961 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.962 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.963 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.963 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.964 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.965 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.966 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.966 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.967 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.968 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.969 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.970 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.971 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.972 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.973 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:28.973 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:28.974 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 38ms reading results.
2025-11-28 23:54:28.975 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:28.976 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:54:28.977 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:54:28.979 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:54:28.979 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:54:28.980 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:54:28.980 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:54:28.981 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:54:28.984 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 68.4025ms
2025-11-28 23:54:28.985 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:54:28.986 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:54:28.987 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:28.988 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:54:28.989 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 92.6286ms
2025-11-28 23:54:34.614 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-28 23:54:34.617 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-28 23:54:34.618 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-28 23:54:34.620 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:54:34.620 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:54:34.621 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:54:34.622 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:54:34.622 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:54:34.623 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:54:34.624 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:54:34.625 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:54:34.626 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:54:34.627 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:54:34.628 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:54:34.629 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:54:34.630 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:54:34.631 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:54:34.632 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:54:34.633 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:54:34.635 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:54:34.636 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:54:34.637 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:54:34.638 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:54:34.638 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:54:34.6389887+02:00"
2025-11-28 23:54:34.639 +02:00 [INF] Fetching doctor with ID 5
2025-11-28 23:54:34.640 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:54:34.643 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:54:34.643 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:54:34.644 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:34.645 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:34.645 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:54:34.646 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:54:34.647 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:54:34.648 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:54:34.656 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:54:34.657 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:34.658 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:34.659 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:34.660 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:34.661 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:34.662 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:34.663 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:34.664 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:34.665 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:34.666 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:34.667 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:34.668 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:34.669 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:34.670 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:34.670 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:34.671 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:34.672 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-28 23:54:34.673 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:34.674 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:54:34.675 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:54:34.676 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:54:34.676 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:54:34.677 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:54:34.677 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:54:34.678 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:54:34.679 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 49.4094ms
2025-11-28 23:54:34.680 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:54:34.681 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:54:34.682 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:34.683 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:54:34.684 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 69.4207ms
2025-11-28 23:54:36.715 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:54:36.717 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:54:36.718 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:54:36.718 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:54:36.719 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:54:36.720 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:54:36.720 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:54:36.721 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.642ms
2025-11-28 23:54:36.722 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:54:36.725 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:54:36.726 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:54:36.727 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:54:36.728 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:54:36.728 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:54:36.729 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:54:36.730 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:54:36.731 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:54:36.732 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:54:36.733 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:54:36.734 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:54:36.735 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:54:36.737 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:54:36.738 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:54:36.739 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:54:36.740 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:54:36.741 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:54:36.742 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:54:36.743 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:54:36.744 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:00000007": started reading request body.
2025-11-28 23:54:36.745 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:00000007": done reading request body.
2025-11-28 23:54:36.747 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:54:36.747 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:54:36.748 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:54:36.749 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:54:36.750 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:54:36.751 +02:00 [INF] Add Appointment called at "2025-11-28T23:54:36.7519694+02:00"
2025-11-28 23:54:36.752 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 5, Date: "2025-11-28", Shift: "Evening"
2025-11-28 23:54:36.754 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:54:36.756 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:54:36.756 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:54:36.757 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:36.758 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:36.759 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:54:36.760 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:54:36.761 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:54:36.762 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:54:36.763 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:54:36.764 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:54:36.773 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:54:36.776 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.777 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.778 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.779 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:36.780 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-28 23:54:36.781 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:54:36.782 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:54:36.783 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:54:36.784 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:54:36.786 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:54:36.788 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.789 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.790 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.791 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.792 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.793 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.793 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.794 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.795 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.796 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.797 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.797 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.798 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.799 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.800 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:36.801 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:36.802 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-28 23:54:36.803 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:54:36.804 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:54:36.805 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:54:36.805 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:54:36.808 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:54:36.809 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:36.810 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:54:36.829 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:54:36.829 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:54:36.830 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:36.831 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:54:36.832 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 5
System.ArgumentException: Cannot book appointment: the selected shift (18:00 - 21:00) has already passed.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 102
2025-11-28 23:54:36.845 +02:00 [DBG] Disposing transaction.
2025-11-28 23:54:36.872 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 132.7047ms
2025-11-28 23:54:36.873 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:54:36.905 +02:00 [ERR]  Exception caught: Cannot book appointment: the selected shift (18:00 - 21:00) has already passed.
System.ArgumentException: Cannot book appointment: the selected shift (18:00 - 21:00) has already passed.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 102
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:54:36.910 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:54:36.910 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:36.911 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:54:36.912 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 190.4496ms
2025-11-28 23:54:50.771 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:54:50.773 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:54:50.774 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:54:50.775 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:54:50.776 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:54:50.777 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:54:50.778 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:54:50.778 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:54:50.779 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:54:50.780 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:54:50.781 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:54:50.782 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:54:50.783 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:54:50.784 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:54:50.785 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:54:50.786 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:54:50.787 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:54:50.788 +02:00 [INF] get all schedule called at "2025-11-28T23:54:50.7885524+02:00"
2025-11-28 23:54:50.789 +02:00 [INF] Fetching all schedules
2025-11-28 23:54:50.790 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:54:50.791 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:54:50.792 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:54:50.792 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:50.793 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:50.794 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:54:50.795 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:54:50.796 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:54:50.797 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:54:50.804 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:54:50.805 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.806 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.807 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.808 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.809 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.809 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.810 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.811 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.812 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.813 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.813 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.814 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.815 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.816 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.817 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.817 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.819 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.819 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.820 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.821 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.822 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.823 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.824 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.824 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.825 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.826 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.827 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.827 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.828 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.829 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.830 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.831 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.832 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.832 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.833 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.834 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.835 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.836 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.837 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.838 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.838 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.839 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.840 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:50.841 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:50.842 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 36ms reading results.
2025-11-28 23:54:50.843 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:50.844 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:54:50.845 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:54:50.846 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:54:50.847 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:54:50.847 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:54:50.848 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:54:50.848 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:54:50.853 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 67.1583ms
2025-11-28 23:54:50.854 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:54:50.854 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:54:50.855 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:50.856 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 23:54:50.857 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 86.6027ms
2025-11-28 23:54:55.249 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-28 23:54:55.251 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-28 23:54:55.252 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-28 23:54:55.253 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:54:55.254 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:54:55.254 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:54:55.255 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:54:55.256 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:54:55.256 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:54:55.257 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:54:55.258 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:54:55.259 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:54:55.260 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:54:55.261 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:54:55.262 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:54:55.263 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:54:55.264 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:54:55.265 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:54:55.266 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:54:55.267 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:54:55.268 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:54:55.268 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:54:55.269 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:54:55.270 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:54:55.2705172+02:00"
2025-11-28 23:54:55.271 +02:00 [INF] Fetching doctor with ID 5
2025-11-28 23:54:55.271 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:54:55.273 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:54:55.273 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:54:55.274 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:55.275 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:55.276 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:54:55.276 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:54:55.277 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:54:55.278 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:54:55.285 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:54:55.287 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:55.288 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:55.289 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:55.289 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:55.290 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:55.291 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:55.292 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:55.292 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:55.293 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:55.294 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:55.295 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:55.296 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:55.297 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:55.297 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:55.298 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:55.299 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:55.300 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-28 23:54:55.301 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:55.302 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:54:55.303 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:54:55.304 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:54:55.305 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:54:55.305 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:54:55.305 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:54:55.306 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:54:55.307 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 43.7904ms
2025-11-28 23:54:55.308 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:54:55.309 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:54:55.309 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:55.310 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:54:55.311 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 62.9189ms
2025-11-28 23:54:59.247 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:54:59.248 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:54:59.249 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:54:59.250 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:54:59.250 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:54:59.251 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:54:59.251 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:54:59.252 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.5018ms
2025-11-28 23:54:59.253 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:54:59.256 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:54:59.256 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:54:59.258 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:54:59.259 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:54:59.259 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:54:59.260 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:54:59.261 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:54:59.262 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:54:59.263 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:54:59.264 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:54:59.265 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:54:59.266 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:54:59.268 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:54:59.269 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:54:59.270 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:54:59.271 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:54:59.272 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:54:59.273 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:54:59.275 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:54:59.276 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:0000000F": started reading request body.
2025-11-28 23:54:59.276 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:0000000F": done reading request body.
2025-11-28 23:54:59.278 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:54:59.278 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:54:59.279 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:54:59.280 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:54:59.281 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:54:59.282 +02:00 [INF] Add Appointment called at "2025-11-28T23:54:59.2828297+02:00"
2025-11-28 23:54:59.283 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 5, Date: "2025-12-05", Shift: "Evening"
2025-11-28 23:54:59.285 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:54:59.286 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:54:59.287 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:54:59.288 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:59.289 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:59.290 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:54:59.291 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:54:59.292 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:54:59.293 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:54:59.294 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:54:59.295 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:54:59.304 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:54:59.305 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.306 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.307 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.308 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:59.309 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:54:59.310 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:54:59.310 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:54:59.311 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:54:59.312 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:54:59.314 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:54:59.315 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.316 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.317 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.318 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.319 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.320 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.320 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.321 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.322 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.323 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.323 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.324 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.325 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.326 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.327 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.328 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:59.328 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-28 23:54:59.330 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:54:59.330 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:54:59.331 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:54:59.332 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:54:59.334 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:54:59.335 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:59.336 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:54:59.337 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:54:59.338 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:54:59.339 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:54:59.340 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:54:59.343 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:54:59.344 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:59.345 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:54:59.346 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.347 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.348 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.349 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.350 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.350 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:54:59.351 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:54:59.352 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:54:59.353 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:54:59.354 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:54:59.355 +02:00 [DBG] Creating transaction savepoint.
2025-11-28 23:54:59.356 +02:00 [DBG] Created transaction savepoint.
2025-11-28 23:54:59.356 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:54:59.357 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:54:59.358 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:54:59.358 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:54:59.362 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:54:59.363 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-28 23:54:59.364 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:59.365 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:54:59.366 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:54:59.367 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 23:54:59.368 +02:00 [DBG] Committing transaction.
2025-11-28 23:54:59.369 +02:00 [DBG] Committed transaction.
2025-11-28 23:54:59.370 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:59.371 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:54:59.372 +02:00 [INF] Appointment created successfully with ID: 11
2025-11-28 23:54:59.372 +02:00 [DBG] Disposing transaction.
2025-11-28 23:54:59.373 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:54:59.374 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:54:59.375 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:54:59.375 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:54:59.376 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:54:59.376 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-28 23:54:59.377 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[11],action=[GetById],controller=[Appointment])
2025-11-28 23:54:59.378 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/11 and 
2025-11-28 23:54:59.379 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/11
2025-11-28 23:54:59.380 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 110.1714ms
2025-11-28 23:54:59.381 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:54:59.382 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:54:59.383 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:54:59.384 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:54:59.384 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-28 23:54:59.385 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 132.0169ms
2025-11-28 23:54:59.386 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-28 23:54:59.389 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:54:59.389 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:54:59.390 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:54:59.390 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:54:59.391 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:54:59.391 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 7.2621ms
2025-11-28 23:54:59.393 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-28 23:54:59.395 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-28 23:54:59.396 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-28 23:54:59.397 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-28 23:54:59.397 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:54:59.398 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:54:59.398 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:54:59.399 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:54:59.400 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-28 23:54:59.401 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Patient)
2025-11-28 23:54:59.402 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-28 23:54:59.403 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 401 0 null 10.0997ms
2025-11-28 23:54:59.405 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:00000013": started reading request body.
2025-11-28 23:54:59.405 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/refresh-token - text/plain 88
2025-11-28 23:54:59.406 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:00000013": done reading request body.
2025-11-28 23:54:59.407 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-11-28 23:54:59.409 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-11-28 23:54:59.410 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)'
2025-11-28 23:54:59.411 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:54:59.411 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:54:59.412 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:54:59.413 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:54:59.414 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)'
2025-11-28 23:54:59.414 +02:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken(Hospital.Application.DTO.Auth.RefreshToken) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-28 23:54:59.416 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:54:59.417 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:54:59.418 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:54:59.419 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:54:59.420 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:54:59.421 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-28 23:54:59.422 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-28 23:54:59.423 +02:00 [DBG] Attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken' ...
2025-11-28 23:54:59.425 +02:00 [DBG] Attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken' using the name '' in request data ...
2025-11-28 23:54:59.426 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'text/plain'.
2025-11-28 23:54:59.427 +02:00 [DBG] No input formatter was found to support the content type 'text/plain' for use with the [FromBody] attribute.
2025-11-28 23:54:59.428 +02:00 [DBG] Done attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken'.
2025-11-28 23:54:59.429 +02:00 [DBG] Done attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken'.
2025-11-28 23:54:59.430 +02:00 [DBG] Attempting to validate the bound parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken' ...
2025-11-28 23:54:59.431 +02:00 [DBG] Done attempting to validate the bound parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken'.
2025-11-28 23:54:59.432 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter'.
2025-11-28 23:54:59.433 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:54:59.434 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:54:59.435 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-28 23:54:59.436 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-28 23:54:59.437 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-11-28 23:54:59.438 +02:00 [INF] Executed action Hospital.Controllers.AuthController.RefreshToken (Hospital) in 17.2578ms
2025-11-28 23:54:59.439 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)'
2025-11-28 23:54:59.440 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/refresh-token - 415 null application/problem+json; charset=utf-8 34.7146ms
2025-11-28 23:54:59.442 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:00000015": started reading request body.
2025-11-28 23:54:59.443 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:00000015": done reading request body.
2025-11-28 23:56:26.045 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-28 23:56:26.051 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-28 23:56:26.051 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-28 23:56:26.052 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:56:26.053 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:56:26.054 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:56:26.054 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:56:26.055 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:56:26.055 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:56:26.056 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:56:26.057 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:56:26.058 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:56:26.059 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:56:26.060 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:56:26.061 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:56:26.062 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:56:26.063 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:56:26.064 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:56:26.064 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:56:26.065 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:56:26.066 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:56:26.067 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:56:26.068 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:56:26.069 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:56:26.0690314+02:00"
2025-11-28 23:56:26.069 +02:00 [INF] Fetching doctor with ID 5
2025-11-28 23:56:26.070 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:56:26.071 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:56:26.072 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:56:26.073 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:26.074 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:26.074 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:26.075 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:26.076 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:26.077 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:56:26.086 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:56:26.087 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:26.088 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:26.089 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:26.090 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:26.091 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:26.091 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:26.092 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:26.093 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:26.094 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:26.095 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:26.095 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:26.096 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:26.097 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:26.098 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:26.099 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:26.099 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:26.100 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-28 23:56:26.101 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:26.102 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:56:26.103 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:56:26.105 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:56:26.105 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:56:26.106 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:56:26.106 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:56:26.107 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:56:26.108 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 46.2724ms
2025-11-28 23:56:26.113 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:56:26.114 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:56:26.115 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:26.115 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:56:26.116 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 71.8633ms
2025-11-28 23:56:32.235 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:56:32.237 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:56:32.238 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:56:32.239 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:56:32.239 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:56:32.240 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:56:32.240 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:56:32.241 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.8214ms
2025-11-28 23:56:32.242 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:56:32.245 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:56:32.246 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:56:32.247 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:56:32.248 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:56:32.248 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:56:32.249 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:56:32.249 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:56:32.250 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:56:32.251 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:56:32.252 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:56:32.253 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:56:32.254 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:56:32.255 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:56:32.257 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:56:32.258 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:56:32.259 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:56:32.259 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:56:32.260 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:56:32.261 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:56:32.262 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:0000001B": started reading request body.
2025-11-28 23:56:32.263 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:0000001B": done reading request body.
2025-11-28 23:56:32.264 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:56:32.265 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:56:32.266 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:56:32.267 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:56:32.268 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:56:32.269 +02:00 [INF] Add Appointment called at "2025-11-28T23:56:32.2691601+02:00"
2025-11-28 23:56:32.269 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 5, Date: "2025-12-05", Shift: "Evening"
2025-11-28 23:56:32.271 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:56:32.272 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:56:32.272 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:56:32.273 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:32.274 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:32.275 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:56:32.276 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:56:32.277 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:32.277 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:32.278 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:32.279 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:56:32.289 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:56:32.291 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.292 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.293 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.294 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:32.294 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:56:32.296 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:32.296 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:32.297 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:32.298 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:56:32.306 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:56:32.307 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.308 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.309 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.310 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.311 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.312 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.313 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.314 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.314 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.315 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.316 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.317 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.317 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.318 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.319 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:32.320 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:32.321 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-28 23:56:32.322 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:32.323 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:32.324 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:32.325 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:56:32.328 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:56:32.329 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:32.330 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:56:32.331 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:32.332 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:32.333 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:32.334 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:56:32.338 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:56:32.339 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:32.340 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:56:32.355 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:56:32.356 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:56:32.356 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:32.357 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-28 23:56:32.359 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 5
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 23:56:32.372 +02:00 [DBG] Disposing transaction.
2025-11-28 23:56:32.399 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 141.5376ms
2025-11-28 23:56:32.400 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:56:32.435 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:56:32.440 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:56:32.441 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:32.442 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-28 23:56:32.443 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 201.2106ms
2025-11-28 23:56:34.304 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:56:34.306 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:56:34.307 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:56:34.308 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:56:34.309 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:56:34.309 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:56:34.310 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:56:34.310 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:56:34.311 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:56:34.312 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:56:34.313 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:56:34.314 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:56:34.315 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:56:34.316 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:56:34.317 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:56:34.318 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:56:34.319 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:56:34.320 +02:00 [INF] get all schedule called at "2025-11-28T23:56:34.3207208+02:00"
2025-11-28 23:56:34.321 +02:00 [INF] Fetching all schedules
2025-11-28 23:56:34.322 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:56:34.323 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:56:34.324 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:56:34.324 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:34.325 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:34.326 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:34.327 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:34.327 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:34.328 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:56:34.336 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:56:34.338 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.339 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.340 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.341 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.342 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.343 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.344 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.345 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.346 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.347 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.348 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.349 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.350 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.351 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.352 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.353 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.354 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.355 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.356 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.357 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.357 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.358 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.359 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.360 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.361 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.362 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.362 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.363 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.364 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.365 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.366 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.366 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.367 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.368 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.369 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.370 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.370 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.371 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.372 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.373 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.374 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.375 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.375 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:34.376 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:34.377 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 39ms reading results.
2025-11-28 23:56:34.378 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:34.379 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:56:34.380 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:56:34.381 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:56:34.381 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:56:34.382 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:56:34.382 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:56:34.383 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:56:34.385 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 66.5631ms
2025-11-28 23:56:34.390 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:56:34.390 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:56:34.391 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:34.392 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:56:34.393 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 89.3915ms
2025-11-28 23:56:39.402 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-28 23:56:39.405 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-28 23:56:39.406 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-28 23:56:39.407 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:56:39.407 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:56:39.408 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:56:39.408 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:56:39.409 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:56:39.410 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:56:39.410 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:56:39.412 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:56:39.413 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:56:39.413 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:56:39.414 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:56:39.415 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:56:39.416 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:56:39.417 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:56:39.418 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:56:39.419 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:56:39.420 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:56:39.421 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:56:39.422 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:56:39.423 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:56:39.424 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:56:39.4240376+02:00"
2025-11-28 23:56:39.424 +02:00 [INF] Fetching doctor with ID 5
2025-11-28 23:56:39.425 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:56:39.426 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:56:39.427 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:56:39.428 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:39.429 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:39.429 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:39.430 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:39.431 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:39.432 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:56:39.441 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:56:39.442 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:39.443 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:39.444 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:39.445 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:39.446 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:39.446 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:39.447 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:39.448 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:39.449 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:39.450 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:39.451 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:39.452 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:39.453 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:39.453 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:39.454 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:39.455 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:39.456 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-28 23:56:39.457 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:39.458 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:56:39.459 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:56:39.460 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:56:39.461 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:56:39.461 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:56:39.462 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:56:39.462 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:56:39.463 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 47.122ms
2025-11-28 23:56:39.464 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:56:39.465 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:56:39.466 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:39.467 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:56:39.468 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 65.8184ms
2025-11-28 23:56:41.676 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:56:41.678 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:56:41.679 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:56:41.679 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:56:41.680 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:56:41.680 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:56:41.681 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:56:41.681 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.6044ms
2025-11-28 23:56:41.683 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:56:41.685 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:56:41.686 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:56:41.687 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:56:41.688 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:56:41.689 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:56:41.689 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:56:41.690 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:56:41.690 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:56:41.691 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:56:41.692 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:56:41.693 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:56:41.694 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:56:41.695 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:56:41.696 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:56:41.697 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:56:41.698 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:56:41.699 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:56:41.700 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:56:41.701 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:56:41.702 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:00000023": started reading request body.
2025-11-28 23:56:41.703 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:00000023": done reading request body.
2025-11-28 23:56:41.703 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:56:41.704 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:56:41.705 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:56:41.706 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:56:41.707 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:56:41.707 +02:00 [INF] Add Appointment called at "2025-11-28T23:56:41.7078590+02:00"
2025-11-28 23:56:41.708 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 5, Date: "2025-12-05", Shift: "Evening"
2025-11-28 23:56:41.709 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:56:41.711 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:56:41.711 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:56:41.712 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:41.713 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:41.714 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:56:41.714 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:56:41.715 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:41.716 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:41.717 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:41.718 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:56:41.728 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:56:41.731 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.732 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.733 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.733 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:41.734 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:56:41.736 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:41.737 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:41.738 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:41.739 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:56:41.748 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:56:41.750 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.751 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.752 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.752 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.753 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.754 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.755 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.756 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.756 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.757 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.758 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.759 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.759 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.760 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.761 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:41.762 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:41.763 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-28 23:56:41.764 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:41.764 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:41.765 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:41.766 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:56:41.768 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:56:41.769 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:41.770 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:56:41.771 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:41.772 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:41.773 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:41.774 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:56:41.777 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:56:41.778 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:41.779 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:56:41.792 +02:00 [DBG] Rolling back transaction.
2025-11-28 23:56:41.793 +02:00 [DBG] Rolled back transaction.
2025-11-28 23:56:41.793 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:41.794 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:56:41.795 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 5
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-28 23:56:41.808 +02:00 [DBG] Disposing transaction.
2025-11-28 23:56:41.834 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 136.5303ms
2025-11-28 23:56:41.835 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:56:41.866 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-28 23:56:41.870 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:56:41.871 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:41.872 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:56:41.873 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 190.3764ms
2025-11-28 23:56:48.199 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-28 23:56:48.201 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-28 23:56:48.202 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-28 23:56:48.204 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:56:48.204 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:56:48.205 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:56:48.206 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:56:48.207 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:56:48.207 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:56:48.208 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-28 23:56:48.209 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:56:48.210 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:56:48.211 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:56:48.212 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:56:48.213 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:56:48.214 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:56:48.215 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-28 23:56:48.216 +02:00 [INF] get all schedule called at "2025-11-28T23:56:48.2162800+02:00"
2025-11-28 23:56:48.216 +02:00 [INF] Fetching all schedules
2025-11-28 23:56:48.217 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:56:48.218 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:56:48.219 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:56:48.220 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:48.220 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:48.221 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:48.222 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:48.223 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:48.223 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:56:48.230 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-28 23:56:48.232 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.232 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.233 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.234 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.235 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.236 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.237 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.237 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.238 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.239 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.240 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.241 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.242 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.242 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.243 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.244 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.245 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.246 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.246 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.247 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.248 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.249 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.250 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.250 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.251 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.252 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.253 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.253 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.254 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.255 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.256 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.257 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.258 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.258 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.259 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.260 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.261 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.262 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.262 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.263 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.264 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.265 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.266 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:48.266 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:48.267 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 35ms reading results.
2025-11-28 23:56:48.268 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:48.269 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:56:48.270 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:56:48.271 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:56:48.272 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:56:48.272 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:56:48.273 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:56:48.273 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-28 23:56:48.275 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 61.2748ms
2025-11-28 23:56:48.280 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-28 23:56:48.281 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:56:48.282 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:48.283 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:56:48.284 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 84.9641ms
2025-11-28 23:56:54.022 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-28 23:56:54.025 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-28 23:56:54.025 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-28 23:56:54.027 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:56:54.027 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:56:54.028 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:56:54.028 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:56:54.029 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:56:54.030 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:56:54.030 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-28 23:56:54.032 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:56:54.032 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:56:54.033 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:56:54.035 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:56:54.035 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:56:54.036 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:56:54.037 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-28 23:56:54.038 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:56:54.039 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-28 23:56:54.040 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:56:54.041 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:56:54.042 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-28 23:56:54.042 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-28 23:56:54.043 +02:00 [INF] Get  doctor By Id called at "2025-11-28T23:56:54.0437611+02:00"
2025-11-28 23:56:54.044 +02:00 [INF] Fetching doctor with ID 5
2025-11-28 23:56:54.045 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:56:54.046 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:56:54.047 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:56:54.047 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:54.048 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:54.049 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:54.050 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:54.051 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:54.051 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:56:54.061 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:56:54.062 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:54.063 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:54.064 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:54.065 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:54.066 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:54.066 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:54.067 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:54.068 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:54.069 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:54.069 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:54.070 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:54.071 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:54.072 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:54.073 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:54.074 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:54.074 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:54.075 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-28 23:56:54.076 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:54.077 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:56:54.078 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:56:54.079 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:56:54.080 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:56:54.080 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:56:54.081 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:56:54.081 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-28 23:56:54.082 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 45.8059ms
2025-11-28 23:56:54.083 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-28 23:56:54.084 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:56:54.085 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:54.086 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:56:54.087 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 64.386ms
2025-11-28 23:56:55.686 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-28 23:56:55.688 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:56:55.688 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:56:55.689 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:56:55.690 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:56:55.690 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:56:55.691 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:56:55.691 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 6.0351ms
2025-11-28 23:56:55.693 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-28 23:56:55.695 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-28 23:56:55.695 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-28 23:56:55.696 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:56:55.697 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:56:55.698 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:56:55.698 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:56:55.699 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:56:55.699 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:56:55.700 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-28 23:56:55.701 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-28 23:56:55.702 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-28 23:56:55.702 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-28 23:56:55.704 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-28 23:56:55.705 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-28 23:56:55.706 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:56:55.707 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-28 23:56:55.708 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:56:55.709 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-28 23:56:55.710 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-28 23:56:55.711 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:0000002B": started reading request body.
2025-11-28 23:56:55.711 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:0000002B": done reading request body.
2025-11-28 23:56:55.712 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-28 23:56:55.713 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:56:55.713 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:56:55.714 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-28 23:56:55.715 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-28 23:56:55.716 +02:00 [INF] Add Appointment called at "2025-11-28T23:56:55.7164739+02:00"
2025-11-28 23:56:55.717 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 5, Date: "2025-12-12", Shift: "Evening"
2025-11-28 23:56:55.718 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-28 23:56:55.719 +02:00 [DBG] Creating DbConnection.
2025-11-28 23:56:55.720 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-28 23:56:55.721 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:55.722 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:55.723 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-28 23:56:55.724 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-28 23:56:55.725 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:55.725 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:55.726 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:55.727 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:56:55.737 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-28 23:56:55.739 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.739 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.740 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.741 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:55.742 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-28 23:56:55.743 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:55.743 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:55.744 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:55.745 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:56:55.753 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-28 23:56:55.754 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.755 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.756 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.757 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.758 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.759 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.760 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.761 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.762 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.763 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.763 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.764 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.765 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.766 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.767 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.767 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:55.768 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-28 23:56:55.770 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:55.770 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:55.771 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:55.772 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:56:55.774 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-28 23:56:55.775 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:55.776 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:56:55.777 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:55.778 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:55.778 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:55.779 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:56:55.783 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-28 23:56:55.784 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:55.785 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-28 23:56:55.786 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.787 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.788 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.788 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.789 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.790 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:56:55.791 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:56:55.791 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-28 23:56:55.792 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-28 23:56:55.793 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-28 23:56:55.794 +02:00 [DBG] Creating transaction savepoint.
2025-11-28 23:56:55.795 +02:00 [DBG] Created transaction savepoint.
2025-11-28 23:56:55.795 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-28 23:56:55.796 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-28 23:56:55.797 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-28 23:56:55.798 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:56:55.801 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-28 23:56:55.803 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-28 23:56:55.804 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:55.804 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-28 23:56:55.805 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-28 23:56:55.806 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-28 23:56:55.807 +02:00 [DBG] Committing transaction.
2025-11-28 23:56:55.808 +02:00 [DBG] Committed transaction.
2025-11-28 23:56:55.809 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:55.809 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-28 23:56:55.810 +02:00 [INF] Appointment created successfully with ID: 12
2025-11-28 23:56:55.811 +02:00 [DBG] Disposing transaction.
2025-11-28 23:56:55.811 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-28 23:56:55.813 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-28 23:56:55.813 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-28 23:56:55.814 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-28 23:56:55.814 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-28 23:56:55.816 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-28 23:56:55.816 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[12],action=[GetById],controller=[Appointment])
2025-11-28 23:56:55.817 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/12 and 
2025-11-28 23:56:55.818 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/12
2025-11-28 23:56:55.819 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 113.3217ms
2025-11-28 23:56:55.820 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-28 23:56:55.821 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-28 23:56:55.822 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-28 23:56:55.822 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-28 23:56:55.823 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 131.025ms
2025-11-28 23:56:55.824 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-28 23:56:55.827 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-28 23:56:55.828 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-28 23:56:55.828 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:56:55.829 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:56:55.830 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:56:55.830 +02:00 [DBG] The request is a preflight request.
2025-11-28 23:56:55.831 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 7.1829ms
2025-11-28 23:56:55.832 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-28 23:56:55.834 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-28 23:56:55.835 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-28 23:56:55.836 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-28 23:56:55.837 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-28 23:56:55.837 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-28 23:56:55.838 +02:00 [INF] CORS policy execution successful.
2025-11-28 23:56:55.838 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-28 23:56:55.839 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-28 23:56:55.840 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Patient)
2025-11-28 23:56:55.840 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-28 23:56:55.841 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 401 0 null 9.4238ms
2025-11-28 23:56:55.843 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:0000002F": started reading request body.
2025-11-28 23:56:55.844 +02:00 [DBG] Connection id "0HNHEOT0LBBJI", Request id "0HNHEOT0LBBJI:0000002F": done reading request body.
2025-11-28 23:57:10.814 +02:00 [DBG] Connection id "0HNHEOT0LBBJI" received FIN.
2025-11-28 23:57:10.815 +02:00 [DBG] Connection id "0HNHEOT0LBBJI" is closed. The last processed stream ID was 47.
2025-11-28 23:57:10.815 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJI completed.
2025-11-28 23:57:10.816 +02:00 [DBG] Connection id "0HNHEOT0LBBJI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-28 23:57:10.819 +02:00 [DBG] Connection id "0HNHEOT0LBBJI" stopped.
