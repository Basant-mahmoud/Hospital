2025-11-30 00:05:04.401 +02:00 [DBG] Connection id "0HNHFHOUCHPPI" received FIN.
2025-11-30 00:05:04.432 +02:00 [DBG] Connection id "0HNHFHOUCHPPI" is closed. The last processed stream ID was 11.
2025-11-30 00:05:04.438 +02:00 [DBG] Connection id "0HNHFHOUCHPPI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:05:04.453 +02:00 [DBG] The connection queue processing loop for 0HNHFHOUCHPPI completed.
2025-11-30 00:05:04.479 +02:00 [DBG] Connection id "0HNHFHOUCHPPI" stopped.
2025-11-30 00:14:44.646 +02:00 [DBG] Connection id "0HNHFHOUCHPPJ" received FIN.
2025-11-30 00:14:44.651 +02:00 [DBG] Connection id "0HNHFHOUCHPPJ" accepted.
2025-11-30 00:14:44.653 +02:00 [DBG] Connection id "0HNHFHOUCHPPJ" started.
2025-11-30 00:14:44.653 +02:00 [DBG] Connection id "0HNHFHOUCHPPK" accepted.
2025-11-30 00:14:44.658 +02:00 [DBG] Connection id "0HNHFHOUCHPPK" started.
2025-11-30 00:14:44.658 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:14:44.663 +02:00 [DBG] Connection id "0HNHFHOUCHPPJ" stopped.
2025-11-30 00:14:44.664 +02:00 [DBG] Connection id "0HNHFHOUCHPPJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:14:44.664 +02:00 [DBG] Connection 0HNHFHOUCHPPK established using the following protocol: "Tls12"
2025-11-30 00:14:44.675 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/SupportTicket - null null
2025-11-30 00:14:44.676 +02:00 [DBG] 1 candidate(s) found for the request path '/api/SupportTicket'
2025-11-30 00:14:44.677 +02:00 [DBG] Endpoint 'Hospital.Controllers.SupportTicketController.GetAll (Hospital)' with route pattern 'api/SupportTicket' is valid for the request path '/api/SupportTicket'
2025-11-30 00:14:44.678 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SupportTicketController.GetAll (Hospital)'
2025-11-30 00:14:44.678 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:14:44.682 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:14:44.682 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SupportTicketController.GetAll (Hospital)'
2025-11-30 00:14:44.687 +02:00 [INF] Route matched with {action = "GetAll", controller = "SupportTicket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.SupportTicketController (Hospital).
2025-11-30 00:14:44.689 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:14:44.691 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:14:44.692 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:14:44.693 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:14:44.694 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:14:44.695 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SupportTicketController (Hospital)
2025-11-30 00:14:44.697 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SupportTicketController (Hospital)
2025-11-30 00:14:44.699 +02:00 [INF] get all Support Ticket called at "2025-11-30T00:14:44.6992272+02:00"
2025-11-30 00:14:44.700 +02:00 [INF] Fetching all support tickets in the system
2025-11-30 00:14:44.710 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:14:44.715 +02:00 [DBG] Compiling query expression: 
'DbSet<SupportTicket>()
    .Include(t => t.User)
    .OrderByDescending(t => t.CreatedAt)'
2025-11-30 00:14:44.719 +02:00 [DBG] Including navigation: 'SupportTicket.User'.
2025-11-30 00:14:44.726 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<SupportTicket>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: SupportTicket.TicketId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: SupportTicket.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: SupportTicket.Message (string) Required, 2], [Property: SupportTicket.Response (string), 3], [Property: SupportTicket.Status (TicketStatus) Required MaxLength(20), 4], [Property: SupportTicket.Subject (string) Required MaxLength(200), 5], [Property: SupportTicket.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 6], [Property: SupportTicket.UserId (string) Required FK Index, 7] }
            1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 8], [Property: User.AccessFailedCount (int) Required, 9], [Property: User.ConcurrencyStamp (string) Concurrency, 10], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 11], [Property: User.DateOfBirth (DateOnly?), 12], [Property: User.Email (string) Index MaxLength(256), 13], [Property: User.EmailConfirmed (bool) Required, 14], [Property: User.FullName (string) Required MaxLength(150), 15], [Property: User.Gender (GenderType?) MaxLength(10), 16], [Property: User.LockoutEnabled (bool) Required, 17], [Property: User.LockoutEnd (DateTimeOffset?), 18], [Property: User.NormalizedEmail (string) Index MaxLength(256), 19], [Property: User.NormalizedUserName (string) Index MaxLength(256), 20], [Property: User.PasswordHash (string), 21], [Property: User.PhoneNumber (string), 22], [Property: User.PhoneNumberConfirmed (bool) Required, 23], [Property: User.RefreshToken (string), 24], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 25], [Property: User.Role (string) Required MaxLength(50), 26], [Property: User.SecurityStamp (string), 27], [Property: User.TwoFactorEnabled (bool) Required, 28], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: User.UserName (string) MaxLength(256), 30] }
        SELECT s.TicketId, s.CreatedAt, s.Message, s.Response, s.Status, s.Subject, s.UpdatedAt, s.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
        FROM SupportTickets AS s
        INNER JOIN Users AS u ON s.UserId == u.Id
        ORDER BY s.CreatedAt DESC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, SupportTicket>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 00:14:44.730 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:14:44.731 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-30 00:14:44.731 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 00:14:44.739 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 00:14:44.741 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:14:44.742 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:14:44.742 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:14:44.744 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[TicketId], [s].[CreatedAt], [s].[Message], [s].[Response], [s].[Status], [s].[Subject], [s].[UpdatedAt], [s].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [SupportTickets] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
ORDER BY [s].[CreatedAt] DESC
2025-11-30 00:14:44.751 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[TicketId], [s].[CreatedAt], [s].[Message], [s].[Response], [s].[Status], [s].[Subject], [s].[UpdatedAt], [s].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [SupportTickets] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
ORDER BY [s].[CreatedAt] DESC
2025-11-30 00:14:44.756 +02:00 [DBG] Context 'AppDbContext' started tracking 'SupportTicket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:14:44.769 +02:00 [DBG] The navigation 'SupportTicket.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:14:44.770 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:14:44.772 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 00:14:44.773 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 19ms reading results.
2025-11-30 00:14:44.774 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 00:14:44.774 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-30 00:14:44.783 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:14:44.785 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:14:44.786 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 00:14:44.786 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 00:14:44.787 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 00:14:44.787 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.SupportTicket.SupportTicketDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-30 00:14:44.798 +02:00 [INF] Executed action Hospital.Controllers.SupportTicketController.GetAll (Hospital) in 102.9343ms
2025-11-30 00:14:44.799 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SupportTicketController.GetAll (Hospital)'
2025-11-30 00:14:44.800 +02:00 [DBG] Connection id "0HNHFHOUCHPPK" completed keep alive response.
2025-11-30 00:14:44.800 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:14:44.801 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 00:14:44.802 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 00:14:44.803 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/SupportTicket - 200 null application/json; charset=utf-8 128.2447ms
2025-11-30 00:32:04.178 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-30 00:32:04.291 +02:00 [DBG] Hosting starting
2025-11-30 00:32:04.316 +02:00 [INF] User profile is available. Using 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-30 00:32:04.326 +02:00 [DBG] Reading data from file 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys\key-b85f0939-0825-4b2b-b21a-67409aec9db0.xml'.
2025-11-30 00:32:04.331 +02:00 [DBG] Found key {b85f0939-0825-4b2b-b21a-67409aec9db0}.
2025-11-30 00:32:04.338 +02:00 [DBG] Considering key {b85f0939-0825-4b2b-b21a-67409aec9db0} with expiration date 2026-02-09 12:52:20Z as default key.
2025-11-30 00:32:04.340 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 00:32:04.342 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-30 00:32:04.344 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 00:32:04.348 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-30 00:32:04.350 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-30 00:32:04.351 +02:00 [DBG] Using key {b85f0939-0825-4b2b-b21a-67409aec9db0} as the default key.
2025-11-30 00:32:04.352 +02:00 [DBG] Key ring with default key {b85f0939-0825-4b2b-b21a-67409aec9db0} was loaded during application startup.
2025-11-30 00:32:04.356 +02:00 [DBG] Middleware loaded
2025-11-30 00:32:04.358 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-30 00:32:04.359 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-30 00:32:04.420 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-30 00:32:04.477 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-30 00:32:04.478 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-30 00:32:04.478 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-30 00:32:04.479 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-30 00:32:04.479 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-30 00:32:04.480 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-30 00:32:04.542 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-30 00:32:04.542 +02:00 [INF] Hosting environment: Development
2025-11-30 00:32:04.543 +02:00 [INF] Content root path: D:\Walaa\GP\Hospital\Hospital
2025-11-30 00:32:04.544 +02:00 [DBG] Hosting started
2025-11-30 00:32:04.605 +02:00 [DBG] Connection id "0HNHFISFLT5LV" accepted.
2025-11-30 00:32:04.606 +02:00 [DBG] Connection id "0HNHFISFLT5LV" started.
2025-11-30 00:32:04.619 +02:00 [DBG] Connection id "0HNHFISFLT5M0" received FIN.
2025-11-30 00:32:04.619 +02:00 [DBG] Connection id "0HNHFISFLT5LV" received FIN.
2025-11-30 00:32:04.621 +02:00 [DBG] Connection id "0HNHFISFLT5M0" accepted.
2025-11-30 00:32:04.625 +02:00 [DBG] Connection id "0HNHFISFLT5M0" started.
2025-11-30 00:32:04.628 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:32:04.628 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:32:04.679 +02:00 [DBG] Connection id "0HNHFISFLT5M0" stopped.
2025-11-30 00:32:04.679 +02:00 [DBG] Connection id "0HNHFISFLT5LV" stopped.
2025-11-30 00:32:04.682 +02:00 [DBG] Connection id "0HNHFISFLT5LV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:32:04.682 +02:00 [DBG] Connection id "0HNHFISFLT5M0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:32:04.758 +02:00 [DBG] Connection id "0HNHFISFLT5M1" accepted.
2025-11-30 00:32:04.759 +02:00 [DBG] Connection id "0HNHFISFLT5M1" started.
2025-11-30 00:32:04.806 +02:00 [DBG] Connection 0HNHFISFLT5M1 established using the following protocol: "Tls12"
2025-11-30 00:32:04.856 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-30 00:32:04.923 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-30 00:32:04.946 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-30 00:32:04.947 +02:00 [DBG] Request did not match any endpoints
2025-11-30 00:32:04.986 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-30 00:32:04.990 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-30 00:32:05.004 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-30 00:32:05.005 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-30 00:32:05.008 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 157.7185ms
2025-11-30 00:32:05.017 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-30 00:32:05.017 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-30 00:32:05.025 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-30 00:32:05.026 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 9.4796ms
2025-11-30 00:32:05.043 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.3313ms
2025-11-30 00:32:05.083 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-30 00:32:05.086 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-30 00:32:05.086 +02:00 [DBG] Request did not match any endpoints
2025-11-30 00:32:05.118 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 35.3701ms
2025-11-30 00:32:40.530 +02:00 [DBG] Connection id "0HNHFISFLT5M2" received FIN.
2025-11-30 00:32:40.532 +02:00 [DBG] Connection id "0HNHFISFLT5M2" accepted.
2025-11-30 00:32:40.533 +02:00 [DBG] Connection id "0HNHFISFLT5M2" started.
2025-11-30 00:32:40.537 +02:00 [DBG] Connection id "0HNHFISFLT5M3" accepted.
2025-11-30 00:32:40.539 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:32:40.539 +02:00 [DBG] Connection id "0HNHFISFLT5M3" started.
2025-11-30 00:32:40.542 +02:00 [DBG] Connection id "0HNHFISFLT5M2" stopped.
2025-11-30 00:32:40.543 +02:00 [DBG] Connection id "0HNHFISFLT5M2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:32:40.548 +02:00 [DBG] Connection 0HNHFISFLT5M3 established using the following protocol: "Tls12"
2025-11-30 00:32:40.552 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/SupportTicket/2 - null null
2025-11-30 00:32:40.556 +02:00 [DBG] 1 candidate(s) found for the request path '/api/SupportTicket/2'
2025-11-30 00:32:40.559 +02:00 [DBG] Endpoint 'Hospital.Controllers.SupportTicketController.GetById (Hospital)' with route pattern 'api/SupportTicket/{ticketId}' is valid for the request path '/api/SupportTicket/2'
2025-11-30 00:32:40.561 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SupportTicketController.GetById (Hospital)'
2025-11-30 00:32:40.563 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:32:40.591 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:32:40.593 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SupportTicketController.GetById (Hospital)'
2025-11-30 00:32:40.616 +02:00 [INF] Route matched with {action = "GetById", controller = "SupportTicket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller Hospital.Controllers.SupportTicketController (Hospital).
2025-11-30 00:32:40.620 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:32:40.623 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:32:40.624 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:32:40.625 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:32:40.625 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:32:40.628 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SupportTicketController (Hospital)
2025-11-30 00:32:40.715 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-30 00:32:40.913 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SupportTicketController (Hospital)
2025-11-30 00:32:40.924 +02:00 [DBG] Attempting to bind parameter 'ticketId' of type 'System.Int32' ...
2025-11-30 00:32:40.927 +02:00 [DBG] Attempting to bind parameter 'ticketId' of type 'System.Int32' using the name 'ticketId' in request data ...
2025-11-30 00:32:40.929 +02:00 [DBG] Done attempting to bind parameter 'ticketId' of type 'System.Int32'.
2025-11-30 00:32:40.930 +02:00 [DBG] Done attempting to bind parameter 'ticketId' of type 'System.Int32'.
2025-11-30 00:32:40.930 +02:00 [DBG] Attempting to validate the bound parameter 'ticketId' of type 'System.Int32' ...
2025-11-30 00:32:40.932 +02:00 [DBG] Done attempting to validate the bound parameter 'ticketId' of type 'System.Int32'.
2025-11-30 00:32:40.935 +02:00 [INF] get  Support by id Ticket called at "2025-11-30T00:32:40.9355763+02:00"
2025-11-30 00:32:40.938 +02:00 [INF] Fetching ticket 2
2025-11-30 00:32:41.437 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-30 00:32:41.439 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-30 00:32:41.440 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-30 00:32:41.441 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-30 00:32:41.443 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-30 00:32:41.570 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:32:41.572 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:32:41.751 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:32:41.807 +02:00 [DBG] Compiling query expression: 
'DbSet<SupportTicket>()
    .Include(t => t.User)
    .FirstOrDefault(t => t.TicketId == __ticketId_0)'
2025-11-30 00:32:41.852 +02:00 [DBG] Including navigation: 'SupportTicket.User'.
2025-11-30 00:32:41.992 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<SupportTicket>(
    asyncEnumerable: new SingleQueryingEnumerable<SupportTicket>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: SupportTicket.TicketId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: SupportTicket.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: SupportTicket.Message (string) Required, 2], [Property: SupportTicket.Response (string), 3], [Property: SupportTicket.Status (TicketStatus) Required MaxLength(20), 4], [Property: SupportTicket.Subject (string) Required MaxLength(200), 5], [Property: SupportTicket.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 6], [Property: SupportTicket.UserId (string) Required FK Index, 7] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 8], [Property: User.AccessFailedCount (int) Required, 9], [Property: User.ConcurrencyStamp (string) Concurrency, 10], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 11], [Property: User.DateOfBirth (DateOnly?), 12], [Property: User.Email (string) Index MaxLength(256), 13], [Property: User.EmailConfirmed (bool) Required, 14], [Property: User.FullName (string) Required MaxLength(150), 15], [Property: User.Gender (GenderType?) MaxLength(10), 16], [Property: User.LockoutEnabled (bool) Required, 17], [Property: User.LockoutEnd (DateTimeOffset?), 18], [Property: User.NormalizedEmail (string) Index MaxLength(256), 19], [Property: User.NormalizedUserName (string) Index MaxLength(256), 20], [Property: User.PasswordHash (string), 21], [Property: User.PhoneNumber (string), 22], [Property: User.PhoneNumberConfirmed (bool) Required, 23], [Property: User.RefreshToken (string), 24], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 25], [Property: User.Role (string) Required MaxLength(50), 26], [Property: User.SecurityStamp (string), 27], [Property: User.TwoFactorEnabled (bool) Required, 28], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: User.UserName (string) MaxLength(256), 30] }
            SELECT TOP(1) s.TicketId, s.CreatedAt, s.Message, s.Response, s.Status, s.Subject, s.UpdatedAt, s.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM SupportTickets AS s
            INNER JOIN Users AS u ON s.UserId == u.Id
            WHERE s.TicketId == @__ticketId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, SupportTicket>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-30 00:32:42.026 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:32:42.046 +02:00 [DBG] Created DbConnection. (19ms).
2025-11-30 00:32:42.050 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 00:32:42.237 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 00:32:42.240 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:32:42.250 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-11-30 00:32:42.258 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
2025-11-30 00:32:42.265 +02:00 [DBG] Executing DbCommand [Parameters=[@__ticketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[TicketId], [s].[CreatedAt], [s].[Message], [s].[Response], [s].[Status], [s].[Subject], [s].[UpdatedAt], [s].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [SupportTickets] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
WHERE [s].[TicketId] = @__ticketId_0
2025-11-30 00:32:42.319 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@__ticketId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[TicketId], [s].[CreatedAt], [s].[Message], [s].[Response], [s].[Status], [s].[Subject], [s].[UpdatedAt], [s].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [SupportTickets] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
WHERE [s].[TicketId] = @__ticketId_0
2025-11-30 00:32:42.331 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 00:32:42.337 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 9ms reading results.
2025-11-30 00:32:42.341 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 00:32:42.346 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (5ms).
2025-11-30 00:32:42.349 +02:00 [WRN] Ticket 2 not found
2025-11-30 00:32:42.354 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:32:42.357 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:32:42.357 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-30 00:32:42.359 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-30 00:32:42.360 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-11-30 00:32:42.383 +02:00 [INF] Executed action Hospital.Controllers.SupportTicketController.GetById (Hospital) in 1754.0938ms
2025-11-30 00:32:42.386 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SupportTicketController.GetById (Hospital)'
2025-11-30 00:32:42.387 +02:00 [DBG] Connection id "0HNHFISFLT5M3" completed keep alive response.
2025-11-30 00:32:42.389 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:32:42.392 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 00:32:42.394 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-30 00:32:42.395 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/SupportTicket/2 - 404 null application/problem+json; charset=utf-8 1843.3632ms
2025-11-30 00:32:48.515 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/SupportTicket/create - application/json 83
2025-11-30 00:32:48.519 +02:00 [DBG] 1 candidate(s) found for the request path '/api/SupportTicket/create'
2025-11-30 00:32:48.520 +02:00 [DBG] Endpoint 'Hospital.Controllers.SupportTicketController.Create (Hospital)' with route pattern 'api/SupportTicket/create' is valid for the request path '/api/SupportTicket/create'
2025-11-30 00:32:48.520 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SupportTicketController.Create (Hospital)'
2025-11-30 00:32:48.521 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:32:48.522 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:32:48.523 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SupportTicketController.Create (Hospital)'
2025-11-30 00:32:48.528 +02:00 [INF] Route matched with {action = "Create", controller = "SupportTicket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.SupportTicket.CreateSupportTicketDto) on controller Hospital.Controllers.SupportTicketController (Hospital).
2025-11-30 00:32:48.529 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:32:48.529 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:32:48.531 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:32:48.532 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:32:48.533 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:32:48.534 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SupportTicketController (Hospital)
2025-11-30 00:32:48.536 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SupportTicketController (Hospital)
2025-11-30 00:32:48.537 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.SupportTicket.CreateSupportTicketDto' ...
2025-11-30 00:32:48.538 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.SupportTicket.CreateSupportTicketDto' using the name '' in request data ...
2025-11-30 00:32:48.540 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-30 00:32:48.545 +02:00 [DBG] Connection id "0HNHFISFLT5M3", Request id "0HNHFISFLT5M3:00000002": started reading request body.
2025-11-30 00:32:48.546 +02:00 [DBG] Connection id "0HNHFISFLT5M3", Request id "0HNHFISFLT5M3:00000002": done reading request body.
2025-11-30 00:32:48.556 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.SupportTicket.CreateSupportTicketDto'
2025-11-30 00:32:48.560 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.SupportTicket.CreateSupportTicketDto'.
2025-11-30 00:32:48.561 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.SupportTicket.CreateSupportTicketDto'.
2025-11-30 00:32:48.562 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.SupportTicket.CreateSupportTicketDto' ...
2025-11-30 00:32:48.567 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.SupportTicket.CreateSupportTicketDto'.
2025-11-30 00:32:48.569 +02:00 [INF] create Support Ticket called at "2025-11-30T00:32:48.5694577+02:00"
2025-11-30 00:32:48.570 +02:00 [INF] Creating a new support ticket for PatientId 1
2025-11-30 00:32:48.607 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:32:48.610 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(p => p.User)
    .Include(p => p.MedicalRecords)
    .ThenInclude(m => m.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(p => p.PatientId == __id_0)'
2025-11-30 00:32:48.613 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-30 00:32:48.613 +02:00 [DBG] Including navigation: 'Patient.MedicalRecords'.
2025-11-30 00:32:48.615 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-11-30 00:32:48.616 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-30 00:32:48.657 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 5], [Property: User.AccessFailedCount (int) Required, 6], [Property: User.ConcurrencyStamp (string) Concurrency, 7], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: User.DateOfBirth (DateOnly?), 9], [Property: User.Email (string) Index MaxLength(256), 10], [Property: User.EmailConfirmed (bool) Required, 11], [Property: User.FullName (string) Required MaxLength(150), 12], [Property: User.Gender (GenderType?) MaxLength(10), 13], [Property: User.LockoutEnabled (bool) Required, 14], [Property: User.LockoutEnd (DateTimeOffset?), 15], [Property: User.NormalizedEmail (string) Index MaxLength(256), 16], [Property: User.NormalizedUserName (string) Index MaxLength(256), 17], [Property: User.PasswordHash (string), 18], [Property: User.PhoneNumber (string), 19], [Property: User.PhoneNumberConfirmed (bool) Required, 20], [Property: User.RefreshToken (string), 21], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 22], [Property: User.Role (string) Required MaxLength(50), 23], [Property: User.SecurityStamp (string), 24], [Property: User.TwoFactorEnabled (bool) Required, 25], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: User.UserName (string) MaxLength(256), 27] }
                2 -> 0
                3 -> 5
                4 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 28], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 29], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: MedicalRecord.Diagnosis (string), 31], [Property: MedicalRecord.DoctorId (int) Required FK Index, 32], [Property: MedicalRecord.Notes (string), 33], [Property: MedicalRecord.PatientId (int) Required FK Index, 34], [Property: MedicalRecord.TreatmentPlan (string), 35], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
                5 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Doctor.Available (bool?), 38], [Property: Doctor.Biography (string), 39], [Property: Doctor.ConsultationFees (decimal) Required, 40], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 41], [Property: Doctor.ExperienceYears (int?), 42], [Property: Doctor.ImageURL (string) MaxLength(300), 43], [Property: Doctor.SpecializationId (int) Required FK Index, 44], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Doctor.UserId (string) Required FK Index, 46] }
                6 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
                7 -> 28
                8 -> 37
                9 -> 47
            SELECT t.PatientId, t.CreatedAt, t.EmergencyContact, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t0.RecordId, t0.AppointmentId, t0.CreatedAt, t0.Diagnosis, t0.DoctorId, t0.Notes, t0.PatientId, t0.TreatmentPlan, t0.UpdatedAt, t0.DoctorId0, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt0, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt0, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt1, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt1, t0.UserName
            FROM 
            (
                SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
                FROM Patients AS p
                INNER JOIN Users AS u ON p.UserId == u.Id
                WHERE p.PatientId == @__id_0
            ) AS t
            LEFT JOIN 
            (
                SELECT m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId AS DoctorId0, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt AS CreatedAt0, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt AS UpdatedAt0, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt AS CreatedAt1, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt AS UpdatedAt1, u0.UserName
                FROM MedicalRecords AS m
                INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
                INNER JOIN Users AS u0 ON d.UserId == u0.Id
            ) AS t0 ON t.PatientId == t0.PatientId
            ORDER BY t.PatientId ASC, t.Id ASC, t0.RecordId ASC, t0.DoctorId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-30 00:32:48.663 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:32:48.664 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-30 00:32:48.664 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 00:32:48.666 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 00:32:48.666 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:32:48.667 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:32:48.668 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:32:48.669 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-30 00:32:48.674 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-30 00:32:48.706 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.743 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.790 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.808 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.812 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.826 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.828 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.830 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.830 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.834 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.835 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.836 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.838 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.839 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.840 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.841 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.841 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.843 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.843 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.844 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.845 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.846 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.846 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.847 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.847 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.849 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.850 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.852 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.853 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.853 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.854 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.855 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.856 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.858 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.859 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.860 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.861 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.862 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.862 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.863 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.864 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.865 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.866 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.867 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.868 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.869 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.869 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.870 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.871 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.872 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 00:32:48.873 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 196ms reading results.
2025-11-30 00:32:48.874 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 00:32:48.875 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-11-30 00:32:48.895 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'SupportTicket.TicketId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.910 +02:00 [DBG] The navigation 'SupportTicket.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.913 +02:00 [DBG] Context 'AppDbContext' started tracking 'SupportTicket' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:48.916 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:32:48.958 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:32:48.964 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-30 00:32:48.967 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:32:48.969 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:32:49.024 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 00:32:49.027 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 00:32:49.030 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:32:49.031 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:32:49.034 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-30 00:32:49.034 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 20), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [SupportTickets] ([CreatedAt], [Message], [Response], [Status], [Subject], [UpdatedAt], [UserId])
OUTPUT INSERTED.[TicketId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-30 00:32:49.046 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 20), @p4='?' (Size = 200), @p5='?' (DbType = DateTime2), @p6='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [SupportTickets] ([CreatedAt], [Message], [Response], [Status], [Subject], [UpdatedAt], [UserId])
OUTPUT INSERTED.[TicketId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-30 00:32:49.057 +02:00 [DBG] The foreign key property 'SupportTicket.TicketId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-30 00:32:49.061 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 00:32:49.062 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 14ms reading results.
2025-11-30 00:32:49.063 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 00:32:49.063 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-30 00:32:49.072 +02:00 [DBG] An entity of type 'SupportTicket' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:32:49.075 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-30 00:32:49.077 +02:00 [INF] Support ticket 3 created successfully for PatientId 1
2025-11-30 00:32:49.081 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:32:49.083 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:32:49.084 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 00:32:49.085 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 00:32:49.085 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 00:32:49.086 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.SupportTicket.SupportTicketDto'.
2025-11-30 00:32:49.093 +02:00 [INF] Executed action Hospital.Controllers.SupportTicketController.Create (Hospital) in 558.9257ms
2025-11-30 00:32:49.094 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SupportTicketController.Create (Hospital)'
2025-11-30 00:32:49.094 +02:00 [DBG] Connection id "0HNHFISFLT5M3" completed keep alive response.
2025-11-30 00:32:49.095 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:32:49.095 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 00:32:49.096 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 00:32:49.097 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/SupportTicket/create - 200 null application/json; charset=utf-8 581.7444ms
2025-11-30 00:36:55.738 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-30 00:36:55.832 +02:00 [DBG] Hosting starting
2025-11-30 00:36:55.855 +02:00 [INF] User profile is available. Using 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-30 00:36:55.864 +02:00 [DBG] Reading data from file 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys\key-b85f0939-0825-4b2b-b21a-67409aec9db0.xml'.
2025-11-30 00:36:55.870 +02:00 [DBG] Found key {b85f0939-0825-4b2b-b21a-67409aec9db0}.
2025-11-30 00:36:55.876 +02:00 [DBG] Considering key {b85f0939-0825-4b2b-b21a-67409aec9db0} with expiration date 2026-02-09 12:52:20Z as default key.
2025-11-30 00:36:55.878 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 00:36:55.880 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-30 00:36:55.881 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 00:36:55.886 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-30 00:36:55.888 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-30 00:36:55.890 +02:00 [DBG] Using key {b85f0939-0825-4b2b-b21a-67409aec9db0} as the default key.
2025-11-30 00:36:55.891 +02:00 [DBG] Key ring with default key {b85f0939-0825-4b2b-b21a-67409aec9db0} was loaded during application startup.
2025-11-30 00:36:55.895 +02:00 [DBG] Middleware loaded
2025-11-30 00:36:55.896 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-30 00:36:55.897 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-30 00:36:55.958 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-30 00:36:56.017 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-30 00:36:56.017 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-30 00:36:56.018 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-30 00:36:56.018 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-30 00:36:56.019 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-30 00:36:56.020 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-30 00:36:56.081 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-30 00:36:56.082 +02:00 [INF] Hosting environment: Development
2025-11-30 00:36:56.084 +02:00 [INF] Content root path: D:\Walaa\GP\Hospital\Hospital
2025-11-30 00:36:56.084 +02:00 [DBG] Hosting started
2025-11-30 00:36:56.166 +02:00 [DBG] Connection id "0HNHFIV6IEHG7" received FIN.
2025-11-30 00:36:56.172 +02:00 [DBG] Connection id "0HNHFIV6IEHG7" accepted.
2025-11-30 00:36:56.173 +02:00 [DBG] Connection id "0HNHFIV6IEHG7" started.
2025-11-30 00:36:56.186 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:36:56.215 +02:00 [DBG] Connection id "0HNHFIV6IEHG7" stopped.
2025-11-30 00:36:56.217 +02:00 [DBG] Connection id "0HNHFIV6IEHG7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:36:56.294 +02:00 [DBG] Connection id "0HNHFIV6IEHG8" accepted.
2025-11-30 00:36:56.295 +02:00 [DBG] Connection id "0HNHFIV6IEHG8" started.
2025-11-30 00:36:56.336 +02:00 [DBG] Connection 0HNHFIV6IEHG8 established using the following protocol: "Tls12"
2025-11-30 00:36:56.379 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-30 00:36:56.451 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-30 00:36:56.479 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-30 00:36:56.480 +02:00 [DBG] Request did not match any endpoints
2025-11-30 00:36:56.522 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-30 00:36:56.523 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-30 00:36:56.533 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-30 00:36:56.535 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-30 00:36:56.538 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 164.0001ms
2025-11-30 00:36:56.548 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-30 00:36:56.548 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-30 00:36:56.554 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-30 00:36:56.555 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 7.1447ms
2025-11-30 00:36:56.585 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.987ms
2025-11-30 00:36:56.632 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-30 00:36:56.634 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-30 00:36:56.634 +02:00 [DBG] Request did not match any endpoints
2025-11-30 00:36:56.664 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 32.6298ms
2025-11-30 00:37:40.547 +02:00 [DBG] Connection id "0HNHFIV6IEHG9" received FIN.
2025-11-30 00:37:40.547 +02:00 [DBG] Connection id "0HNHFIV6IEHG9" accepted.
2025-11-30 00:37:40.557 +02:00 [DBG] Connection id "0HNHFIV6IEHG9" started.
2025-11-30 00:37:40.558 +02:00 [DBG] Connection id "0HNHFIV6IEHGA" accepted.
2025-11-30 00:37:40.564 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:37:40.564 +02:00 [DBG] Connection id "0HNHFIV6IEHGA" started.
2025-11-30 00:37:40.569 +02:00 [DBG] Connection id "0HNHFIV6IEHG9" stopped.
2025-11-30 00:37:40.570 +02:00 [DBG] Connection id "0HNHFIV6IEHG9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:37:40.575 +02:00 [DBG] Connection 0HNHFIV6IEHGA established using the following protocol: "Tls12"
2025-11-30 00:37:40.578 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAll - null null
2025-11-30 00:37:40.582 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAll'
2025-11-30 00:37:40.586 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)' with route pattern 'api/Appointment/GetAll' is valid for the request path '/api/Appointment/GetAll'
2025-11-30 00:37:40.587 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-30 00:37:40.589 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:37:40.618 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:37:40.620 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-30 00:37:40.635 +02:00 [INF] Route matched with {action = "GetAll", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-30 00:37:40.637 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:37:40.638 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:37:40.639 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:37:40.641 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:37:40.642 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:37:40.644 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 00:37:40.737 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-30 00:37:40.959 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 00:37:40.961 +02:00 [INF] Get All Appointments called at "2025-11-30T00:37:40.9616348+02:00"
2025-11-30 00:37:40.963 +02:00 [INF] Fetching all appointments
2025-11-30 00:37:41.455 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-30 00:37:41.456 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-30 00:37:41.458 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-30 00:37:41.459 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-30 00:37:41.461 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-30 00:37:41.615 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:37:41.616 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:37:41.802 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:37:41.843 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)
    .Include(a => a.Payment)'
2025-11-30 00:37:41.928 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-30 00:37:41.931 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-30 00:37:41.932 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-30 00:37:41.935 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-11-30 00:37:42.093 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Doctor.Available (bool?), 17], [Property: Doctor.Biography (string), 18], [Property: Doctor.ConsultationFees (decimal) Required, 19], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.ExperienceYears (int?), 21], [Property: Doctor.ImageURL (string) MaxLength(300), 22], [Property: Doctor.SpecializationId (int) Required FK Index, 23], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Doctor.UserId (string) Required FK Index, 25] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 26], [Property: Branch.Address (string) MaxLength(250), 27], [Property: Branch.BranchName (string) Required MaxLength(150), 28], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: Branch.Description (string), 30], [Property: Branch.Email (string) MaxLength(200), 31], [Property: Branch.ImageURL (string) MaxLength(300), 32], [Property: Branch.Latitude (double?), 33], [Property: Branch.Longitude (double?), 34], [Property: Branch.Phone (string) MaxLength(25), 35], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
            4 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Payment.Amount (decimal) Required, 38], [Property: Payment.AppointmentId (int) Required FK Index, 39], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: Payment.Currency (string) Required MaxLength(3), 41], [Property: Payment.GatewayResponse (string), 42], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 43], [Property: Payment.PaymobOrderId (long?), 44], [Property: Payment.PaymobTransactionId (long?), 45], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 46], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt, p0.PaymentId, p0.Amount, p0.AppointmentId, p0.CreatedAt, p0.Currency, p0.GatewayResponse, p0.PaymobMerchantOrderId, p0.PaymobOrderId, p0.PaymobTransactionId, p0.Status, p0.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        LEFT JOIN Payments AS p0 ON a.AppointmentId == p0.AppointmentId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 00:37:42.123 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:37:42.138 +02:00 [DBG] Created DbConnection. (12ms).
2025-11-30 00:37:42.140 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:37:42.351 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:37:42.355 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:37:42.359 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-11-30 00:37:42.361 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-11-30 00:37:42.369 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-11-30 00:37:42.417 +02:00 [ERR] Failed executing DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-11-30 00:37:42.423 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:37:42.431 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (6ms).
2025-11-30 00:37:42.442 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Clinic.Infrastructure.Persistence.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Shift'.
Invalid column name 'Latitude'.
Invalid column name 'Longitude'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7aaf6791-1d78-49db-8fbc-f05700e9ea15
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Shift'.
Invalid column name 'Latitude'.
Invalid column name 'Longitude'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7aaf6791-1d78-49db-8fbc-f05700e9ea15
Error Number:207,State:1,Class:16
2025-11-30 00:37:42.531 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetAll (Hospital) in 1885.3223ms
2025-11-30 00:37:42.532 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-30 00:37:42.582 +02:00 [ERR]  Exception caught: Invalid column name 'Shift'.
Invalid column name 'Latitude'.
Invalid column name 'Longitude'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Shift'.
Invalid column name 'Latitude'.
Invalid column name 'Longitude'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Hospital.Infrastructure.Repository.AppointmentRepository.GetAllAsync() in D:\Walaa\GP\Hospital\Hospital.Infrastructure\Repository\AppointmentRepository.cs:line 46
   at Hospital.Infrastructure.Services.AppointmentService.GetAllAsync() in D:\Walaa\GP\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 260
   at Hospital.API.Controllers.AppointmentController.GetAll() in D:\Walaa\GP\Hospital\Hospital\Controllers\AppointmentController.cs:line 75
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Walaa\GP\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
ClientConnectionId:7aaf6791-1d78-49db-8fbc-f05700e9ea15
Error Number:207,State:1,Class:16
2025-11-30 00:37:42.639 +02:00 [DBG] Connection id "0HNHFIV6IEHGA" completed keep alive response.
2025-11-30 00:37:42.642 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:37:42.647 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:37:42.649 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-30 00:37:42.651 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAll - 500 null application/json 2072.7048ms
2025-11-30 00:37:47.915 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAll - null null
2025-11-30 00:37:47.921 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAll'
2025-11-30 00:37:47.922 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)' with route pattern 'api/Appointment/GetAll' is valid for the request path '/api/Appointment/GetAll'
2025-11-30 00:37:47.923 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-30 00:37:47.924 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:37:47.925 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:37:47.926 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-30 00:37:47.926 +02:00 [INF] Route matched with {action = "GetAll", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-30 00:37:47.927 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:37:47.928 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:37:47.928 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:37:47.929 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:37:47.930 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:37:47.930 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 00:37:47.932 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 00:37:47.933 +02:00 [INF] Get All Appointments called at "2025-11-30T00:37:47.9330441+02:00"
2025-11-30 00:37:47.933 +02:00 [INF] Fetching all appointments
2025-11-30 00:37:47.967 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:37:47.974 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:37:47.975 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-30 00:37:47.975 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:37:47.977 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:37:47.978 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:37:47.979 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:37:47.979 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:37:47.981 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-11-30 00:37:47.988 +02:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-11-30 00:37:47.989 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:37:47.990 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:37:47.992 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Clinic.Infrastructure.Persistence.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Shift'.
Invalid column name 'Latitude'.
Invalid column name 'Longitude'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7aaf6791-1d78-49db-8fbc-f05700e9ea15
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Shift'.
Invalid column name 'Latitude'.
Invalid column name 'Longitude'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:7aaf6791-1d78-49db-8fbc-f05700e9ea15
Error Number:207,State:1,Class:16
2025-11-30 00:37:48.051 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetAll (Hospital) in 120.6933ms
2025-11-30 00:37:48.053 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-30 00:37:48.085 +02:00 [ERR]  Exception caught: Invalid column name 'Shift'.
Invalid column name 'Latitude'.
Invalid column name 'Longitude'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Shift'.
Invalid column name 'Latitude'.
Invalid column name 'Longitude'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Hospital.Infrastructure.Repository.AppointmentRepository.GetAllAsync() in D:\Walaa\GP\Hospital\Hospital.Infrastructure\Repository\AppointmentRepository.cs:line 46
   at Hospital.Infrastructure.Services.AppointmentService.GetAllAsync() in D:\Walaa\GP\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 260
   at Hospital.API.Controllers.AppointmentController.GetAll() in D:\Walaa\GP\Hospital\Hospital\Controllers\AppointmentController.cs:line 75
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Walaa\GP\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
ClientConnectionId:7aaf6791-1d78-49db-8fbc-f05700e9ea15
Error Number:207,State:1,Class:16
2025-11-30 00:37:48.098 +02:00 [DBG] Connection id "0HNHFIV6IEHGA" completed keep alive response.
2025-11-30 00:37:48.098 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:37:48.099 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:37:48.100 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-30 00:37:48.101 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAll - 500 null application/json 185.9987ms
2025-11-30 00:38:12.823 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-30 00:38:13.145 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-30 00:38:13.146 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-30 00:38:13.146 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-30 00:38:13.146 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-30 00:38:13.146 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-30 00:38:13.215 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:38:13.215 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:38:13.311 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:38:13.322 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:38:13.340 +02:00 [DBG] Created DbConnection. (15ms).
2025-11-30 00:38:13.341 +02:00 [DBG] Migrating using database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.344 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.450 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.454 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:38:13.457 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (3ms).
2025-11-30 00:38:13.458 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (5ms).
2025-11-30 00:38:13.461 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-30 00:38:13.473 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-30 00:38:13.474 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.478 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-30 00:38:13.479 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-11-30 00:38:13.479 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-11-30 00:38:13.479 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-11-30 00:38:13.479 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.479 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.480 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-30 00:38:13.488 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-30 00:38:13.488 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.488 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:38:13.488 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.488 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.488 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:38:13.488 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:13.488 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:13.488 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-30 00:38:13.489 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-30 00:38:13.489 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.489 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:38:13.489 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-11-30 00:38:13.489 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-11-30 00:38:13.489 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-11-30 00:38:13.489 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.489 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.489 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-30 00:38:13.490 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-30 00:38:13.490 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.490 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:38:13.495 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.495 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.495 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:38:13.495 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:38:13.495 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:38:13.495 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-30 00:38:13.517 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-30 00:38:13.518 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.519 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-30 00:38:13.519 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.519 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:38:13.537 +02:00 [INF] Applying migration '20251124135933_addDateinschudule'.
2025-11-30 00:38:13.570 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.570 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.571 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:38:13.575 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:38:13.575 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:38:13.575 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:13.575 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:13.575 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'DayOfWeek');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Schedules] DROP COLUMN [DayOfWeek];
2025-11-30 00:38:13.616 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'DayOfWeek');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Schedules] DROP COLUMN [DayOfWeek];
2025-11-30 00:38:13.616 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:38:13.616 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:13.616 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:13.616 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [ScheduleDate] date NOT NULL DEFAULT '0001-01-01';
2025-11-30 00:38:13.627 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [ScheduleDate] date NOT NULL DEFAULT '0001-01-01';
2025-11-30 00:38:13.627 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:38:13.627 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:13.627 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:13.627 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124135933_addDateinschudule', N'8.0.21');
2025-11-30 00:38:13.629 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124135933_addDateinschudule', N'8.0.21');
2025-11-30 00:38:13.630 +02:00 [DBG] Committing transaction.
2025-11-30 00:38:13.633 +02:00 [DBG] Committed transaction.
2025-11-30 00:38:13.634 +02:00 [DBG] Disposing transaction.
2025-11-30 00:38:13.634 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.634 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:38:13.634 +02:00 [INF] Applying migration '20251124164506_AddShiftToAppointments'.
2025-11-30 00:38:13.656 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.656 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:13.656 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:38:13.656 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:38:13.657 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:38:13.657 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:13.657 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:13.657 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Appointments] DROP COLUMN [Time];
2025-11-30 00:38:15.692 +02:00 [INF] Executed DbCommand (2,035ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Appointments] DROP COLUMN [Time];
2025-11-30 00:38:15.692 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:38:15.692 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:15.692 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:15.692 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [Shift] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-30 00:38:15.695 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [Shift] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-30 00:38:15.695 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:38:15.695 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:15.695 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:15.696 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124164506_AddShiftToAppointments', N'8.0.21');
2025-11-30 00:38:15.696 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124164506_AddShiftToAppointments', N'8.0.21');
2025-11-30 00:38:15.696 +02:00 [DBG] Committing transaction.
2025-11-30 00:38:15.697 +02:00 [DBG] Committed transaction.
2025-11-30 00:38:15.697 +02:00 [DBG] Disposing transaction.
2025-11-30 00:38:15.697 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:15.697 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:38:15.697 +02:00 [INF] Applying migration '20251124182248_editSchedule'.
2025-11-30 00:38:15.724 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:15.724 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:15.724 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:38:15.725 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:38:15.725 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:38:15.725 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:15.725 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:15.725 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'ScheduleDate');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Schedules] DROP COLUMN [ScheduleDate];
2025-11-30 00:38:15.739 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'ScheduleDate');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Schedules] DROP COLUMN [ScheduleDate];
2025-11-30 00:38:15.739 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:38:15.739 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:15.739 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:15.739 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [DayOfWeek] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-30 00:38:17.768 +02:00 [INF] Executed DbCommand (2,029ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [DayOfWeek] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-30 00:38:17.769 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:38:17.769 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:17.769 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:17.769 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124182248_editSchedule', N'8.0.21');
2025-11-30 00:38:17.770 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124182248_editSchedule', N'8.0.21');
2025-11-30 00:38:17.770 +02:00 [DBG] Committing transaction.
2025-11-30 00:38:17.770 +02:00 [DBG] Committed transaction.
2025-11-30 00:38:17.770 +02:00 [DBG] Disposing transaction.
2025-11-30 00:38:17.770 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:17.770 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:38:17.770 +02:00 [INF] Applying migration '20251125023609_update schedule so it has branchid'.
2025-11-30 00:38:17.804 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:17.804 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:17.804 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:38:17.805 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:38:17.805 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:38:17.805 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:17.805 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:17.805 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [BranchId] int NOT NULL DEFAULT 0;
2025-11-30 00:38:17.807 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [BranchId] int NOT NULL DEFAULT 0;
2025-11-30 00:38:17.807 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:38:17.807 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:17.807 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:17.807 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_BranchId] ON [Schedules] ([BranchId]);
2025-11-30 00:38:17.831 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_BranchId] ON [Schedules] ([BranchId]);
2025-11-30 00:38:17.831 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:38:17.831 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:17.831 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:38:17.831 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD CONSTRAINT [FK_Schedules_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE;
2025-11-30 00:38:17.848 +02:00 [ERR] Failed executing DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD CONSTRAINT [FK_Schedules_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE;
2025-11-30 00:38:17.848 +02:00 [DBG] Disposing transaction.
2025-11-30 00:38:17.848 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:17.848 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:38:17.849 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:38:17.850 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:38:17.850 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 00:42:23.956 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-30 00:42:24.308 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-30 00:42:24.309 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-30 00:42:24.309 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-30 00:42:24.309 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-30 00:42:24.309 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-30 00:42:24.391 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:42:24.391 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:42:24.496 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:42:24.498 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:42:24.518 +02:00 [DBG] Created DbConnection. (18ms).
2025-11-30 00:42:24.522 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:42:24.524 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:24.527 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 00:42:26.918 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-30 00:42:27.255 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-30 00:42:27.256 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-30 00:42:27.256 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-30 00:42:27.256 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-30 00:42:27.256 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-30 00:42:27.329 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:42:27.329 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:42:27.430 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:42:27.433 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:42:27.453 +02:00 [DBG] Created DbConnection. (18ms).
2025-11-30 00:42:27.458 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:27.581 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:27.584 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:27.587 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (3ms).
2025-11-30 00:42:27.588 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (5ms).
2025-11-30 00:42:27.591 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-30 00:42:27.605 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-30 00:42:27.606 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:27.610 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (2ms).
2025-11-30 00:42:27.622 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:42:27.622 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-30 00:42:27.622 +02:00 [DBG] Opening connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-30 00:42:27.625 +02:00 [DBG] Opened connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-30 00:42:27.626 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:27.626 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:27.626 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:27.626 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-11-30 00:42:27.639 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-11-30 00:42:27.639 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:27.639 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:27.639 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:27.639 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [HospitalDB];
2025-11-30 00:42:27.667 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [HospitalDB];
2025-11-30 00:42:27.668 +02:00 [DBG] Closing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-30 00:42:27.668 +02:00 [DBG] Closed connection to database 'master' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:42:27.669 +02:00 [DBG] Disposing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-30 00:42:27.670 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 00:42:27.671 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:42:27.671 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:27.671 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 00:42:32.132 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-30 00:42:32.532 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-30 00:42:32.533 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-30 00:42:32.533 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-30 00:42:32.533 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-30 00:42:32.533 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-30 00:42:32.605 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:42:32.605 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:42:32.706 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:42:32.716 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:42:32.734 +02:00 [DBG] Created DbConnection. (16ms).
2025-11-30 00:42:32.736 +02:00 [DBG] Migrating using database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:32.738 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:32.829 +02:00 [DBG] An error occurred using the connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:32.830 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:32.830 +02:00 [DBG] An error occurred using the connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:32.890 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-30 00:42:32.890 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-30 00:42:32.890 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-30 00:42:32.890 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-30 00:42:32.890 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-30 00:42:32.902 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:42:32.902 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:42:32.923 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:42:32.923 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-30 00:42:32.924 +02:00 [DBG] Opening connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-30 00:42:32.933 +02:00 [DBG] Opened connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-30 00:42:32.937 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:32.940 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (3ms).
2025-11-30 00:42:32.942 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (6ms).
2025-11-30 00:42:32.945 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [HospitalDB];
2025-11-30 00:42:33.051 +02:00 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [HospitalDB];
2025-11-30 00:42:33.052 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:33.052 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:33.052 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:33.052 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-11-30 00:42:33.086 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HospitalDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-11-30 00:42:33.087 +02:00 [DBG] Closing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.091 +02:00 [DBG] Closed connection to database 'master' on server '.\SQLEXPRESS' (2ms).
2025-11-30 00:42:33.092 +02:00 [DBG] Disposing connection to database 'master' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.092 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 00:42:33.093 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.096 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.096 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:33.096 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:33.096 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:33.096 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-30 00:42:33.099 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-30 00:42:33.099 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.099 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:42:33.130 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:33.130 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:33.151 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (20ms).
2025-11-30 00:42:33.151 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.151 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.151 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-30 00:42:33.157 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-11-30 00:42:33.157 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.157 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:42:33.157 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.158 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.158 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:33.158 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:33.158 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:33.158 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-30 00:42:33.158 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-30 00:42:33.158 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.158 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:42:33.159 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-11-30 00:42:33.159 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-11-30 00:42:33.159 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-11-30 00:42:33.159 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.159 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.160 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-30 00:42:33.167 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-30 00:42:33.167 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.167 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:42:33.168 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.168 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.168 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:42:33.168 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:42:33.168 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:42:33.168 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-30 00:42:33.174 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-30 00:42:33.176 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.176 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-30 00:42:33.176 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.177 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:42:33.182 +02:00 [INF] Applying migration '20251111134048_init-auth'.
2025-11-30 00:42:33.229 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.229 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:42:33.230 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:42:33.234 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:42:34.910 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:34.910 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:34.911 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1ms).
2025-11-30 00:42:34.911 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2025-11-30 00:42:34.913 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] nvarchar(450) NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2025-11-30 00:42:34.914 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:34.914 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:34.914 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:34.914 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Branches] (
    [BranchId] int NOT NULL IDENTITY,
    [BranchName] nvarchar(150) NOT NULL,
    [Address] nvarchar(250) NULL,
    [Phone] nvarchar(25) NULL,
    [Email] nvarchar(200) NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Branches] PRIMARY KEY ([BranchId])
);
2025-11-30 00:42:34.915 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Branches] (
    [BranchId] int NOT NULL IDENTITY,
    [BranchName] nvarchar(150) NOT NULL,
    [Address] nvarchar(250) NULL,
    [Phone] nvarchar(25) NULL,
    [Email] nvarchar(200) NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Branches] PRIMARY KEY ([BranchId])
);
2025-11-30 00:42:34.915 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:34.915 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:34.915 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:34.915 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Specializations] (
    [SpecializationId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Specializations] PRIMARY KEY ([SpecializationId])
);
2025-11-30 00:42:34.917 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Specializations] (
    [SpecializationId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Specializations] PRIMARY KEY ([SpecializationId])
);
2025-11-30 00:42:34.917 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:34.917 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:34.917 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:34.917 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:34.918 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:36.984 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:36.984 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:36.984 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:36.984 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Banners] (
    [BannerId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [LinkURL] nvarchar(300) NULL,
    [Type] nvarchar(20) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Banners] PRIMARY KEY ([BannerId]),
    CONSTRAINT [FK_Banners_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-30 00:42:36.987 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Banners] (
    [BannerId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [LinkURL] nvarchar(300) NULL,
    [Type] nvarchar(20) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Banners] PRIMARY KEY ([BannerId]),
    CONSTRAINT [FK_Banners_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-30 00:42:36.987 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:36.987 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:36.987 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:36.987 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Events] (
    [EventId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [EventDate] datetime2 NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Events] PRIMARY KEY ([EventId]),
    CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-30 00:42:36.989 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Events] (
    [EventId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [EventDate] datetime2 NOT NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Events] PRIMARY KEY ([EventId]),
    CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-30 00:42:36.990 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:36.990 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:36.990 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:36.990 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [News] (
    [NewsId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [Date] datetime2 NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_News] PRIMARY KEY ([NewsId]),
    CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-30 00:42:36.996 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [News] (
    [NewsId] int NOT NULL IDENTITY,
    [Title] nvarchar(150) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [Date] datetime2 NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_News] PRIMARY KEY ([NewsId]),
    CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-30 00:42:39.904 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:39.904 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:39.904 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:39.904 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [FullName] nvarchar(150) NOT NULL,
    [Gender] nvarchar(10) NULL,
    [DateOfBirth] datetime2 NULL,
    [Role] nvarchar(50) NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-30 00:42:39.913 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] nvarchar(450) NOT NULL,
    [FullName] nvarchar(150) NOT NULL,
    [Gender] nvarchar(10) NULL,
    [DateOfBirth] datetime2 NULL,
    [Role] nvarchar(50) NOT NULL,
    [BranchId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL
);
2025-11-30 00:42:39.913 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:39.913 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:39.913 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:39.913 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Services] (
    [ServiceId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [SpecializationId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Services] PRIMARY KEY ([ServiceId]),
    CONSTRAINT [FK_Services_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL,
    CONSTRAINT [FK_Services_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE SET NULL
);
2025-11-30 00:42:39.916 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Services] (
    [ServiceId] int NOT NULL IDENTITY,
    [Name] nvarchar(120) NOT NULL,
    [Description] nvarchar(max) NULL,
    [ImageURL] nvarchar(300) NULL,
    [BranchId] int NULL,
    [SpecializationId] int NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Services] PRIMARY KEY ([ServiceId]),
    CONSTRAINT [FK_Services_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE SET NULL,
    CONSTRAINT [FK_Services_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE SET NULL
);
2025-11-30 00:42:42.700 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:42.700 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:42.700 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:42.700 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:42.703 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:42.703 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:42.703 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:42.703 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:42.703 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:42.715 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:42.715 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:42.715 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:42.715 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:42.716 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:42.719 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:45.792 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:45.792 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:45.792 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:45.792 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] nvarchar(450) NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:45.795 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] nvarchar(450) NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:45.795 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:45.795 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:45.795 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:45.795 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Doctors] (
    [DoctorId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [SpecializationId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Biography] nvarchar(max) NULL,
    [ExperienceYears] int NULL,
    [ConsultationFees] decimal(10,2) NULL,
    [Available] bit NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Doctors] PRIMARY KEY ([DoctorId]),
    CONSTRAINT [FK_Doctors_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:45.799 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Doctors] (
    [DoctorId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [SpecializationId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Biography] nvarchar(max) NULL,
    [ExperienceYears] int NULL,
    [ConsultationFees] decimal(10,2) NULL,
    [Available] bit NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Doctors] PRIMARY KEY ([DoctorId]),
    CONSTRAINT [FK_Doctors_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Doctors_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:45.799 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:45.799 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:45.799 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:45.799 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Patients] (
    [PatientId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [BloodType] nvarchar(5) NULL,
    [EmergencyContact] nvarchar(150) NULL,
    [Address] nvarchar(250) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Patients] PRIMARY KEY ([PatientId]),
    CONSTRAINT [FK_Patients_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:48.029 +02:00 [INF] Executed DbCommand (2,230ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Patients] (
    [PatientId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [BloodType] nvarchar(5) NULL,
    [EmergencyContact] nvarchar(150) NULL,
    [Address] nvarchar(250) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Patients] PRIMARY KEY ([PatientId]),
    CONSTRAINT [FK_Patients_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:48.029 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:48.029 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:48.029 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:48.029 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [SupportTickets] (
    [TicketId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [Response] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_SupportTickets] PRIMARY KEY ([TicketId]),
    CONSTRAINT [FK_SupportTickets_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:48.031 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [SupportTickets] (
    [TicketId] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Subject] nvarchar(200) NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [Response] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_SupportTickets] PRIMARY KEY ([TicketId]),
    CONSTRAINT [FK_SupportTickets_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:42:48.031 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:48.031 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:48.031 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:48.031 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Schedules] (
    [ScheduleId] int NOT NULL IDENTITY,
    [DoctorId] int NOT NULL,
    [DayOfWeek] nvarchar(20) NOT NULL,
    [StartTime] time NOT NULL,
    [EndTime] time NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Schedules] PRIMARY KEY ([ScheduleId]),
    CONSTRAINT [FK_Schedules_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-30 00:42:48.032 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Schedules] (
    [ScheduleId] int NOT NULL IDENTITY,
    [DoctorId] int NOT NULL,
    [DayOfWeek] nvarchar(20) NOT NULL,
    [StartTime] time NOT NULL,
    [EndTime] time NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Schedules] PRIMARY KEY ([ScheduleId]),
    CONSTRAINT [FK_Schedules_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-30 00:42:48.032 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:48.032 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:48.032 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:48.032 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Appointments] (
    [AppointmentId] int NOT NULL IDENTITY,
    [PatientId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Date] datetime2 NOT NULL,
    [Time] time NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedBy] nvarchar(450) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Appointments] PRIMARY KEY ([AppointmentId]),
    CONSTRAINT [FK_Appointments_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([Id]) ON DELETE SET NULL
);
2025-11-30 00:42:50.703 +02:00 [INF] Executed DbCommand (2,670ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Appointments] (
    [AppointmentId] int NOT NULL IDENTITY,
    [PatientId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [BranchId] int NOT NULL,
    [Date] datetime2 NOT NULL,
    [Time] time NOT NULL,
    [Status] nvarchar(20) NOT NULL,
    [CreatedBy] nvarchar(450) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Appointments] PRIMARY KEY ([AppointmentId]),
    CONSTRAINT [FK_Appointments_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Appointments_Users_CreatedBy] FOREIGN KEY ([CreatedBy]) REFERENCES [Users] ([Id]) ON DELETE SET NULL
);
2025-11-30 00:42:50.703 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:50.703 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:50.703 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:50.703 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MedicalRecords] (
    [RecordId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [PatientId] int NOT NULL,
    [Diagnosis] nvarchar(max) NULL,
    [TreatmentPlan] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_MedicalRecords] PRIMARY KEY ([RecordId]),
    CONSTRAINT [FK_MedicalRecords_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE CASCADE,
    CONSTRAINT [FK_MedicalRecords_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_MedicalRecords_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION
);
2025-11-30 00:42:50.706 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MedicalRecords] (
    [RecordId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [DoctorId] int NOT NULL,
    [PatientId] int NOT NULL,
    [Diagnosis] nvarchar(max) NULL,
    [TreatmentPlan] nvarchar(max) NULL,
    [Notes] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_MedicalRecords] PRIMARY KEY ([RecordId]),
    CONSTRAINT [FK_MedicalRecords_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE CASCADE,
    CONSTRAINT [FK_MedicalRecords_Doctors_DoctorId] FOREIGN KEY ([DoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE NO ACTION,
    CONSTRAINT [FK_MedicalRecords_Patients_PatientId] FOREIGN KEY ([PatientId]) REFERENCES [Patients] ([PatientId]) ON DELETE NO ACTION
);
2025-11-30 00:42:53.939 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:53.940 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.940 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.940 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_BranchId] ON [Appointments] ([BranchId]);
2025-11-30 00:42:53.941 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_BranchId] ON [Appointments] ([BranchId]);
2025-11-30 00:42:53.941 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:53.941 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.941 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.941 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_CreatedBy] ON [Appointments] ([CreatedBy]);
2025-11-30 00:42:53.942 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_CreatedBy] ON [Appointments] ([CreatedBy]);
2025-11-30 00:42:53.942 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:53.942 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.942 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.942 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_DoctorId] ON [Appointments] ([DoctorId]);
2025-11-30 00:42:53.943 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_DoctorId] ON [Appointments] ([DoctorId]);
2025-11-30 00:42:53.943 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:53.943 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.943 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.943 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_PatientId] ON [Appointments] ([PatientId]);
2025-11-30 00:42:53.943 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Appointments_PatientId] ON [Appointments] ([PatientId]);
2025-11-30 00:42:53.943 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:53.943 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.943 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.943 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2025-11-30 00:42:53.944 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2025-11-30 00:42:53.944 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:53.944 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.944 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.944 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2025-11-30 00:42:53.953 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2025-11-30 00:42:53.953 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:53.953 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.953 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.953 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2025-11-30 00:42:53.954 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2025-11-30 00:42:53.954 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:53.954 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.954 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:53.954 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2025-11-30 00:42:56.183 +02:00 [INF] Executed DbCommand (2,229ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2025-11-30 00:42:56.183 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:56.183 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:56.183 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:56.183 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2025-11-30 00:42:56.184 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2025-11-30 00:42:56.184 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:56.184 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:56.184 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:56.184 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Banners_BranchId] ON [Banners] ([BranchId]);
2025-11-30 00:42:56.185 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Banners_BranchId] ON [Banners] ([BranchId]);
2025-11-30 00:42:56.185 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:56.185 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:56.185 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:56.185 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_BranchId] ON [Doctors] ([BranchId]);
2025-11-30 00:42:56.187 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_BranchId] ON [Doctors] ([BranchId]);
2025-11-30 00:42:56.187 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:56.187 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:56.187 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:56.187 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_SpecializationId] ON [Doctors] ([SpecializationId]);
2025-11-30 00:42:56.188 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Doctors_SpecializationId] ON [Doctors] ([SpecializationId]);
2025-11-30 00:42:56.188 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:56.188 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:56.188 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:56.188 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Doctors_UserId] ON [Doctors] ([UserId]);
2025-11-30 00:42:56.189 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Doctors_UserId] ON [Doctors] ([UserId]);
2025-11-30 00:42:56.189 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:56.189 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:56.189 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:56.189 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Events_BranchId] ON [Events] ([BranchId]);
2025-11-30 00:42:56.190 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Events_BranchId] ON [Events] ([BranchId]);
2025-11-30 00:42:56.190 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:56.190 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:56.190 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:56.190 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_AppointmentId] ON [MedicalRecords] ([AppointmentId]);
2025-11-30 00:42:56.190 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_AppointmentId] ON [MedicalRecords] ([AppointmentId]);
2025-11-30 00:42:56.190 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:56.190 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:56.190 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:58.594 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_DoctorId] ON [MedicalRecords] ([DoctorId]);
2025-11-30 00:42:58.595 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_DoctorId] ON [MedicalRecords] ([DoctorId]);
2025-11-30 00:42:58.595 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:58.595 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:58.595 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:58.595 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_PatientId] ON [MedicalRecords] ([PatientId]);
2025-11-30 00:42:58.596 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MedicalRecords_PatientId] ON [MedicalRecords] ([PatientId]);
2025-11-30 00:42:58.596 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:58.596 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:58.596 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:58.596 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_News_BranchId] ON [News] ([BranchId]);
2025-11-30 00:42:58.597 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_News_BranchId] ON [News] ([BranchId]);
2025-11-30 00:42:58.597 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:58.597 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:58.597 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:58.597 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Patients_UserId] ON [Patients] ([UserId]);
2025-11-30 00:42:58.598 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Patients_UserId] ON [Patients] ([UserId]);
2025-11-30 00:42:58.598 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:58.598 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:58.598 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:58.598 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_DoctorId] ON [Schedules] ([DoctorId]);
2025-11-30 00:42:58.599 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_DoctorId] ON [Schedules] ([DoctorId]);
2025-11-30 00:42:58.599 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:58.599 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:58.599 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:58.599 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_BranchId] ON [Services] ([BranchId]);
2025-11-30 00:42:58.599 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_BranchId] ON [Services] ([BranchId]);
2025-11-30 00:42:58.600 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:58.600 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:58.600 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:58.600 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_SpecializationId] ON [Services] ([SpecializationId]);
2025-11-30 00:42:58.600 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Services_SpecializationId] ON [Services] ([SpecializationId]);
2025-11-30 00:42:58.600 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:42:58.600 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:58.600 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:42:58.600 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_SupportTickets_UserId] ON [SupportTickets] ([UserId]);
2025-11-30 00:42:58.601 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_SupportTickets_UserId] ON [SupportTickets] ([UserId]);
2025-11-30 00:42:58.601 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:00.556 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1955ms).
2025-11-30 00:43:00.556 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1955ms).
2025-11-30 00:43:00.556 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [Users] ([NormalizedEmail]);
2025-11-30 00:43:00.557 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [Users] ([NormalizedEmail]);
2025-11-30 00:43:00.557 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:00.557 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:00.557 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:00.557 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_BranchId] ON [Users] ([BranchId]);
2025-11-30 00:43:00.558 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_BranchId] ON [Users] ([BranchId]);
2025-11-30 00:43:00.558 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:00.558 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:00.558 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:00.558 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]) WHERE [Email] IS NOT NULL;
2025-11-30 00:43:00.559 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Users] ([Email]) WHERE [Email] IS NOT NULL;
2025-11-30 00:43:00.559 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:00.559 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:00.559 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:00.559 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [Users] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2025-11-30 00:43:00.560 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [Users] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2025-11-30 00:43:00.560 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:00.560 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:00.560 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:00.560 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134048_init-auth', N'8.0.21');
2025-11-30 00:43:00.568 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134048_init-auth', N'8.0.21');
2025-11-30 00:43:00.569 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:00.574 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:00.574 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:00.574 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:00.575 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:00.575 +02:00 [INF] Applying migration '20251111134638__SeedRoles'.
2025-11-30 00:43:00.613 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:00.613 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:00.613 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:00.613 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:00.613 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:00.613 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:00.614 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:00.614 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'7163ae3a-92b7-45d0-9833-286c81d346a2', N'Admin', N'ADMIN', N'dda338f4-697f-467a-aa84-2b374e585198');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-30 00:43:02.813 +02:00 [INF] Executed DbCommand (2,199ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'7163ae3a-92b7-45d0-9833-286c81d346a2', N'Admin', N'ADMIN', N'dda338f4-697f-467a-aa84-2b374e585198');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-30 00:43:02.813 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:02.813 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:02.813 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:02.813 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'3ae1a4ed-8556-43f4-b567-7e144b5b79a3', N'Doctor', N'DOCTOR', N'6d61dfa5-4246-4b5b-8e9f-0bb0b8b2048c');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-30 00:43:02.820 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'3ae1a4ed-8556-43f4-b567-7e144b5b79a3', N'Doctor', N'DOCTOR', N'6d61dfa5-4246-4b5b-8e9f-0bb0b8b2048c');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-30 00:43:02.820 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:02.820 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:02.820 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:02.820 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'704c7d0a-ab15-4981-9656-d113d09a8bfe', N'Patient', N'PATIENT', N'8601bf0d-b5ce-4e0e-9a77-a3c5e5c23c11');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-30 00:43:02.827 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] ON;
INSERT INTO [AspNetRoles] ([Id], [Name], [NormalizedName], [ConcurrencyStamp])
VALUES (N'704c7d0a-ab15-4981-9656-d113d09a8bfe', N'Patient', N'PATIENT', N'8601bf0d-b5ce-4e0e-9a77-a3c5e5c23c11');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name', N'NormalizedName', N'ConcurrencyStamp') AND [object_id] = OBJECT_ID(N'[AspNetRoles]'))
    SET IDENTITY_INSERT [AspNetRoles] OFF;
2025-11-30 00:43:04.524 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:04.524 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:04.524 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:04.524 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134638__SeedRoles', N'8.0.21');
2025-11-30 00:43:04.524 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111134638__SeedRoles', N'8.0.21');
2025-11-30 00:43:04.524 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:04.533 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:04.534 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:04.534 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:04.534 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:04.534 +02:00 [INF] Applying migration '20251111153509__SeedRolesAdmin'.
2025-11-30 00:43:04.683 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:04.684 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:04.684 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:04.684 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:04.684 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:04.684 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:04.684 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:04.684 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [FullName], [UserName], [NormalizedUserName], [Email], [NormalizedEmail], [PasswordHash], [Role], [CreatedAt], [UpdatedAt], [EmailConfirmed], [AccessFailedCount], [PhoneNumberConfirmed], [TwoFactorEnabled], [LockoutEnabled], [SecurityStamp])
VALUES (N'418f0ec9-3209-40f3-b31b-d8104ffcfba9', N'Admin', N'admin', N'ADMIN', N'admin@Hospital.com', N'ADMIN@HOSPITAL.COM', N'AQAAAAIAAYagAAAAEPWORAwKgA1mw3BkLIQpAEFBxjWLocivKnxS+qC5/fuZrv7+9ypiNtSvSa6fKVuddQ==', N'Admin', '2025-11-29T22:43:04.6333342Z', '2025-11-29T22:43:04.6333348Z', CAST(1 AS bit), 0, CAST(0 AS bit), CAST(0 AS bit), CAST(0 AS bit), N'b0d8e5fd-6529-4a9a-809f-3ab3724a2884');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2025-11-30 00:43:04.696 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [FullName], [UserName], [NormalizedUserName], [Email], [NormalizedEmail], [PasswordHash], [Role], [CreatedAt], [UpdatedAt], [EmailConfirmed], [AccessFailedCount], [PhoneNumberConfirmed], [TwoFactorEnabled], [LockoutEnabled], [SecurityStamp])
VALUES (N'418f0ec9-3209-40f3-b31b-d8104ffcfba9', N'Admin', N'admin', N'ADMIN', N'admin@Hospital.com', N'ADMIN@HOSPITAL.COM', N'AQAAAAIAAYagAAAAEPWORAwKgA1mw3BkLIQpAEFBxjWLocivKnxS+qC5/fuZrv7+9ypiNtSvSa6fKVuddQ==', N'Admin', '2025-11-29T22:43:04.6333342Z', '2025-11-29T22:43:04.6333348Z', CAST(1 AS bit), 0, CAST(0 AS bit), CAST(0 AS bit), CAST(0 AS bit), N'b0d8e5fd-6529-4a9a-809f-3ab3724a2884');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'FullName', N'UserName', N'NormalizedUserName', N'Email', N'NormalizedEmail', N'PasswordHash', N'Role', N'CreatedAt', N'UpdatedAt', N'EmailConfirmed', N'AccessFailedCount', N'PhoneNumberConfirmed', N'TwoFactorEnabled', N'LockoutEnabled', N'SecurityStamp') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2025-11-30 00:43:06.739 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:06.739 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:06.739 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:06.739 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

        INSERT INTO [AspNetUserRoles] ([UserId], [RoleId])
        SELECT '418f0ec9-3209-40f3-b31b-d8104ffcfba9', [Id]
        FROM [AspNetRoles]
        WHERE [Name] = 'Admin';
2025-11-30 00:43:06.759 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

        INSERT INTO [AspNetUserRoles] ([UserId], [RoleId])
        SELECT '418f0ec9-3209-40f3-b31b-d8104ffcfba9', [Id]
        FROM [AspNetRoles]
        WHERE [Name] = 'Admin';
2025-11-30 00:43:06.760 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:06.760 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:06.760 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:06.760 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111153509__SeedRolesAdmin', N'8.0.21');
2025-11-30 00:43:06.760 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251111153509__SeedRolesAdmin', N'8.0.21');
2025-11-30 00:43:06.760 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:06.761 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:06.761 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:06.761 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:06.761 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:06.761 +02:00 [INF] Applying migration '20251112174524_AddRefreshTokenColumns'.
2025-11-30 00:43:06.783 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:06.783 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:06.783 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:06.783 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:06.783 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:06.783 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:06.783 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:06.783 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshToken] nvarchar(max) NOT NULL DEFAULT N'';
2025-11-30 00:43:06.788 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshToken] nvarchar(max) NOT NULL DEFAULT N'';
2025-11-30 00:43:06.788 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:06.788 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:06.788 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:06.788 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshTokenExpiryTime] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2025-11-30 00:43:06.790 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [RefreshTokenExpiryTime] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2025-11-30 00:43:06.790 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:06.790 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:06.790 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:06.790 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251112174524_AddRefreshTokenColumns', N'8.0.21');
2025-11-30 00:43:08.470 +02:00 [INF] Executed DbCommand (1,680ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251112174524_AddRefreshTokenColumns', N'8.0.21');
2025-11-30 00:43:08.470 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:08.475 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:08.475 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:08.475 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:08.476 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:08.476 +02:00 [INF] Applying migration '20251113233448_update in banner and service and branch and specilization relations'.
2025-11-30 00:43:08.499 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:08.499 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:08.499 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:08.500 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:08.500 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:08.500 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:08.500 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:08.500 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Banners] DROP CONSTRAINT [FK_Banners_Branches_BranchId];
2025-11-30 00:43:08.501 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Banners] DROP CONSTRAINT [FK_Banners_Branches_BranchId];
2025-11-30 00:43:08.501 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:08.501 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:08.501 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:08.502 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] DROP CONSTRAINT [FK_Events_Branches_BranchId];
2025-11-30 00:43:08.502 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] DROP CONSTRAINT [FK_Events_Branches_BranchId];
2025-11-30 00:43:08.502 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:08.502 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:08.502 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:08.502 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] DROP CONSTRAINT [FK_News_Branches_BranchId];
2025-11-30 00:43:08.503 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] DROP CONSTRAINT [FK_News_Branches_BranchId];
2025-11-30 00:43:08.503 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:08.503 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:08.503 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:08.503 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Branches_BranchId];
2025-11-30 00:43:08.504 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Branches_BranchId];
2025-11-30 00:43:08.504 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:08.504 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:08.504 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:08.504 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Specializations_SpecializationId];
2025-11-30 00:43:08.504 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Services] DROP CONSTRAINT [FK_Services_Specializations_SpecializationId];
2025-11-30 00:43:08.504 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:08.504 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:08.504 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:08.505 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_BranchId] ON [Services];
2025-11-30 00:43:08.506 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_BranchId] ON [Services];
2025-11-30 00:43:10.262 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:10.262 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:10.262 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:10.262 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_SpecializationId] ON [Services];
2025-11-30 00:43:10.263 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Services_SpecializationId] ON [Services];
2025-11-30 00:43:10.263 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:10.263 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:10.263 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:10.263 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Banners_BranchId] ON [Banners];
2025-11-30 00:43:10.265 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Banners_BranchId] ON [Banners];
2025-11-30 00:43:10.265 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:10.265 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:10.265 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:10.265 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'BranchId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Services] DROP COLUMN [BranchId];
2025-11-30 00:43:10.306 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'BranchId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Services] DROP COLUMN [BranchId];
2025-11-30 00:43:10.306 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:10.307 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:10.307 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:10.307 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'SpecializationId');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Services] DROP COLUMN [SpecializationId];
2025-11-30 00:43:10.323 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Services]') AND [c].[name] = N'SpecializationId');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Services] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Services] DROP COLUMN [SpecializationId];
2025-11-30 00:43:10.323 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:10.323 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:10.323 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:10.323 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Banners]') AND [c].[name] = N'BranchId');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Banners] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Banners] DROP COLUMN [BranchId];
2025-11-30 00:43:12.029 +02:00 [INF] Executed DbCommand (1,706ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Banners]') AND [c].[name] = N'BranchId');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Banners] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Banners] DROP COLUMN [BranchId];
2025-11-30 00:43:12.029 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:12.029 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:12.029 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:12.029 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchServices] (
    [BranchId] int NOT NULL,
    [ServiceId] int NOT NULL,
    CONSTRAINT [PK_BranchServices] PRIMARY KEY ([BranchId], [ServiceId]),
    CONSTRAINT [FK_BranchServices_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchServices_Services_ServiceId] FOREIGN KEY ([ServiceId]) REFERENCES [Services] ([ServiceId]) ON DELETE CASCADE
);
2025-11-30 00:43:12.031 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchServices] (
    [BranchId] int NOT NULL,
    [ServiceId] int NOT NULL,
    CONSTRAINT [PK_BranchServices] PRIMARY KEY ([BranchId], [ServiceId]),
    CONSTRAINT [FK_BranchServices_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchServices_Services_ServiceId] FOREIGN KEY ([ServiceId]) REFERENCES [Services] ([ServiceId]) ON DELETE CASCADE
);
2025-11-30 00:43:12.031 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:12.031 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:12.031 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:12.031 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchSpecializations] (
    [BranchId] int NOT NULL,
    [SpecializationId] int NOT NULL,
    CONSTRAINT [PK_BranchSpecializations] PRIMARY KEY ([BranchId], [SpecializationId]),
    CONSTRAINT [FK_BranchSpecializations_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchSpecializations_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE CASCADE
);
2025-11-30 00:43:12.033 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [BranchSpecializations] (
    [BranchId] int NOT NULL,
    [SpecializationId] int NOT NULL,
    CONSTRAINT [PK_BranchSpecializations] PRIMARY KEY ([BranchId], [SpecializationId]),
    CONSTRAINT [FK_BranchSpecializations_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_BranchSpecializations_Specializations_SpecializationId] FOREIGN KEY ([SpecializationId]) REFERENCES [Specializations] ([SpecializationId]) ON DELETE CASCADE
);
2025-11-30 00:43:12.033 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:12.033 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:12.033 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:12.033 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchServices_ServiceId] ON [BranchServices] ([ServiceId]);
2025-11-30 00:43:12.033 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchServices_ServiceId] ON [BranchServices] ([ServiceId]);
2025-11-30 00:43:12.033 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:12.033 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:14.154 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2120ms).
2025-11-30 00:43:14.154 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchSpecializations_SpecializationId] ON [BranchSpecializations] ([SpecializationId]);
2025-11-30 00:43:14.155 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BranchSpecializations_SpecializationId] ON [BranchSpecializations] ([SpecializationId]);
2025-11-30 00:43:14.155 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:14.155 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:14.155 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:14.155 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] ADD CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-30 00:43:14.156 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Events] ADD CONSTRAINT [FK_Events_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-30 00:43:14.156 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:14.156 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:14.156 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:14.156 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] ADD CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-30 00:43:14.157 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [News] ADD CONSTRAINT [FK_News_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]);
2025-11-30 00:43:14.157 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:14.157 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:14.157 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:14.157 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251113233448_update in banner and service and branch and specilization relations', N'8.0.21');
2025-11-30 00:43:14.160 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251113233448_update in banner and service and branch and specilization relations', N'8.0.21');
2025-11-30 00:43:14.160 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:14.165 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:14.165 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:14.165 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:14.165 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:14.166 +02:00 [INF] Applying migration '20251115194238_add many to many relation between branch and doctor'.
2025-11-30 00:43:14.184 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:14.184 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:14.184 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:14.185 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:14.185 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:14.185 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:14.185 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:14.185 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] DROP CONSTRAINT [FK_Doctors_Branches_BranchId];
2025-11-30 00:43:14.186 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] DROP CONSTRAINT [FK_Doctors_Branches_BranchId];
2025-11-30 00:43:14.186 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:14.186 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:14.186 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:14.186 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Doctors_BranchId] ON [Doctors];
2025-11-30 00:43:14.187 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Doctors_BranchId] ON [Doctors];
2025-11-30 00:43:16.091 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:16.091 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:16.091 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:16.091 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'BranchId');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Doctors] DROP COLUMN [BranchId];
2025-11-30 00:43:16.114 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'BranchId');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Doctors] DROP COLUMN [BranchId];
2025-11-30 00:43:16.114 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:16.114 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:16.114 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:16.114 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DoctorBranches] (
    [BranchesBranchId] int NOT NULL,
    [DoctorsDoctorId] int NOT NULL,
    CONSTRAINT [PK_DoctorBranches] PRIMARY KEY ([BranchesBranchId], [DoctorsDoctorId]),
    CONSTRAINT [FK_DoctorBranches_Branches_BranchesBranchId] FOREIGN KEY ([BranchesBranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_DoctorBranches_Doctors_DoctorsDoctorId] FOREIGN KEY ([DoctorsDoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-30 00:43:16.117 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DoctorBranches] (
    [BranchesBranchId] int NOT NULL,
    [DoctorsDoctorId] int NOT NULL,
    CONSTRAINT [PK_DoctorBranches] PRIMARY KEY ([BranchesBranchId], [DoctorsDoctorId]),
    CONSTRAINT [FK_DoctorBranches_Branches_BranchesBranchId] FOREIGN KEY ([BranchesBranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE,
    CONSTRAINT [FK_DoctorBranches_Doctors_DoctorsDoctorId] FOREIGN KEY ([DoctorsDoctorId]) REFERENCES [Doctors] ([DoctorId]) ON DELETE CASCADE
);
2025-11-30 00:43:16.117 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:16.117 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:16.118 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:16.118 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DoctorBranches_DoctorsDoctorId] ON [DoctorBranches] ([DoctorsDoctorId]);
2025-11-30 00:43:16.118 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DoctorBranches_DoctorsDoctorId] ON [DoctorBranches] ([DoctorsDoctorId]);
2025-11-30 00:43:16.118 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:16.118 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:16.118 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:16.118 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115194238_add many to many relation between branch and doctor', N'8.0.21');
2025-11-30 00:43:16.119 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115194238_add many to many relation between branch and doctor', N'8.0.21');
2025-11-30 00:43:16.119 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:16.125 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:16.125 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:17.681 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:17.681 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:17.681 +02:00 [INF] Applying migration '20251115200531_remove relation between branch and user'.
2025-11-30 00:43:17.699 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:17.700 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:17.700 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:17.700 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:17.700 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:17.700 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:17.700 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:17.700 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] DROP CONSTRAINT [FK_Users_Branches_BranchId];
2025-11-30 00:43:17.701 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] DROP CONSTRAINT [FK_Users_Branches_BranchId];
2025-11-30 00:43:17.701 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:17.701 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:17.701 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:17.701 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Users_BranchId] ON [Users];
2025-11-30 00:43:17.702 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Users_BranchId] ON [Users];
2025-11-30 00:43:17.702 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:17.702 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:17.702 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:17.702 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'BranchId');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Users] DROP COLUMN [BranchId];
2025-11-30 00:43:17.718 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'BranchId');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Users] DROP COLUMN [BranchId];
2025-11-30 00:43:17.718 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:17.718 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:17.718 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:17.718 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115200531_remove relation between branch and user', N'8.0.21');
2025-11-30 00:43:17.718 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251115200531_remove relation between branch and user', N'8.0.21');
2025-11-30 00:43:17.718 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:17.728 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:17.728 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:17.728 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:17.728 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:17.728 +02:00 [INF] Applying migration '20251116144214_MakeRefreshTokenNullable'.
2025-11-30 00:43:17.748 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:17.748 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:17.748 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:19.782 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:19.782 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:19.782 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:19.782 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:19.782 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'RefreshToken');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Users] ALTER COLUMN [RefreshToken] nvarchar(max) NULL;
2025-11-30 00:43:19.798 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'RefreshToken');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Users] ALTER COLUMN [RefreshToken] nvarchar(max) NULL;
2025-11-30 00:43:19.799 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:19.799 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:19.799 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:19.799 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116144214_MakeRefreshTokenNullable', N'8.0.21');
2025-11-30 00:43:19.799 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116144214_MakeRefreshTokenNullable', N'8.0.21');
2025-11-30 00:43:19.799 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:19.799 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:19.799 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:19.799 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:19.799 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:19.799 +02:00 [INF] Applying migration '20251116184844_editPatientModel'.
2025-11-30 00:43:19.810 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:19.810 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:19.810 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:19.810 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:19.810 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:19.810 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:19.810 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:19.810 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var6 sysname;
SELECT @var6 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'Address');
IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var6 + '];');
ALTER TABLE [Patients] DROP COLUMN [Address];
2025-11-30 00:43:19.825 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var6 sysname;
SELECT @var6 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'Address');
IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var6 + '];');
ALTER TABLE [Patients] DROP COLUMN [Address];
2025-11-30 00:43:19.825 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:19.825 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:19.825 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:21.894 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var7 sysname;
SELECT @var7 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'BloodType');
IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var7 + '];');
ALTER TABLE [Patients] DROP COLUMN [BloodType];
2025-11-30 00:43:21.906 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var7 sysname;
SELECT @var7 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Patients]') AND [c].[name] = N'BloodType');
IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [Patients] DROP CONSTRAINT [' + @var7 + '];');
ALTER TABLE [Patients] DROP COLUMN [BloodType];
2025-11-30 00:43:21.906 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:21.907 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:21.907 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:21.907 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116184844_editPatientModel', N'8.0.21');
2025-11-30 00:43:21.907 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116184844_editPatientModel', N'8.0.21');
2025-11-30 00:43:21.907 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:21.913 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:21.913 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:21.913 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:21.913 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:21.913 +02:00 [INF] Applying migration '20251116220101_change Timeonly in schedule to DateTime'.
2025-11-30 00:43:21.927 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:21.927 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:21.927 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:21.928 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:21.928 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:21.928 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:21.928 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:21.928 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var8 sysname;
SELECT @var8 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'StartTime');
IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var8 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [StartTime] datetime2 NOT NULL;
2025-11-30 00:43:21.943 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var8 sysname;
SELECT @var8 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'StartTime');
IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var8 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [StartTime] datetime2 NOT NULL;
2025-11-30 00:43:21.943 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:21.943 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:21.943 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:21.943 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var9 sysname;
SELECT @var9 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'EndTime');
IF @var9 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var9 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [EndTime] datetime2 NOT NULL;
2025-11-30 00:43:23.900 +02:00 [INF] Executed DbCommand (1,957ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var9 sysname;
SELECT @var9 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'EndTime');
IF @var9 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var9 + '];');
ALTER TABLE [Schedules] ALTER COLUMN [EndTime] datetime2 NOT NULL;
2025-11-30 00:43:23.900 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:23.900 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:23.900 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:23.900 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116220101_change Timeonly in schedule to DateTime', N'8.0.21');
2025-11-30 00:43:23.900 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251116220101_change Timeonly in schedule to DateTime', N'8.0.21');
2025-11-30 00:43:23.900 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:23.905 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:23.905 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:23.905 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:23.905 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:23.905 +02:00 [INF] Applying migration '20251117115532_addPhotoToDoctor'.
2025-11-30 00:43:23.915 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:23.915 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:23.915 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:23.916 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:23.916 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:23.916 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:23.916 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:23.916 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] ADD [ImageURL] nvarchar(300) NULL;
2025-11-30 00:43:23.917 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Doctors] ADD [ImageURL] nvarchar(300) NULL;
2025-11-30 00:43:23.917 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:23.917 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:23.917 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:23.917 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251117115532_addPhotoToDoctor', N'8.0.21');
2025-11-30 00:43:23.917 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251117115532_addPhotoToDoctor', N'8.0.21');
2025-11-30 00:43:23.917 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:23.918 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:23.918 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:23.918 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:23.918 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:23.918 +02:00 [INF] Applying migration '20251118140238_editTimeOnlYToDateTime'.
2025-11-30 00:43:23.928 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:23.928 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:23.928 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:23.928 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:26.306 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:26.306 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:26.306 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:26.306 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var10 sysname;
SELECT @var10 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var10 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var10 + '];');
ALTER TABLE [Appointments] ALTER COLUMN [Time] datetime2 NOT NULL;
2025-11-30 00:43:26.319 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var10 sysname;
SELECT @var10 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var10 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var10 + '];');
ALTER TABLE [Appointments] ALTER COLUMN [Time] datetime2 NOT NULL;
2025-11-30 00:43:26.319 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:26.319 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:26.319 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:26.319 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118140238_editTimeOnlYToDateTime', N'8.0.21');
2025-11-30 00:43:26.319 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118140238_editTimeOnlYToDateTime', N'8.0.21');
2025-11-30 00:43:26.319 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:26.324 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:26.324 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:26.325 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:26.325 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:26.325 +02:00 [INF] Applying migration '20251118182335_improve schedule'.
2025-11-30 00:43:26.335 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:26.335 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:26.335 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:26.335 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:26.335 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:26.335 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:26.335 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:26.335 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [Shift] int NOT NULL DEFAULT 0;
2025-11-30 00:43:26.337 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [Shift] int NOT NULL DEFAULT 0;
2025-11-30 00:43:26.338 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:26.338 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:26.338 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:26.338 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118182335_improve schedule', N'8.0.21');
2025-11-30 00:43:26.338 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251118182335_improve schedule', N'8.0.21');
2025-11-30 00:43:26.338 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:26.339 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:26.339 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:26.339 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:26.339 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:28.608 +02:00 [INF] Applying migration '20251119214128_resetPaswoard'.
2025-11-30 00:43:28.620 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:28.620 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:28.620 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:28.620 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:28.620 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:28.620 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:28.620 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:28.620 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PasswordResetCodes] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    CONSTRAINT [PK_PasswordResetCodes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PasswordResetCodes_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:43:28.622 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PasswordResetCodes] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(450) NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [ExpireAt] datetime2 NOT NULL,
    CONSTRAINT [PK_PasswordResetCodes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PasswordResetCodes_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-11-30 00:43:28.622 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:28.622 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:28.622 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:28.622 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PasswordResetCodes_UserId] ON [PasswordResetCodes] ([UserId]);
2025-11-30 00:43:28.623 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PasswordResetCodes_UserId] ON [PasswordResetCodes] ([UserId]);
2025-11-30 00:43:28.623 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:28.623 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:28.623 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:28.623 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119214128_resetPaswoard', N'8.0.21');
2025-11-30 00:43:28.624 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251119214128_resetPaswoard', N'8.0.21');
2025-11-30 00:43:28.624 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:28.628 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:28.628 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:28.628 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:28.628 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:28.628 +02:00 [INF] Applying migration '20251120170506_create payment with paymob and update appoiment '.
2025-11-30 00:43:28.643 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:28.643 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:28.643 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:28.643 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:28.643 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:28.643 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:28.643 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:28.643 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Payments] (
    [PaymentId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [Amount] decimal(10,2) NOT NULL,
    [Currency] nvarchar(3) NOT NULL,
    [PaymobOrderId] bigint NULL,
    [PaymobTransactionId] bigint NULL,
    [PaymobMerchantOrderId] nvarchar(100) NULL,
    [Status] nvarchar(20) NOT NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Payments] PRIMARY KEY ([PaymentId]),
    CONSTRAINT [FK_Payments_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE NO ACTION
);
2025-11-30 00:43:30.559 +02:00 [INF] Executed DbCommand (1,916ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Payments] (
    [PaymentId] int NOT NULL IDENTITY,
    [AppointmentId] int NOT NULL,
    [Amount] decimal(10,2) NOT NULL,
    [Currency] nvarchar(3) NOT NULL,
    [PaymobOrderId] bigint NULL,
    [PaymobTransactionId] bigint NULL,
    [PaymobMerchantOrderId] nvarchar(100) NULL,
    [Status] nvarchar(20) NOT NULL,
    [GatewayResponse] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [UpdatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    CONSTRAINT [PK_Payments] PRIMARY KEY ([PaymentId]),
    CONSTRAINT [FK_Payments_Appointments_AppointmentId] FOREIGN KEY ([AppointmentId]) REFERENCES [Appointments] ([AppointmentId]) ON DELETE NO ACTION
);
2025-11-30 00:43:30.559 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:30.559 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:30.559 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:30.559 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Payments_AppointmentId] ON [Payments] ([AppointmentId]);
2025-11-30 00:43:30.560 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Payments_AppointmentId] ON [Payments] ([AppointmentId]);
2025-11-30 00:43:30.560 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:30.560 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:30.560 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:30.560 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251120170506_create payment with paymob and update appoiment ', N'8.0.21');
2025-11-30 00:43:30.561 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251120170506_create payment with paymob and update appoiment ', N'8.0.21');
2025-11-30 00:43:30.561 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:30.561 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:30.561 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:30.561 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:30.561 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:30.561 +02:00 [INF] Applying migration '20251122193859_update appoiment with payment method'.
2025-11-30 00:43:30.572 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:30.572 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:30.572 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:30.573 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:30.573 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:30.573 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:30.573 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:30.573 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [PaymentMethod] int NOT NULL DEFAULT 0;
2025-11-30 00:43:30.574 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [PaymentMethod] int NOT NULL DEFAULT 0;
2025-11-30 00:43:30.574 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:30.574 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:30.574 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:30.574 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122193859_update appoiment with payment method', N'8.0.21');
2025-11-30 00:43:30.574 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122193859_update appoiment with payment method', N'8.0.21');
2025-11-30 00:43:33.220 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:33.225 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:33.225 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:33.226 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:33.226 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:33.226 +02:00 [INF] Applying migration '20251122203902_convert type of fess in codtor to ba require'.
2025-11-30 00:43:33.238 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:33.238 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:33.238 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:33.238 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:33.238 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:33.238 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:33.238 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:33.238 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var11 sysname;
SELECT @var11 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'ConsultationFees');
IF @var11 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var11 + '];');
UPDATE [Doctors] SET [ConsultationFees] = 0.0 WHERE [ConsultationFees] IS NULL;
ALTER TABLE [Doctors] ALTER COLUMN [ConsultationFees] decimal(10,2) NOT NULL;
ALTER TABLE [Doctors] ADD DEFAULT 0.0 FOR [ConsultationFees];
2025-11-30 00:43:33.252 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var11 sysname;
SELECT @var11 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Doctors]') AND [c].[name] = N'ConsultationFees');
IF @var11 IS NOT NULL EXEC(N'ALTER TABLE [Doctors] DROP CONSTRAINT [' + @var11 + '];');
UPDATE [Doctors] SET [ConsultationFees] = 0.0 WHERE [ConsultationFees] IS NULL;
ALTER TABLE [Doctors] ALTER COLUMN [ConsultationFees] decimal(10,2) NOT NULL;
ALTER TABLE [Doctors] ADD DEFAULT 0.0 FOR [ConsultationFees];
2025-11-30 00:43:33.252 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:33.252 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:33.252 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:33.252 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122203902_convert type of fess in codtor to ba require', N'8.0.21');
2025-11-30 00:43:33.252 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122203902_convert type of fess in codtor to ba require', N'8.0.21');
2025-11-30 00:43:33.252 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:33.252 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:33.252 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:33.252 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:33.252 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:33.253 +02:00 [INF] Applying migration '20251122214638_addImageInBranch'.
2025-11-30 00:43:33.263 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:33.263 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:33.263 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:33.263 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:33.264 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:33.264 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:33.264 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:33.264 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Branches] ADD [ImageURL] nvarchar(300) NULL;
2025-11-30 00:43:35.136 +02:00 [INF] Executed DbCommand (1,873ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Branches] ADD [ImageURL] nvarchar(300) NULL;
2025-11-30 00:43:35.137 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:35.137 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:35.137 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:35.137 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122214638_addImageInBranch', N'8.0.21');
2025-11-30 00:43:35.137 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251122214638_addImageInBranch', N'8.0.21');
2025-11-30 00:43:35.137 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:35.142 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:35.142 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:35.142 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:35.142 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:35.142 +02:00 [INF] Applying migration '20251124135933_addDateinschudule'.
2025-11-30 00:43:35.157 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:35.157 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:35.157 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:35.157 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:35.157 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:35.157 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:35.157 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:35.157 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var12 sysname;
SELECT @var12 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'DayOfWeek');
IF @var12 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var12 + '];');
ALTER TABLE [Schedules] DROP COLUMN [DayOfWeek];
2025-11-30 00:43:35.169 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var12 sysname;
SELECT @var12 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'DayOfWeek');
IF @var12 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var12 + '];');
ALTER TABLE [Schedules] DROP COLUMN [DayOfWeek];
2025-11-30 00:43:35.169 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:35.169 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:35.169 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:35.169 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [ScheduleDate] date NOT NULL DEFAULT '0001-01-01';
2025-11-30 00:43:35.170 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [ScheduleDate] date NOT NULL DEFAULT '0001-01-01';
2025-11-30 00:43:35.170 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:35.170 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:35.170 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:35.170 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124135933_addDateinschudule', N'8.0.21');
2025-11-30 00:43:35.170 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124135933_addDateinschudule', N'8.0.21');
2025-11-30 00:43:35.170 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:35.171 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:35.171 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:37.189 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:37.189 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:37.189 +02:00 [INF] Applying migration '20251124164506_AddShiftToAppointments'.
2025-11-30 00:43:37.201 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:37.201 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:37.201 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:37.201 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:37.201 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:37.201 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:37.201 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:37.201 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var13 sysname;
SELECT @var13 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var13 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var13 + '];');
ALTER TABLE [Appointments] DROP COLUMN [Time];
2025-11-30 00:43:37.212 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var13 sysname;
SELECT @var13 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Time');
IF @var13 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var13 + '];');
ALTER TABLE [Appointments] DROP COLUMN [Time];
2025-11-30 00:43:37.212 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:37.212 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:37.212 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:37.212 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [Shift] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-30 00:43:37.213 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Appointments] ADD [Shift] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-30 00:43:37.213 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:37.213 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:37.213 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:37.213 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124164506_AddShiftToAppointments', N'8.0.21');
2025-11-30 00:43:37.213 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124164506_AddShiftToAppointments', N'8.0.21');
2025-11-30 00:43:37.213 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:37.222 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:37.223 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:37.223 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:37.223 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:37.223 +02:00 [INF] Applying migration '20251124182248_editSchedule'.
2025-11-30 00:43:37.234 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:37.235 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:37.235 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:37.235 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:37.235 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:37.235 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:37.235 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:37.235 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var14 sysname;
SELECT @var14 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'ScheduleDate');
IF @var14 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var14 + '];');
ALTER TABLE [Schedules] DROP COLUMN [ScheduleDate];
2025-11-30 00:43:39.071 +02:00 [INF] Executed DbCommand (1,836ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var14 sysname;
SELECT @var14 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Schedules]') AND [c].[name] = N'ScheduleDate');
IF @var14 IS NOT NULL EXEC(N'ALTER TABLE [Schedules] DROP CONSTRAINT [' + @var14 + '];');
ALTER TABLE [Schedules] DROP COLUMN [ScheduleDate];
2025-11-30 00:43:39.071 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:39.071 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:39.071 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:39.071 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [DayOfWeek] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-30 00:43:39.072 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [DayOfWeek] nvarchar(20) NOT NULL DEFAULT N'';
2025-11-30 00:43:39.072 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:39.072 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:39.072 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:39.072 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124182248_editSchedule', N'8.0.21');
2025-11-30 00:43:39.073 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124182248_editSchedule', N'8.0.21');
2025-11-30 00:43:39.073 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:39.073 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:39.073 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:39.073 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:39.073 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:39.073 +02:00 [INF] Applying migration '20251125023609_update schedule so it has branchid'.
2025-11-30 00:43:39.093 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:39.093 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:39.093 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:39.093 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:39.093 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:39.093 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:39.093 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:39.093 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [BranchId] int NOT NULL DEFAULT 0;
2025-11-30 00:43:39.094 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD [BranchId] int NOT NULL DEFAULT 0;
2025-11-30 00:43:39.094 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:39.094 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:39.094 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:39.094 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_BranchId] ON [Schedules] ([BranchId]);
2025-11-30 00:43:39.095 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Schedules_BranchId] ON [Schedules] ([BranchId]);
2025-11-30 00:43:39.095 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:39.095 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:39.095 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:39.095 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD CONSTRAINT [FK_Schedules_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE;
2025-11-30 00:43:41.007 +02:00 [INF] Executed DbCommand (1,912ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Schedules] ADD CONSTRAINT [FK_Schedules_Branches_BranchId] FOREIGN KEY ([BranchId]) REFERENCES [Branches] ([BranchId]) ON DELETE CASCADE;
2025-11-30 00:43:41.007 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:41.007 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:41.007 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:41.007 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251125023609_update schedule so it has branchid', N'8.0.21');
2025-11-30 00:43:41.007 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251125023609_update schedule so it has branchid', N'8.0.21');
2025-11-30 00:43:41.007 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:41.008 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:41.008 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:41.008 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:41.008 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:41.008 +02:00 [INF] Applying migration '20251126185730_addPhotoToSpecialization'.
2025-11-30 00:43:41.021 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:41.021 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:41.021 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:41.021 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:41.021 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:41.021 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:41.021 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:41.021 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Specializations] ADD [ImageURL] nvarchar(300) NULL;
2025-11-30 00:43:41.022 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Specializations] ADD [ImageURL] nvarchar(300) NULL;
2025-11-30 00:43:41.022 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:41.022 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:41.022 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:41.022 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251126185730_addPhotoToSpecialization', N'8.0.21');
2025-11-30 00:43:41.022 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251126185730_addPhotoToSpecialization', N'8.0.21');
2025-11-30 00:43:41.022 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:41.023 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:41.023 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:41.023 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:41.023 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:41.023 +02:00 [INF] Applying migration '20251126193019_AddLatitudeAndLongitude'.
2025-11-30 00:43:41.040 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:41.040 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:41.040 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:41.041 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:41.041 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:41.041 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:41.041 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:41.041 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Branches] ADD [Latitude] float NULL;
2025-11-30 00:43:41.042 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Branches] ADD [Latitude] float NULL;
2025-11-30 00:43:41.042 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:43.104 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2062ms).
2025-11-30 00:43:43.104 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2062ms).
2025-11-30 00:43:43.104 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Branches] ADD [Longitude] float NULL;
2025-11-30 00:43:43.105 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Branches] ADD [Longitude] float NULL;
2025-11-30 00:43:43.105 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:43.105 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:43.105 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:43.105 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251126193019_AddLatitudeAndLongitude', N'8.0.21');
2025-11-30 00:43:43.105 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251126193019_AddLatitudeAndLongitude', N'8.0.21');
2025-11-30 00:43:43.105 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:43.111 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:43.111 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:43.111 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:43.111 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:43.111 +02:00 [INF] Applying migration '20251127171805_deleteNotes'.
2025-11-30 00:43:43.129 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:43.129 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:43.129 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:43:43.129 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:43:43.129 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:43.129 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:43.129 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:43.129 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var15 sysname;
SELECT @var15 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Notes');
IF @var15 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var15 + '];');
ALTER TABLE [Appointments] DROP COLUMN [Notes];
2025-11-30 00:43:43.143 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var15 sysname;
SELECT @var15 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Appointments]') AND [c].[name] = N'Notes');
IF @var15 IS NOT NULL EXEC(N'ALTER TABLE [Appointments] DROP CONSTRAINT [' + @var15 + '];');
ALTER TABLE [Appointments] DROP COLUMN [Notes];
2025-11-30 00:43:43.143 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-11-30 00:43:43.143 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:43.143 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-11-30 00:43:43.143 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251127171805_deleteNotes', N'8.0.21');
2025-11-30 00:43:43.143 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251127171805_deleteNotes', N'8.0.21');
2025-11-30 00:43:43.143 +02:00 [DBG] Committing transaction.
2025-11-30 00:43:43.144 +02:00 [DBG] Committed transaction.
2025-11-30 00:43:43.144 +02:00 [DBG] Disposing transaction.
2025-11-30 00:43:43.144 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:43.144 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:43:43.145 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:43:43.146 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:43:44.881 +02:00 [DBG] Disposed connection to database '' on server '' (1735ms).
2025-11-30 00:44:04.977 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-30 00:44:05.072 +02:00 [DBG] Hosting starting
2025-11-30 00:44:05.094 +02:00 [INF] User profile is available. Using 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-30 00:44:05.103 +02:00 [DBG] Reading data from file 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys\key-b85f0939-0825-4b2b-b21a-67409aec9db0.xml'.
2025-11-30 00:44:05.110 +02:00 [DBG] Found key {b85f0939-0825-4b2b-b21a-67409aec9db0}.
2025-11-30 00:44:05.116 +02:00 [DBG] Considering key {b85f0939-0825-4b2b-b21a-67409aec9db0} with expiration date 2026-02-09 12:52:20Z as default key.
2025-11-30 00:44:05.120 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 00:44:05.122 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-30 00:44:05.124 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 00:44:05.128 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-30 00:44:05.130 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-30 00:44:05.132 +02:00 [DBG] Using key {b85f0939-0825-4b2b-b21a-67409aec9db0} as the default key.
2025-11-30 00:44:05.132 +02:00 [DBG] Key ring with default key {b85f0939-0825-4b2b-b21a-67409aec9db0} was loaded during application startup.
2025-11-30 00:44:05.137 +02:00 [DBG] Middleware loaded
2025-11-30 00:44:05.138 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-30 00:44:05.139 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-30 00:44:05.206 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-30 00:44:05.279 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-30 00:44:05.281 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-30 00:44:05.281 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-30 00:44:05.282 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-30 00:44:05.283 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-30 00:44:05.283 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-30 00:44:05.361 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-30 00:44:05.361 +02:00 [INF] Hosting environment: Development
2025-11-30 00:44:05.362 +02:00 [INF] Content root path: D:\Walaa\GP\Hospital\Hospital
2025-11-30 00:44:05.363 +02:00 [DBG] Hosting started
2025-11-30 00:44:05.677 +02:00 [DBG] Connection id "0HNHFJ36IIRDU" received FIN.
2025-11-30 00:44:05.677 +02:00 [DBG] Connection id "0HNHFJ36IIRDT" received FIN.
2025-11-30 00:44:05.684 +02:00 [DBG] Connection id "0HNHFJ36IIRDU" accepted.
2025-11-30 00:44:05.684 +02:00 [DBG] Connection id "0HNHFJ36IIRDT" accepted.
2025-11-30 00:44:05.685 +02:00 [DBG] Connection id "0HNHFJ36IIRDU" started.
2025-11-30 00:44:05.685 +02:00 [DBG] Connection id "0HNHFJ36IIRDT" started.
2025-11-30 00:44:05.698 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:44:05.698 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:44:05.727 +02:00 [DBG] Connection id "0HNHFJ36IIRDT" stopped.
2025-11-30 00:44:05.727 +02:00 [DBG] Connection id "0HNHFJ36IIRDU" stopped.
2025-11-30 00:44:05.730 +02:00 [DBG] Connection id "0HNHFJ36IIRDT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:44:05.730 +02:00 [DBG] Connection id "0HNHFJ36IIRDU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:44:05.815 +02:00 [DBG] Connection id "0HNHFJ36IIRDV" accepted.
2025-11-30 00:44:05.817 +02:00 [DBG] Connection id "0HNHFJ36IIRDV" started.
2025-11-30 00:44:05.862 +02:00 [DBG] Connection 0HNHFJ36IIRDV established using the following protocol: "Tls12"
2025-11-30 00:44:05.907 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-30 00:44:05.967 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-30 00:44:05.990 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-30 00:44:05.991 +02:00 [DBG] Request did not match any endpoints
2025-11-30 00:44:06.039 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-30 00:44:06.043 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-30 00:44:06.064 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-30 00:44:06.065 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-30 00:44:06.067 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 166.9141ms
2025-11-30 00:44:06.075 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-30 00:44:06.075 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-30 00:44:06.082 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-30 00:44:06.084 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 9.0048ms
2025-11-30 00:44:06.118 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.0847ms
2025-11-30 00:44:06.166 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-30 00:44:06.168 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-30 00:44:06.169 +02:00 [DBG] Request did not match any endpoints
2025-11-30 00:44:06.217 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 51.9071ms
2025-11-30 00:44:07.891 +02:00 [DBG] Connection id "0HNHFJ36IIRDV" received FIN.
2025-11-30 00:44:07.893 +02:00 [DBG] The connection queue processing loop for 0HNHFJ36IIRDV completed.
2025-11-30 00:44:07.895 +02:00 [DBG] Connection id "0HNHFJ36IIRDV" is closed. The last processed stream ID was 7.
2025-11-30 00:44:07.896 +02:00 [DBG] Connection id "0HNHFJ36IIRDV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:44:07.911 +02:00 [DBG] Connection id "0HNHFJ36IIRDV" stopped.
2025-11-30 00:44:15.383 +02:00 [DBG] Connection id "0HNHFJ36IIRE0" received FIN.
2025-11-30 00:44:15.385 +02:00 [DBG] Connection id "0HNHFJ36IIRE0" accepted.
2025-11-30 00:44:15.386 +02:00 [DBG] Connection id "0HNHFJ36IIRE0" started.
2025-11-30 00:44:15.386 +02:00 [DBG] Connection id "0HNHFJ36IIRE1" accepted.
2025-11-30 00:44:15.387 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:44:15.387 +02:00 [DBG] Connection id "0HNHFJ36IIRE1" started.
2025-11-30 00:44:15.390 +02:00 [DBG] Connection id "0HNHFJ36IIRE0" stopped.
2025-11-30 00:44:15.391 +02:00 [DBG] Connection id "0HNHFJ36IIRE0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:44:15.396 +02:00 [DBG] Connection 0HNHFJ36IIRE1 established using the following protocol: "Tls12"
2025-11-30 00:44:15.402 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Branch/Create - application/json 293
2025-11-30 00:44:15.407 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/Create'
2025-11-30 00:44:15.410 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.Create (Hospital)' with route pattern 'api/Branch/Create' is valid for the request path '/api/Branch/Create'
2025-11-30 00:44:15.411 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-30 00:44:15.414 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:44:15.445 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:44:15.448 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-30 00:44:15.472 +02:00 [INF] Route matched with {action = "Create", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(Hospital.Application.DTO.Branch.CreateBranchDto) on controller Hospital.Controllers.BranchController (Hospital).
2025-11-30 00:44:15.475 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:44:15.476 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:44:15.477 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:44:15.479 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:44:15.480 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:44:15.483 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-30 00:44:15.588 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-30 00:44:15.798 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-30 00:44:15.809 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-30 00:44:15.811 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' using the name '' in request data ...
2025-11-30 00:44:15.813 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-30 00:44:15.823 +02:00 [DBG] Connection id "0HNHFJ36IIRE1", Request id "0HNHFJ36IIRE1:00000001": started reading request body.
2025-11-30 00:44:15.825 +02:00 [DBG] Connection id "0HNHFJ36IIRE1", Request id "0HNHFJ36IIRE1:00000001": done reading request body.
2025-11-30 00:44:15.840 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Branch.CreateBranchDto'
2025-11-30 00:44:15.841 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-30 00:44:15.843 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-30 00:44:15.845 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto' ...
2025-11-30 00:44:15.855 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Branch.CreateBranchDto'.
2025-11-30 00:44:15.859 +02:00 [INF] Create Branch called at "2025-11-30T00:44:15.8595333+02:00"
2025-11-30 00:44:15.862 +02:00 [INF] Creating new branch with name: West Branch
2025-11-30 00:44:16.435 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-30 00:44:16.437 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-30 00:44:16.438 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-30 00:44:16.439 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-30 00:44:16.440 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-30 00:44:16.561 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:44:16.563 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:44:16.750 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:44:16.785 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .AsNoTracking()'
2025-11-30 00:44:16.922 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Branches AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 00:44:16.951 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:44:16.970 +02:00 [DBG] Created DbConnection. (17ms).
2025-11-30 00:44:16.973 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:44:17.208 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:44:17.212 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:44:17.217 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-11-30 00:44:17.219 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-11-30 00:44:17.225 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-30 00:44:17.266 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-30 00:44:17.277 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:44:17.282 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-30 00:44:17.285 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:44:17.291 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (5ms).
2025-11-30 00:44:17.322 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Branch.BranchId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:44:17.391 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:44:17.398 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:44:17.415 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:44:17.423 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-30 00:44:17.425 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:44:17.426 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:44:17.470 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:44:17.473 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:44:17.475 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:44:17.476 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:44:17.478 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-30 00:44:17.481 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (DbType = Double), @p7='?' (DbType = Double), @p8='?' (Size = 25), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Latitude], [Longitude], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-30 00:44:17.503 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (Size = 250), @p1='?' (Size = 150), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 200), @p5='?' (Size = 300), @p6='?' (DbType = Double), @p7='?' (DbType = Double), @p8='?' (Size = 25), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Branches] ([Address], [BranchName], [CreatedAt], [Description], [Email], [ImageURL], [Latitude], [Longitude], [Phone], [UpdatedAt])
OUTPUT INSERTED.[BranchId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-30 00:44:17.512 +02:00 [DBG] The foreign key property 'Branch.BranchId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-30 00:44:17.521 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:44:17.524 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 19ms reading results.
2025-11-30 00:44:17.527 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:44:17.528 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-30 00:44:17.537 +02:00 [DBG] An entity of type 'Branch' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:44:17.539 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-30 00:44:17.541 +02:00 [INF] Branch created successfully with ID: 1
2025-11-30 00:44:17.546 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:44:17.548 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:44:17.549 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 00:44:17.550 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 00:44:17.552 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 00:44:17.553 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Branch.BranchDto'.
2025-11-30 00:44:17.567 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] for address (id=[1],action=[GetById],controller=[Branch])
2025-11-30 00:44:17.571 +02:00 [DBG] Successfully processed template api/Branch/GetBy/{id} for Hospital.Controllers.BranchController.GetById (Hospital) resulting in /api/Branch/GetBy/1 and 
2025-11-30 00:44:17.572 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.BranchController.GetById (Hospital)"] with result /api/Branch/GetBy/1
2025-11-30 00:44:17.585 +02:00 [INF] Executed action Hospital.Controllers.BranchController.Create (Hospital) in 2101.6261ms
2025-11-30 00:44:17.587 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.Create (Hospital)'
2025-11-30 00:44:17.588 +02:00 [DBG] Connection id "0HNHFJ36IIRE1" completed keep alive response.
2025-11-30 00:44:17.590 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:44:17.593 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:44:17.595 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-30 00:44:17.598 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Branch/Create - 201 null application/json; charset=utf-8 2196.2936ms
2025-11-30 00:44:25.050 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - application/json 203
2025-11-30 00:44:25.053 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Create'
2025-11-30 00:44:25.054 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)' with route pattern 'api/Specializations/Create' is valid for the request path '/api/Specializations/Create'
2025-11-30 00:44:25.055 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-30 00:44:25.056 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:44:25.058 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:44:25.059 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-30 00:44:25.064 +02:00 [INF] Route matched with {action = "Create", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Specialization.SpecializationDTO]] Create(Hospital.Application.DTO.Specialization.CreateSpecialization) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-30 00:44:25.067 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:44:25.068 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:44:25.068 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:44:25.070 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:44:25.071 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:44:25.072 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-30 00:44:25.074 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-30 00:44:25.075 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-30 00:44:25.076 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' using the name '' in request data ...
2025-11-30 00:44:25.077 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-30 00:44:25.080 +02:00 [DBG] Connection id "0HNHFJ36IIRE1", Request id "0HNHFJ36IIRE1:00000002": started reading request body.
2025-11-30 00:44:25.081 +02:00 [DBG] Connection id "0HNHFJ36IIRE1", Request id "0HNHFJ36IIRE1:00000002": done reading request body.
2025-11-30 00:44:25.085 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.CreateSpecialization'
2025-11-30 00:44:25.087 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-30 00:44:25.087 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-30 00:44:25.089 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-30 00:44:25.093 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-30 00:44:25.095 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-30 00:44:25.097 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-30 00:44:25.098 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:44:25.101 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:44:25.102 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-30 00:44:25.103 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-30 00:44:25.105 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-30 00:44:25.122 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Create (Hospital) in 50.1339ms
2025-11-30 00:44:25.123 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-30 00:44:25.124 +02:00 [DBG] Connection id "0HNHFJ36IIRE1" completed keep alive response.
2025-11-30 00:44:25.125 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - 400 null application/problem+json; charset=utf-8 74.2689ms
2025-11-30 00:44:30.334 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - application/json 203
2025-11-30 00:44:30.337 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Create'
2025-11-30 00:44:30.337 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)' with route pattern 'api/Specializations/Create' is valid for the request path '/api/Specializations/Create'
2025-11-30 00:44:30.339 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-30 00:44:30.340 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:44:30.342 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:44:30.342 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-30 00:44:30.343 +02:00 [INF] Route matched with {action = "Create", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Specialization.SpecializationDTO]] Create(Hospital.Application.DTO.Specialization.CreateSpecialization) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-30 00:44:30.343 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:44:30.344 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:44:30.345 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:44:30.347 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:44:30.347 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:44:30.348 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-30 00:44:30.350 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-30 00:44:30.351 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-30 00:44:30.352 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' using the name '' in request data ...
2025-11-30 00:44:30.353 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-30 00:44:30.354 +02:00 [DBG] Connection id "0HNHFJ36IIRE1", Request id "0HNHFJ36IIRE1:00000003": started reading request body.
2025-11-30 00:44:30.355 +02:00 [DBG] Connection id "0HNHFJ36IIRE1", Request id "0HNHFJ36IIRE1:00000003": done reading request body.
2025-11-30 00:44:30.355 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.CreateSpecialization'
2025-11-30 00:44:30.356 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-30 00:44:30.356 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-30 00:44:30.357 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-30 00:44:30.357 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-30 00:44:30.358 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-30 00:44:30.358 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-30 00:44:30.359 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:44:30.361 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:44:30.362 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-30 00:44:30.364 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-30 00:44:30.366 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-30 00:44:30.366 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Create (Hospital) in 18.547ms
2025-11-30 00:44:30.367 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-30 00:44:30.369 +02:00 [DBG] Connection id "0HNHFJ36IIRE1" completed keep alive response.
2025-11-30 00:44:30.370 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - 400 null application/problem+json; charset=utf-8 35.1588ms
2025-11-30 00:44:34.176 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - application/json 203
2025-11-30 00:44:34.177 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Create'
2025-11-30 00:44:34.178 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)' with route pattern 'api/Specializations/Create' is valid for the request path '/api/Specializations/Create'
2025-11-30 00:44:34.181 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-30 00:44:34.182 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:44:34.182 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:44:34.183 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-30 00:44:34.183 +02:00 [INF] Route matched with {action = "Create", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Specialization.SpecializationDTO]] Create(Hospital.Application.DTO.Specialization.CreateSpecialization) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-30 00:44:34.185 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:44:34.185 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:44:34.186 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:44:34.187 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:44:34.188 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:44:34.189 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-30 00:44:34.192 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-30 00:44:34.192 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-30 00:44:34.193 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' using the name '' in request data ...
2025-11-30 00:44:34.194 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-30 00:44:34.195 +02:00 [DBG] Connection id "0HNHFJ36IIRE1", Request id "0HNHFJ36IIRE1:00000004": started reading request body.
2025-11-30 00:44:34.195 +02:00 [DBG] Connection id "0HNHFJ36IIRE1", Request id "0HNHFJ36IIRE1:00000004": done reading request body.
2025-11-30 00:44:34.196 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.CreateSpecialization'
2025-11-30 00:44:34.198 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-30 00:44:34.199 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-30 00:44:34.200 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-30 00:44:34.201 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-30 00:44:34.201 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-30 00:44:34.202 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-30 00:44:34.204 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:44:34.205 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:44:34.206 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-30 00:44:34.207 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-30 00:44:34.207 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-30 00:44:34.208 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Create (Hospital) in 19.3115ms
2025-11-30 00:44:34.209 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-30 00:44:34.209 +02:00 [DBG] Connection id "0HNHFJ36IIRE1" completed keep alive response.
2025-11-30 00:44:34.210 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - 400 null application/problem+json; charset=utf-8 34.1844ms
2025-11-30 00:44:49.550 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - application/json 207
2025-11-30 00:44:49.552 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Create'
2025-11-30 00:44:49.552 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)' with route pattern 'api/Specializations/Create' is valid for the request path '/api/Specializations/Create'
2025-11-30 00:44:49.555 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-30 00:44:49.556 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:44:49.557 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:44:49.557 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-30 00:44:49.558 +02:00 [INF] Route matched with {action = "Create", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Specialization.SpecializationDTO]] Create(Hospital.Application.DTO.Specialization.CreateSpecialization) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-30 00:44:49.559 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:44:49.562 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:44:49.563 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:44:49.565 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:44:49.565 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:44:49.566 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-30 00:44:49.567 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-30 00:44:49.567 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-30 00:44:49.568 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' using the name '' in request data ...
2025-11-30 00:44:49.569 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-30 00:44:49.570 +02:00 [DBG] Connection id "0HNHFJ36IIRE1", Request id "0HNHFJ36IIRE1:00000005": started reading request body.
2025-11-30 00:44:49.570 +02:00 [DBG] Connection id "0HNHFJ36IIRE1", Request id "0HNHFJ36IIRE1:00000005": done reading request body.
2025-11-30 00:44:49.571 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.CreateSpecialization'
2025-11-30 00:44:49.572 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-30 00:44:49.572 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-30 00:44:49.573 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-30 00:44:49.574 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-30 00:44:49.574 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-30 00:44:49.574 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-30 00:44:49.575 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:44:49.577 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:44:49.578 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-30 00:44:49.580 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-30 00:44:49.581 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-30 00:44:49.582 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Create (Hospital) in 15.4515ms
2025-11-30 00:44:49.583 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-30 00:44:49.583 +02:00 [DBG] Connection id "0HNHFJ36IIRE1" completed keep alive response.
2025-11-30 00:44:49.584 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - 400 null application/problem+json; charset=utf-8 34.1471ms
2025-11-30 00:45:12.449 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - application/json 255
2025-11-30 00:45:12.451 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/Create'
2025-11-30 00:45:12.452 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)' with route pattern 'api/Specializations/Create' is valid for the request path '/api/Specializations/Create'
2025-11-30 00:45:12.454 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-30 00:45:12.454 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:45:12.455 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:45:12.455 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-30 00:45:12.456 +02:00 [INF] Route matched with {action = "Create", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Specialization.SpecializationDTO]] Create(Hospital.Application.DTO.Specialization.CreateSpecialization) on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-30 00:45:12.457 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:45:12.458 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:45:12.459 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:45:12.461 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:45:12.462 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:45:12.462 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-30 00:45:12.463 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-30 00:45:12.464 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-30 00:45:12.465 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' using the name '' in request data ...
2025-11-30 00:45:12.465 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-30 00:45:12.466 +02:00 [DBG] Connection id "0HNHFJ36IIRE1", Request id "0HNHFJ36IIRE1:00000006": started reading request body.
2025-11-30 00:45:12.468 +02:00 [DBG] Connection id "0HNHFJ36IIRE1", Request id "0HNHFJ36IIRE1:00000006": done reading request body.
2025-11-30 00:45:12.469 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Specialization.CreateSpecialization'
2025-11-30 00:45:12.470 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-30 00:45:12.471 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-30 00:45:12.471 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization' ...
2025-11-30 00:45:12.472 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Specialization.CreateSpecialization'.
2025-11-30 00:45:12.474 +02:00 [INF] create Specialization called at "2025-11-30T00:45:12.4745316+02:00"
2025-11-30 00:45:12.476 +02:00 [INF] Adding specialization: legg
2025-11-30 00:45:12.515 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:45:12.521 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .Where(b => __branchIds_0.Contains(b.BranchId))'
2025-11-30 00:45:12.617 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Branches AS b
        WHERE b.BranchId IN (
            SELECT b0.value
            FROM OPENJSON(@__branchIds_0) WITH (value int '') AS b0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 00:45:12.628 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:45:12.629 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-30 00:45:12.630 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:12.631 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:12.631 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:12.633 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:45:12.637 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-11-30 00:45:12.638 +02:00 [DBG] Executing DbCommand [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-30 00:45:12.653 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__branchIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [b0].[value]
    FROM OPENJSON(@__branchIds_0) WITH ([value] int '$') AS [b0]
)
2025-11-30 00:45:12.659 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:12.663 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:12.663 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-30 00:45:12.664 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:12.665 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-30 00:45:12.670 +02:00 [DBG] Compiling query expression: 
'DbSet<Specialization>()
    .Include(s => s.Branches)
    .Include(s => s.Doctors)
    .ThenInclude(d => d.User)'
2025-11-30 00:45:12.680 +02:00 [DBG] Including navigation: 'Specialization.Branches'.
2025-11-30 00:45:12.685 +02:00 [DBG] Including navigation: 'Specialization.Doctors'.
2025-11-30 00:45:12.692 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-30 00:45:12.764 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-30 00:45:12.772 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Specialization>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Specialization.Description (string), 2], [Property: Specialization.ImageURL (string) MaxLength(300), 3], [Property: Specialization.Name (string) Required MaxLength(120), 4], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 5] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: BranchSpecialization (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 6], [Property: BranchSpecialization (Dictionary<string, object>).SpecializationId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 7] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Branch.Address (string) MaxLength(250), 9], [Property: Branch.BranchName (string) Required MaxLength(150), 10], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 11], [Property: Branch.Description (string), 12], [Property: Branch.Email (string) MaxLength(200), 13], [Property: Branch.ImageURL (string) MaxLength(300), 14], [Property: Branch.Latitude (double?), 15], [Property: Branch.Longitude (double?), 16], [Property: Branch.Phone (string) MaxLength(25), 17], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 18] }
            4 -> 6
            5 -> 7
            6 -> 8
            7 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Doctor.Available (bool?), 20], [Property: Doctor.Biography (string), 21], [Property: Doctor.ConsultationFees (decimal) Required, 22], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 23], [Property: Doctor.ExperienceYears (int?), 24], [Property: Doctor.ImageURL (string) MaxLength(300), 25], [Property: Doctor.SpecializationId (int) Required FK Index, 26], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 27], [Property: Doctor.UserId (string) Required FK Index, 28] }
            8 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 29], [Property: User.AccessFailedCount (int) Required, 30], [Property: User.ConcurrencyStamp (string) Concurrency, 31], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: User.DateOfBirth (DateOnly?), 33], [Property: User.Email (string) Index MaxLength(256), 34], [Property: User.EmailConfirmed (bool) Required, 35], [Property: User.FullName (string) Required MaxLength(150), 36], [Property: User.Gender (GenderType?) MaxLength(10), 37], [Property: User.LockoutEnabled (bool) Required, 38], [Property: User.LockoutEnd (DateTimeOffset?), 39], [Property: User.NormalizedEmail (string) Index MaxLength(256), 40], [Property: User.NormalizedUserName (string) Index MaxLength(256), 41], [Property: User.PasswordHash (string), 42], [Property: User.PhoneNumber (string), 43], [Property: User.PhoneNumberConfirmed (bool) Required, 44], [Property: User.RefreshToken (string), 45], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 46], [Property: User.Role (string) Required MaxLength(50), 47], [Property: User.SecurityStamp (string), 48], [Property: User.TwoFactorEnabled (bool) Required, 49], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.UserName (string) MaxLength(256), 51] }
            9 -> 19
            10 -> 29
        SELECT s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, t.BranchId, t.SpecializationId, t.BranchId0, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Latitude, t.Longitude, t.Phone, t.UpdatedAt, t0.DoctorId, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt0, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt0, t0.UserName
        FROM Specializations AS s
        LEFT JOIN 
        (
            SELECT b.BranchId, b.SpecializationId, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt, b0.Description, b0.Email, b0.ImageURL, b0.Latitude, b0.Longitude, b0.Phone, b0.UpdatedAt
            FROM BranchSpecializations AS b
            INNER JOIN Branches AS b0 ON b.BranchId == b0.BranchId
        ) AS t ON s.SpecializationId == t.SpecializationId
        LEFT JOIN 
        (
            SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
            FROM Doctors AS d
            INNER JOIN Users AS u ON d.UserId == u.Id
        ) AS t0 ON s.SpecializationId == t0.SpecializationId
        ORDER BY s.SpecializationId ASC, t.BranchId ASC, t.SpecializationId ASC, t.BranchId0 ASC, t0.DoctorId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Specialization>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 00:45:12.782 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:12.783 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:12.784 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:12.785 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:45:12.785 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:45:12.786 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-30 00:45:12.815 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-30 00:45:12.818 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:12.819 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-30 00:45:12.821 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:12.821 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:45:12.829 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Specialization.SpecializationId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:12.853 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:12.868 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:12.869 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:45:12.873 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:45:12.874 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-30 00:45:12.875 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:45:12.875 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:45:12.885 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:12.886 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:12.889 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:45:12.895 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:45:12.898 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:12.898 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:45:12.901 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-30 00:45:12.901 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 300), @p3='?' (Size = 120), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Specializations] ([CreatedAt], [Description], [ImageURL], [Name], [UpdatedAt])
OUTPUT INSERTED.[SpecializationId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-30 00:45:12.906 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 4000), @p2='?' (Size = 300), @p3='?' (Size = 120), @p4='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Specializations] ([CreatedAt], [Description], [ImageURL], [Name], [UpdatedAt])
OUTPUT INSERTED.[SpecializationId]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-11-30 00:45:12.908 +02:00 [DBG] The foreign key property 'Specialization.SpecializationId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-30 00:45:12.913 +02:00 [DBG] The foreign key property 'BranchSpecialization.SpecializationId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-30 00:45:12.917 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:12.918 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-30 00:45:12.919 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:12.920 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:45:12.920 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:45:12.921 +02:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchSpecializations] ([BranchId], [SpecializationId])
VALUES (@p5, @p6);
2025-11-30 00:45:12.926 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [BranchSpecializations] ([BranchId], [SpecializationId])
VALUES (@p5, @p6);
2025-11-30 00:45:12.929 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:12.930 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-30 00:45:12.934 +02:00 [DBG] Committing transaction.
2025-11-30 00:45:12.937 +02:00 [DBG] Committed transaction.
2025-11-30 00:45:12.939 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:12.939 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:45:12.943 +02:00 [DBG] Disposing transaction.
2025-11-30 00:45:12.945 +02:00 [DBG] An entity of type 'Specialization' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:12.947 +02:00 [DBG] An entity of type 'BranchSpecialization' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:12.948 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-30 00:45:12.949 +02:00 [INF] Specialization 'legg' added successfully
2025-11-30 00:45:12.957 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:45:12.959 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:45:12.960 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 00:45:12.961 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 00:45:12.961 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 00:45:12.962 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Specialization.SpecializationDTO'.
2025-11-30 00:45:12.963 +02:00 [DBG] Found the endpoints ["Hospital.Controllers.SpecializationsController.Get (Hospital)"] for address (id=[1],action=[Get],controller=[Specializations])
2025-11-30 00:45:12.964 +02:00 [DBG] Successfully processed template api/Specializations/Get/{id} for Hospital.Controllers.SpecializationsController.Get (Hospital) resulting in /api/Specializations/Get/1 and 
2025-11-30 00:45:12.965 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.Controllers.SpecializationsController.Get (Hospital)"] with result /api/Specializations/Get/1
2025-11-30 00:45:12.970 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.Create (Hospital) in 507.1045ms
2025-11-30 00:45:12.970 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.Create (Hospital)'
2025-11-30 00:45:12.971 +02:00 [DBG] Connection id "0HNHFJ36IIRE1" completed keep alive response.
2025-11-30 00:45:12.971 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:45:12.972 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:12.972 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 00:45:12.973 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Specializations/Create - 201 null application/json; charset=utf-8 524.3415ms
2025-11-30 00:45:33.967 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Doctor/add - application/json 376
2025-11-30 00:45:33.970 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/add'
2025-11-30 00:45:33.971 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)' with route pattern 'api/Doctor/add' is valid for the request path '/api/Doctor/add'
2025-11-30 00:45:33.972 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-30 00:45:33.972 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:45:33.973 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:45:33.973 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-30 00:45:33.978 +02:00 [INF] Route matched with {action = "AddDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDoctor(Hospital.Application.DTO.Doctor.AddDoctorDto) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-30 00:45:33.979 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:45:33.980 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:45:33.980 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:45:33.981 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:45:33.982 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:45:33.983 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-30 00:45:33.994 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-30 00:45:33.996 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' ...
2025-11-30 00:45:33.996 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' using the name '' in request data ...
2025-11-30 00:45:33.997 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-30 00:45:34.004 +02:00 [DBG] Connection id "0HNHFJ36IIRE1", Request id "0HNHFJ36IIRE1:00000007": started reading request body.
2025-11-30 00:45:34.005 +02:00 [DBG] Connection id "0HNHFJ36IIRE1", Request id "0HNHFJ36IIRE1:00000007": done reading request body.
2025-11-30 00:45:34.010 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Doctor.AddDoctorDto'
2025-11-30 00:45:34.011 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-30 00:45:34.011 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-30 00:45:34.012 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto' ...
2025-11-30 00:45:34.016 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Doctor.AddDoctorDto'.
2025-11-30 00:45:34.018 +02:00 [INF] add doctor called at "2025-11-30T00:45:34.0188423+02:00"
2025-11-30 00:45:34.022 +02:00 [INF] Adding new doctor: Walaa, Email: walaa.elbishlawy12@gmail.com
2025-11-30 00:45:34.031 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:45:34.035 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:45:34.035 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-30 00:45:34.036 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.037 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.037 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-30 00:45:34.038 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-30 00:45:34.048 +02:00 [DBG] Compiling query expression: 
'DbSet<Specialization>()
    .FirstOrDefault(e => EF.Property<int>(e, "SpecializationId") == __p_0)'
2025-11-30 00:45:34.054 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Specialization>(
    asyncEnumerable: new SingleQueryingEnumerable<Specialization>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Specialization.Description (string), 2], [Property: Specialization.ImageURL (string) MaxLength(300), 3], [Property: Specialization.Name (string) Required MaxLength(120), 4], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 5] }
            SELECT TOP(1) s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt
            FROM Specializations AS s
            WHERE s.SpecializationId == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Specialization>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-30 00:45:34.058 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:34.061 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-11-30 00:45:34.062 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-30 00:45:34.063 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-30 00:45:34.074 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt]
FROM [Specializations] AS [s]
WHERE [s].[SpecializationId] = @__p_0
2025-11-30 00:45:34.076 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.078 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.078 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-30 00:45:34.081 +02:00 [INF] Registration attempt for email: walaa.elbishlawy12@gmail.com, role: Doctor
2025-11-30 00:45:34.084 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-11-30 00:45:34.090 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-30 00:45:34.099 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:34.100 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:45:34.101 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-30 00:45:34.102 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-30 00:45:34.107 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-30 00:45:34.109 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.109 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-30 00:45:34.112 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-11-30 00:45:34.117 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-30 00:45:34.120 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:34.121 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:45:34.122 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:45:34.123 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-30 00:45:34.131 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-30 00:45:34.132 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.132 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-30 00:45:34.137 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-11-30 00:45:34.140 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(1) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-30 00:45:34.143 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:34.143 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:45:34.144 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:45:34.145 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-30 00:45:34.150 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-11-30 00:45:34.156 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.161 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.161 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-30 00:45:34.261 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:34.263 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:45:34.263 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-30 00:45:34.264 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-30 00:45:34.267 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-30 00:45:34.276 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.276 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-30 00:45:34.322 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.325 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:45:34.336 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:45:34.337 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-30 00:45:34.339 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:45:34.340 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:45:34.350 +02:00 [DBG] Creating transaction savepoint.
2025-11-30 00:45:34.364 +02:00 [DBG] Created transaction savepoint.
2025-11-30 00:45:34.365 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:34.365 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:45:34.368 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-30 00:45:34.368 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-30 00:45:34.374 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 150), @p8='?' (Size = 10), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTimeOffset), @p11='?' (Size = 256), @p12='?' (Size = 256), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 50), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [CreatedAt], [DateOfBirth], [Email], [EmailConfirmed], [FullName], [Gender], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiryTime], [Role], [SecurityStamp], [TwoFactorEnabled], [UpdatedAt], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-11-30 00:45:34.376 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.377 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-30 00:45:34.379 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.380 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-30 00:45:34.385 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityRole>()
    .SingleOrDefault(r => r.NormalizedName == __normalizedRoleName_0)'
2025-11-30 00:45:34.390 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityRole>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityRole>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityRole.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityRole.ConcurrencyStamp (string) Concurrency, 1], [Property: IdentityRole.Name (string) MaxLength(256), 2], [Property: IdentityRole.NormalizedName (string) Index MaxLength(256), 3] }
            SELECT TOP(2) a.Id, a.ConcurrencyStamp, a.Name, a.NormalizedName
            FROM AspNetRoles AS a
            WHERE a.NormalizedName == @__normalizedRoleName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityRole>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-30 00:45:34.392 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:34.393 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:45:34.395 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-30 00:45:34.396 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-30 00:45:34.399 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-30 00:45:34.401 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.402 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-30 00:45:34.407 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .FirstOrDefault(e => EF.Property<string>(e, "UserId") == __p_0 && EF.Property<string>(e, "RoleId") == __p_1)'
2025-11-30 00:45:34.412 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUserRole<string>>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityUserRole<string>>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUserRole<string>.UserId (string) Required PK FK AfterSave:Throw, 0], [Property: IdentityUserRole<string>.RoleId (string) Required PK FK Index AfterSave:Throw, 1] }
            SELECT TOP(1) a.UserId, a.RoleId
            FROM AspNetUserRoles AS a
            WHERE (a.UserId == @__p_0) && (a.RoleId == @__p_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityUserRole<string>>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-30 00:45:34.416 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:34.417 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:45:34.417 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:45:34.418 +02:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-30 00:45:34.423 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-11-30 00:45:34.425 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.426 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-30 00:45:34.429 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:34.430 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:45:34.431 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:45:34.432 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-30 00:45:34.434 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-11-30 00:45:34.436 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.436 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-30 00:45:34.442 +02:00 [DBG] Context 'AppDbContext' started tracking 'IdentityUserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.444 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:34.445 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:45:34.446 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:45:34.447 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-30 00:45:34.450 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-30 00:45:34.454 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.455 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-30 00:45:34.460 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.461 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:45:34.462 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:45:34.463 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-30 00:45:34.463 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:45:34.464 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:45:34.471 +02:00 [DBG] Executing 2 update commands as a batch.
2025-11-30 00:45:34.472 +02:00 [DBG] Creating transaction savepoint.
2025-11-30 00:45:34.473 +02:00 [DBG] Created transaction savepoint.
2025-11-30 00:45:34.473 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:34.474 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:45:34.474 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:45:34.476 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-30 00:45:34.489 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p24='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p25='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (Size = 150), @p9='?' (Size = 10), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (DbType = DateTime2), @p23='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DateOfBirth] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [FullName] = @p8, [Gender] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [RefreshToken] = @p17, [RefreshTokenExpiryTime] = @p18, [Role] = @p19, [SecurityStamp] = @p20, [TwoFactorEnabled] = @p21, [UpdatedAt] = @p22, [UserName] = @p23
OUTPUT 1
WHERE [Id] = @p24 AND [ConcurrencyStamp] = @p25;
2025-11-30 00:45:34.493 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.494 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-30 00:45:34.496 +02:00 [DBG] An entity of type 'IdentityUserRole' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.497 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.499 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-30 00:45:34.501 +02:00 [INF] User walaa.elbishlawy12@gmail.com assigned to role Doctor
2025-11-30 00:45:34.501 +02:00 [INF] Registration successful for user walaa.elbishlawy12@gmail.com with ID ff35f3e6-42f6-4ed9-8945-dcbd7b439c9b
2025-11-30 00:45:34.507 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .Where(b => __ids_0
        .Contains(b.BranchId))'
2025-11-30 00:45:34.515 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Branches AS b
        WHERE b.BranchId IN (
            SELECT i.value
            FROM OPENJSON(@__ids_0) WITH (value int '') AS i)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 00:45:34.518 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:34.518 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:45:34.520 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-30 00:45:34.521 +02:00 [DBG] Executing DbCommand [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-30 00:45:34.527 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__ids_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] IN (
    SELECT [i].[value]
    FROM OPENJSON(@__ids_0) WITH ([value] int '$') AS [i]
)
2025-11-30 00:45:34.529 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.530 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.531 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-30 00:45:34.535 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Doctor.DoctorId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.559 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.561 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.565 +02:00 [DBG] The navigation 'User.DoctorProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.568 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.572 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.572 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:45:34.582 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:45:34.583 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-30 00:45:34.583 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:45:34.585 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:45:34.587 +02:00 [DBG] Creating transaction savepoint.
2025-11-30 00:45:34.588 +02:00 [DBG] Created transaction savepoint.
2025-11-30 00:45:34.589 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:34.590 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:45:34.591 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-30 00:45:34.592 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Available], [Biography], [ConsultationFees], [CreatedAt], [ExperienceYears], [ImageURL], [SpecializationId], [UpdatedAt], [UserId])
OUTPUT INSERTED.[DoctorId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-11-30 00:45:34.597 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 300), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Available], [Biography], [ConsultationFees], [CreatedAt], [ExperienceYears], [ImageURL], [SpecializationId], [UpdatedAt], [UserId])
OUTPUT INSERTED.[DoctorId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-11-30 00:45:34.598 +02:00 [DBG] The foreign key property 'Doctor.DoctorId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-30 00:45:34.602 +02:00 [DBG] The foreign key property 'BranchDoctor.DoctorsDoctorId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-30 00:45:34.604 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.605 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-30 00:45:34.606 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:45:34.607 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:45:34.608 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:45:34.609 +02:00 [DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DoctorBranches] ([BranchesBranchId], [DoctorsDoctorId])
VALUES (@p9, @p10);
2025-11-30 00:45:34.614 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DoctorBranches] ([BranchesBranchId], [DoctorsDoctorId])
VALUES (@p9, @p10);
2025-11-30 00:45:34.615 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.616 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-30 00:45:34.619 +02:00 [DBG] An entity of type 'Doctor' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.620 +02:00 [DBG] An entity of type 'BranchDoctor' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:45:34.621 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-11-30 00:45:34.621 +02:00 [DBG] Committing transaction.
2025-11-30 00:45:34.623 +02:00 [DBG] Committed transaction.
2025-11-30 00:45:34.624 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:34.624 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:45:37.850 +02:00 [INF] Sent registration email to walaa.elbishlawy12@gmail.com
2025-11-30 00:45:37.860 +02:00 [DBG] Disposing transaction.
2025-11-30 00:45:37.861 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:45:37.864 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:45:37.864 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 00:45:37.864 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 00:45:37.865 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 00:45:37.866 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-30 00:45:37.873 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.AddDoctor (Hospital) in 3890.0207ms
2025-11-30 00:45:37.874 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.AddDoctor (Hospital)'
2025-11-30 00:45:37.875 +02:00 [DBG] Connection id "0HNHFJ36IIRE1" completed keep alive response.
2025-11-30 00:45:37.876 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:45:37.877 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:45:37.877 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 00:45:37.878 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Doctor/add - 200 null application/json; charset=utf-8 3913.3581ms
2025-11-30 00:47:20.455 +02:00 [DBG] Connection id "0HNHFJ36IIRE2" received FIN.
2025-11-30 00:47:20.462 +02:00 [DBG] Connection id "0HNHFJ36IIRE2" accepted.
2025-11-30 00:47:20.462 +02:00 [DBG] Connection id "0HNHFJ36IIRE2" started.
2025-11-30 00:47:20.466 +02:00 [DBG] Connection id "0HNHFJ36IIRE3" accepted.
2025-11-30 00:47:20.468 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:47:20.468 +02:00 [DBG] Connection id "0HNHFJ36IIRE3" started.
2025-11-30 00:47:20.472 +02:00 [DBG] Connection id "0HNHFJ36IIRE2" stopped.
2025-11-30 00:47:20.472 +02:00 [DBG] Connection id "0HNHFJ36IIRE2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:47:20.476 +02:00 [DBG] Connection 0HNHFJ36IIRE3 established using the following protocol: "Tls12"
2025-11-30 00:47:20.477 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Schedule - application/json 92
2025-11-30 00:47:20.478 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-30 00:47:20.480 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-30 00:47:20.481 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-30 00:47:20.481 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:47:20.482 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:47:20.482 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-30 00:47:20.485 +02:00 [INF] Route matched with {action = "Create", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Schedule.ScheduleDto]] Create(Hospital.Application.DTO.Schedule.CreateScheduleDto) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-30 00:47:20.487 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:47:20.488 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:47:20.489 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:47:20.490 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:47:20.490 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:47:20.491 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-30 00:47:20.492 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-30 00:47:20.493 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-30 00:47:20.494 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' using the name '' in request data ...
2025-11-30 00:47:20.495 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-30 00:47:20.496 +02:00 [DBG] Connection id "0HNHFJ36IIRE3", Request id "0HNHFJ36IIRE3:00000001": started reading request body.
2025-11-30 00:47:20.497 +02:00 [DBG] Connection id "0HNHFJ36IIRE3", Request id "0HNHFJ36IIRE3:00000001": done reading request body.
2025-11-30 00:47:20.499 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'
2025-11-30 00:47:20.500 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-30 00:47:20.500 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-30 00:47:20.501 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-30 00:47:20.505 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-30 00:47:20.507 +02:00 [INF] create schedule  called at "2025-11-30T00:47:20.5072037+02:00"
2025-11-30 00:47:20.510 +02:00 [INF] Creating schedule for DoctorId: 1, Day: friday, Shift: "Morning"
2025-11-30 00:47:20.512 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:47:20.515 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-30 00:47:20.516 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-30 00:47:20.517 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-30 00:47:20.518 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-30 00:47:20.518 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-30 00:47:20.534 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-30 00:47:20.541 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-30 00:47:20.546 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:47:20.547 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-30 00:47:20.547 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:20.548 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:20.548 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:47:20.549 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:47:20.549 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:47:20.550 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 00:47:20.566 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 00:47:20.570 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:20.572 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:20.573 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:20.575 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:20.575 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:20.578 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:20.578 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:20.581 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:20.581 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-30 00:47:20.582 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:20.582 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:47:20.596 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Where(s => s.DayOfWeek.ToLower() == __ToLower_0)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(s => s.Branch)'
2025-11-30 00:47:20.598 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-30 00:47:20.599 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-30 00:47:20.600 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-30 00:47:20.601 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-11-30 00:47:20.616 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Specialization.Description (string), 44], [Property: Specialization.ImageURL (string) MaxLength(300), 45], [Property: Specialization.Name (string) Required MaxLength(120), 46], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 48], [Property: Branch.Address (string) MaxLength(250), 49], [Property: Branch.BranchName (string) Required MaxLength(150), 50], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Branch.Description (string), 52], [Property: Branch.Email (string) MaxLength(200), 53], [Property: Branch.ImageURL (string) MaxLength(300), 54], [Property: Branch.Latitude (double?), 55], [Property: Branch.Longitude (double?), 56], [Property: Branch.Phone (string) MaxLength(25), 57], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 58] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s0.SpecializationId, s0.CreatedAt, s0.Description, s0.ImageURL, s0.Name, s0.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s0 ON d.SpecializationId == s0.SpecializationId
        INNER JOIN Branches AS b ON s.BranchId == b.BranchId
        WHERE LOWER(s.DayOfWeek) == @__ToLower_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 00:47:20.626 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:20.626 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:20.627 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:47:20.628 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:47:20.628 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:47:20.629 +02:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-30 00:47:20.636 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-30 00:47:20.639 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:20.640 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-30 00:47:20.641 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:20.643 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-30 00:47:20.646 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Schedule.ScheduleId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:20.660 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:20.661 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:20.662 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:20.663 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:47:20.668 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:47:20.670 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-30 00:47:20.671 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:47:20.672 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:47:20.673 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:20.674 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:20.675 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:47:20.676 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:47:20.677 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:47:20.677 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-30 00:47:20.683 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-30 00:47:20.686 +02:00 [DBG] The foreign key property 'Schedule.ScheduleId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-30 00:47:20.687 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:20.688 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-30 00:47:20.689 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:20.690 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:47:20.692 +02:00 [DBG] An entity of type 'Schedule' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:20.694 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-30 00:47:20.694 +02:00 [INF] Schedule created successfully for DoctorId 1
2025-11-30 00:47:20.697 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:47:20.699 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:47:20.700 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 00:47:20.701 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 00:47:20.701 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 00:47:20.702 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Schedule.ScheduleDto'.
2025-11-30 00:47:20.707 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.Create (Hospital) in 215.9388ms
2025-11-30 00:47:20.708 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-30 00:47:20.709 +02:00 [DBG] Connection id "0HNHFJ36IIRE3" completed keep alive response.
2025-11-30 00:47:20.710 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:47:20.710 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:20.711 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 00:47:20.712 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 234.3316ms
2025-11-30 00:47:29.673 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Schedule - application/json 92
2025-11-30 00:47:29.675 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-30 00:47:29.675 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-30 00:47:29.676 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-30 00:47:29.677 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:47:29.677 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:47:29.678 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-30 00:47:29.678 +02:00 [INF] Route matched with {action = "Create", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Schedule.ScheduleDto]] Create(Hospital.Application.DTO.Schedule.CreateScheduleDto) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-30 00:47:29.679 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:47:29.680 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:47:29.681 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:47:29.682 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:47:29.682 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:47:29.683 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-30 00:47:29.684 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-30 00:47:29.685 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-30 00:47:29.686 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' using the name '' in request data ...
2025-11-30 00:47:29.687 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-30 00:47:29.688 +02:00 [DBG] Connection id "0HNHFJ36IIRE3", Request id "0HNHFJ36IIRE3:00000002": started reading request body.
2025-11-30 00:47:29.688 +02:00 [DBG] Connection id "0HNHFJ36IIRE3", Request id "0HNHFJ36IIRE3:00000002": done reading request body.
2025-11-30 00:47:29.689 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'
2025-11-30 00:47:29.690 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-30 00:47:29.690 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-30 00:47:29.691 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-30 00:47:29.692 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-30 00:47:29.693 +02:00 [INF] create schedule  called at "2025-11-30T00:47:29.6937799+02:00"
2025-11-30 00:47:29.694 +02:00 [INF] Creating schedule for DoctorId: 1, Day: friday, Shift: "Afternoon"
2025-11-30 00:47:29.695 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:47:29.697 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:47:29.698 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-30 00:47:29.698 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:29.699 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:29.700 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:47:29.700 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:47:29.701 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:47:29.702 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 00:47:29.711 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 00:47:29.715 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:29.716 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:29.716 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:29.717 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:29.718 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:29.720 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:29.721 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:29.723 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:29.724 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:29.725 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:29.725 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-30 00:47:29.726 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:29.727 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:47:29.728 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:29.730 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:29.730 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:47:29.731 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:47:29.731 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:47:29.732 +02:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-30 00:47:29.742 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-30 00:47:29.746 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:29.746 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-30 00:47:29.747 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:29.748 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:47:29.750 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Schedule.ScheduleId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:29.751 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:29.752 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:29.753 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:29.754 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:47:29.755 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:47:29.755 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-30 00:47:29.756 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:47:29.756 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:47:29.757 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:29.757 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:29.758 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:47:29.759 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:47:29.760 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:47:29.760 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-30 00:47:29.763 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-30 00:47:29.764 +02:00 [DBG] The foreign key property 'Schedule.ScheduleId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-30 00:47:29.765 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:29.765 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-30 00:47:29.767 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:29.767 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:47:29.768 +02:00 [DBG] An entity of type 'Schedule' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:29.768 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-30 00:47:29.769 +02:00 [INF] Schedule created successfully for DoctorId 1
2025-11-30 00:47:29.770 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:47:29.771 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:47:29.772 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 00:47:29.772 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 00:47:29.773 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 00:47:29.774 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Schedule.ScheduleDto'.
2025-11-30 00:47:29.775 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.Create (Hospital) in 91.4542ms
2025-11-30 00:47:29.775 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-30 00:47:29.776 +02:00 [DBG] Connection id "0HNHFJ36IIRE3" completed keep alive response.
2025-11-30 00:47:29.776 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:47:29.777 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:29.777 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 00:47:29.778 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 104.6164ms
2025-11-30 00:47:34.672 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Schedule - application/json 92
2025-11-30 00:47:34.674 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule'
2025-11-30 00:47:34.675 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule'
2025-11-30 00:47:34.676 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-30 00:47:34.677 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:47:34.678 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:47:34.679 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-30 00:47:34.680 +02:00 [INF] Route matched with {action = "Create", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.Schedule.ScheduleDto]] Create(Hospital.Application.DTO.Schedule.CreateScheduleDto) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-30 00:47:34.682 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:47:34.683 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:47:34.684 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:47:34.685 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:47:34.686 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:47:34.688 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-30 00:47:34.691 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-30 00:47:34.692 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-30 00:47:34.694 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' using the name '' in request data ...
2025-11-30 00:47:34.695 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-30 00:47:34.696 +02:00 [DBG] Connection id "0HNHFJ36IIRE3", Request id "0HNHFJ36IIRE3:00000003": started reading request body.
2025-11-30 00:47:34.697 +02:00 [DBG] Connection id "0HNHFJ36IIRE3", Request id "0HNHFJ36IIRE3:00000003": done reading request body.
2025-11-30 00:47:34.698 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'
2025-11-30 00:47:34.698 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-30 00:47:34.699 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-30 00:47:34.700 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto' ...
2025-11-30 00:47:34.701 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Schedule.CreateScheduleDto'.
2025-11-30 00:47:34.702 +02:00 [INF] create schedule  called at "2025-11-30T00:47:34.7029594+02:00"
2025-11-30 00:47:34.704 +02:00 [INF] Creating schedule for DoctorId: 1, Day: friday, Shift: "Evening"
2025-11-30 00:47:34.705 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:47:34.707 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:47:34.707 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-30 00:47:34.708 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:34.709 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:34.710 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:47:34.711 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:47:34.712 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:47:34.713 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 00:47:34.717 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 00:47:34.722 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.724 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.726 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.727 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.728 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.729 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.730 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.731 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.732 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.733 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.734 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.736 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:34.737 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 15ms reading results.
2025-11-30 00:47:34.738 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:34.739 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:47:34.741 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:34.742 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:34.743 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:47:34.743 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:47:34.744 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:47:34.745 +02:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-30 00:47:34.748 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToLower_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE LOWER([s].[DayOfWeek]) = @__ToLower_0
2025-11-30 00:47:34.751 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:34.752 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-30 00:47:34.755 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:34.756 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:47:34.757 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Schedule.ScheduleId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.758 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.760 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.761 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.762 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:47:34.762 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:47:34.763 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-30 00:47:34.764 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-30 00:47:34.765 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-30 00:47:34.766 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:34.767 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:34.768 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:47:34.768 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:47:34.769 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 00:47:34.770 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-30 00:47:34.773 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Schedules] ([BranchId], [CreatedAt], [DayOfWeek], [DoctorId], [EndTime], [Shift], [StartTime], [UpdatedAt])
OUTPUT INSERTED.[ScheduleId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-30 00:47:34.775 +02:00 [DBG] The foreign key property 'Schedule.ScheduleId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-30 00:47:34.775 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:34.776 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-30 00:47:34.777 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:34.777 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-30 00:47:34.778 +02:00 [DBG] An entity of type 'Schedule' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:47:34.780 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-30 00:47:34.781 +02:00 [INF] Schedule created successfully for DoctorId 1
2025-11-30 00:47:34.781 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:47:34.783 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:47:34.783 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 00:47:34.783 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 00:47:34.784 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 00:47:34.785 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Schedule.ScheduleDto'.
2025-11-30 00:47:34.786 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.Create (Hospital) in 98.1309ms
2025-11-30 00:47:34.787 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.Create (Hospital)'
2025-11-30 00:47:34.787 +02:00 [DBG] Connection id "0HNHFJ36IIRE3" completed keep alive response.
2025-11-30 00:47:34.788 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:47:34.789 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-30 00:47:34.789 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 00:47:34.790 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Schedule - 200 null application/json; charset=utf-8 117.9454ms
2025-11-30 00:50:15.263 +02:00 [DBG] Config reload token fired. Checking for changes...
2025-11-30 00:50:22.739 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-30 00:50:22.823 +02:00 [DBG] Hosting starting
2025-11-30 00:50:22.847 +02:00 [INF] User profile is available. Using 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-30 00:50:22.855 +02:00 [DBG] Reading data from file 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys\key-b85f0939-0825-4b2b-b21a-67409aec9db0.xml'.
2025-11-30 00:50:22.860 +02:00 [DBG] Found key {b85f0939-0825-4b2b-b21a-67409aec9db0}.
2025-11-30 00:50:22.869 +02:00 [DBG] Considering key {b85f0939-0825-4b2b-b21a-67409aec9db0} with expiration date 2026-02-09 12:52:20Z as default key.
2025-11-30 00:50:22.871 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 00:50:22.873 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-30 00:50:22.875 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 00:50:22.878 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-30 00:50:22.880 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-30 00:50:22.882 +02:00 [DBG] Using key {b85f0939-0825-4b2b-b21a-67409aec9db0} as the default key.
2025-11-30 00:50:22.883 +02:00 [DBG] Key ring with default key {b85f0939-0825-4b2b-b21a-67409aec9db0} was loaded during application startup.
2025-11-30 00:50:22.887 +02:00 [DBG] Middleware loaded
2025-11-30 00:50:22.888 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-30 00:50:22.890 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-30 00:50:22.952 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-30 00:50:23.015 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-30 00:50:23.016 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-30 00:50:23.017 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-30 00:50:23.017 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-30 00:50:23.017 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-30 00:50:23.018 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-30 00:50:23.023 +02:00 [DBG] Connection id "0HNHFJ6N17POB" accepted.
2025-11-30 00:50:23.024 +02:00 [DBG] Connection id "0HNHFJ6N17POB" started.
2025-11-30 00:50:23.030 +02:00 [DBG] Connection id "0HNHFJ6N17POC" accepted.
2025-11-30 00:50:23.035 +02:00 [DBG] Connection id "0HNHFJ6N17POC" started.
2025-11-30 00:50:23.036 +02:00 [DBG] Connection id "0HNHFJ6N17POC" received FIN.
2025-11-30 00:50:23.036 +02:00 [DBG] Connection id "0HNHFJ6N17POB" received FIN.
2025-11-30 00:50:23.045 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:50:23.045 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:50:23.072 +02:00 [DBG] Connection id "0HNHFJ6N17POB" stopped.
2025-11-30 00:50:23.072 +02:00 [DBG] Connection id "0HNHFJ6N17POC" stopped.
2025-11-30 00:50:23.074 +02:00 [DBG] Connection id "0HNHFJ6N17POB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:50:23.074 +02:00 [DBG] Connection id "0HNHFJ6N17POC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:50:23.114 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-30 00:50:23.115 +02:00 [INF] Hosting environment: Development
2025-11-30 00:50:23.116 +02:00 [INF] Content root path: D:\Walaa\GP\Hospital\Hospital
2025-11-30 00:50:23.118 +02:00 [DBG] Hosting started
2025-11-30 00:50:23.191 +02:00 [DBG] Connection id "0HNHFJ6N17POD" accepted.
2025-11-30 00:50:23.193 +02:00 [DBG] Connection id "0HNHFJ6N17POD" started.
2025-11-30 00:50:23.243 +02:00 [DBG] Connection 0HNHFJ6N17POD established using the following protocol: "Tls12"
2025-11-30 00:50:23.295 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-30 00:50:23.365 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-30 00:50:23.385 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-30 00:50:23.386 +02:00 [DBG] Request did not match any endpoints
2025-11-30 00:50:23.423 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-30 00:50:23.424 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-30 00:50:23.435 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-30 00:50:23.436 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-30 00:50:23.438 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 150.0082ms
2025-11-30 00:50:23.452 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-30 00:50:23.452 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-30 00:50:23.461 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-30 00:50:23.462 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 10.6076ms
2025-11-30 00:50:23.480 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.0087ms
2025-11-30 00:50:23.521 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-30 00:50:23.523 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-30 00:50:23.524 +02:00 [DBG] Request did not match any endpoints
2025-11-30 00:50:23.556 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 35.3948ms
2025-11-30 00:50:36.150 +02:00 [DBG] Connection id "0HNHFJ6N17POE" received FIN.
2025-11-30 00:50:36.150 +02:00 [DBG] Connection id "0HNHFJ6N17POE" accepted.
2025-11-30 00:50:36.152 +02:00 [DBG] Connection id "0HNHFJ6N17POE" started.
2025-11-30 00:50:36.152 +02:00 [DBG] Connection id "0HNHFJ6N17POF" accepted.
2025-11-30 00:50:36.154 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:50:36.154 +02:00 [DBG] Connection id "0HNHFJ6N17POF" started.
2025-11-30 00:50:36.156 +02:00 [DBG] Connection id "0HNHFJ6N17POE" stopped.
2025-11-30 00:50:36.157 +02:00 [DBG] Connection id "0HNHFJ6N17POE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:50:36.161 +02:00 [DBG] Connection 0HNHFJ6N17POF established using the following protocol: "Tls12"
2025-11-30 00:50:36.165 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAll - null null
2025-11-30 00:50:36.169 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAll'
2025-11-30 00:50:36.172 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)' with route pattern 'api/Appointment/GetAll' is valid for the request path '/api/Appointment/GetAll'
2025-11-30 00:50:36.173 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-30 00:50:36.175 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:50:36.206 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:50:36.209 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-30 00:50:36.232 +02:00 [INF] Route matched with {action = "GetAll", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-30 00:50:36.235 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:50:36.236 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:50:36.237 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:50:36.239 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:50:36.240 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:50:36.242 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 00:50:36.346 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-30 00:50:36.583 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 00:50:36.586 +02:00 [INF] Get All Appointments called at "2025-11-30T00:50:36.5865662+02:00"
2025-11-30 00:50:36.589 +02:00 [INF] Fetching all appointments
2025-11-30 00:50:37.120 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-30 00:50:37.121 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-30 00:50:37.123 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-30 00:50:37.125 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-30 00:50:37.126 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-30 00:50:37.221 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:50:37.222 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:50:37.361 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:50:37.405 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)
    .Include(a => a.Payment)'
2025-11-30 00:50:37.478 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-30 00:50:37.480 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-30 00:50:37.481 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-30 00:50:37.483 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-11-30 00:50:37.656 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Doctor.Available (bool?), 17], [Property: Doctor.Biography (string), 18], [Property: Doctor.ConsultationFees (decimal) Required, 19], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.ExperienceYears (int?), 21], [Property: Doctor.ImageURL (string) MaxLength(300), 22], [Property: Doctor.SpecializationId (int) Required FK Index, 23], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Doctor.UserId (string) Required FK Index, 25] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 26], [Property: Branch.Address (string) MaxLength(250), 27], [Property: Branch.BranchName (string) Required MaxLength(150), 28], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: Branch.Description (string), 30], [Property: Branch.Email (string) MaxLength(200), 31], [Property: Branch.ImageURL (string) MaxLength(300), 32], [Property: Branch.Latitude (double?), 33], [Property: Branch.Longitude (double?), 34], [Property: Branch.Phone (string) MaxLength(25), 35], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
            4 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Payment.Amount (decimal) Required, 38], [Property: Payment.AppointmentId (int) Required FK Index, 39], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: Payment.Currency (string) Required MaxLength(3), 41], [Property: Payment.GatewayResponse (string), 42], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 43], [Property: Payment.PaymobOrderId (long?), 44], [Property: Payment.PaymobTransactionId (long?), 45], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 46], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt, p0.PaymentId, p0.Amount, p0.AppointmentId, p0.CreatedAt, p0.Currency, p0.GatewayResponse, p0.PaymobMerchantOrderId, p0.PaymobOrderId, p0.PaymobTransactionId, p0.Status, p0.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        LEFT JOIN Payments AS p0 ON a.AppointmentId == p0.AppointmentId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 00:50:37.694 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:50:37.714 +02:00 [DBG] Created DbConnection. (19ms).
2025-11-30 00:50:37.717 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 00:50:37.916 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 00:50:37.921 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:50:37.928 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-11-30 00:50:37.931 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-11-30 00:50:37.936 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-11-30 00:50:37.976 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt], [p0].[PaymentId], [p0].[Amount], [p0].[AppointmentId], [p0].[CreatedAt], [p0].[Currency], [p0].[GatewayResponse], [p0].[PaymobMerchantOrderId], [p0].[PaymobOrderId], [p0].[PaymobTransactionId], [p0].[Status], [p0].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
LEFT JOIN [Payments] AS [p0] ON [a].[AppointmentId] = [p0].[AppointmentId]
2025-11-30 00:50:38.034 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.075 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.083 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.101 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.105 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.130 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.133 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.152 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.153 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.153 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.155 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.156 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.158 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.159 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.161 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.162 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.163 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.164 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.165 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.165 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.166 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.167 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.168 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.168 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.170 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.171 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.171 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.173 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.173 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.175 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.177 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.178 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.183 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.185 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.206 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.208 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.209 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.211 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.212 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.214 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.215 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.215 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.217 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.218 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.221 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.222 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.223 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.225 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.226 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.226 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.227 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.229 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.229 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.230 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.231 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.232 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.233 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.234 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.235 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.236 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.237 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.238 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.239 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.240 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.240 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.241 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.242 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.243 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.244 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.245 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.246 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.247 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:50:38.253 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 00:50:38.258 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 273ms reading results.
2025-11-30 00:50:38.262 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 00:50:38.268 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (7ms).
2025-11-30 00:50:38.288 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:50:38.294 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:50:38.295 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 00:50:38.296 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 00:50:38.298 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 00:50:38.301 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-30 00:50:38.343 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetAll (Hospital) in 2098.3261ms
2025-11-30 00:50:38.344 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-30 00:50:38.346 +02:00 [DBG] Connection id "0HNHFJ6N17POF" completed keep alive response.
2025-11-30 00:50:38.348 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:50:38.352 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 00:50:38.355 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-30 00:50:38.356 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAll - 200 null application/json; charset=utf-8 2191.518ms
2025-11-30 00:52:59.609 +02:00 [DBG] Connection id "0HNHFJ6N17POG" received FIN.
2025-11-30 00:52:59.615 +02:00 [DBG] Connection id "0HNHFJ6N17POG" accepted.
2025-11-30 00:52:59.615 +02:00 [DBG] Connection id "0HNHFJ6N17POG" started.
2025-11-30 00:52:59.651 +02:00 [DBG] Connection id "0HNHFJ6N17POH" accepted.
2025-11-30 00:52:59.652 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:52:59.652 +02:00 [DBG] Connection id "0HNHFJ6N17POH" started.
2025-11-30 00:52:59.655 +02:00 [DBG] Connection id "0HNHFJ6N17POG" stopped.
2025-11-30 00:52:59.656 +02:00 [DBG] Connection id "0HNHFJ6N17POG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:52:59.659 +02:00 [DBG] Connection 0HNHFJ6N17POH established using the following protocol: "Tls12"
2025-11-30 00:52:59.660 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/1/today - null null
2025-11-30 00:52:59.663 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1/today'
2025-11-30 00:52:59.664 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId:int}/today' is valid for the request path '/api/Doctor/1/today'
2025-11-30 00:52:59.665 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-11-30 00:52:59.666 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:52:59.668 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:52:59.669 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-11-30 00:52:59.678 +02:00 [INF] Route matched with {action = "GetTodayAppointmentsForDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTodayAppointmentsForDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-30 00:52:59.680 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:52:59.681 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:52:59.682 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:52:59.684 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:52:59.685 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:52:59.685 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-30 00:52:59.697 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-30 00:52:59.701 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-30 00:52:59.704 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-30 00:52:59.706 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-30 00:52:59.707 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-30 00:52:59.708 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-30 00:52:59.711 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-30 00:52:59.715 +02:00 [INF] GetTodayAppointmentsForDoctor  called at "2025-11-30T00:52:59.7150308+02:00"
2025-11-30 00:52:59.717 +02:00 [INF] Fetching today's appointments for doctor ID 1
2025-11-30 00:52:59.759 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:52:59.767 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-30 00:52:59.779 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-30 00:52:59.782 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-30 00:52:59.785 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-30 00:52:59.787 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-30 00:52:59.861 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-30 00:52:59.881 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-30 00:52:59.893 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:52:59.893 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-30 00:52:59.895 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 00:52:59.897 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 00:52:59.897 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:52:59.898 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:52:59.900 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-30 00:52:59.904 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 00:52:59.930 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 00:52:59.933 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:52:59.947 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:52:59.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:52:59.985 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:52:59.988 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:53:00.004 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:53:00.007 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:53:00.013 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:53:00.014 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:53:00.024 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 00:53:00.025 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 92ms reading results.
2025-11-30 00:53:00.026 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 00:53:00.027 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-30 00:53:00.031 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .ThenInclude(p => p.User)
    .Include(a => a.Branch)
    .Where(a => a.DoctorId == __doctorId_0 && a.Date == __date_1 && (int)a.Status == 2)'
2025-11-30 00:53:00.033 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-30 00:53:00.034 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-30 00:53:00.035 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-30 00:53:00.049 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 16], [Property: User.AccessFailedCount (int) Required, 17], [Property: User.ConcurrencyStamp (string) Concurrency, 18], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 19], [Property: User.DateOfBirth (DateOnly?), 20], [Property: User.Email (string) Index MaxLength(256), 21], [Property: User.EmailConfirmed (bool) Required, 22], [Property: User.FullName (string) Required MaxLength(150), 23], [Property: User.Gender (GenderType?) MaxLength(10), 24], [Property: User.LockoutEnabled (bool) Required, 25], [Property: User.LockoutEnd (DateTimeOffset?), 26], [Property: User.NormalizedEmail (string) Index MaxLength(256), 27], [Property: User.NormalizedUserName (string) Index MaxLength(256), 28], [Property: User.PasswordHash (string), 29], [Property: User.PhoneNumber (string), 30], [Property: User.PhoneNumberConfirmed (bool) Required, 31], [Property: User.RefreshToken (string), 32], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 33], [Property: User.Role (string) Required MaxLength(50), 34], [Property: User.SecurityStamp (string), 35], [Property: User.TwoFactorEnabled (bool) Required, 36], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37], [Property: User.UserName (string) MaxLength(256), 38] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: Branch.Address (string) MaxLength(250), 40], [Property: Branch.BranchName (string) Required MaxLength(150), 41], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 42], [Property: Branch.Description (string), 43], [Property: Branch.Email (string) MaxLength(200), 44], [Property: Branch.ImageURL (string) MaxLength(300), 45], [Property: Branch.Latitude (double?), 46], [Property: Branch.Longitude (double?), 47], [Property: Branch.Phone (string) MaxLength(25), 48], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 49] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Users AS u ON p.UserId == u.Id
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE ((a.DoctorId == @__doctorId_0) && (a.Date == @__date_1)) && (a.Status == N'Confirmed')), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 00:53:00.054 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 00:53:00.054 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 00:53:00.055 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:53:00.056 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 00:53:00.059 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-30 00:53:00.060 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-30 00:53:00.071 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed'
2025-11-30 00:53:00.073 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:53:00.074 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:53:00.075 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:53:00.076 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:53:00.078 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:53:00.079 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:53:00.080 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:53:00.081 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:53:00.082 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:53:00.083 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 00:53:00.084 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 11ms reading results.
2025-11-30 00:53:00.085 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 00:53:00.086 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-30 00:53:00.095 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:53:00.097 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:53:00.098 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 00:53:00.099 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 00:53:00.099 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 00:53:00.100 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-30 00:53:00.104 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital) in 418.8817ms
2025-11-30 00:53:00.105 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-11-30 00:53:00.106 +02:00 [DBG] Connection id "0HNHFJ6N17POH" completed keep alive response.
2025-11-30 00:53:00.107 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:53:00.107 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 00:53:00.108 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 00:53:00.109 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/1/today - 200 null application/json; charset=utf-8 448.534ms
2025-11-30 00:59:13.346 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-30 00:59:13.444 +02:00 [DBG] Hosting starting
2025-11-30 00:59:13.480 +02:00 [INF] User profile is available. Using 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-30 00:59:13.489 +02:00 [DBG] Reading data from file 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys\key-b85f0939-0825-4b2b-b21a-67409aec9db0.xml'.
2025-11-30 00:59:13.495 +02:00 [DBG] Found key {b85f0939-0825-4b2b-b21a-67409aec9db0}.
2025-11-30 00:59:13.502 +02:00 [DBG] Considering key {b85f0939-0825-4b2b-b21a-67409aec9db0} with expiration date 2026-02-09 12:52:20Z as default key.
2025-11-30 00:59:13.504 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 00:59:13.506 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-30 00:59:13.507 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 00:59:13.511 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-30 00:59:13.513 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-30 00:59:13.514 +02:00 [DBG] Using key {b85f0939-0825-4b2b-b21a-67409aec9db0} as the default key.
2025-11-30 00:59:13.516 +02:00 [DBG] Key ring with default key {b85f0939-0825-4b2b-b21a-67409aec9db0} was loaded during application startup.
2025-11-30 00:59:13.520 +02:00 [DBG] Middleware loaded
2025-11-30 00:59:13.521 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-30 00:59:13.522 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-30 00:59:13.595 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-30 00:59:13.674 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-30 00:59:13.676 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-30 00:59:13.677 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-30 00:59:13.678 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-30 00:59:13.679 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-30 00:59:13.680 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-30 00:59:13.720 +02:00 [DBG] Connection id "0HNHFJBL6BI5T" accepted.
2025-11-30 00:59:13.720 +02:00 [DBG] Connection id "0HNHFJBL6BI5U" accepted.
2025-11-30 00:59:13.721 +02:00 [DBG] Connection id "0HNHFJBL6BI5T" started.
2025-11-30 00:59:13.722 +02:00 [DBG] Connection id "0HNHFJBL6BI5U" started.
2025-11-30 00:59:13.744 +02:00 [DBG] Connection id "0HNHFJBL6BI5T" received FIN.
2025-11-30 00:59:13.744 +02:00 [DBG] Connection id "0HNHFJBL6BI5U" received FIN.
2025-11-30 00:59:13.756 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:59:13.777 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-30 00:59:13.756 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:59:13.783 +02:00 [INF] Hosting environment: Development
2025-11-30 00:59:13.787 +02:00 [INF] Content root path: D:\Walaa\GP\Hospital\Hospital
2025-11-30 00:59:13.787 +02:00 [DBG] Connection id "0HNHFJBL6BI5U" stopped.
2025-11-30 00:59:13.787 +02:00 [DBG] Connection id "0HNHFJBL6BI5T" stopped.
2025-11-30 00:59:13.787 +02:00 [DBG] Hosting started
2025-11-30 00:59:13.790 +02:00 [DBG] Connection id "0HNHFJBL6BI5U" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:59:13.790 +02:00 [DBG] Connection id "0HNHFJBL6BI5T" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:59:13.888 +02:00 [DBG] Connection id "0HNHFJBL6BI5V" accepted.
2025-11-30 00:59:13.892 +02:00 [DBG] Connection id "0HNHFJBL6BI5V" started.
2025-11-30 00:59:13.941 +02:00 [DBG] Connection 0HNHFJBL6BI5V established using the following protocol: "Tls12"
2025-11-30 00:59:13.992 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-30 00:59:14.056 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-30 00:59:14.092 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-30 00:59:14.093 +02:00 [DBG] Request did not match any endpoints
2025-11-30 00:59:14.142 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-30 00:59:14.146 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-30 00:59:14.169 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-30 00:59:14.170 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-30 00:59:14.174 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 187.8701ms
2025-11-30 00:59:14.188 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-30 00:59:14.188 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-30 00:59:14.198 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-30 00:59:14.202 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 13.725ms
2025-11-30 00:59:14.223 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.9406ms
2025-11-30 00:59:14.289 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-30 00:59:14.291 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-30 00:59:14.292 +02:00 [DBG] Request did not match any endpoints
2025-11-30 00:59:14.325 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 36.2466ms
2025-11-30 00:59:31.854 +02:00 [DBG] Connection id "0HNHFJBL6BI60" received FIN.
2025-11-30 00:59:31.854 +02:00 [DBG] Connection id "0HNHFJBL6BI60" accepted.
2025-11-30 00:59:31.856 +02:00 [DBG] Connection id "0HNHFJBL6BI60" started.
2025-11-30 00:59:31.856 +02:00 [DBG] Connection id "0HNHFJBL6BI61" accepted.
2025-11-30 00:59:31.857 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 00:59:31.857 +02:00 [DBG] Connection id "0HNHFJBL6BI61" started.
2025-11-30 00:59:31.861 +02:00 [DBG] Connection id "0HNHFJBL6BI60" stopped.
2025-11-30 00:59:31.861 +02:00 [DBG] Connection id "0HNHFJBL6BI60" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 00:59:31.866 +02:00 [DBG] Connection 0HNHFJBL6BI61 established using the following protocol: "Tls12"
2025-11-30 00:59:31.871 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompleted - null null
2025-11-30 00:59:31.875 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAllCompleted'
2025-11-30 00:59:31.878 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)' with route pattern 'api/Appointment/GetAllCompleted' is valid for the request path '/api/Appointment/GetAllCompleted'
2025-11-30 00:59:31.880 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 00:59:31.883 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 00:59:31.913 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 00:59:31.915 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 00:59:31.931 +02:00 [INF] Route matched with {action = "GetCompletedAppointment", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCompletedAppointment() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-30 00:59:31.934 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 00:59:31.935 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 00:59:31.936 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 00:59:31.938 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 00:59:31.939 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 00:59:31.942 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 00:59:32.038 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-30 00:59:32.238 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 00:59:32.241 +02:00 [INF] Get All Completed Appointments called at "2025-11-30T00:59:32.2414885+02:00"
2025-11-30 00:59:32.243 +02:00 [INF] Fetching All Completed Appointments
2025-11-30 00:59:32.823 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-30 00:59:32.826 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-30 00:59:32.827 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-30 00:59:32.828 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-30 00:59:32.830 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-30 00:59:32.943 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:59:32.945 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 00:59:33.120 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 00:59:33.173 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)
    .Where(a => (int)a.Status == 3)'
2025-11-30 00:59:33.235 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-30 00:59:33.238 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-30 00:59:33.239 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-30 00:59:33.415 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Doctor.Available (bool?), 17], [Property: Doctor.Biography (string), 18], [Property: Doctor.ConsultationFees (decimal) Required, 19], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.ExperienceYears (int?), 21], [Property: Doctor.ImageURL (string) MaxLength(300), 22], [Property: Doctor.SpecializationId (int) Required FK Index, 23], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Doctor.UserId (string) Required FK Index, 25] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 26], [Property: Branch.Address (string) MaxLength(250), 27], [Property: Branch.BranchName (string) Required MaxLength(150), 28], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: Branch.Description (string), 30], [Property: Branch.Email (string) MaxLength(200), 31], [Property: Branch.ImageURL (string) MaxLength(300), 32], [Property: Branch.Latitude (double?), 33], [Property: Branch.Longitude (double?), 34], [Property: Branch.Phone (string) MaxLength(25), 35], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE a.Status == N'Completed'), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 00:59:33.449 +02:00 [DBG] Creating DbConnection.
2025-11-30 00:59:33.469 +02:00 [DBG] Created DbConnection. (17ms).
2025-11-30 00:59:33.472 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 00:59:33.659 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 00:59:33.662 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 00:59:33.669 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-11-30 00:59:33.672 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-11-30 00:59:33.678 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed'
2025-11-30 00:59:33.724 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed'
2025-11-30 00:59:33.784 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:59:33.833 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:59:33.840 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:59:33.858 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:59:33.862 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:59:33.887 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:59:33.888 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:59:33.903 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:59:33.904 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:59:33.905 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:59:33.906 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 00:59:33.911 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 00:59:33.918 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 185ms reading results.
2025-11-30 00:59:33.921 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 00:59:33.926 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (5ms).
2025-11-30 00:59:33.942 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 00:59:33.945 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 00:59:33.946 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 00:59:33.946 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 00:59:33.947 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 00:59:33.949 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-30 00:59:33.981 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital) in 2037.7011ms
2025-11-30 00:59:33.985 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 00:59:33.987 +02:00 [DBG] Connection id "0HNHFJBL6BI61" completed keep alive response.
2025-11-30 00:59:33.988 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 00:59:33.992 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 00:59:33.994 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-30 00:59:33.995 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompleted - 200 null application/json; charset=utf-8 2124.9104ms
2025-11-30 01:04:04.500 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-30 01:04:04.591 +02:00 [DBG] Hosting starting
2025-11-30 01:04:04.613 +02:00 [INF] User profile is available. Using 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-30 01:04:04.621 +02:00 [DBG] Reading data from file 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys\key-b85f0939-0825-4b2b-b21a-67409aec9db0.xml'.
2025-11-30 01:04:04.629 +02:00 [DBG] Found key {b85f0939-0825-4b2b-b21a-67409aec9db0}.
2025-11-30 01:04:04.639 +02:00 [DBG] Considering key {b85f0939-0825-4b2b-b21a-67409aec9db0} with expiration date 2026-02-09 12:52:20Z as default key.
2025-11-30 01:04:04.644 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 01:04:04.646 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-30 01:04:04.647 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 01:04:04.651 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-30 01:04:04.652 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-30 01:04:04.653 +02:00 [DBG] Using key {b85f0939-0825-4b2b-b21a-67409aec9db0} as the default key.
2025-11-30 01:04:04.654 +02:00 [DBG] Key ring with default key {b85f0939-0825-4b2b-b21a-67409aec9db0} was loaded during application startup.
2025-11-30 01:04:04.658 +02:00 [DBG] Middleware loaded
2025-11-30 01:04:04.660 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-30 01:04:04.661 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-30 01:04:04.722 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-30 01:04:04.787 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-30 01:04:04.789 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-30 01:04:04.789 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-30 01:04:04.790 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-30 01:04:04.791 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-30 01:04:04.791 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-30 01:04:04.852 +02:00 [DBG] Connection id "0HNHFJEBUQ2FV" accepted.
2025-11-30 01:04:04.855 +02:00 [DBG] Connection id "0HNHFJEBUQ2FV" started.
2025-11-30 01:04:04.861 +02:00 [DBG] Connection id "0HNHFJEBUQ2G0" accepted.
2025-11-30 01:04:04.862 +02:00 [DBG] Connection id "0HNHFJEBUQ2G0" started.
2025-11-30 01:04:04.869 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-30 01:04:04.870 +02:00 [INF] Hosting environment: Development
2025-11-30 01:04:04.870 +02:00 [INF] Content root path: D:\Walaa\GP\Hospital\Hospital
2025-11-30 01:04:04.871 +02:00 [DBG] Hosting started
2025-11-30 01:04:04.890 +02:00 [DBG] Connection id "0HNHFJEBUQ2FV" received FIN.
2025-11-30 01:04:04.890 +02:00 [DBG] Connection id "0HNHFJEBUQ2G0" received FIN.
2025-11-30 01:04:04.902 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 01:04:04.902 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 01:04:04.928 +02:00 [DBG] Connection id "0HNHFJEBUQ2FV" stopped.
2025-11-30 01:04:04.928 +02:00 [DBG] Connection id "0HNHFJEBUQ2G0" stopped.
2025-11-30 01:04:04.931 +02:00 [DBG] Connection id "0HNHFJEBUQ2FV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 01:04:04.931 +02:00 [DBG] Connection id "0HNHFJEBUQ2G0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 01:04:05.057 +02:00 [DBG] Connection id "0HNHFJEBUQ2G1" accepted.
2025-11-30 01:04:05.059 +02:00 [DBG] Connection id "0HNHFJEBUQ2G1" started.
2025-11-30 01:04:05.104 +02:00 [DBG] Connection 0HNHFJEBUQ2G1 established using the following protocol: "Tls12"
2025-11-30 01:04:05.154 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-30 01:04:05.223 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-30 01:04:05.243 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-30 01:04:05.245 +02:00 [DBG] Request did not match any endpoints
2025-11-30 01:04:05.283 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-30 01:04:05.284 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-30 01:04:05.295 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-30 01:04:05.296 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-30 01:04:05.298 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 153.6061ms
2025-11-30 01:04:05.313 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-30 01:04:05.313 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-30 01:04:05.325 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-30 01:04:05.329 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 16.2833ms
2025-11-30 01:04:05.346 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.4492ms
2025-11-30 01:04:05.366 +02:00 [DBG] Connection id "0HNHFJEBUQ2G1" received FIN.
2025-11-30 01:04:05.369 +02:00 [DBG] The connection queue processing loop for 0HNHFJEBUQ2G1 completed.
2025-11-30 01:04:05.371 +02:00 [DBG] Connection id "0HNHFJEBUQ2G1" is closed. The last processed stream ID was 5.
2025-11-30 01:04:05.371 +02:00 [DBG] Connection id "0HNHFJEBUQ2G1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 01:04:05.377 +02:00 [DBG] Connection id "0HNHFJEBUQ2G1" stopped.
2025-11-30 01:04:05.388 +02:00 [DBG] Connection id "0HNHFJEBUQ2G2" accepted.
2025-11-30 01:04:05.389 +02:00 [DBG] Connection id "0HNHFJEBUQ2G2" started.
2025-11-30 01:04:05.392 +02:00 [DBG] Connection 0HNHFJEBUQ2G2 established using the following protocol: "Tls12"
2025-11-30 01:04:05.394 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-30 01:04:05.396 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-30 01:04:05.397 +02:00 [DBG] Request did not match any endpoints
2025-11-30 01:04:05.433 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 39.8733ms
2025-11-30 01:04:10.345 +02:00 [DBG] Connection id "0HNHFJEBUQ2G3" accepted.
2025-11-30 01:04:10.345 +02:00 [DBG] Connection id "0HNHFJEBUQ2G3" received FIN.
2025-11-30 01:04:10.346 +02:00 [DBG] Connection id "0HNHFJEBUQ2G3" started.
2025-11-30 01:04:10.347 +02:00 [DBG] Connection id "0HNHFJEBUQ2G4" accepted.
2025-11-30 01:04:10.348 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 01:04:10.349 +02:00 [DBG] Connection id "0HNHFJEBUQ2G4" started.
2025-11-30 01:04:10.352 +02:00 [DBG] Connection id "0HNHFJEBUQ2G3" stopped.
2025-11-30 01:04:10.355 +02:00 [DBG] Connection id "0HNHFJEBUQ2G3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 01:04:10.358 +02:00 [DBG] Connection 0HNHFJEBUQ2G4 established using the following protocol: "Tls12"
2025-11-30 01:04:10.362 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompleted - null null
2025-11-30 01:04:10.366 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAllCompleted'
2025-11-30 01:04:10.370 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)' with route pattern 'api/Appointment/GetAllCompleted' is valid for the request path '/api/Appointment/GetAllCompleted'
2025-11-30 01:04:10.372 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:04:10.374 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 01:04:10.407 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 01:04:10.410 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:04:10.430 +02:00 [INF] Route matched with {action = "GetCompletedAppointment", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCompletedAppointment() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-30 01:04:10.433 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 01:04:10.435 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 01:04:10.436 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 01:04:10.437 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 01:04:10.439 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 01:04:10.441 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:04:10.540 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-30 01:04:10.740 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:04:10.743 +02:00 [INF] Get All Completed Appointments called at "2025-11-30T01:04:10.7428956+02:00"
2025-11-30 01:04:10.746 +02:00 [INF] Fetching All Completed Appointments
2025-11-30 01:04:11.410 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-30 01:04:11.411 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-30 01:04:11.412 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-30 01:04:11.413 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-30 01:04:11.414 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-30 01:04:11.557 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 01:04:11.559 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 01:04:11.798 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 01:04:11.854 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)
    .Where(a => (int)a.Status == 3)'
2025-11-30 01:04:11.933 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-30 01:04:11.936 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-30 01:04:11.938 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-30 01:04:12.116 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Doctor.Available (bool?), 17], [Property: Doctor.Biography (string), 18], [Property: Doctor.ConsultationFees (decimal) Required, 19], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.ExperienceYears (int?), 21], [Property: Doctor.ImageURL (string) MaxLength(300), 22], [Property: Doctor.SpecializationId (int) Required FK Index, 23], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Doctor.UserId (string) Required FK Index, 25] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 26], [Property: Branch.Address (string) MaxLength(250), 27], [Property: Branch.BranchName (string) Required MaxLength(150), 28], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: Branch.Description (string), 30], [Property: Branch.Email (string) MaxLength(200), 31], [Property: Branch.ImageURL (string) MaxLength(300), 32], [Property: Branch.Latitude (double?), 33], [Property: Branch.Longitude (double?), 34], [Property: Branch.Phone (string) MaxLength(25), 35], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE a.Status == N'Completed'), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 01:04:12.162 +02:00 [DBG] Creating DbConnection.
2025-11-30 01:04:12.184 +02:00 [DBG] Created DbConnection. (20ms).
2025-11-30 01:04:12.189 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:12.420 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:12.424 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:04:12.428 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-11-30 01:04:12.430 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-11-30 01:04:12.437 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed'
2025-11-30 01:04:12.494 +02:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed'
2025-11-30 01:04:12.552 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:12.598 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:12.608 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:12.626 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:12.631 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:12.665 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:12.668 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:12.690 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:12.691 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:12.692 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:12.693 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:12.698 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:04:12.705 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 204ms reading results.
2025-11-30 01:04:12.709 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:12.717 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (7ms).
2025-11-30 01:04:12.737 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 01:04:12.742 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 01:04:12.742 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 01:04:12.743 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 01:04:12.745 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 01:04:12.746 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-30 01:04:12.781 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital) in 2338.0502ms
2025-11-30 01:04:12.783 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:04:12.786 +02:00 [DBG] Connection id "0HNHFJEBUQ2G4" completed keep alive response.
2025-11-30 01:04:12.789 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 01:04:12.793 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:12.795 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-30 01:04:12.797 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompleted - 200 null application/json; charset=utf-8 2435.0168ms
2025-11-30 01:04:18.310 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompleted - null null
2025-11-30 01:04:18.316 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAllCompleted'
2025-11-30 01:04:18.317 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)' with route pattern 'api/Appointment/GetAllCompleted' is valid for the request path '/api/Appointment/GetAllCompleted'
2025-11-30 01:04:18.318 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:04:18.320 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 01:04:18.322 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 01:04:18.323 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:04:18.323 +02:00 [INF] Route matched with {action = "GetCompletedAppointment", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCompletedAppointment() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-30 01:04:18.325 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 01:04:18.325 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 01:04:18.326 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 01:04:18.327 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 01:04:18.327 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 01:04:18.328 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:04:18.330 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:04:18.331 +02:00 [INF] Get All Completed Appointments called at "2025-11-30T01:04:18.3310725+02:00"
2025-11-30 01:04:18.331 +02:00 [INF] Fetching All Completed Appointments
2025-11-30 01:04:18.377 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 01:04:18.385 +02:00 [DBG] Creating DbConnection.
2025-11-30 01:04:18.386 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-30 01:04:18.388 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:18.390 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:18.391 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:04:18.392 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 01:04:18.392 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 01:04:18.393 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed'
2025-11-30 01:04:18.403 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed'
2025-11-30 01:04:18.405 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:18.406 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:18.407 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:18.408 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:18.409 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:18.410 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:18.412 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:18.413 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:18.413 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:18.414 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:18.415 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:18.415 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:04:18.416 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 11ms reading results.
2025-11-30 01:04:18.417 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:18.418 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-30 01:04:18.420 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 01:04:18.423 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 01:04:18.423 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 01:04:18.424 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 01:04:18.424 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 01:04:18.425 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-30 01:04:18.427 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital) in 99.4121ms
2025-11-30 01:04:18.429 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:04:18.430 +02:00 [DBG] Connection id "0HNHFJEBUQ2G4" completed keep alive response.
2025-11-30 01:04:18.430 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 01:04:18.431 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:18.431 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 01:04:18.432 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompleted - 200 null application/json; charset=utf-8 122.387ms
2025-11-30 01:04:30.008 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompleted - null null
2025-11-30 01:04:30.010 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAllCompleted'
2025-11-30 01:04:30.010 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)' with route pattern 'api/Appointment/GetAllCompleted' is valid for the request path '/api/Appointment/GetAllCompleted'
2025-11-30 01:04:30.012 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:04:30.013 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 01:04:30.014 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 01:04:30.015 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:04:30.016 +02:00 [INF] Route matched with {action = "GetCompletedAppointment", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCompletedAppointment() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-30 01:04:30.017 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 01:04:30.017 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 01:04:30.018 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 01:04:30.019 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 01:04:30.020 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 01:04:30.021 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:04:30.025 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:04:30.025 +02:00 [INF] Get All Completed Appointments called at "2025-11-30T01:04:30.0258626+02:00"
2025-11-30 01:04:30.026 +02:00 [INF] Fetching All Completed Appointments
2025-11-30 01:04:30.033 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 01:04:30.035 +02:00 [DBG] Creating DbConnection.
2025-11-30 01:04:30.035 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-30 01:04:30.036 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:30.036 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:30.037 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:04:30.038 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 01:04:30.038 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-30 01:04:30.039 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed'
2025-11-30 01:04:30.042 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed'
2025-11-30 01:04:30.044 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:30.045 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:30.046 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:30.047 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:30.049 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:30.050 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:30.050 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:30.051 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:30.052 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:30.053 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:30.054 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:30.054 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:04:30.055 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 11ms reading results.
2025-11-30 01:04:30.056 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:30.056 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-30 01:04:30.058 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 01:04:30.059 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 01:04:30.060 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 01:04:30.062 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 01:04:30.063 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 01:04:30.064 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-30 01:04:30.066 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital) in 45.2306ms
2025-11-30 01:04:30.067 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:04:30.068 +02:00 [DBG] Connection id "0HNHFJEBUQ2G4" completed keep alive response.
2025-11-30 01:04:30.068 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 01:04:30.069 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:30.070 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-30 01:04:30.071 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompleted - 200 null application/json; charset=utf-8 62.7006ms
2025-11-30 01:04:57.728 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Appointment/GetAllCompletedByDoctorId/1 - null null
2025-11-30 01:04:57.735 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAllCompletedByDoctorId/1'
2025-11-30 01:04:57.736 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)' with route pattern 'api/Appointment/GetAllCompletedByDoctorId/{doctorid}' is valid for the request path '/api/Appointment/GetAllCompletedByDoctorId/1'
2025-11-30 01:04:57.737 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)'
2025-11-30 01:04:57.737 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 01:04:57.738 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 01:04:57.738 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)'
2025-11-30 01:04:57.747 +02:00 [INF] Route matched with {action = "GetAllCompletedByDoctorId", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCompletedByDoctorId(Int32) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-30 01:04:57.748 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 01:04:57.749 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 01:04:57.750 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 01:04:57.751 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 01:04:57.752 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 01:04:57.753 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:04:57.754 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:04:57.759 +02:00 [DBG] Attempting to bind parameter 'doctorid' of type 'System.Int32' ...
2025-11-30 01:04:57.761 +02:00 [DBG] Attempting to bind parameter 'doctorid' of type 'System.Int32' using the name 'doctorid' in request data ...
2025-11-30 01:04:57.765 +02:00 [DBG] Done attempting to bind parameter 'doctorid' of type 'System.Int32'.
2025-11-30 01:04:57.765 +02:00 [DBG] Done attempting to bind parameter 'doctorid' of type 'System.Int32'.
2025-11-30 01:04:57.766 +02:00 [DBG] Attempting to validate the bound parameter 'doctorid' of type 'System.Int32' ...
2025-11-30 01:04:57.768 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorid' of type 'System.Int32'.
2025-11-30 01:04:57.770 +02:00 [INF] Get All Completed Appointments called at "2025-11-30T01:04:57.7706600+02:00"
2025-11-30 01:04:57.771 +02:00 [INF] Fetching All Completed Appointments
2025-11-30 01:04:57.774 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 01:04:57.777 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-30 01:04:57.779 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-30 01:04:57.781 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-30 01:04:57.784 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-30 01:04:57.786 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-30 01:04:57.832 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-30 01:04:57.841 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-30 01:04:57.855 +02:00 [DBG] Creating DbConnection.
2025-11-30 01:04:57.855 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-30 01:04:57.855 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:57.856 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:57.857 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:04:57.857 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 01:04:57.859 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-30 01:04:57.862 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 01:04:57.889 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 01:04:57.892 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:57.907 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:57.910 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:57.939 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:57.941 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:57.961 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:57.964 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:57.969 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:57.970 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:57.979 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:04:57.982 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 90ms reading results.
2025-11-30 01:04:57.983 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:57.984 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-30 01:04:57.986 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .ThenInclude(p => p.User)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)
    .Where(a => (int)a.Status == 3 && a.DoctorId == __doctorid_0)'
2025-11-30 01:04:57.988 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-30 01:04:57.988 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-30 01:04:57.991 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-30 01:04:57.993 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-30 01:04:58.010 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 16], [Property: User.AccessFailedCount (int) Required, 17], [Property: User.ConcurrencyStamp (string) Concurrency, 18], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 19], [Property: User.DateOfBirth (DateOnly?), 20], [Property: User.Email (string) Index MaxLength(256), 21], [Property: User.EmailConfirmed (bool) Required, 22], [Property: User.FullName (string) Required MaxLength(150), 23], [Property: User.Gender (GenderType?) MaxLength(10), 24], [Property: User.LockoutEnabled (bool) Required, 25], [Property: User.LockoutEnd (DateTimeOffset?), 26], [Property: User.NormalizedEmail (string) Index MaxLength(256), 27], [Property: User.NormalizedUserName (string) Index MaxLength(256), 28], [Property: User.PasswordHash (string), 29], [Property: User.PhoneNumber (string), 30], [Property: User.PhoneNumberConfirmed (bool) Required, 31], [Property: User.RefreshToken (string), 32], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 33], [Property: User.Role (string) Required MaxLength(50), 34], [Property: User.SecurityStamp (string), 35], [Property: User.TwoFactorEnabled (bool) Required, 36], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37], [Property: User.UserName (string) MaxLength(256), 38] }
            3 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: Doctor.Available (bool?), 40], [Property: Doctor.Biography (string), 41], [Property: Doctor.ConsultationFees (decimal) Required, 42], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Doctor.ExperienceYears (int?), 44], [Property: Doctor.ImageURL (string) MaxLength(300), 45], [Property: Doctor.SpecializationId (int) Required FK Index, 46], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: Doctor.UserId (string) Required FK Index, 48] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Branch.Address (string) MaxLength(250), 50], [Property: Branch.BranchName (string) Required MaxLength(150), 51], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 52], [Property: Branch.Description (string), 53], [Property: Branch.Email (string) MaxLength(200), 54], [Property: Branch.ImageURL (string) MaxLength(300), 55], [Property: Branch.Latitude (double?), 56], [Property: Branch.Longitude (double?), 57], [Property: Branch.Phone (string) MaxLength(25), 58], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 59] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Users AS u ON p.UserId == u.Id
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE (a.Status == N'Completed') && (a.DoctorId == @__doctorid_0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 01:04:58.015 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:58.016 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:58.017 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:04:58.017 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 01:04:58.018 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 01:04:58.019 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed' AND [a].[DoctorId] = @__doctorid_0
2025-11-30 01:04:58.028 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed' AND [a].[DoctorId] = @__doctorid_0
2025-11-30 01:04:58.031 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:58.033 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:58.034 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:58.035 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:58.037 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:58.038 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:58.039 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:58.039 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:58.040 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:58.040 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:58.041 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:58.041 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:04:58.042 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:04:58.043 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 12ms reading results.
2025-11-30 01:04:58.044 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:58.045 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-30 01:04:58.053 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 01:04:58.056 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 01:04:58.056 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 01:04:58.057 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 01:04:58.057 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 01:04:58.058 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-30 01:04:58.063 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital) in 309.8258ms
2025-11-30 01:04:58.065 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)'
2025-11-30 01:04:58.066 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 01:04:58.067 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:04:58.067 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 01:04:58.068 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Appointment/GetAllCompletedByDoctorId/1 - 200 null application/json; charset=utf-8 343.4551ms
2025-11-30 01:05:19.095 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompletedByDoctorId/1 - null null
2025-11-30 01:05:19.097 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAllCompletedByDoctorId/1'
2025-11-30 01:05:19.098 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)' with route pattern 'api/Appointment/GetAllCompletedByDoctorId/{doctorid}' is valid for the request path '/api/Appointment/GetAllCompletedByDoctorId/1'
2025-11-30 01:05:19.099 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)'
2025-11-30 01:05:19.100 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 01:05:19.101 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 01:05:19.102 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)'
2025-11-30 01:05:19.103 +02:00 [INF] Route matched with {action = "GetAllCompletedByDoctorId", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCompletedByDoctorId(Int32) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-30 01:05:19.104 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 01:05:19.104 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 01:05:19.105 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 01:05:19.106 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 01:05:19.107 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 01:05:19.108 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:05:19.109 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:05:19.111 +02:00 [DBG] Attempting to bind parameter 'doctorid' of type 'System.Int32' ...
2025-11-30 01:05:19.112 +02:00 [DBG] Attempting to bind parameter 'doctorid' of type 'System.Int32' using the name 'doctorid' in request data ...
2025-11-30 01:05:19.113 +02:00 [DBG] Done attempting to bind parameter 'doctorid' of type 'System.Int32'.
2025-11-30 01:05:19.114 +02:00 [DBG] Done attempting to bind parameter 'doctorid' of type 'System.Int32'.
2025-11-30 01:05:19.115 +02:00 [DBG] Attempting to validate the bound parameter 'doctorid' of type 'System.Int32' ...
2025-11-30 01:05:19.115 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorid' of type 'System.Int32'.
2025-11-30 01:05:19.116 +02:00 [INF] Get All Completed Appointments called at "2025-11-30T01:05:19.1168620+02:00"
2025-11-30 01:05:19.117 +02:00 [INF] Fetching All Completed Appointments
2025-11-30 01:05:19.118 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 01:05:19.121 +02:00 [DBG] Creating DbConnection.
2025-11-30 01:05:19.121 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-30 01:05:19.122 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:05:19.123 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:05:19.123 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:05:19.124 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 01:05:19.126 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-30 01:05:19.128 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 01:05:19.142 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 01:05:19.146 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.147 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.148 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.149 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.150 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.151 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.152 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.153 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.154 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.154 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:05:19.155 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 9ms reading results.
2025-11-30 01:05:19.156 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:05:19.158 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-11-30 01:05:19.159 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:05:19.160 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:05:19.160 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:05:19.161 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 01:05:19.162 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 01:05:19.162 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed' AND [a].[DoctorId] = @__doctorid_0
2025-11-30 01:05:19.172 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed' AND [a].[DoctorId] = @__doctorid_0
2025-11-30 01:05:19.175 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.175 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.176 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.177 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.177 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.178 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.179 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.180 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.181 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.181 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.182 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.183 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:05:19.184 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:05:19.184 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 10ms reading results.
2025-11-30 01:05:19.185 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:05:19.186 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-30 01:05:19.187 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 01:05:19.188 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 01:05:19.189 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 01:05:19.189 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 01:05:19.190 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 01:05:19.192 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-30 01:05:19.193 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital) in 85.1974ms
2025-11-30 01:05:19.194 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)'
2025-11-30 01:05:19.195 +02:00 [DBG] Connection id "0HNHFJEBUQ2G4" completed keep alive response.
2025-11-30 01:05:19.195 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 01:05:19.196 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:05:19.197 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-30 01:05:19.197 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompletedByDoctorId/1 - 200 null application/json; charset=utf-8 102.4679ms
2025-11-30 01:15:30.769 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-30 01:15:30.872 +02:00 [DBG] Hosting starting
2025-11-30 01:15:30.894 +02:00 [INF] User profile is available. Using 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-30 01:15:30.903 +02:00 [DBG] Reading data from file 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys\key-b85f0939-0825-4b2b-b21a-67409aec9db0.xml'.
2025-11-30 01:15:30.909 +02:00 [DBG] Found key {b85f0939-0825-4b2b-b21a-67409aec9db0}.
2025-11-30 01:15:30.915 +02:00 [DBG] Considering key {b85f0939-0825-4b2b-b21a-67409aec9db0} with expiration date 2026-02-09 12:52:20Z as default key.
2025-11-30 01:15:30.917 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 01:15:30.919 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-30 01:15:30.920 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 01:15:30.924 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-30 01:15:30.926 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-30 01:15:30.927 +02:00 [DBG] Using key {b85f0939-0825-4b2b-b21a-67409aec9db0} as the default key.
2025-11-30 01:15:30.928 +02:00 [DBG] Key ring with default key {b85f0939-0825-4b2b-b21a-67409aec9db0} was loaded during application startup.
2025-11-30 01:15:30.932 +02:00 [DBG] Middleware loaded
2025-11-30 01:15:30.933 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-30 01:15:30.934 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-30 01:15:30.998 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-30 01:15:31.065 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-30 01:15:31.068 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-30 01:15:31.069 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-30 01:15:31.069 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-30 01:15:31.069 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-30 01:15:31.070 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-30 01:15:31.135 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-30 01:15:31.136 +02:00 [INF] Hosting environment: Development
2025-11-30 01:15:31.136 +02:00 [INF] Content root path: D:\Walaa\GP\Hospital\Hospital
2025-11-30 01:15:31.137 +02:00 [DBG] Hosting started
2025-11-30 01:15:31.302 +02:00 [DBG] Connection id "0HNHFJKOHA0G3" accepted.
2025-11-30 01:15:31.302 +02:00 [DBG] Connection id "0HNHFJKOHA0G2" accepted.
2025-11-30 01:15:31.303 +02:00 [DBG] Connection id "0HNHFJKOHA0G3" started.
2025-11-30 01:15:31.303 +02:00 [DBG] Connection id "0HNHFJKOHA0G2" started.
2025-11-30 01:15:31.315 +02:00 [DBG] Connection id "0HNHFJKOHA0G3" received FIN.
2025-11-30 01:15:31.315 +02:00 [DBG] Connection id "0HNHFJKOHA0G2" received FIN.
2025-11-30 01:15:31.325 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 01:15:31.326 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 01:15:31.351 +02:00 [DBG] Connection id "0HNHFJKOHA0G3" stopped.
2025-11-30 01:15:31.351 +02:00 [DBG] Connection id "0HNHFJKOHA0G2" stopped.
2025-11-30 01:15:31.353 +02:00 [DBG] Connection id "0HNHFJKOHA0G2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 01:15:31.353 +02:00 [DBG] Connection id "0HNHFJKOHA0G3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 01:15:31.470 +02:00 [DBG] Connection id "0HNHFJKOHA0G4" accepted.
2025-11-30 01:15:31.472 +02:00 [DBG] Connection id "0HNHFJKOHA0G4" started.
2025-11-30 01:15:31.517 +02:00 [DBG] Connection 0HNHFJKOHA0G4 established using the following protocol: "Tls12"
2025-11-30 01:15:31.572 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-30 01:15:31.650 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-30 01:15:31.671 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-30 01:15:31.672 +02:00 [DBG] Request did not match any endpoints
2025-11-30 01:15:31.711 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-30 01:15:31.714 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-30 01:15:31.724 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-30 01:15:31.725 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-30 01:15:31.728 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 166.2699ms
2025-11-30 01:15:31.736 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-30 01:15:31.736 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-30 01:15:31.741 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-30 01:15:31.742 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 6.2645ms
2025-11-30 01:15:31.764 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.7482ms
2025-11-30 01:15:31.803 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-30 01:15:31.805 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-30 01:15:31.806 +02:00 [DBG] Request did not match any endpoints
2025-11-30 01:15:31.841 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 38.9ms
2025-11-30 01:15:41.904 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Appointment/GetAllCompleted - null null
2025-11-30 01:15:41.910 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAllCompleted'
2025-11-30 01:15:41.915 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)' with route pattern 'api/Appointment/GetAllCompleted' is valid for the request path '/api/Appointment/GetAllCompleted'
2025-11-30 01:15:41.918 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:15:41.923 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 01:15:41.949 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 01:15:41.951 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:15:41.968 +02:00 [INF] Route matched with {action = "GetCompletedAppointment", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCompletedAppointment() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-30 01:15:41.971 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 01:15:41.971 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 01:15:41.974 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 01:15:41.975 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 01:15:41.976 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 01:15:41.981 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:15:42.074 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-30 01:15:42.324 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:15:42.326 +02:00 [INF] Get All Completed Appointments called at "2025-11-30T01:15:42.3267100+02:00"
2025-11-30 01:15:42.329 +02:00 [INF] Fetching All Completed Appointments
2025-11-30 01:15:42.906 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-30 01:15:42.908 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-30 01:15:42.910 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-30 01:15:42.912 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-30 01:15:42.913 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-30 01:15:43.019 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 01:15:43.020 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 01:15:43.172 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 01:15:43.218 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .ThenInclude(a => a.User)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)
    .Where(a => (int)a.Status == 3)'
2025-11-30 01:15:43.282 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-30 01:15:43.284 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-30 01:15:43.285 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-30 01:15:43.286 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-30 01:15:43.457 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 16], [Property: User.AccessFailedCount (int) Required, 17], [Property: User.ConcurrencyStamp (string) Concurrency, 18], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 19], [Property: User.DateOfBirth (DateOnly?), 20], [Property: User.Email (string) Index MaxLength(256), 21], [Property: User.EmailConfirmed (bool) Required, 22], [Property: User.FullName (string) Required MaxLength(150), 23], [Property: User.Gender (GenderType?) MaxLength(10), 24], [Property: User.LockoutEnabled (bool) Required, 25], [Property: User.LockoutEnd (DateTimeOffset?), 26], [Property: User.NormalizedEmail (string) Index MaxLength(256), 27], [Property: User.NormalizedUserName (string) Index MaxLength(256), 28], [Property: User.PasswordHash (string), 29], [Property: User.PhoneNumber (string), 30], [Property: User.PhoneNumberConfirmed (bool) Required, 31], [Property: User.RefreshToken (string), 32], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 33], [Property: User.Role (string) Required MaxLength(50), 34], [Property: User.SecurityStamp (string), 35], [Property: User.TwoFactorEnabled (bool) Required, 36], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37], [Property: User.UserName (string) MaxLength(256), 38] }
            3 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: Doctor.Available (bool?), 40], [Property: Doctor.Biography (string), 41], [Property: Doctor.ConsultationFees (decimal) Required, 42], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Doctor.ExperienceYears (int?), 44], [Property: Doctor.ImageURL (string) MaxLength(300), 45], [Property: Doctor.SpecializationId (int) Required FK Index, 46], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: Doctor.UserId (string) Required FK Index, 48] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Branch.Address (string) MaxLength(250), 50], [Property: Branch.BranchName (string) Required MaxLength(150), 51], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 52], [Property: Branch.Description (string), 53], [Property: Branch.Email (string) MaxLength(200), 54], [Property: Branch.ImageURL (string) MaxLength(300), 55], [Property: Branch.Latitude (double?), 56], [Property: Branch.Longitude (double?), 57], [Property: Branch.Phone (string) MaxLength(25), 58], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 59] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Users AS u ON p.UserId == u.Id
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE a.Status == N'Completed'), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 01:15:43.491 +02:00 [DBG] Creating DbConnection.
2025-11-30 01:15:43.506 +02:00 [DBG] Created DbConnection. (14ms).
2025-11-30 01:15:43.510 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:15:43.712 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:15:43.716 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:15:43.722 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-11-30 01:15:43.724 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-11-30 01:15:43.731 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed'
2025-11-30 01:15:43.773 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed'
2025-11-30 01:15:43.822 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:43.860 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:43.877 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:43.899 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:43.901 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:43.940 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:43.946 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:43.971 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:43.973 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:43.994 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:43.996 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:43.998 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:43.999 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:44.000 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:44.001 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:44.005 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:15:44.010 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 230ms reading results.
2025-11-30 01:15:44.014 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:15:44.019 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (5ms).
2025-11-30 01:15:44.040 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 01:15:44.043 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 01:15:44.043 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 01:15:44.044 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 01:15:44.045 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 01:15:44.045 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-30 01:15:44.074 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital) in 2091.8412ms
2025-11-30 01:15:44.076 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:15:44.079 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 01:15:44.083 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:15:44.085 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-30 01:15:44.087 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Appointment/GetAllCompleted - 200 null application/json; charset=utf-8 2183.9514ms
2025-11-30 01:15:55.378 +02:00 [DBG] Connection id "0HNHFJKOHA0G5" received FIN.
2025-11-30 01:15:55.378 +02:00 [DBG] Connection id "0HNHFJKOHA0G5" accepted.
2025-11-30 01:15:55.379 +02:00 [DBG] Connection id "0HNHFJKOHA0G5" started.
2025-11-30 01:15:55.380 +02:00 [DBG] Connection id "0HNHFJKOHA0G6" accepted.
2025-11-30 01:15:55.381 +02:00 [DBG] Connection id "0HNHFJKOHA0G6" started.
2025-11-30 01:15:55.381 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 01:15:55.385 +02:00 [DBG] Connection id "0HNHFJKOHA0G5" stopped.
2025-11-30 01:15:55.386 +02:00 [DBG] Connection id "0HNHFJKOHA0G5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 01:15:55.386 +02:00 [DBG] Connection 0HNHFJKOHA0G6 established using the following protocol: "Tls12"
2025-11-30 01:15:55.390 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompleted - null null
2025-11-30 01:15:55.394 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAllCompleted'
2025-11-30 01:15:55.394 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)' with route pattern 'api/Appointment/GetAllCompleted' is valid for the request path '/api/Appointment/GetAllCompleted'
2025-11-30 01:15:55.396 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:15:55.397 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 01:15:55.398 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 01:15:55.399 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:15:55.399 +02:00 [INF] Route matched with {action = "GetCompletedAppointment", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCompletedAppointment() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-30 01:15:55.401 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 01:15:55.402 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 01:15:55.402 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 01:15:55.404 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 01:15:55.405 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 01:15:55.405 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:15:55.407 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:15:55.408 +02:00 [INF] Get All Completed Appointments called at "2025-11-30T01:15:55.4079927+02:00"
2025-11-30 01:15:55.408 +02:00 [INF] Fetching All Completed Appointments
2025-11-30 01:15:55.441 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 01:15:55.445 +02:00 [DBG] Creating DbConnection.
2025-11-30 01:15:55.447 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-30 01:15:55.448 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:15:55.449 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:15:55.450 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:15:55.451 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 01:15:55.452 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 01:15:55.453 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed'
2025-11-30 01:15:55.459 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed'
2025-11-30 01:15:55.461 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:55.463 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:55.464 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:55.465 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:55.465 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:55.466 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:55.467 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:55.468 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:55.469 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:55.470 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:55.470 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:55.471 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:55.472 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:55.472 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:55.474 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:15:55.474 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:15:55.475 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 14ms reading results.
2025-11-30 01:15:55.476 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:15:55.476 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-30 01:15:55.478 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 01:15:55.479 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 01:15:55.480 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 01:15:55.480 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 01:15:55.481 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 01:15:55.481 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-30 01:15:55.490 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital) in 84.3578ms
2025-11-30 01:15:55.492 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:15:55.493 +02:00 [DBG] Connection id "0HNHFJKOHA0G6" completed keep alive response.
2025-11-30 01:15:55.494 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 01:15:55.494 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:15:55.495 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 01:15:55.495 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompleted - 200 null application/json; charset=utf-8 104.9883ms
2025-11-30 01:21:15.492 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-30 01:21:15.584 +02:00 [DBG] Hosting starting
2025-11-30 01:21:15.605 +02:00 [INF] User profile is available. Using 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-30 01:21:15.613 +02:00 [DBG] Reading data from file 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys\key-b85f0939-0825-4b2b-b21a-67409aec9db0.xml'.
2025-11-30 01:21:15.618 +02:00 [DBG] Found key {b85f0939-0825-4b2b-b21a-67409aec9db0}.
2025-11-30 01:21:15.624 +02:00 [DBG] Considering key {b85f0939-0825-4b2b-b21a-67409aec9db0} with expiration date 2026-02-09 12:52:20Z as default key.
2025-11-30 01:21:15.627 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 01:21:15.629 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-30 01:21:15.630 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 01:21:15.634 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-30 01:21:15.635 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-30 01:21:15.636 +02:00 [DBG] Using key {b85f0939-0825-4b2b-b21a-67409aec9db0} as the default key.
2025-11-30 01:21:15.637 +02:00 [DBG] Key ring with default key {b85f0939-0825-4b2b-b21a-67409aec9db0} was loaded during application startup.
2025-11-30 01:21:15.641 +02:00 [DBG] Middleware loaded
2025-11-30 01:21:15.643 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-30 01:21:15.645 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-30 01:21:15.708 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-30 01:21:15.769 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-30 01:21:15.770 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-30 01:21:15.771 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-30 01:21:15.771 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-30 01:21:15.771 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-30 01:21:15.772 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-30 01:21:15.838 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-30 01:21:15.839 +02:00 [INF] Hosting environment: Development
2025-11-30 01:21:15.839 +02:00 [INF] Content root path: D:\Walaa\GP\Hospital\Hospital
2025-11-30 01:21:15.840 +02:00 [DBG] Hosting started
2025-11-30 01:21:16.001 +02:00 [DBG] Connection id "0HNHFJNV8JSA0" accepted.
2025-11-30 01:21:16.003 +02:00 [DBG] Connection id "0HNHFJNV8JSA0" started.
2025-11-30 01:21:16.012 +02:00 [DBG] Connection id "0HNHFJNV8JSA1" received FIN.
2025-11-30 01:21:16.012 +02:00 [DBG] Connection id "0HNHFJNV8JSA0" received FIN.
2025-11-30 01:21:16.015 +02:00 [DBG] Connection id "0HNHFJNV8JSA1" accepted.
2025-11-30 01:21:16.017 +02:00 [DBG] Connection id "0HNHFJNV8JSA1" started.
2025-11-30 01:21:16.021 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 01:21:16.021 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 01:21:16.050 +02:00 [DBG] Connection id "0HNHFJNV8JSA0" stopped.
2025-11-30 01:21:16.050 +02:00 [DBG] Connection id "0HNHFJNV8JSA1" stopped.
2025-11-30 01:21:16.053 +02:00 [DBG] Connection id "0HNHFJNV8JSA0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 01:21:16.053 +02:00 [DBG] Connection id "0HNHFJNV8JSA1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 01:21:16.183 +02:00 [DBG] Connection id "0HNHFJNV8JSA2" accepted.
2025-11-30 01:21:16.185 +02:00 [DBG] Connection id "0HNHFJNV8JSA2" started.
2025-11-30 01:21:16.235 +02:00 [DBG] Connection 0HNHFJNV8JSA2 established using the following protocol: "Tls12"
2025-11-30 01:21:16.284 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-30 01:21:16.349 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-30 01:21:16.371 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-30 01:21:16.372 +02:00 [DBG] Request did not match any endpoints
2025-11-30 01:21:16.410 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-30 01:21:16.413 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-30 01:21:16.425 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-30 01:21:16.425 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-30 01:21:16.428 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 150.1744ms
2025-11-30 01:21:16.435 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-30 01:21:16.435 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-30 01:21:16.444 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-30 01:21:16.449 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 14.0058ms
2025-11-30 01:21:16.466 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.7914ms
2025-11-30 01:21:16.504 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-30 01:21:16.507 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-30 01:21:16.507 +02:00 [DBG] Request did not match any endpoints
2025-11-30 01:21:16.541 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 36.4847ms
2025-11-30 01:21:24.246 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Appointment/GetAllCompletedByDoctorId/1 - null null
2025-11-30 01:21:24.252 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAllCompletedByDoctorId/1'
2025-11-30 01:21:24.257 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)' with route pattern 'api/Appointment/GetAllCompletedByDoctorId/{doctorid}' is valid for the request path '/api/Appointment/GetAllCompletedByDoctorId/1'
2025-11-30 01:21:24.259 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)'
2025-11-30 01:21:24.264 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 01:21:24.293 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 01:21:24.295 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)'
2025-11-30 01:21:24.313 +02:00 [INF] Route matched with {action = "GetAllCompletedByDoctorId", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCompletedByDoctorId(Int32) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-30 01:21:24.317 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 01:21:24.318 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 01:21:24.320 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 01:21:24.321 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 01:21:24.322 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 01:21:24.325 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:21:24.417 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-30 01:21:24.610 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:21:24.620 +02:00 [DBG] Attempting to bind parameter 'doctorid' of type 'System.Int32' ...
2025-11-30 01:21:24.623 +02:00 [DBG] Attempting to bind parameter 'doctorid' of type 'System.Int32' using the name 'doctorid' in request data ...
2025-11-30 01:21:24.625 +02:00 [DBG] Done attempting to bind parameter 'doctorid' of type 'System.Int32'.
2025-11-30 01:21:24.625 +02:00 [DBG] Done attempting to bind parameter 'doctorid' of type 'System.Int32'.
2025-11-30 01:21:24.626 +02:00 [DBG] Attempting to validate the bound parameter 'doctorid' of type 'System.Int32' ...
2025-11-30 01:21:24.629 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorid' of type 'System.Int32'.
2025-11-30 01:21:24.632 +02:00 [INF] Get All Completed Appointments called at "2025-11-30T01:21:24.6321344+02:00"
2025-11-30 01:21:24.634 +02:00 [INF] Fetching All Completed Appointments
2025-11-30 01:21:25.123 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-30 01:21:25.125 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-30 01:21:25.126 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-30 01:21:25.127 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-30 01:21:25.128 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-30 01:21:25.247 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 01:21:25.248 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 01:21:25.411 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 01:21:25.473 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-30 01:21:25.522 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-30 01:21:25.525 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-30 01:21:25.528 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-30 01:21:25.531 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-30 01:21:25.749 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-30 01:21:25.771 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-30 01:21:25.809 +02:00 [DBG] Creating DbConnection.
2025-11-30 01:21:25.831 +02:00 [DBG] Created DbConnection. (19ms).
2025-11-30 01:21:25.834 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:21:26.036 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:21:26.041 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:21:26.050 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-11-30 01:21:26.056 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-11-30 01:21:26.064 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 01:21:26.126 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 01:21:26.183 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.234 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.236 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.269 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.273 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.296 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.310 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.325 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.326 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.341 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:21:26.348 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 213ms reading results.
2025-11-30 01:21:26.351 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:21:26.357 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (5ms).
2025-11-30 01:21:26.364 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)
    .Where(a => (int)a.Status == 3 && a.DoctorId == __doctorid_0)'
2025-11-30 01:21:26.365 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-30 01:21:26.366 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-30 01:21:26.368 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-30 01:21:26.384 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 16], [Property: Doctor.Available (bool?), 17], [Property: Doctor.Biography (string), 18], [Property: Doctor.ConsultationFees (decimal) Required, 19], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.ExperienceYears (int?), 21], [Property: Doctor.ImageURL (string) MaxLength(300), 22], [Property: Doctor.SpecializationId (int) Required FK Index, 23], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Doctor.UserId (string) Required FK Index, 25] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 26], [Property: Branch.Address (string) MaxLength(250), 27], [Property: Branch.BranchName (string) Required MaxLength(150), 28], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 29], [Property: Branch.Description (string), 30], [Property: Branch.Email (string) MaxLength(200), 31], [Property: Branch.ImageURL (string) MaxLength(300), 32], [Property: Branch.Latitude (double?), 33], [Property: Branch.Longitude (double?), 34], [Property: Branch.Phone (string) MaxLength(25), 35], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE (a.Status == N'Completed') && (a.DoctorId == @__doctorid_0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 01:21:26.391 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:21:26.392 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:21:26.393 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:21:26.393 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 01:21:26.394 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 01:21:26.395 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed' AND [a].[DoctorId] = @__doctorid_0
2025-11-30 01:21:26.404 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed' AND [a].[DoctorId] = @__doctorid_0
2025-11-30 01:21:26.414 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.414 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.428 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.432 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.438 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.439 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.440 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.440 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:26.441 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:21:26.442 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 37ms reading results.
2025-11-30 01:21:26.444 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:21:26.445 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-30 01:21:26.458 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 01:21:26.462 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 01:21:26.463 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 01:21:26.464 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 01:21:26.465 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 01:21:26.466 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-30 01:21:26.494 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital) in 2167.039ms
2025-11-30 01:21:26.496 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)'
2025-11-30 01:21:26.499 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 01:21:26.503 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:21:26.504 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-30 01:21:26.506 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Appointment/GetAllCompletedByDoctorId/1 - 200 null application/json; charset=utf-8 2259.8969ms
2025-11-30 01:21:42.450 +02:00 [DBG] Connection id "0HNHFJNV8JSA3" accepted.
2025-11-30 01:21:42.450 +02:00 [DBG] Connection id "0HNHFJNV8JSA3" received FIN.
2025-11-30 01:21:42.451 +02:00 [DBG] Connection id "0HNHFJNV8JSA3" started.
2025-11-30 01:21:42.452 +02:00 [DBG] Connection id "0HNHFJNV8JSA4" accepted.
2025-11-30 01:21:42.454 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 01:21:42.454 +02:00 [DBG] Connection id "0HNHFJNV8JSA4" started.
2025-11-30 01:21:42.458 +02:00 [DBG] Connection id "0HNHFJNV8JSA3" stopped.
2025-11-30 01:21:42.460 +02:00 [DBG] Connection id "0HNHFJNV8JSA3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 01:21:42.465 +02:00 [DBG] Connection 0HNHFJNV8JSA4 established using the following protocol: "Tls12"
2025-11-30 01:21:42.470 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompleted - null null
2025-11-30 01:21:42.473 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAllCompleted'
2025-11-30 01:21:42.474 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)' with route pattern 'api/Appointment/GetAllCompleted' is valid for the request path '/api/Appointment/GetAllCompleted'
2025-11-30 01:21:42.475 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:21:42.476 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 01:21:42.477 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 01:21:42.479 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:21:42.482 +02:00 [INF] Route matched with {action = "GetCompletedAppointment", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCompletedAppointment() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-30 01:21:42.484 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 01:21:42.485 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 01:21:42.486 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 01:21:42.487 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 01:21:42.487 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 01:21:42.488 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:21:42.491 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:21:42.492 +02:00 [INF] Get All Completed Appointments called at "2025-11-30T01:21:42.4926673+02:00"
2025-11-30 01:21:42.493 +02:00 [INF] Fetching All Completed Appointments
2025-11-30 01:21:42.529 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 01:21:42.534 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .ThenInclude(a => a.User)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)
    .Where(a => (int)a.Status == 3)'
2025-11-30 01:21:42.536 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-30 01:21:42.537 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-30 01:21:42.538 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-30 01:21:42.539 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-30 01:21:42.554 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 16], [Property: User.AccessFailedCount (int) Required, 17], [Property: User.ConcurrencyStamp (string) Concurrency, 18], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 19], [Property: User.DateOfBirth (DateOnly?), 20], [Property: User.Email (string) Index MaxLength(256), 21], [Property: User.EmailConfirmed (bool) Required, 22], [Property: User.FullName (string) Required MaxLength(150), 23], [Property: User.Gender (GenderType?) MaxLength(10), 24], [Property: User.LockoutEnabled (bool) Required, 25], [Property: User.LockoutEnd (DateTimeOffset?), 26], [Property: User.NormalizedEmail (string) Index MaxLength(256), 27], [Property: User.NormalizedUserName (string) Index MaxLength(256), 28], [Property: User.PasswordHash (string), 29], [Property: User.PhoneNumber (string), 30], [Property: User.PhoneNumberConfirmed (bool) Required, 31], [Property: User.RefreshToken (string), 32], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 33], [Property: User.Role (string) Required MaxLength(50), 34], [Property: User.SecurityStamp (string), 35], [Property: User.TwoFactorEnabled (bool) Required, 36], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37], [Property: User.UserName (string) MaxLength(256), 38] }
            3 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: Doctor.Available (bool?), 40], [Property: Doctor.Biography (string), 41], [Property: Doctor.ConsultationFees (decimal) Required, 42], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Doctor.ExperienceYears (int?), 44], [Property: Doctor.ImageURL (string) MaxLength(300), 45], [Property: Doctor.SpecializationId (int) Required FK Index, 46], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: Doctor.UserId (string) Required FK Index, 48] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Branch.Address (string) MaxLength(250), 50], [Property: Branch.BranchName (string) Required MaxLength(150), 51], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 52], [Property: Branch.Description (string), 53], [Property: Branch.Email (string) MaxLength(200), 54], [Property: Branch.ImageURL (string) MaxLength(300), 55], [Property: Branch.Latitude (double?), 56], [Property: Branch.Longitude (double?), 57], [Property: Branch.Phone (string) MaxLength(25), 58], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 59] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Users AS u ON p.UserId == u.Id
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE a.Status == N'Completed'), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 01:21:42.559 +02:00 [DBG] Creating DbConnection.
2025-11-30 01:21:42.560 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-30 01:21:42.560 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:21:42.562 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:21:42.562 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:21:42.563 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 01:21:42.564 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 01:21:42.565 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed'
2025-11-30 01:21:42.574 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed'
2025-11-30 01:21:42.577 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:42.579 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:42.579 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:42.582 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:42.583 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:42.584 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:42.584 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:42.585 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:42.586 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:42.586 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:42.587 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:42.588 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:42.589 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:42.590 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:42.590 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:21:42.591 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:21:42.592 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 15ms reading results.
2025-11-30 01:21:42.593 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:21:42.595 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-11-30 01:21:42.597 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 01:21:42.598 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 01:21:42.599 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 01:21:42.599 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 01:21:42.600 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 01:21:42.601 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-30 01:21:42.603 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital) in 114.6042ms
2025-11-30 01:21:42.604 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetCompletedAppointment (Hospital)'
2025-11-30 01:21:42.604 +02:00 [DBG] Connection id "0HNHFJNV8JSA4" completed keep alive response.
2025-11-30 01:21:42.605 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 01:21:42.605 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:21:42.606 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 01:21:42.607 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompleted - 200 null application/json; charset=utf-8 137.5795ms
2025-11-30 01:22:12.382 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-30 01:22:12.475 +02:00 [DBG] Hosting starting
2025-11-30 01:22:12.497 +02:00 [INF] User profile is available. Using 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-30 01:22:12.504 +02:00 [DBG] Reading data from file 'C:\Users\E-Mad\AppData\Local\ASP.NET\DataProtection-Keys\key-b85f0939-0825-4b2b-b21a-67409aec9db0.xml'.
2025-11-30 01:22:12.511 +02:00 [DBG] Found key {b85f0939-0825-4b2b-b21a-67409aec9db0}.
2025-11-30 01:22:12.518 +02:00 [DBG] Considering key {b85f0939-0825-4b2b-b21a-67409aec9db0} with expiration date 2026-02-09 12:52:20Z as default key.
2025-11-30 01:22:12.522 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 01:22:12.524 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-30 01:22:12.526 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-30 01:22:12.531 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-30 01:22:12.532 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-30 01:22:12.533 +02:00 [DBG] Using key {b85f0939-0825-4b2b-b21a-67409aec9db0} as the default key.
2025-11-30 01:22:12.534 +02:00 [DBG] Key ring with default key {b85f0939-0825-4b2b-b21a-67409aec9db0} was loaded during application startup.
2025-11-30 01:22:12.538 +02:00 [DBG] Middleware loaded
2025-11-30 01:22:12.540 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-30 01:22:12.541 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-30 01:22:12.607 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-30 01:22:12.677 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-30 01:22:12.678 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-30 01:22:12.679 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-30 01:22:12.679 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-30 01:22:12.680 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-30 01:22:12.681 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-30 01:22:12.731 +02:00 [DBG] Connection id "0HNHFJOG5KI82" accepted.
2025-11-30 01:22:12.733 +02:00 [DBG] Connection id "0HNHFJOG5KI82" started.
2025-11-30 01:22:12.740 +02:00 [DBG] Connection id "0HNHFJOG5KI83" accepted.
2025-11-30 01:22:12.740 +02:00 [DBG] Connection id "0HNHFJOG5KI83" started.
2025-11-30 01:22:12.756 +02:00 [DBG] Connection id "0HNHFJOG5KI83" received FIN.
2025-11-30 01:22:12.756 +02:00 [DBG] Connection id "0HNHFJOG5KI82" received FIN.
2025-11-30 01:22:12.757 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-30 01:22:12.764 +02:00 [INF] Hosting environment: Development
2025-11-30 01:22:12.764 +02:00 [INF] Content root path: D:\Walaa\GP\Hospital\Hospital
2025-11-30 01:22:12.765 +02:00 [DBG] Hosting started
2025-11-30 01:22:12.769 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 01:22:12.769 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 01:22:12.798 +02:00 [DBG] Connection id "0HNHFJOG5KI83" stopped.
2025-11-30 01:22:12.799 +02:00 [DBG] Connection id "0HNHFJOG5KI82" stopped.
2025-11-30 01:22:12.802 +02:00 [DBG] Connection id "0HNHFJOG5KI83" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 01:22:12.802 +02:00 [DBG] Connection id "0HNHFJOG5KI82" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 01:22:12.899 +02:00 [DBG] Connection id "0HNHFJOG5KI84" accepted.
2025-11-30 01:22:12.900 +02:00 [DBG] Connection id "0HNHFJOG5KI84" started.
2025-11-30 01:22:12.949 +02:00 [DBG] Connection 0HNHFJOG5KI84 established using the following protocol: "Tls12"
2025-11-30 01:22:12.998 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-30 01:22:13.059 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-30 01:22:13.082 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-30 01:22:13.084 +02:00 [DBG] Request did not match any endpoints
2025-11-30 01:22:13.121 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-30 01:22:13.124 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-30 01:22:13.135 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-30 01:22:13.135 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-30 01:22:13.137 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 145.6882ms
2025-11-30 01:22:13.153 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-30 01:22:13.153 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-30 01:22:13.167 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-30 01:22:13.168 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 15.3101ms
2025-11-30 01:22:13.194 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.9762ms
2025-11-30 01:22:13.248 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-30 01:22:13.250 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-30 01:22:13.251 +02:00 [DBG] Request did not match any endpoints
2025-11-30 01:22:13.280 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.5579ms
2025-11-30 01:22:20.262 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Appointment/GetAllCompletedByDoctorId/1 - null null
2025-11-30 01:22:20.270 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAllCompletedByDoctorId/1'
2025-11-30 01:22:20.275 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)' with route pattern 'api/Appointment/GetAllCompletedByDoctorId/{doctorid}' is valid for the request path '/api/Appointment/GetAllCompletedByDoctorId/1'
2025-11-30 01:22:20.279 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)'
2025-11-30 01:22:20.282 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 01:22:20.313 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 01:22:20.315 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)'
2025-11-30 01:22:20.339 +02:00 [INF] Route matched with {action = "GetAllCompletedByDoctorId", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCompletedByDoctorId(Int32) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-30 01:22:20.342 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 01:22:20.343 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 01:22:20.345 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 01:22:20.347 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 01:22:20.347 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 01:22:20.350 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:22:20.460 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-30 01:22:20.705 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:22:20.715 +02:00 [DBG] Attempting to bind parameter 'doctorid' of type 'System.Int32' ...
2025-11-30 01:22:20.718 +02:00 [DBG] Attempting to bind parameter 'doctorid' of type 'System.Int32' using the name 'doctorid' in request data ...
2025-11-30 01:22:20.719 +02:00 [DBG] Done attempting to bind parameter 'doctorid' of type 'System.Int32'.
2025-11-30 01:22:20.720 +02:00 [DBG] Done attempting to bind parameter 'doctorid' of type 'System.Int32'.
2025-11-30 01:22:20.721 +02:00 [DBG] Attempting to validate the bound parameter 'doctorid' of type 'System.Int32' ...
2025-11-30 01:22:20.724 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorid' of type 'System.Int32'.
2025-11-30 01:22:20.728 +02:00 [INF] Get All Completed Appointments called at "2025-11-30T01:22:20.7282251+02:00"
2025-11-30 01:22:20.731 +02:00 [INF] Fetching All Completed Appointments
2025-11-30 01:22:21.276 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-30 01:22:21.278 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-30 01:22:21.279 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-30 01:22:21.281 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-30 01:22:21.282 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-30 01:22:21.401 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 01:22:21.404 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-30 01:22:21.572 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 01:22:21.633 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-30 01:22:21.690 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-30 01:22:21.694 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-30 01:22:21.697 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-30 01:22:21.699 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-30 01:22:21.874 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-30 01:22:21.896 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-30 01:22:21.936 +02:00 [DBG] Creating DbConnection.
2025-11-30 01:22:21.957 +02:00 [DBG] Created DbConnection. (18ms).
2025-11-30 01:22:21.962 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:22:22.158 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:22:22.163 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:22:22.169 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-11-30 01:22:22.174 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-11-30 01:22:22.183 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 01:22:22.250 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 01:22:22.296 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.339 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.342 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.376 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.380 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.398 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.413 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.436 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.438 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.453 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:22:22.459 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 201ms reading results.
2025-11-30 01:22:22.465 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:22:22.470 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (5ms).
2025-11-30 01:22:22.476 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .ThenInclude(a => a.User)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)
    .Where(a => (int)a.Status == 3 && a.DoctorId == __doctorid_0)'
2025-11-30 01:22:22.480 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-30 01:22:22.482 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-30 01:22:22.483 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-30 01:22:22.485 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-30 01:22:22.507 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.PatientId (int) Required FK Index, 6], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 7], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 8], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 9], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 12], [Property: Patient.EmergencyContact (string) MaxLength(150), 13], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 14], [Property: Patient.UserId (string) Required FK Index, 15] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 16], [Property: User.AccessFailedCount (int) Required, 17], [Property: User.ConcurrencyStamp (string) Concurrency, 18], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 19], [Property: User.DateOfBirth (DateOnly?), 20], [Property: User.Email (string) Index MaxLength(256), 21], [Property: User.EmailConfirmed (bool) Required, 22], [Property: User.FullName (string) Required MaxLength(150), 23], [Property: User.Gender (GenderType?) MaxLength(10), 24], [Property: User.LockoutEnabled (bool) Required, 25], [Property: User.LockoutEnd (DateTimeOffset?), 26], [Property: User.NormalizedEmail (string) Index MaxLength(256), 27], [Property: User.NormalizedUserName (string) Index MaxLength(256), 28], [Property: User.PasswordHash (string), 29], [Property: User.PhoneNumber (string), 30], [Property: User.PhoneNumberConfirmed (bool) Required, 31], [Property: User.RefreshToken (string), 32], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 33], [Property: User.Role (string) Required MaxLength(50), 34], [Property: User.SecurityStamp (string), 35], [Property: User.TwoFactorEnabled (bool) Required, 36], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37], [Property: User.UserName (string) MaxLength(256), 38] }
            3 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 39], [Property: Doctor.Available (bool?), 40], [Property: Doctor.Biography (string), 41], [Property: Doctor.ConsultationFees (decimal) Required, 42], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Doctor.ExperienceYears (int?), 44], [Property: Doctor.ImageURL (string) MaxLength(300), 45], [Property: Doctor.SpecializationId (int) Required FK Index, 46], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: Doctor.UserId (string) Required FK Index, 48] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Branch.Address (string) MaxLength(250), 50], [Property: Branch.BranchName (string) Required MaxLength(150), 51], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 52], [Property: Branch.Description (string), 53], [Property: Branch.Email (string) MaxLength(200), 54], [Property: Branch.ImageURL (string) MaxLength(300), 55], [Property: Branch.Latitude (double?), 56], [Property: Branch.Longitude (double?), 57], [Property: Branch.Phone (string) MaxLength(25), 58], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 59] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Users AS u ON p.UserId == u.Id
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE (a.Status == N'Completed') && (a.DoctorId == @__doctorid_0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-30 01:22:22.513 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:22:22.515 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:22:22.516 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:22:22.516 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 01:22:22.517 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 01:22:22.518 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed' AND [a].[DoctorId] = @__doctorid_0
2025-11-30 01:22:22.528 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed' AND [a].[DoctorId] = @__doctorid_0
2025-11-30 01:22:22.540 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.541 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.552 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.554 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.559 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.560 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.562 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.563 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.564 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.565 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.566 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.567 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:22:22.567 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:22:22.568 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 38ms reading results.
2025-11-30 01:22:22.569 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:22:22.570 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (1ms).
2025-11-30 01:22:22.587 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 01:22:22.589 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 01:22:22.589 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 01:22:22.589 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 01:22:22.590 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 01:22:22.591 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-30 01:22:22.623 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital) in 2271.4368ms
2025-11-30 01:22:22.625 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)'
2025-11-30 01:22:22.628 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 01:22:22.632 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:22:22.633 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-30 01:22:22.634 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Appointment/GetAllCompletedByDoctorId/1 - 200 null application/json; charset=utf-8 2372.7371ms
2025-11-30 01:23:02.385 +02:00 [DBG] Connection id "0HNHFJOG5KI85" received FIN.
2025-11-30 01:23:02.390 +02:00 [DBG] Connection id "0HNHFJOG5KI85" accepted.
2025-11-30 01:23:02.391 +02:00 [DBG] Connection id "0HNHFJOG5KI85" started.
2025-11-30 01:23:02.397 +02:00 [DBG] Connection id "0HNHFJOG5KI86" accepted.
2025-11-30 01:23:02.398 +02:00 [DBG] Connection id "0HNHFJOG5KI86" started.
2025-11-30 01:23:02.398 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-30 01:23:02.402 +02:00 [DBG] Connection id "0HNHFJOG5KI85" stopped.
2025-11-30 01:23:02.402 +02:00 [DBG] Connection id "0HNHFJOG5KI85" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-30 01:23:02.405 +02:00 [DBG] Connection 0HNHFJOG5KI86 established using the following protocol: "Tls12"
2025-11-30 01:23:02.410 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompletedByDoctorId/1 - null null
2025-11-30 01:23:02.415 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAllCompletedByDoctorId/1'
2025-11-30 01:23:02.416 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)' with route pattern 'api/Appointment/GetAllCompletedByDoctorId/{doctorid}' is valid for the request path '/api/Appointment/GetAllCompletedByDoctorId/1'
2025-11-30 01:23:02.417 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)'
2025-11-30 01:23:02.418 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-30 01:23:02.420 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-30 01:23:02.421 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)'
2025-11-30 01:23:02.422 +02:00 [INF] Route matched with {action = "GetAllCompletedByDoctorId", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCompletedByDoctorId(Int32) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-30 01:23:02.424 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-30 01:23:02.425 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-30 01:23:02.426 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-30 01:23:02.428 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-30 01:23:02.429 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-30 01:23:02.430 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:23:02.432 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-30 01:23:02.433 +02:00 [DBG] Attempting to bind parameter 'doctorid' of type 'System.Int32' ...
2025-11-30 01:23:02.435 +02:00 [DBG] Attempting to bind parameter 'doctorid' of type 'System.Int32' using the name 'doctorid' in request data ...
2025-11-30 01:23:02.435 +02:00 [DBG] Done attempting to bind parameter 'doctorid' of type 'System.Int32'.
2025-11-30 01:23:02.436 +02:00 [DBG] Done attempting to bind parameter 'doctorid' of type 'System.Int32'.
2025-11-30 01:23:02.437 +02:00 [DBG] Attempting to validate the bound parameter 'doctorid' of type 'System.Int32' ...
2025-11-30 01:23:02.438 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorid' of type 'System.Int32'.
2025-11-30 01:23:02.440 +02:00 [INF] Get All Completed Appointments called at "2025-11-30T01:23:02.4407476+02:00"
2025-11-30 01:23:02.442 +02:00 [INF] Fetching All Completed Appointments
2025-11-30 01:23:02.488 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-30 01:23:02.494 +02:00 [DBG] Creating DbConnection.
2025-11-30 01:23:02.495 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-30 01:23:02.497 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:23:02.498 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:23:02.500 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:23:02.501 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-30 01:23:02.502 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 01:23:02.503 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 01:23:02.516 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-30 01:23:02.520 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.521 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.522 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.523 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.525 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.526 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.527 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.528 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.529 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.530 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:23:02.532 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 12ms reading results.
2025-11-30 01:23:02.533 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:23:02.534 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-30 01:23:02.536 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.'.
2025-11-30 01:23:02.537 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.'.
2025-11-30 01:23:02.538 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-30 01:23:02.538 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-30 01:23:02.539 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-30 01:23:02.540 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed' AND [a].[DoctorId] = @__doctorid_0
2025-11-30 01:23:02.550 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[Status] = N'Completed' AND [a].[DoctorId] = @__doctorid_0
2025-11-30 01:23:02.553 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.555 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.556 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.558 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.560 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.561 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.562 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.563 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.564 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.566 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.567 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.568 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-30 01:23:02.569 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.'.
2025-11-30 01:23:02.569 +02:00 [DBG] A data reader for 'HospitalDB' on server '.' is being disposed after spending 16ms reading results.
2025-11-30 01:23:02.570 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:23:02.571 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.' (0ms).
2025-11-30 01:23:02.573 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-30 01:23:02.575 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-30 01:23:02.575 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-30 01:23:02.575 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-30 01:23:02.576 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-30 01:23:02.576 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-30 01:23:02.579 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital) in 149.607ms
2025-11-30 01:23:02.580 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetAllCompletedByDoctorId (Hospital)'
2025-11-30 01:23:02.582 +02:00 [DBG] Connection id "0HNHFJOG5KI86" completed keep alive response.
2025-11-30 01:23:02.582 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-30 01:23:02.583 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.'.
2025-11-30 01:23:02.584 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-30 01:23:02.585 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAllCompletedByDoctorId/1 - 200 null application/json; charset=utf-8 175.1389ms
