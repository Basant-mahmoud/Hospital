2025-11-29 00:59:47.014 +02:00 [DBG] Connection id "0HNHEOT0LBBJJ" accepted.
2025-11-29 00:59:47.029 +02:00 [DBG] Connection id "0HNHEOT0LBBJJ" started.
2025-11-29 00:59:47.033 +02:00 [DBG] Connection 0HNHEOT0LBBJJ established using the following protocol: "Tls13"
2025-11-29 00:59:47.035 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 00:59:47.043 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 00:59:47.044 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 00:59:47.045 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 00:59:47.046 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 00:59:47.047 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 00:59:47.048 +02:00 [INF] CORS policy execution successful.
2025-11-29 00:59:47.048 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 00:59:47.049 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 00:59:47.050 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 00:59:47.051 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 00:59:47.052 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 00:59:47.053 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 00:59:47.055 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 00:59:47.056 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 00:59:47.057 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 00:59:47.058 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 00:59:47.059 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 00:59:47.060 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 00:59:47.061 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 00:59:47.063 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 00:59:47.064 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 00:59:47.065 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 00:59:47.066 +02:00 [INF] Get  doctor By Id called at "2025-11-29T00:59:47.0666227+02:00"
2025-11-29 00:59:47.067 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 00:59:47.068 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 00:59:47.070 +02:00 [DBG] Creating DbConnection.
2025-11-29 00:59:47.071 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 00:59:47.071 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:47.113 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:47.115 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 00:59:47.116 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 00:59:47.117 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 00:59:47.118 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 00:59:47.134 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 00:59:47.136 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:47.137 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:47.137 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:47.138 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:47.139 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:47.140 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:47.141 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:47.141 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:47.142 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:47.143 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:47.144 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:47.144 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:47.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:47.146 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:47.147 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:47.148 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:47.149 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 00:59:47.150 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:47.151 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 00:59:47.153 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 00:59:47.154 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 00:59:47.155 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 00:59:47.155 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 00:59:47.156 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 00:59:47.157 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 00:59:47.158 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 101.0913ms
2025-11-29 00:59:47.159 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 00:59:47.160 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 00:59:47.161 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:47.162 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 00:59:47.163 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 128.3701ms
2025-11-29 00:59:50.477 +02:00 [DBG] Connection id "0HNHEOT0LBBJJ" received FIN.
2025-11-29 00:59:50.478 +02:00 [DBG] Connection id "0HNHEOT0LBBJJ" is closed. The last processed stream ID was 1.
2025-11-29 00:59:50.478 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJJ completed.
2025-11-29 00:59:50.479 +02:00 [DBG] Connection id "0HNHEOT0LBBJJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 00:59:50.481 +02:00 [DBG] Connection id "0HNHEOT0LBBJJ" stopped.
2025-11-29 00:59:52.686 +02:00 [DBG] Connection id "0HNHEOT0LBBJK" accepted.
2025-11-29 00:59:52.687 +02:00 [DBG] Connection id "0HNHEOT0LBBJK" started.
2025-11-29 00:59:52.690 +02:00 [DBG] Connection 0HNHEOT0LBBJK established using the following protocol: "Tls13"
2025-11-29 00:59:52.692 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 00:59:52.693 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 00:59:52.694 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 00:59:52.695 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 00:59:52.695 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 00:59:52.696 +02:00 [INF] CORS policy execution successful.
2025-11-29 00:59:52.696 +02:00 [DBG] The request is a preflight request.
2025-11-29 00:59:52.697 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.6456ms
2025-11-29 00:59:52.698 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 00:59:52.700 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 00:59:52.701 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 00:59:52.702 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 00:59:52.703 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 00:59:52.703 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 00:59:52.704 +02:00 [INF] CORS policy execution successful.
2025-11-29 00:59:52.704 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 00:59:52.705 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 00:59:52.706 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 00:59:52.707 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 00:59:52.708 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 00:59:52.708 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 00:59:52.709 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 00:59:52.710 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 00:59:52.711 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 00:59:52.712 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 00:59:52.713 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 00:59:52.714 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 00:59:52.715 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 00:59:52.716 +02:00 [DBG] Connection id "0HNHEOT0LBBJK", Request id "0HNHEOT0LBBJK:00000003": started reading request body.
2025-11-29 00:59:52.716 +02:00 [DBG] Connection id "0HNHEOT0LBBJK", Request id "0HNHEOT0LBBJK:00000003": done reading request body.
2025-11-29 00:59:52.717 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 00:59:52.718 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 00:59:52.719 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 00:59:52.719 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 00:59:52.720 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 00:59:52.721 +02:00 [INF] Add Appointment called at "2025-11-29T00:59:52.7215312+02:00"
2025-11-29 00:59:52.722 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 5, Date: "2025-12-12", Shift: "Evening"
2025-11-29 00:59:52.723 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 00:59:52.724 +02:00 [DBG] Creating DbConnection.
2025-11-29 00:59:52.725 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 00:59:52.726 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:52.726 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:52.727 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 00:59:52.728 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 00:59:52.729 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 00:59:52.729 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 00:59:52.730 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 00:59:52.731 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 00:59:52.742 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 00:59:52.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.745 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.746 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.747 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:52.748 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 00:59:52.749 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 00:59:52.750 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 00:59:52.750 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 00:59:52.751 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 00:59:52.760 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 00:59:52.762 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.763 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.764 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.764 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.765 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.766 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.767 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.768 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.769 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.769 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.770 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.771 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.772 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.772 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.773 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:52.774 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:52.775 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-29 00:59:52.776 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 00:59:52.776 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 00:59:52.777 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 00:59:52.778 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 00:59:52.780 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 00:59:52.781 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:52.782 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 00:59:52.783 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 00:59:52.784 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 00:59:52.785 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 00:59:52.785 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 00:59:52.789 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 00:59:52.790 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:52.791 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 00:59:52.805 +02:00 [DBG] Rolling back transaction.
2025-11-29 00:59:52.805 +02:00 [DBG] Rolled back transaction.
2025-11-29 00:59:52.806 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:52.807 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 00:59:52.808 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 5
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-29 00:59:52.820 +02:00 [DBG] Disposing transaction.
2025-11-29 00:59:52.846 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 134.1721ms
2025-11-29 00:59:52.847 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 00:59:52.875 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-29 00:59:52.879 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 00:59:52.880 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:52.881 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 00:59:52.882 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 183.7179ms
2025-11-29 00:59:55.477 +02:00 [DBG] Connection id "0HNHEOT0LBBJK" received FIN.
2025-11-29 00:59:55.478 +02:00 [DBG] Connection id "0HNHEOT0LBBJK" is closed. The last processed stream ID was 3.
2025-11-29 00:59:55.478 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJK completed.
2025-11-29 00:59:55.479 +02:00 [DBG] Connection id "0HNHEOT0LBBJK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 00:59:55.481 +02:00 [DBG] Connection id "0HNHEOT0LBBJK" stopped.
2025-11-29 00:59:55.580 +02:00 [DBG] Connection id "0HNHEOT0LBBJL" accepted.
2025-11-29 00:59:55.581 +02:00 [DBG] Connection id "0HNHEOT0LBBJL" started.
2025-11-29 00:59:55.583 +02:00 [DBG] Connection 0HNHEOT0LBBJL established using the following protocol: "Tls13"
2025-11-29 00:59:55.585 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 00:59:55.588 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 00:59:55.589 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 00:59:55.590 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 00:59:55.590 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 00:59:55.591 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 00:59:55.592 +02:00 [INF] CORS policy execution successful.
2025-11-29 00:59:55.592 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 00:59:55.593 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 00:59:55.594 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 00:59:55.596 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 00:59:55.597 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 00:59:55.597 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 00:59:55.599 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 00:59:55.600 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 00:59:55.601 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 00:59:55.602 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 00:59:55.603 +02:00 [INF] get all schedule called at "2025-11-29T00:59:55.6030168+02:00"
2025-11-29 00:59:55.603 +02:00 [INF] Fetching all schedules
2025-11-29 00:59:55.604 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 00:59:55.606 +02:00 [DBG] Creating DbConnection.
2025-11-29 00:59:55.606 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 00:59:55.607 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:55.608 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:55.608 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 00:59:55.609 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 00:59:55.610 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 00:59:55.611 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 00:59:55.619 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 00:59:55.620 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.621 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.622 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.623 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.624 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.624 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.625 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.626 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.627 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.628 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.629 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.630 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.631 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.632 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.633 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.634 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.635 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.636 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.637 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.637 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.638 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.639 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.640 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.641 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.642 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.643 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.643 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.644 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.645 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.646 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.647 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.648 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.649 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.650 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.650 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.651 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.652 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.653 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.654 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.655 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.656 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.657 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.657 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 00:59:55.658 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:55.659 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 38ms reading results.
2025-11-29 00:59:55.660 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:55.661 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 00:59:55.662 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 00:59:55.663 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 00:59:55.664 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 00:59:55.664 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 00:59:55.665 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 00:59:55.666 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 00:59:55.667 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 66.728ms
2025-11-29 00:59:55.669 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 00:59:55.669 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 00:59:55.670 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 00:59:55.671 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 00:59:55.672 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 87.577ms
2025-11-29 01:00:00.414 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 01:00:00.416 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 01:00:00.417 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 01:00:00.418 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:00:00.419 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:00:00.420 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:00:00.421 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:00:00.421 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:00:00.422 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:00:00.423 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:00:00.425 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:00:00.426 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:00:00.427 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:00:00.429 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:00:00.430 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:00:00.431 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:00:00.432 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:00:00.433 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:00:00.434 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:00:00.436 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:00:00.437 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:00:00.438 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:00:00.439 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:00:00.440 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:00:00.4401946+02:00"
2025-11-29 01:00:00.440 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 01:00:00.441 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:00:00.443 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:00:00.444 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:00:00.445 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:00.446 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:00.447 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:00.448 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:00.448 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:00.450 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:00:00.459 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:00:00.461 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:00.462 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:00.463 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:00.464 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:00.465 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:00.466 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:00.467 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:00.468 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:00.469 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:00.470 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:00.471 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:00.472 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:00.473 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:00.475 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:00.475 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:00.476 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:00.477 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 16ms reading results.
2025-11-29 01:00:00.478 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:00.479 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:00.480 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:00:00.481 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:00:00.482 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:00:00.482 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:00:00.483 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:00:00.484 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:00:00.485 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 53.9047ms
2025-11-29 01:00:00.486 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:00:00.486 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:00:00.487 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:00.488 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:00:00.489 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 75.4349ms
2025-11-29 01:00:02.599 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:00:02.601 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:00:02.602 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:00:02.602 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:00:02.603 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:00:02.604 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:00:02.604 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:00:02.605 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.7644ms
2025-11-29 01:00:02.606 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:00:02.609 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:00:02.610 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:00:02.611 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:00:02.612 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:00:02.613 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:00:02.613 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:00:02.614 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:00:02.615 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:00:02.616 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:00:02.617 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:00:02.618 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:00:02.619 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:00:02.621 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:00:02.622 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:00:02.623 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:00:02.624 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:00:02.625 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:00:02.627 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:00:02.628 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:00:02.629 +02:00 [DBG] Connection id "0HNHEOT0LBBJL", Request id "0HNHEOT0LBBJL:00000007": started reading request body.
2025-11-29 01:00:02.630 +02:00 [DBG] Connection id "0HNHEOT0LBBJL", Request id "0HNHEOT0LBBJL:00000007": done reading request body.
2025-11-29 01:00:02.631 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:00:02.632 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:00:02.633 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:00:02.634 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:00:02.635 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:00:02.636 +02:00 [INF] Add Appointment called at "2025-11-29T01:00:02.6366339+02:00"
2025-11-29 01:00:02.637 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 5, Date: "2025-12-26", Shift: "Evening"
2025-11-29 01:00:02.639 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:00:02.640 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:00:02.640 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:00:02.641 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:02.642 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:02.642 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:00:02.643 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:00:02.644 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:02.645 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:02.646 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:02.646 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:00:02.657 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:00:02.658 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.659 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.660 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.661 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:02.661 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 01:00:02.663 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:02.663 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:02.664 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:02.665 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:00:02.674 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:00:02.675 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.676 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.677 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.678 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.678 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.679 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.680 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.681 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.682 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.682 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.683 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.684 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.685 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.686 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.687 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.688 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:02.689 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 01:00:02.690 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:02.691 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:02.692 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:02.693 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:00:02.695 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:00:02.697 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:02.698 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:00:02.699 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:02.700 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:02.701 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:02.701 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:00:02.705 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:00:02.706 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:02.707 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:00:02.708 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.709 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.710 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.711 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.712 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.712 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:00:02.713 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:00:02.714 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:00:02.715 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:00:02.716 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:00:02.716 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 01:00:02.718 +02:00 [DBG] Created transaction savepoint.
2025-11-29 01:00:02.718 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:02.719 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:02.720 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:02.721 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:00:02.725 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:00:02.726 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 01:00:02.727 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:02.728 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:00:02.729 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:02.730 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:00:02.731 +02:00 [DBG] Committing transaction.
2025-11-29 01:00:02.731 +02:00 [DBG] Committed transaction.
2025-11-29 01:00:02.732 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:02.733 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:02.733 +02:00 [INF] Appointment created successfully with ID: 13
2025-11-29 01:00:02.734 +02:00 [DBG] Disposing transaction.
2025-11-29 01:00:02.735 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:00:02.736 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:00:02.737 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:00:02.737 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:00:02.738 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:00:02.739 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 01:00:02.739 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[13],action=[GetById],controller=[Appointment])
2025-11-29 01:00:02.740 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/13 and 
2025-11-29 01:00:02.741 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/13
2025-11-29 01:00:02.742 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 119.1399ms
2025-11-29 01:00:02.743 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:00:02.744 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:00:02.745 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:02.746 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:00:02.746 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 01:00:02.747 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 140.6689ms
2025-11-29 01:00:02.748 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:00:02.751 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:00:02.752 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:00:02.752 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:00:02.753 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:00:02.753 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:00:02.754 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 7.3413ms
2025-11-29 01:00:02.755 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 01:00:02.757 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:00:02.758 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 01:00:02.759 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 01:00:02.760 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:00:02.760 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:00:02.761 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:00:02.761 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:00:02.762 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-29 01:00:02.763 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Patient)
2025-11-29 01:00:02.764 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-29 01:00:02.764 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 401 0 null 9.4344ms
2025-11-29 01:00:02.766 +02:00 [DBG] Connection id "0HNHEOT0LBBJL", Request id "0HNHEOT0LBBJL:0000000B": started reading request body.
2025-11-29 01:00:02.767 +02:00 [DBG] Connection id "0HNHEOT0LBBJL", Request id "0HNHEOT0LBBJL:0000000B": done reading request body.
2025-11-29 01:00:05.478 +02:00 [DBG] Connection id "0HNHEOT0LBBJL" received FIN.
2025-11-29 01:00:05.479 +02:00 [DBG] Connection id "0HNHEOT0LBBJL" is closed. The last processed stream ID was 11.
2025-11-29 01:00:05.479 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJL completed.
2025-11-29 01:00:05.480 +02:00 [DBG] Connection id "0HNHEOT0LBBJL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:00:05.482 +02:00 [DBG] Connection id "0HNHEOT0LBBJL" stopped.
2025-11-29 01:00:18.367 +02:00 [DBG] Connection id "0HNHEOT0LBBJM" received FIN.
2025-11-29 01:00:18.367 +02:00 [DBG] Connection id "0HNHEOT0LBBJM" accepted.
2025-11-29 01:00:18.369 +02:00 [DBG] Connection id "0HNHEOT0LBBJM" started.
2025-11-29 01:00:18.369 +02:00 [DBG] Connection id "0HNHEOT0LBBJN" accepted.
2025-11-29 01:00:18.370 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 01:00:18.371 +02:00 [DBG] Connection id "0HNHEOT0LBBJN" started.
2025-11-29 01:00:18.372 +02:00 [DBG] Connection id "0HNHEOT0LBBJM" stopped.
2025-11-29 01:00:18.373 +02:00 [DBG] Connection id "0HNHEOT0LBBJM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:00:18.375 +02:00 [DBG] Connection 0HNHEOT0LBBJN established using the following protocol: "Tls13"
2025-11-29 01:00:18.376 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Auth/login - application/json 66
2025-11-29 01:00:18.378 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 01:00:18.378 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-29 01:00:18.379 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 01:00:18.380 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:00:18.380 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:00:18.381 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 01:00:18.382 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-29 01:00:18.383 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:00:18.384 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:00:18.385 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:00:18.386 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:00:18.387 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:00:18.388 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 01:00:18.388 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 01:00:18.389 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 01:00:18.390 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-29 01:00:18.391 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:00:18.392 +02:00 [DBG] Connection id "0HNHEOT0LBBJN", Request id "0HNHEOT0LBBJN:00000001": started reading request body.
2025-11-29 01:00:18.393 +02:00 [DBG] Connection id "0HNHEOT0LBBJN", Request id "0HNHEOT0LBBJN:00000001": done reading request body.
2025-11-29 01:00:18.394 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-29 01:00:18.394 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 01:00:18.395 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 01:00:18.396 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 01:00:18.397 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 01:00:18.397 +02:00 [INF] Login called at "2025-11-29T01:00:18.3979379+02:00"
2025-11-29 01:00:18.398 +02:00 [INF] Login attempt for email: nour22110@gmail.com
2025-11-29 01:00:18.399 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:00:18.400 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:00:18.401 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:00:18.401 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.402 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.403 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:18.404 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:18.405 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:18.405 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 01:00:18.409 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 01:00:18.411 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:18.412 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.412 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:00:18.413 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.414 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:18.475 +02:00 [DBG] Creating JWT token for user a06c9a74-d53e-4235-a0b9-681147a73dfc
2025-11-29 01:00:18.477 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.478 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.479 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:18.479 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:18.480 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:18.481 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 01:00:18.484 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 01:00:18.485 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.486 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:00:18.487 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.488 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:18.489 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.490 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.491 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:18.492 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:18.492 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:18.493 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:00:18.498 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:00:18.500 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.501 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:00:18.501 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.502 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:18.503 +02:00 [DBG] JWT token created for user a06c9a74-d53e-4235-a0b9-681147a73dfc, expires at "2025-11-29T00:00:18.0000000Z"
2025-11-29 01:00:18.504 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.505 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.506 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:18.506 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:18.507 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:18.508 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:00:18.510 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:00:18.511 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.512 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:00:18.513 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.514 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:18.516 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.517 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.518 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:18.519 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:18.519 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:18.520 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 01:00:18.523 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 01:00:18.525 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.525 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:00:18.526 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.527 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:18.528 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:18.529 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:00:18.530 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:00:18.531 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:00:18.531 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:00:18.532 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:00:18.533 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.534 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.534 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:18.535 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:18.536 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:18.537 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 01:00:18.542 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 01:00:18.544 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.545 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:00:18.546 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.546 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:18.547 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:18.549 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:00:18.550 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.551 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.551 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:18.552 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:18.553 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:18.554 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 01:00:18.556 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 01:00:18.558 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:18.559 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:18.560 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.561 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 01:00:18.562 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.563 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:00:18.564 +02:00 [INF] Patient 2 logged in successfully
2025-11-29 01:00:18.565 +02:00 [INF] User nour22110@gmail.com logged in successfully with roles: Patient
2025-11-29 01:00:18.566 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:00:18.567 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:00:18.568 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:00:18.568 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:00:18.568 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:00:18.569 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-29 01:00:18.570 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 182.9007ms
2025-11-29 01:00:18.571 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 01:00:18.572 +02:00 [DBG] Connection id "0HNHEOT0LBBJN" completed keep alive response.
2025-11-29 01:00:18.573 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:00:18.573 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:18.574 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:00:18.575 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 199.0719ms
2025-11-29 01:00:33.640 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Auth/login - application/json 66
2025-11-29 01:00:33.643 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 01:00:33.644 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-29 01:00:33.646 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 01:00:33.647 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:00:33.648 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:00:33.649 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 01:00:33.650 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-29 01:00:33.651 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:00:33.652 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:00:33.653 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:00:33.655 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:00:33.656 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:00:33.658 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 01:00:33.659 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 01:00:33.660 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 01:00:33.661 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-29 01:00:33.661 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:00:33.662 +02:00 [DBG] Connection id "0HNHEOT0LBBJN", Request id "0HNHEOT0LBBJN:00000002": started reading request body.
2025-11-29 01:00:33.663 +02:00 [DBG] Connection id "0HNHEOT0LBBJN", Request id "0HNHEOT0LBBJN:00000002": done reading request body.
2025-11-29 01:00:33.664 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-29 01:00:33.665 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 01:00:33.665 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 01:00:33.666 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 01:00:33.667 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 01:00:33.668 +02:00 [INF] Login called at "2025-11-29T01:00:33.6684850+02:00"
2025-11-29 01:00:33.669 +02:00 [INF] Login attempt for email: nour22110@gmail.com
2025-11-29 01:00:33.670 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:00:33.672 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:00:33.673 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:00:33.673 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.675 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.676 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:33.678 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:33.679 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-29 01:00:33.681 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 01:00:33.686 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 01:00:33.688 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:33.689 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.690 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 01:00:33.692 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.693 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:33.763 +02:00 [DBG] Creating JWT token for user a06c9a74-d53e-4235-a0b9-681147a73dfc
2025-11-29 01:00:33.764 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.765 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.766 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:33.767 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:33.768 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:33.769 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 01:00:33.772 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 01:00:33.773 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.774 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:00:33.775 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.776 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:33.777 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.778 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.779 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:33.779 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:33.780 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:33.781 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:00:33.784 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:00:33.785 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.786 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:00:33.787 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.788 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:33.789 +02:00 [DBG] JWT token created for user a06c9a74-d53e-4235-a0b9-681147a73dfc, expires at "2025-11-29T00:00:33.0000000Z"
2025-11-29 01:00:33.790 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.791 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.791 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:33.792 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:33.793 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:33.794 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:00:33.795 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:00:33.797 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.798 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:00:33.799 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.800 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:33.801 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.802 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.803 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:33.804 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:33.804 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:33.805 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 01:00:33.808 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 01:00:33.809 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.810 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:00:33.811 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.812 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:33.813 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:33.814 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:00:33.814 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:00:33.815 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:00:33.816 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:00:33.816 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:00:33.817 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.818 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.819 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:33.820 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:33.820 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:33.821 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 01:00:33.827 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 01:00:33.828 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.829 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:00:33.830 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.831 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:33.832 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:33.834 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:00:33.835 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.836 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.837 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:33.837 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:33.838 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:33.839 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 01:00:33.841 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 01:00:33.843 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:33.844 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:33.845 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.846 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 01:00:33.847 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.848 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:00:33.849 +02:00 [INF] Patient 2 logged in successfully
2025-11-29 01:00:33.850 +02:00 [INF] User nour22110@gmail.com logged in successfully with roles: Patient
2025-11-29 01:00:33.850 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:00:33.852 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:00:33.852 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:00:33.853 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:00:33.853 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:00:33.854 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-29 01:00:33.855 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 197.2533ms
2025-11-29 01:00:33.856 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 01:00:33.856 +02:00 [DBG] Connection id "0HNHEOT0LBBJN" completed keep alive response.
2025-11-29 01:00:33.857 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:00:33.858 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:33.859 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:00:33.860 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 219.3444ms
2025-11-29 01:00:37.153 +02:00 [DBG] Connection id "0HNHEOT0LBBJO" accepted.
2025-11-29 01:00:37.154 +02:00 [DBG] Connection id "0HNHEOT0LBBJO" started.
2025-11-29 01:00:37.158 +02:00 [DBG] Connection 0HNHEOT0LBBJO established using the following protocol: "Tls13"
2025-11-29 01:00:37.160 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 01:00:37.166 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 01:00:37.167 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 01:00:37.168 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:00:37.168 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:00:37.169 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:00:37.170 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:00:37.170 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:00:37.171 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:00:37.172 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 01:00:37.173 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:00:37.174 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:00:37.175 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:00:37.177 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:00:37.178 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:00:37.179 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:00:37.180 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:00:37.181 +02:00 [INF] get all schedule called at "2025-11-29T01:00:37.1811610+02:00"
2025-11-29 01:00:37.181 +02:00 [INF] Fetching all schedules
2025-11-29 01:00:37.182 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:00:37.184 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:00:37.184 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:00:37.185 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:37.186 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:37.187 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:37.187 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:37.188 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:37.189 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:00:37.196 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:00:37.197 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.199 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.199 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.200 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.201 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.202 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.203 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.203 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.204 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.205 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.206 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.207 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.207 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.208 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.209 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.210 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.211 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.212 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.213 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.213 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.214 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.215 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.216 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.217 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.217 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.218 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.219 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.220 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.221 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.222 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.222 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.223 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.224 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.225 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.226 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.227 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.228 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.229 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.230 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.231 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.231 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.232 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.233 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:37.234 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:37.235 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 37ms reading results.
2025-11-29 01:00:37.236 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:37.236 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:37.237 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:00:37.239 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:00:37.240 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:00:37.240 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:00:37.241 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:00:37.241 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:00:37.243 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 64.0398ms
2025-11-29 01:00:37.244 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:00:37.245 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:00:37.245 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:37.246 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:00:37.247 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 87.8818ms
2025-11-29 01:00:45.485 +02:00 [DBG] Connection id "0HNHEOT0LBBJO" received FIN.
2025-11-29 01:00:45.486 +02:00 [DBG] Connection id "0HNHEOT0LBBJO" is closed. The last processed stream ID was 1.
2025-11-29 01:00:45.486 +02:00 [DBG] Connection id "0HNHEOT0LBBJO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:00:45.488 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJO completed.
2025-11-29 01:00:45.489 +02:00 [DBG] Connection id "0HNHEOT0LBBJO" stopped.
2025-11-29 01:00:50.894 +02:00 [DBG] Connection id "0HNHEOT0LBBJP" accepted.
2025-11-29 01:00:50.895 +02:00 [DBG] Connection id "0HNHEOT0LBBJP" started.
2025-11-29 01:00:50.899 +02:00 [DBG] Connection 0HNHEOT0LBBJP established using the following protocol: "Tls13"
2025-11-29 01:00:50.900 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 01:00:50.903 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 01:00:50.904 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 01:00:50.905 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:00:50.906 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:00:50.906 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:00:50.907 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:00:50.907 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:00:50.908 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:00:50.909 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:00:50.910 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:00:50.911 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:00:50.912 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:00:50.913 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:00:50.914 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:00:50.914 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:00:50.915 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:00:50.916 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:00:50.917 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:00:50.918 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:00:50.919 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:00:50.920 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:00:50.921 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:00:50.921 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:00:50.9218251+02:00"
2025-11-29 01:00:50.922 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 01:00:50.923 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:00:50.924 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:00:50.925 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:00:50.926 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:50.927 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:50.927 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:50.928 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:50.929 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:50.930 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:00:50.940 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:00:50.941 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:50.942 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:50.943 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:50.944 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:50.945 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:50.946 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:50.946 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:50.947 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:50.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:50.949 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:50.950 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:50.951 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:50.952 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-29 01:00:50.953 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:50.954 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:00:50.955 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:00:50.956 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:00:50.957 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:00:50.958 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:00:50.958 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:00:50.959 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:00:50.960 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 45.732ms
2025-11-29 01:00:50.961 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:00:50.962 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:00:50.962 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:50.963 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:00:50.964 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 64.2555ms
2025-11-29 01:00:54.716 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:00:54.717 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:00:54.718 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:00:54.719 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:00:54.719 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:00:54.720 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:00:54.721 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:00:54.721 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 6.0366ms
2025-11-29 01:00:54.723 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:00:54.725 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:00:54.726 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:00:54.727 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:00:54.727 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:00:54.728 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:00:54.729 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:00:54.729 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:00:54.730 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:00:54.731 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:00:54.732 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:00:54.733 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:00:54.734 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:00:54.735 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:00:54.736 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:00:54.736 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:00:54.737 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:00:54.738 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:00:54.739 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:00:54.740 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:00:54.741 +02:00 [DBG] Connection id "0HNHEOT0LBBJP", Request id "0HNHEOT0LBBJP:00000005": started reading request body.
2025-11-29 01:00:54.741 +02:00 [DBG] Connection id "0HNHEOT0LBBJP", Request id "0HNHEOT0LBBJP:00000005": done reading request body.
2025-11-29 01:00:54.742 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:00:54.743 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:00:54.744 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:00:54.745 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:00:54.745 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:00:54.746 +02:00 [INF] Add Appointment called at "2025-11-29T01:00:54.7467294+02:00"
2025-11-29 01:00:54.747 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-12-07", Shift: "Evening"
2025-11-29 01:00:54.748 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:00:54.749 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:00:54.750 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:00:54.751 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:54.752 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:54.753 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:00:54.754 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:00:54.755 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:54.756 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:54.757 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:54.757 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:00:54.767 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:00:54.769 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.770 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.771 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.772 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:54.773 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 01:00:54.774 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:54.775 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:54.775 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:54.776 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:00:54.790 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:00:54.792 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.794 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.794 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.795 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.796 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.797 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.798 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.799 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.800 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.801 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.802 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.803 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:54.804 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-29 01:00:54.805 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:54.806 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:54.807 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:54.808 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:00:54.810 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:00:54.812 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:54.813 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:00:54.815 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:54.816 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:00:54.817 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:54.818 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:00:54.823 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:00:54.825 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:54.826 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:00:54.828 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.830 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.831 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.832 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.833 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.834 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:00:54.835 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:00:54.836 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:00:54.837 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:00:54.838 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:00:54.839 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 01:00:54.842 +02:00 [DBG] Created transaction savepoint.
2025-11-29 01:00:54.843 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:00:54.844 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:00:54.846 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 01:00:54.847 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:00:54.853 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:00:54.855 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 01:00:54.856 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:54.858 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 01:00:54.860 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:00:54.862 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:00:54.863 +02:00 [DBG] Committing transaction.
2025-11-29 01:00:54.864 +02:00 [DBG] Committed transaction.
2025-11-29 01:00:54.864 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:54.865 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:00:54.866 +02:00 [INF] Appointment created successfully with ID: 14
2025-11-29 01:00:54.867 +02:00 [DBG] Disposing transaction.
2025-11-29 01:00:54.868 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:00:54.870 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:00:54.870 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:00:54.871 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:00:54.871 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:00:54.872 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 01:00:54.873 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[14],action=[GetById],controller=[Appointment])
2025-11-29 01:00:54.875 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/14 and 
2025-11-29 01:00:54.876 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/14
2025-11-29 01:00:54.878 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 141.1405ms
2025-11-29 01:00:54.879 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:00:54.880 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:00:54.880 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:00:54.881 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:00:54.883 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 159.8632ms
2025-11-29 01:00:54.883 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 01:00:54.887 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:00:54.888 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:00:54.889 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:00:54.889 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:00:54.890 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:00:54.891 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:00:54.891 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 8.1787ms
2025-11-29 01:00:54.893 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 01:00:54.896 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:00:54.897 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 01:00:54.898 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 01:00:54.899 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:00:54.899 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:00:54.900 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:00:54.901 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:00:54.901 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-29 01:00:54.902 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Patient)
2025-11-29 01:00:54.903 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-29 01:00:54.904 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 401 0 null 10.7869ms
2025-11-29 01:00:54.906 +02:00 [DBG] Connection id "0HNHEOT0LBBJP", Request id "0HNHEOT0LBBJP:00000009": started reading request body.
2025-11-29 01:00:54.907 +02:00 [DBG] Connection id "0HNHEOT0LBBJP", Request id "0HNHEOT0LBBJP:00000009": done reading request body.
2025-11-29 01:00:55.486 +02:00 [DBG] Connection id "0HNHEOT0LBBJP" received FIN.
2025-11-29 01:00:55.487 +02:00 [DBG] Connection id "0HNHEOT0LBBJP" is closed. The last processed stream ID was 9.
2025-11-29 01:00:55.487 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJP completed.
2025-11-29 01:00:55.488 +02:00 [DBG] Connection id "0HNHEOT0LBBJP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:00:55.490 +02:00 [DBG] Connection id "0HNHEOT0LBBJP" stopped.
2025-11-29 01:01:10.466 +02:00 [DBG] Connection id "0HNHEOT0LBBJQ" accepted.
2025-11-29 01:01:10.467 +02:00 [DBG] Connection id "0HNHEOT0LBBJQ" started.
2025-11-29 01:01:10.470 +02:00 [DBG] Connection 0HNHEOT0LBBJQ established using the following protocol: "Tls13"
2025-11-29 01:01:10.471 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:01:10.473 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:01:10.474 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:01:10.475 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:01:10.475 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:01:10.476 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:01:10.476 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:01:10.477 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.7671ms
2025-11-29 01:01:10.478 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:01:10.481 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:01:10.481 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:01:10.483 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:01:10.483 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:01:10.484 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:01:10.484 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:01:10.485 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:01:10.485 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:01:10.486 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:01:10.487 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:01:10.488 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:01:10.489 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:01:10.490 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:01:10.491 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:01:10.492 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:01:10.493 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:01:10.494 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:01:10.494 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:01:10.495 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:01:10.496 +02:00 [DBG] Connection id "0HNHEOT0LBBJQ", Request id "0HNHEOT0LBBJQ:00000003": started reading request body.
2025-11-29 01:01:10.497 +02:00 [DBG] Connection id "0HNHEOT0LBBJQ", Request id "0HNHEOT0LBBJQ:00000003": done reading request body.
2025-11-29 01:01:10.498 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:01:10.498 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:01:10.499 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:01:10.500 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:01:10.501 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:01:10.501 +02:00 [INF] Add Appointment called at "2025-11-29T01:01:10.5019923+02:00"
2025-11-29 01:01:10.502 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-12-07", Shift: "Evening"
2025-11-29 01:01:10.503 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:01:10.505 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:01:10.505 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:01:10.506 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:10.506 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:10.507 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:01:10.508 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:01:10.509 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:10.510 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:10.510 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:10.511 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:01:10.521 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:01:10.524 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:10.525 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:10.526 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:10.526 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:10.527 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-29 01:01:10.529 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:10.529 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:10.530 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:10.531 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:01:10.539 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:01:10.541 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:10.542 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:10.543 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:10.544 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:10.545 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:10.545 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:10.546 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:10.547 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:10.548 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:10.549 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:10.549 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:10.550 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:10.551 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-29 01:01:10.552 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:10.553 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:10.554 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:10.554 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:01:10.557 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:01:10.558 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:10.559 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:01:10.560 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:10.561 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:10.561 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:10.562 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:01:10.566 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:01:10.567 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:10.568 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:01:10.581 +02:00 [DBG] Rolling back transaction.
2025-11-29 01:01:10.582 +02:00 [DBG] Rolled back transaction.
2025-11-29 01:01:10.583 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:10.583 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:01:10.584 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 1
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-29 01:01:10.597 +02:00 [DBG] Disposing transaction.
2025-11-29 01:01:10.624 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 131.721ms
2025-11-29 01:01:10.625 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:01:10.654 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-29 01:01:10.659 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:01:10.660 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:10.660 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:01:10.661 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 183.4589ms
2025-11-29 01:01:13.812 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 01:01:13.816 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 01:01:13.817 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 01:01:13.818 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:01:13.819 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:01:13.820 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:01:13.821 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:01:13.821 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:01:13.822 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:01:13.823 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 01:01:13.825 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:01:13.826 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:01:13.827 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:01:13.828 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:01:13.829 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:01:13.830 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:01:13.831 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:01:13.832 +02:00 [INF] get all schedule called at "2025-11-29T01:01:13.8322670+02:00"
2025-11-29 01:01:13.832 +02:00 [INF] Fetching all schedules
2025-11-29 01:01:13.833 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:01:13.835 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:01:13.835 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:01:13.836 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:13.837 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:13.839 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:13.840 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:13.840 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:13.841 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:01:13.849 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:01:13.850 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.851 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.852 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.853 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.854 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.855 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.856 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.857 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.858 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.859 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.860 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.860 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.861 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.862 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.863 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.864 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.865 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.866 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.866 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.867 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.868 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.869 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.870 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.870 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.871 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.872 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.873 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.874 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.875 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.875 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.876 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.877 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.878 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.879 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.880 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.880 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.881 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.882 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.883 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.884 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.885 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.886 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.887 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:13.888 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:13.889 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 38ms reading results.
2025-11-29 01:01:13.890 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:13.890 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:01:13.892 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:01:13.893 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:01:13.894 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:01:13.894 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:01:13.895 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:01:13.895 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:01:13.897 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 67.0654ms
2025-11-29 01:01:13.898 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:01:13.899 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:01:13.900 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:13.901 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:01:13.902 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 90.0785ms
2025-11-29 01:01:15.489 +02:00 [DBG] Connection id "0HNHEOT0LBBJQ" received FIN.
2025-11-29 01:01:15.490 +02:00 [DBG] Connection id "0HNHEOT0LBBJQ" is closed. The last processed stream ID was 5.
2025-11-29 01:01:15.490 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJQ completed.
2025-11-29 01:01:15.490 +02:00 [DBG] Connection id "0HNHEOT0LBBJQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:01:15.493 +02:00 [DBG] Connection id "0HNHEOT0LBBJQ" stopped.
2025-11-29 01:01:27.468 +02:00 [DBG] Connection id "0HNHEOT0LBBJR" accepted.
2025-11-29 01:01:27.469 +02:00 [DBG] Connection id "0HNHEOT0LBBJR" started.
2025-11-29 01:01:27.472 +02:00 [DBG] Connection 0HNHEOT0LBBJR established using the following protocol: "Tls13"
2025-11-29 01:01:27.474 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 01:01:27.476 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 01:01:27.476 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 01:01:27.477 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:01:27.478 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:01:27.478 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:01:27.479 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:01:27.480 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:01:27.480 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:01:27.481 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:01:27.482 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:01:27.483 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:01:27.484 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:01:27.485 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:01:27.486 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:01:27.487 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:01:27.488 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:01:27.489 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:01:27.489 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:01:27.490 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:01:27.491 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:01:27.492 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:01:27.493 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:01:27.493 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:01:27.4938298+02:00"
2025-11-29 01:01:27.494 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 01:01:27.495 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:01:27.496 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:01:27.497 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:01:27.497 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:27.498 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:27.499 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:27.500 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:27.500 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:27.501 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:01:27.511 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:01:27.513 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:27.514 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:27.514 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:27.515 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:27.516 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:27.517 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:27.518 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:27.519 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:27.519 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:27.520 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:27.521 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:27.522 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:27.522 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-29 01:01:27.523 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:27.524 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:01:27.525 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:01:27.526 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:01:27.527 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:01:27.527 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:01:27.528 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:01:27.528 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:01:27.529 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 42.7139ms
2025-11-29 01:01:27.530 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:01:27.531 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:01:27.532 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:27.533 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:01:27.533 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 60.0128ms
2025-11-29 01:01:29.402 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:01:29.404 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:01:29.405 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:01:29.405 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:01:29.406 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:01:29.406 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:01:29.407 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:01:29.407 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.9958ms
2025-11-29 01:01:29.408 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:01:29.411 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:01:29.411 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:01:29.412 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:01:29.413 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:01:29.414 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:01:29.414 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:01:29.415 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:01:29.415 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:01:29.416 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:01:29.417 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:01:29.418 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:01:29.419 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:01:29.420 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:01:29.421 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:01:29.421 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:01:29.422 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:01:29.423 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:01:29.424 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:01:29.425 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:01:29.426 +02:00 [DBG] Connection id "0HNHEOT0LBBJR", Request id "0HNHEOT0LBBJR:00000005": started reading request body.
2025-11-29 01:01:29.427 +02:00 [DBG] Connection id "0HNHEOT0LBBJR", Request id "0HNHEOT0LBBJR:00000005": done reading request body.
2025-11-29 01:01:29.428 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:01:29.428 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:01:29.429 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:01:29.430 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:01:29.430 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:01:29.431 +02:00 [INF] Add Appointment called at "2025-11-29T01:01:29.4317432+02:00"
2025-11-29 01:01:29.432 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-12-14", Shift: "Evening"
2025-11-29 01:01:29.433 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:01:29.435 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:01:29.435 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:01:29.436 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:29.437 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:29.438 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:01:29.439 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:01:29.440 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:29.441 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:29.441 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:29.442 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:01:29.452 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:01:29.454 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.455 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.456 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.456 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:29.457 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 01:01:29.458 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:29.459 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:29.460 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:29.460 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:01:29.469 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:01:29.470 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.471 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.472 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.473 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.474 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.475 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.475 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.476 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.477 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.478 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.478 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.479 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:29.480 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-29 01:01:29.481 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:29.482 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:29.483 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:29.483 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:01:29.485 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:01:29.487 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:29.488 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:01:29.489 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:29.489 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:29.490 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:29.491 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:01:29.495 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:01:29.496 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:29.497 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:01:29.498 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.499 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.499 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.500 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.501 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.502 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:01:29.503 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:01:29.503 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:01:29.504 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:01:29.505 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:01:29.505 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 01:01:29.507 +02:00 [DBG] Created transaction savepoint.
2025-11-29 01:01:29.507 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:29.508 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:29.509 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:29.510 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:01:29.513 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:01:29.514 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 01:01:29.515 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:29.516 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:01:29.517 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:29.519 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:01:29.519 +02:00 [DBG] Committing transaction.
2025-11-29 01:01:29.521 +02:00 [DBG] Committed transaction.
2025-11-29 01:01:29.521 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:29.522 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:01:29.523 +02:00 [INF] Appointment created successfully with ID: 15
2025-11-29 01:01:29.524 +02:00 [DBG] Disposing transaction.
2025-11-29 01:01:29.525 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:01:29.526 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:01:29.526 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:01:29.527 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:01:29.527 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:01:29.528 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 01:01:29.529 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[15],action=[GetById],controller=[Appointment])
2025-11-29 01:01:29.530 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/15 and 
2025-11-29 01:01:29.531 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/15
2025-11-29 01:01:29.532 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 110.4531ms
2025-11-29 01:01:29.533 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:01:29.533 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:01:29.534 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:29.535 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:01:29.535 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 01:01:29.536 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 128.0549ms
2025-11-29 01:01:29.538 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:01:29.540 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:01:29.541 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:01:29.541 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:01:29.542 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:01:29.542 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:01:29.543 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 8.0106ms
2025-11-29 01:01:29.544 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 01:01:29.547 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:01:29.547 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 01:01:29.548 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 01:01:29.549 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:01:29.550 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:01:29.550 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:01:29.551 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:01:29.551 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-29 01:01:29.552 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Patient)
2025-11-29 01:01:29.553 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-29 01:01:29.553 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 401 0 null 9.0217ms
2025-11-29 01:01:29.555 +02:00 [DBG] Connection id "0HNHEOT0LBBJR", Request id "0HNHEOT0LBBJR:00000009": started reading request body.
2025-11-29 01:01:29.556 +02:00 [DBG] Connection id "0HNHEOT0LBBJR", Request id "0HNHEOT0LBBJR:00000009": done reading request body.
2025-11-29 01:01:31.974 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:01:31.977 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:01:31.978 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:01:31.979 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:01:31.979 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:01:31.980 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:01:31.981 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:01:31.981 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:01:31.982 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:01:31.983 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:01:31.984 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:01:31.985 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:01:31.986 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:01:31.987 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:01:31.988 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:01:31.989 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:01:31.990 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:01:31.991 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:01:31.992 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:01:31.993 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:01:31.994 +02:00 [DBG] Connection id "0HNHEOT0LBBJR", Request id "0HNHEOT0LBBJR:0000000B": started reading request body.
2025-11-29 01:01:31.995 +02:00 [DBG] Connection id "0HNHEOT0LBBJR", Request id "0HNHEOT0LBBJR:0000000B": done reading request body.
2025-11-29 01:01:31.996 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:01:31.996 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:01:31.997 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:01:31.998 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:01:31.999 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:01:32.000 +02:00 [INF] Add Appointment called at "2025-11-29T01:01:32.0001773+02:00"
2025-11-29 01:01:32.000 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-12-14", Shift: "Evening"
2025-11-29 01:01:32.002 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:01:32.003 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:01:32.004 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:01:32.004 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:32.005 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:32.006 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:01:32.007 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:01:32.008 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:32.009 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:32.010 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 01:01:32.011 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:01:32.022 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:01:32.023 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:32.024 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:32.025 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:32.026 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:32.027 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 01:01:32.028 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:32.028 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:32.029 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:32.030 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:01:32.039 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:01:32.040 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:32.041 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:32.042 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:32.043 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:32.043 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:32.044 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:32.045 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:32.046 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:32.047 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:32.047 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:32.048 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:32.049 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:32.050 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-29 01:01:32.051 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:32.051 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:32.052 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:32.053 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:01:32.055 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:01:32.056 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:32.057 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:01:32.058 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:32.059 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:32.060 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:32.061 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:01:32.064 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:01:32.065 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:32.066 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:01:32.080 +02:00 [DBG] Rolling back transaction.
2025-11-29 01:01:32.080 +02:00 [DBG] Rolled back transaction.
2025-11-29 01:01:32.081 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:32.082 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:01:32.083 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 1
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-29 01:01:32.096 +02:00 [DBG] Disposing transaction.
2025-11-29 01:01:32.123 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 133.6947ms
2025-11-29 01:01:32.124 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:01:32.152 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-29 01:01:32.157 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:01:32.158 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:32.158 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:01:32.159 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 185.3135ms
2025-11-29 01:01:33.578 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 01:01:33.580 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 01:01:33.581 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 01:01:33.582 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:01:33.583 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:01:33.584 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:01:33.585 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:01:33.585 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:01:33.586 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:01:33.587 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 01:01:33.588 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:01:33.589 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:01:33.590 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:01:33.591 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:01:33.592 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:01:33.593 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:01:33.594 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:01:33.595 +02:00 [INF] get all schedule called at "2025-11-29T01:01:33.5952127+02:00"
2025-11-29 01:01:33.595 +02:00 [INF] Fetching all schedules
2025-11-29 01:01:33.596 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:01:33.597 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:01:33.598 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:01:33.599 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:33.600 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:33.601 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:33.601 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:33.602 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:33.603 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:01:33.611 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:01:33.613 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.614 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.615 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.615 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.616 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.617 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.618 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.618 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.619 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.620 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.621 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.622 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.623 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.624 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.624 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.625 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.627 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.628 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.628 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.629 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.630 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.631 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.632 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.633 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.634 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.636 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.637 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.638 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.639 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.639 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.640 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.641 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.642 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.643 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.644 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.645 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.646 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.647 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.648 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.649 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.650 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.651 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.651 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:33.652 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:33.653 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 40ms reading results.
2025-11-29 01:01:33.654 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:33.655 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:01:33.656 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:01:33.657 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:01:33.658 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:01:33.658 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:01:33.659 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:01:33.659 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:01:33.661 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 68.1285ms
2025-11-29 01:01:33.662 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:01:33.663 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:01:33.664 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:33.665 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:01:33.666 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 87.7817ms
2025-11-29 01:01:35.494 +02:00 [DBG] Connection id "0HNHEOT0LBBJR" received FIN.
2025-11-29 01:01:35.495 +02:00 [DBG] Connection id "0HNHEOT0LBBJR" is closed. The last processed stream ID was 13.
2025-11-29 01:01:35.495 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJR completed.
2025-11-29 01:01:35.496 +02:00 [DBG] Connection id "0HNHEOT0LBBJR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:01:35.498 +02:00 [DBG] Connection id "0HNHEOT0LBBJR" stopped.
2025-11-29 01:01:39.826 +02:00 [DBG] Connection id "0HNHEOT0LBBJS" accepted.
2025-11-29 01:01:39.827 +02:00 [DBG] Connection id "0HNHEOT0LBBJS" started.
2025-11-29 01:01:39.830 +02:00 [DBG] Connection 0HNHEOT0LBBJS established using the following protocol: "Tls13"
2025-11-29 01:01:39.831 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/2 - null null
2025-11-29 01:01:39.833 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/2'
2025-11-29 01:01:39.834 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/2'
2025-11-29 01:01:39.835 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:01:39.836 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:01:39.836 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:01:39.837 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:01:39.837 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:01:39.838 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:01:39.839 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:01:39.840 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:01:39.841 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:01:39.842 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:01:39.843 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:01:39.844 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:01:39.846 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:01:39.847 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:01:39.848 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:01:39.848 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:01:39.849 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:01:39.850 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:01:39.851 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:01:39.852 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:01:39.853 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:01:39.8533584+02:00"
2025-11-29 01:01:39.854 +02:00 [INF] Fetching doctor with ID 2
2025-11-29 01:01:39.855 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:01:39.856 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:01:39.856 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:01:39.857 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:39.858 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:39.859 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:39.860 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:39.861 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:39.862 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:01:39.872 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:01:39.874 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:39.875 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:39.876 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:39.877 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:39.878 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:39.879 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:39.880 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:39.881 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:39.881 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:39.882 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:39.883 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-29 01:01:39.884 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:39.885 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:01:39.886 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:01:39.887 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:01:39.888 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:01:39.888 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:01:39.889 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:01:39.889 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:01:39.890 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 44.3333ms
2025-11-29 01:01:39.891 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:01:39.892 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:01:39.892 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:39.893 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:01:39.894 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/2 - 200 null application/json; charset=utf-8 63.1926ms
2025-11-29 01:01:42.071 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:01:42.073 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:01:42.073 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:01:42.074 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:01:42.075 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:01:42.075 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:01:42.076 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:01:42.076 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.6877ms
2025-11-29 01:01:42.077 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:01:42.080 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:01:42.081 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:01:42.082 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:01:42.082 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:01:42.083 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:01:42.083 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:01:42.084 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:01:42.085 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:01:42.085 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:01:42.086 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:01:42.087 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:01:42.088 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:01:42.089 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:01:42.090 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:01:42.091 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:01:42.092 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:01:42.092 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:01:42.093 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:01:42.094 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:01:42.095 +02:00 [DBG] Connection id "0HNHEOT0LBBJS", Request id "0HNHEOT0LBBJS:00000005": started reading request body.
2025-11-29 01:01:42.096 +02:00 [DBG] Connection id "0HNHEOT0LBBJS", Request id "0HNHEOT0LBBJS:00000005": done reading request body.
2025-11-29 01:01:42.097 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:01:42.098 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:01:42.098 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:01:42.099 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:01:42.100 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:01:42.101 +02:00 [INF] Add Appointment called at "2025-11-29T01:01:42.1013925+02:00"
2025-11-29 01:01:42.101 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 2, Date: "2025-12-14", Shift: "Morning"
2025-11-29 01:01:42.103 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:01:42.104 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:01:42.105 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:01:42.105 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:42.106 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:42.107 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:01:42.108 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:01:42.109 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:42.109 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:42.110 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:42.111 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:01:42.121 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:01:42.123 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.124 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.124 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.125 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:42.126 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 01:01:42.127 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:42.128 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:42.128 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:42.129 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:01:42.137 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:01:42.139 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.140 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.141 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.141 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.142 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.143 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.144 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.145 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.146 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:42.147 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-29 01:01:42.148 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:42.149 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:42.149 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:42.150 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:01:42.153 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:01:42.154 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:42.155 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:01:42.156 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:42.156 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:42.157 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:42.158 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:01:42.162 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:01:42.163 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:42.164 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:01:42.165 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.166 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.167 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.168 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.168 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.169 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:01:42.170 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:01:42.171 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:01:42.171 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:01:42.172 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:01:42.173 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 01:01:42.174 +02:00 [DBG] Created transaction savepoint.
2025-11-29 01:01:42.175 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:42.175 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:42.176 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:01:42.177 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:01:42.180 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:01:42.182 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 01:01:42.183 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:42.183 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:01:42.184 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.186 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:01:42.189 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Payment.PaymentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.203 +02:00 [DBG] The navigation 'Payment.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.205 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.205 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.207 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:01:42.213 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:01:42.215 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:01:42.215 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:01:42.216 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:01:42.217 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 01:01:42.218 +02:00 [DBG] Created transaction savepoint.
2025-11-29 01:01:42.219 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:01:42.220 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:01:42.223 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-29 01:01:42.224 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-29 01:01:42.229 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-29 01:01:42.231 +02:00 [DBG] The foreign key property 'Payment.PaymentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 01:01:42.232 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:42.233 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 01:01:42.235 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:01:42.236 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:01:42.237 +02:00 [DBG] Committing transaction.
2025-11-29 01:01:42.238 +02:00 [DBG] Committed transaction.
2025-11-29 01:01:42.238 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:42.239 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:01:42.240 +02:00 [INF] Appointment created successfully with ID: 16
2025-11-29 01:01:42.241 +02:00 [DBG] Disposing transaction.
2025-11-29 01:01:42.241 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:01:42.243 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:01:42.243 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:01:42.244 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:01:42.244 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:01:42.245 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 01:01:42.246 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[16],action=[GetById],controller=[Appointment])
2025-11-29 01:01:42.246 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/16 and 
2025-11-29 01:01:42.248 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/16
2025-11-29 01:01:42.249 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 157.7927ms
2025-11-29 01:01:42.249 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:01:42.250 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:01:42.251 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:01:42.251 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:01:42.252 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 174.9338ms
2025-11-29 01:01:45.495 +02:00 [DBG] Connection id "0HNHEOT0LBBJS" received FIN.
2025-11-29 01:01:45.496 +02:00 [DBG] Connection id "0HNHEOT0LBBJS" is closed. The last processed stream ID was 5.
2025-11-29 01:01:45.496 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJS completed.
2025-11-29 01:01:45.497 +02:00 [DBG] Connection id "0HNHEOT0LBBJS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:01:45.500 +02:00 [DBG] Connection id "0HNHEOT0LBBJS" stopped.
2025-11-29 01:03:19.136 +02:00 [DBG] Connection id "0HNHEOT0LBBJT" accepted.
2025-11-29 01:03:19.142 +02:00 [DBG] Connection id "0HNHEOT0LBBJT" started.
2025-11-29 01:03:19.146 +02:00 [DBG] Connection 0HNHEOT0LBBJT established using the following protocol: "Tls13"
2025-11-29 01:03:19.152 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 01:03:19.157 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 01:03:19.158 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 01:03:19.159 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:03:19.160 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:03:19.161 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:03:19.161 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:03:19.162 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:03:19.163 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:03:19.163 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 01:03:19.165 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:03:19.166 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:03:19.167 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:03:19.168 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:03:19.169 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:03:19.170 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:03:19.171 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:03:19.173 +02:00 [INF] get all schedule called at "2025-11-29T01:03:19.1730081+02:00"
2025-11-29 01:03:19.174 +02:00 [INF] Fetching all schedules
2025-11-29 01:03:19.175 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:03:19.177 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:03:19.178 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-29 01:03:19.178 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:19.180 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:19.181 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:03:19.182 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:03:19.183 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:03:19.183 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:03:19.191 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:03:19.193 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.194 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.194 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.195 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.196 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.197 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.198 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.198 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.199 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.200 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.201 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.202 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.203 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.203 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.204 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.205 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.206 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.207 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.208 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.208 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.209 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.210 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.211 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.212 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.212 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.213 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.214 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.215 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.216 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.216 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.217 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.218 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.219 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.219 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.220 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.221 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.222 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.223 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.223 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.224 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.225 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.226 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.227 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:19.227 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:19.228 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 35ms reading results.
2025-11-29 01:03:19.229 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:19.230 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:03:19.231 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:03:19.233 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:03:19.233 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:03:19.234 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:03:19.234 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:03:19.235 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:03:19.237 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 66.6866ms
2025-11-29 01:03:19.238 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:03:19.239 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:03:19.239 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:19.240 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:03:19.241 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 89.6397ms
2025-11-29 01:03:25.450 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 01:03:25.452 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 01:03:25.453 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 01:03:25.454 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:03:25.455 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:03:25.456 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:03:25.456 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:03:25.457 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:03:25.458 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:03:25.458 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:03:25.460 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:03:25.461 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:03:25.462 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:03:25.463 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:03:25.464 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:03:25.465 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:03:25.467 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:03:25.468 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:03:25.468 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:03:25.469 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:03:25.470 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:03:25.471 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:03:25.472 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:03:25.472 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:03:25.4729732+02:00"
2025-11-29 01:03:25.473 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 01:03:25.474 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:03:25.476 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:03:25.476 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:03:25.477 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:25.478 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:25.478 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:03:25.479 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:03:25.480 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:03:25.481 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:03:25.491 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:03:25.493 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:25.494 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:25.495 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:25.496 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:25.496 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:25.497 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:25.498 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:25.499 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:25.500 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:25.500 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:25.501 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:25.502 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:25.503 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:25.504 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:25.504 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:25.505 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:25.506 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 01:03:25.507 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:25.508 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:03:25.509 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:03:25.510 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:03:25.511 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:03:25.511 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:03:25.511 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:03:25.512 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:03:25.513 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 48.2249ms
2025-11-29 01:03:25.514 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:03:25.515 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:03:25.516 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:25.517 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:03:25.517 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 67.4317ms
2025-11-29 01:03:27.525 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:03:27.526 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:03:27.527 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:03:27.528 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:03:27.528 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:03:27.529 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:03:27.529 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:03:27.530 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.7965ms
2025-11-29 01:03:27.531 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:03:27.533 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:03:27.534 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:03:27.535 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:03:27.536 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:03:27.536 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:03:27.537 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:03:27.537 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:03:27.538 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:03:27.539 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:03:27.540 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:03:27.540 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:03:27.541 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:03:27.542 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:03:27.543 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:03:27.544 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:03:27.545 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:03:27.546 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:03:27.547 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:03:27.547 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:03:27.548 +02:00 [DBG] Connection id "0HNHEOT0LBBJT", Request id "0HNHEOT0LBBJT:00000007": started reading request body.
2025-11-29 01:03:27.549 +02:00 [DBG] Connection id "0HNHEOT0LBBJT", Request id "0HNHEOT0LBBJT:00000007": done reading request body.
2025-11-29 01:03:27.550 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:03:27.551 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:03:27.551 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:03:27.552 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:03:27.553 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:03:27.554 +02:00 [INF] Add Appointment called at "2025-11-29T01:03:27.5540693+02:00"
2025-11-29 01:03:27.554 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 5, Date: "2025-12-20", Shift: "Afternoon"
2025-11-29 01:03:27.555 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:03:27.557 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:03:27.557 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:03:27.558 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:27.559 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:27.559 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:03:27.560 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:03:27.561 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:03:27.562 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:03:27.563 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:03:27.563 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:03:27.586 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:03:27.587 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.588 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.589 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.590 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:27.590 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 01:03:27.592 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:03:27.592 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:03:27.593 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:03:27.594 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:03:27.602 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:03:27.604 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.604 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.605 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.606 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.607 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.608 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.609 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.609 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.610 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.611 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.612 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.613 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.613 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.614 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.615 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.616 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:27.617 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 01:03:27.618 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:03:27.618 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:03:27.619 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:03:27.620 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:03:27.622 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:03:27.623 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:27.624 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:03:27.625 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:03:27.626 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:03:27.627 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:03:27.628 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:03:27.631 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:03:27.632 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:27.633 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:03:27.634 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.635 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.636 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.637 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.637 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.638 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:03:27.639 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:03:27.640 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:03:27.640 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:03:27.641 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:03:27.642 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 01:03:27.643 +02:00 [DBG] Created transaction savepoint.
2025-11-29 01:03:27.644 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:03:27.644 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:03:27.645 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:03:27.646 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:03:27.651 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:03:27.652 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 01:03:27.653 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:27.654 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:03:27.655 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:03:27.656 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:03:27.657 +02:00 [DBG] Committing transaction.
2025-11-29 01:03:27.658 +02:00 [DBG] Committed transaction.
2025-11-29 01:03:27.658 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:27.659 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:03:27.660 +02:00 [INF] Appointment created successfully with ID: 17
2025-11-29 01:03:27.660 +02:00 [DBG] Disposing transaction.
2025-11-29 01:03:27.661 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:03:27.662 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:03:27.663 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:03:27.663 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:03:27.664 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:03:27.664 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 01:03:27.665 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[17],action=[GetById],controller=[Appointment])
2025-11-29 01:03:27.666 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/17 and 
2025-11-29 01:03:27.668 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/17
2025-11-29 01:03:27.669 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 124.791ms
2025-11-29 01:03:27.670 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:03:27.671 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:03:27.671 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:03:27.672 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:03:27.673 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 01:03:27.674 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 142.6687ms
2025-11-29 01:03:27.675 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:03:27.678 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:03:27.679 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:03:27.679 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:03:27.680 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:03:27.680 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:03:27.681 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 8.5067ms
2025-11-29 01:03:27.682 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 01:03:27.685 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:03:27.685 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 01:03:27.686 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 01:03:27.687 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:03:27.688 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:03:27.688 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:03:27.689 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:03:27.689 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-29 01:03:27.690 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Patient)
2025-11-29 01:03:27.691 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-29 01:03:27.691 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 401 0 null 9.3089ms
2025-11-29 01:03:27.693 +02:00 [DBG] Connection id "0HNHEOT0LBBJT", Request id "0HNHEOT0LBBJT:0000000B": started reading request body.
2025-11-29 01:03:27.694 +02:00 [DBG] Connection id "0HNHEOT0LBBJT", Request id "0HNHEOT0LBBJT:0000000B": done reading request body.
2025-11-29 01:04:30.605 +02:00 [DBG] Connection id "0HNHEOT0LBBJT" received FIN.
2025-11-29 01:04:30.609 +02:00 [DBG] Connection id "0HNHEOT0LBBJT" is closed. The last processed stream ID was 11.
2025-11-29 01:04:30.609 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJT completed.
2025-11-29 01:04:30.631 +02:00 [DBG] Connection id "0HNHEOT0LBBJT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:04:30.633 +02:00 [DBG] Connection id "0HNHEOT0LBBJT" stopped.
2025-11-29 01:08:02.237 +02:00 [DBG] Connection id "0HNHEOT0LBBJU" accepted.
2025-11-29 01:08:02.243 +02:00 [DBG] Connection id "0HNHEOT0LBBJU" started.
2025-11-29 01:08:02.248 +02:00 [DBG] Connection 0HNHEOT0LBBJU established using the following protocol: "Tls13"
2025-11-29 01:08:02.255 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 01:08:02.262 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 01:08:02.263 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 01:08:02.264 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:08:02.265 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:08:02.266 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:08:02.267 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:08:02.268 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:08:02.268 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:08:02.269 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:08:02.271 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:08:02.272 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:08:02.274 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:08:02.275 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:08:02.276 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:08:02.277 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:08:02.279 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:08:02.280 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:08:02.281 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:08:02.282 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:08:02.283 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:08:02.284 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:08:02.286 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:08:02.287 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:08:02.2872863+02:00"
2025-11-29 01:08:02.288 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 01:08:02.289 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:08:02.291 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:08:02.292 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:08:02.292 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:02.294 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:02.295 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:08:02.295 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:08:02.296 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:08:02.298 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:08:02.317 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:08:02.319 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:02.320 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:02.321 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:02.322 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:02.323 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:02.325 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:02.326 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:02.327 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:02.328 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:02.329 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:02.330 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:02.330 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:02.331 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:02.333 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:02.334 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:02.335 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:02.336 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 17ms reading results.
2025-11-29 01:08:02.337 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:02.338 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:08:02.339 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:08:02.341 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:08:02.341 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:08:02.342 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:08:02.342 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:08:02.343 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:08:02.344 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 67.0664ms
2025-11-29 01:08:02.345 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:08:02.346 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:08:02.347 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:02.348 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:08:02.349 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 94.6964ms
2025-11-29 01:08:05.640 +02:00 [DBG] Connection id "0HNHEOT0LBBJU" received FIN.
2025-11-29 01:08:05.641 +02:00 [DBG] Connection id "0HNHEOT0LBBJU" is closed. The last processed stream ID was 1.
2025-11-29 01:08:05.641 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJU completed.
2025-11-29 01:08:05.641 +02:00 [DBG] Connection id "0HNHEOT0LBBJU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:08:05.644 +02:00 [DBG] Connection id "0HNHEOT0LBBJU" stopped.
2025-11-29 01:08:06.346 +02:00 [DBG] Connection id "0HNHEOT0LBBJV" accepted.
2025-11-29 01:08:06.347 +02:00 [DBG] Connection id "0HNHEOT0LBBJV" started.
2025-11-29 01:08:06.351 +02:00 [DBG] Connection 0HNHEOT0LBBJV established using the following protocol: "Tls13"
2025-11-29 01:08:06.352 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 01:08:06.361 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 01:08:06.362 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 01:08:06.364 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:08:06.365 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:08:06.366 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:08:06.367 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:08:06.367 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:08:06.368 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:08:06.369 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:08:06.370 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:08:06.371 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:08:06.372 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:08:06.374 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:08:06.375 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:08:06.376 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:08:06.377 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:08:06.378 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:08:06.379 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:08:06.380 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:08:06.381 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:08:06.382 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:08:06.383 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:08:06.384 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:08:06.3844737+02:00"
2025-11-29 01:08:06.385 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 01:08:06.386 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:08:06.388 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:08:06.388 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:08:06.389 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:06.390 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:06.391 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:08:06.392 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:08:06.392 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:08:06.393 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:08:06.404 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:08:06.405 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:06.406 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:06.407 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:06.408 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:06.409 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:06.410 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:06.411 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:06.412 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:06.413 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:06.414 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:06.414 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:06.415 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:06.416 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:06.417 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:06.418 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:06.419 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:06.420 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-29 01:08:06.421 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:06.421 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:08:06.423 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:08:06.424 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:08:06.425 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:08:06.425 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:08:06.426 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:08:06.427 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:08:06.428 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 52.4336ms
2025-11-29 01:08:06.429 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:08:06.430 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:08:06.431 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:06.432 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:08:06.433 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 81.1835ms
2025-11-29 01:08:12.607 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:08:12.609 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:08:12.610 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:08:12.611 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:08:12.611 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:08:12.612 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:08:12.613 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:08:12.613 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.7936ms
2025-11-29 01:08:12.614 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:08:12.617 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:08:12.617 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:08:12.618 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:08:12.619 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:08:12.619 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:08:12.620 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:08:12.621 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:08:12.621 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:08:12.622 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:08:12.623 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:08:12.624 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:08:12.625 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:08:12.626 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:08:12.627 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:08:12.628 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:08:12.629 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:08:12.629 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:08:12.630 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:08:12.631 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:08:12.632 +02:00 [DBG] Connection id "0HNHEOT0LBBJV", Request id "0HNHEOT0LBBJV:00000005": started reading request body.
2025-11-29 01:08:12.633 +02:00 [DBG] Connection id "0HNHEOT0LBBJV", Request id "0HNHEOT0LBBJV:00000005": done reading request body.
2025-11-29 01:08:12.634 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:08:12.634 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:08:12.635 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:08:12.636 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:08:12.636 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:08:12.637 +02:00 [INF] Add Appointment called at "2025-11-29T01:08:12.6377396+02:00"
2025-11-29 01:08:12.638 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 5, Date: "2025-12-20", Shift: "Afternoon"
2025-11-29 01:08:12.639 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:08:12.641 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:08:12.641 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:08:12.642 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:12.642 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:12.643 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:08:12.644 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:08:12.645 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:08:12.646 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:08:12.646 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:08:12.647 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:08:12.659 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:08:12.661 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.662 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.663 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.663 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:12.664 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 01:08:12.665 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:08:12.666 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:08:12.667 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:08:12.667 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:08:12.676 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:08:12.678 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.679 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.679 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.680 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.681 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.682 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.683 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.684 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.684 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.685 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.686 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.687 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.687 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.688 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.689 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:12.691 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:12.692 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 01:08:12.693 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:08:12.693 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:08:12.694 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:08:12.695 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:08:12.697 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:08:12.699 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:12.699 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:08:12.701 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:08:12.702 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:08:12.703 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:08:12.704 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:08:12.708 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:08:12.710 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:12.711 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:08:12.725 +02:00 [DBG] Rolling back transaction.
2025-11-29 01:08:12.725 +02:00 [DBG] Rolled back transaction.
2025-11-29 01:08:12.726 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:12.727 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:08:12.728 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 5
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-29 01:08:12.741 +02:00 [DBG] Disposing transaction.
2025-11-29 01:08:12.768 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 140.5619ms
2025-11-29 01:08:12.769 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:08:12.802 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-29 01:08:12.806 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:08:12.807 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:12.808 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:08:12.809 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 194.9353ms
2025-11-29 01:08:14.617 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 01:08:14.619 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 01:08:14.620 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 01:08:14.622 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:08:14.622 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:08:14.623 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:08:14.624 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:08:14.624 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:08:14.625 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:08:14.626 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 01:08:14.627 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:08:14.628 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:08:14.629 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:08:14.631 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:08:14.632 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:08:14.633 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:08:14.633 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:08:14.634 +02:00 [INF] get all schedule called at "2025-11-29T01:08:14.6348388+02:00"
2025-11-29 01:08:14.635 +02:00 [INF] Fetching all schedules
2025-11-29 01:08:14.636 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:08:14.637 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:08:14.638 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:08:14.638 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:14.639 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:14.640 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:08:14.641 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:08:14.641 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:08:14.642 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:08:14.649 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:08:14.651 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.652 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.653 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.654 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.654 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.655 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.656 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.657 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.658 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.659 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.659 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.660 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.661 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.662 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.663 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.663 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.664 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.665 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.666 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.667 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.668 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.669 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.669 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.670 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.671 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.672 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.673 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.674 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.675 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.676 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.676 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.677 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.678 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.679 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.680 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.681 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.682 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.683 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.684 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.685 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.686 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.687 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.688 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:14.689 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:14.690 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 39ms reading results.
2025-11-29 01:08:14.691 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:14.692 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:08:14.694 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:08:14.695 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:08:14.696 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:08:14.697 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:08:14.697 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:08:14.698 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:08:14.700 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 67.3019ms
2025-11-29 01:08:14.701 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:08:14.702 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:08:14.702 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:14.703 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:08:14.704 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 87.1767ms
2025-11-29 01:08:25.611 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 01:08:25.613 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 01:08:25.614 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 01:08:25.615 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:08:25.616 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:08:25.616 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:08:25.617 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:08:25.617 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:08:25.618 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:08:25.619 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:08:25.620 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:08:25.620 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:08:25.621 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:08:25.622 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:08:25.623 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:08:25.624 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:08:25.625 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:08:25.626 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:08:25.627 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:08:25.628 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:08:25.629 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:08:25.630 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:08:25.631 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:08:25.631 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:08:25.6319681+02:00"
2025-11-29 01:08:25.632 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 01:08:25.633 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:08:25.634 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:08:25.635 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:08:25.635 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:25.636 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:25.637 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:08:25.638 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:08:25.639 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:08:25.639 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:08:25.648 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:08:25.650 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:25.651 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:25.652 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:25.652 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:25.653 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:25.654 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:25.655 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:25.655 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:25.656 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:25.657 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:25.658 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:25.659 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:25.659 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:25.660 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:25.661 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:25.662 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:25.663 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 01:08:25.665 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:25.665 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:08:25.666 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:08:25.668 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:08:25.668 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:08:25.669 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:08:25.669 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:08:25.670 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:08:25.671 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 46.8734ms
2025-11-29 01:08:25.672 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:08:25.673 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:08:25.674 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:25.675 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:08:25.676 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 65.4728ms
2025-11-29 01:08:27.894 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:08:27.896 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:08:27.897 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:08:27.898 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:08:27.898 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:08:27.899 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:08:27.899 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:08:27.900 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 6.6517ms
2025-11-29 01:08:27.901 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:08:27.904 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:08:27.904 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:08:27.905 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:08:27.906 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:08:27.906 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:08:27.907 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:08:27.908 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:08:27.908 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:08:27.909 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:08:27.910 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:08:27.911 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:08:27.912 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:08:27.913 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:08:27.914 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:08:27.915 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:08:27.916 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:08:27.916 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:08:27.917 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:08:27.918 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:08:27.919 +02:00 [DBG] Connection id "0HNHEOT0LBBJV", Request id "0HNHEOT0LBBJV:0000000D": started reading request body.
2025-11-29 01:08:27.920 +02:00 [DBG] Connection id "0HNHEOT0LBBJV", Request id "0HNHEOT0LBBJV:0000000D": done reading request body.
2025-11-29 01:08:27.921 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:08:27.921 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:08:27.922 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:08:27.923 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:08:27.924 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:08:27.924 +02:00 [INF] Add Appointment called at "2025-11-29T01:08:27.9249421+02:00"
2025-11-29 01:08:27.925 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 5, Date: "2025-12-27", Shift: "Afternoon"
2025-11-29 01:08:27.926 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:08:27.928 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:08:27.928 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:08:27.929 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:27.930 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:27.931 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:08:27.931 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:08:27.932 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:08:27.933 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:08:27.934 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:08:27.935 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:08:27.945 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:08:27.947 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.948 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.949 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:27.950 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 01:08:27.951 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:08:27.952 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:08:27.953 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:08:27.954 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:08:27.963 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:08:27.965 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.966 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.967 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.968 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.969 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.970 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.971 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.972 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.973 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.974 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.974 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.975 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.976 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.977 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.978 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:27.979 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:27.980 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-29 01:08:27.981 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:08:27.982 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:08:27.983 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:08:27.984 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:08:27.986 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:08:27.988 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:27.989 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:08:27.990 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:08:27.991 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:08:27.991 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:08:27.992 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:08:27.996 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:08:27.997 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:27.998 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:08:27.999 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:28.000 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:28.001 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:28.002 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:28.002 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:28.003 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:08:28.004 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:08:28.005 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:08:28.006 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:08:28.007 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:08:28.007 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 01:08:28.009 +02:00 [DBG] Created transaction savepoint.
2025-11-29 01:08:28.009 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:08:28.010 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:08:28.011 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:08:28.012 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:08:28.016 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:08:28.018 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 01:08:28.019 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:28.020 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:08:28.021 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:08:28.022 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:08:28.023 +02:00 [DBG] Committing transaction.
2025-11-29 01:08:28.024 +02:00 [DBG] Committed transaction.
2025-11-29 01:08:28.024 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:28.025 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:08:28.026 +02:00 [INF] Appointment created successfully with ID: 18
2025-11-29 01:08:28.026 +02:00 [DBG] Disposing transaction.
2025-11-29 01:08:28.027 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:08:28.028 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:08:28.029 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:08:28.029 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:08:28.030 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:08:28.031 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 01:08:28.032 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[18],action=[GetById],controller=[Appointment])
2025-11-29 01:08:28.033 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/18 and 
2025-11-29 01:08:28.034 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/18
2025-11-29 01:08:28.035 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 120.1822ms
2025-11-29 01:08:28.036 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:08:28.036 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:08:28.037 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:08:28.038 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:08:28.039 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 01:08:28.039 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 138.3079ms
2025-11-29 01:08:28.041 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:08:28.044 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:08:28.044 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:08:28.045 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:08:28.045 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:08:28.046 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:08:28.047 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 8.3448ms
2025-11-29 01:08:28.048 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 01:08:28.051 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:08:28.051 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 01:08:28.052 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 01:08:28.053 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:08:28.053 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:08:28.054 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:08:28.063 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-11-29 01:08:28.065 +02:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-11-29 01:08:28.066 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-29 01:08:28.066 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Patient)
2025-11-29 01:08:28.068 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-29 01:08:28.069 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 401 0 null 20.8543ms
2025-11-29 01:08:28.071 +02:00 [DBG] Connection id "0HNHEOT0LBBJV", Request id "0HNHEOT0LBBJV:00000011": started reading request body.
2025-11-29 01:08:28.072 +02:00 [DBG] Connection id "0HNHEOT0LBBJV", Request id "0HNHEOT0LBBJV:00000011": done reading request body.
2025-11-29 01:08:35.648 +02:00 [DBG] Connection id "0HNHEOT0LBBJV" received FIN.
2025-11-29 01:08:35.649 +02:00 [DBG] Connection id "0HNHEOT0LBBJV" is closed. The last processed stream ID was 17.
2025-11-29 01:08:35.649 +02:00 [DBG] Connection id "0HNHEOT0LBBJV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:08:35.651 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBJV completed.
2025-11-29 01:08:35.652 +02:00 [DBG] Connection id "0HNHEOT0LBBJV" stopped.
2025-11-29 01:14:03.110 +02:00 [DBG] Connection id "0HNHEOT0LBBK0" accepted.
2025-11-29 01:14:03.116 +02:00 [DBG] Connection id "0HNHEOT0LBBK0" started.
2025-11-29 01:14:03.119 +02:00 [DBG] Connection 0HNHEOT0LBBK0 established using the following protocol: "Tls13"
2025-11-29 01:14:03.126 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 01:14:03.133 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 01:14:03.134 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 01:14:03.135 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:14:03.137 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:14:03.137 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:14:03.138 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:14:03.139 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:14:03.140 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:14:03.141 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:14:03.143 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:14:03.145 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:14:03.146 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:14:03.148 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:14:03.149 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:14:03.151 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:14:03.153 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:14:03.154 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:14:03.155 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:14:03.157 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:14:03.158 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:14:03.160 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:14:03.161 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:14:03.163 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:14:03.1633393+02:00"
2025-11-29 01:14:03.164 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 01:14:03.165 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:14:03.167 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:14:03.168 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:14:03.169 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:14:03.170 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:14:03.171 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:14:03.172 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:14:03.173 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 01:14:03.175 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:14:03.197 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:14:03.200 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:03.201 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:03.202 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:03.204 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:03.206 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:03.207 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:03.209 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:03.210 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:03.212 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:03.213 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:03.215 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:03.216 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:03.217 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:03.219 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:03.220 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:03.221 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:14:03.223 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 23ms reading results.
2025-11-29 01:14:03.224 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:14:03.225 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:14:03.227 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:14:03.229 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:14:03.229 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:14:03.230 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:14:03.231 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:14:03.232 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:14:03.234 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 82.8541ms
2025-11-29 01:14:03.235 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:14:03.236 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:14:03.237 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:14:03.238 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:14:03.239 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 113.91ms
2025-11-29 01:14:05.710 +02:00 [DBG] Connection id "0HNHEOT0LBBK0" received FIN.
2025-11-29 01:14:05.711 +02:00 [DBG] Connection id "0HNHEOT0LBBK0" is closed. The last processed stream ID was 1.
2025-11-29 01:14:05.711 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBK0 completed.
2025-11-29 01:14:05.712 +02:00 [DBG] Connection id "0HNHEOT0LBBK0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:14:05.715 +02:00 [DBG] Connection id "0HNHEOT0LBBK0" stopped.
2025-11-29 01:14:42.250 +02:00 [DBG] Connection id "0HNHEOT0LBBK1" accepted.
2025-11-29 01:14:42.251 +02:00 [DBG] Connection id "0HNHEOT0LBBK1" started.
2025-11-29 01:14:42.255 +02:00 [DBG] Connection 0HNHEOT0LBBK1 established using the following protocol: "Tls13"
2025-11-29 01:14:42.257 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 01:14:42.264 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 01:14:42.265 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 01:14:42.267 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:14:42.268 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:14:42.269 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:14:42.269 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:14:42.270 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:14:42.271 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:14:42.272 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:14:42.274 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:14:42.275 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:14:42.276 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:14:42.278 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:14:42.279 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:14:42.280 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:14:42.281 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:14:42.282 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:14:42.283 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:14:42.284 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:14:42.285 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:14:42.286 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:14:42.287 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:14:42.288 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:14:42.2889480+02:00"
2025-11-29 01:14:42.289 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 01:14:42.290 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:14:42.292 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:14:42.293 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:14:42.293 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:14:42.295 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:14:42.296 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:14:42.296 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:14:42.297 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:14:42.299 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:14:42.320 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:14:42.323 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:42.324 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:42.325 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:42.326 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:42.328 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:42.329 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:42.330 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:42.331 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:42.332 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:42.334 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:42.335 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:42.336 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:42.337 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:42.338 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:42.339 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:14:42.340 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:14:42.341 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 18ms reading results.
2025-11-29 01:14:42.343 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:14:42.344 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:14:42.345 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:14:42.347 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:14:42.348 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:14:42.348 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:14:42.349 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:14:42.350 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:14:42.351 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 71.1355ms
2025-11-29 01:14:42.352 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:14:42.353 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:14:42.354 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:14:42.356 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:14:42.357 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 100.1009ms
2025-11-29 01:14:45.715 +02:00 [DBG] Connection id "0HNHEOT0LBBK1" received FIN.
2025-11-29 01:14:45.716 +02:00 [DBG] Connection id "0HNHEOT0LBBK1" is closed. The last processed stream ID was 1.
2025-11-29 01:14:45.716 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBK1 completed.
2025-11-29 01:14:45.717 +02:00 [DBG] Connection id "0HNHEOT0LBBK1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:14:45.720 +02:00 [DBG] Connection id "0HNHEOT0LBBK1" stopped.
2025-11-29 01:15:16.243 +02:00 [DBG] Connection id "0HNHEOT0LBBK2" accepted.
2025-11-29 01:15:16.248 +02:00 [DBG] Connection id "0HNHEOT0LBBK2" started.
2025-11-29 01:15:16.251 +02:00 [DBG] Connection 0HNHEOT0LBBK2 established using the following protocol: "Tls13"
2025-11-29 01:15:16.258 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 01:15:16.261 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 01:15:16.262 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 01:15:16.263 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:15:16.264 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:15:16.265 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:15:16.266 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:15:16.266 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:15:16.267 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:15:16.268 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:15:16.269 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:15:16.271 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:15:16.272 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:15:16.273 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:15:16.274 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:15:16.275 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:15:16.276 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:15:16.277 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:15:16.278 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:15:16.280 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:15:16.280 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:15:16.281 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:15:16.282 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:15:16.283 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:15:16.2836851+02:00"
2025-11-29 01:15:16.284 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 01:15:16.285 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:15:16.287 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:15:16.288 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:15:16.289 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:16.290 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:16.291 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:15:16.292 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:15:16.293 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:15:16.294 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:15:16.313 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:15:16.315 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:16.316 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:16.317 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:16.319 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:16.320 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:16.321 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:16.322 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:16.323 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:16.324 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:16.325 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:16.326 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:16.327 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:16.329 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:16.330 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:16.331 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:16.332 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:16.333 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 17ms reading results.
2025-11-29 01:15:16.334 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:16.335 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:15:16.336 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:15:16.338 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:15:16.338 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:15:16.339 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:15:16.339 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:15:16.340 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:15:16.341 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 66.2819ms
2025-11-29 01:15:16.342 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:15:16.343 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:15:16.344 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:16.345 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:15:16.346 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 87.9308ms
2025-11-29 01:15:25.852 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:15:25.854 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:15:25.855 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:15:25.855 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:15:25.856 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:15:25.857 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:15:25.857 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:15:25.858 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 6.1066ms
2025-11-29 01:15:25.860 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:15:25.862 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:15:25.862 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:15:25.863 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:15:25.864 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:15:25.865 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:15:25.865 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:15:25.866 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:15:25.867 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:15:25.867 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:15:25.868 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:15:25.869 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:15:25.870 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:15:25.871 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:15:25.872 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:15:25.873 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:15:25.874 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:15:25.875 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:15:25.876 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:15:25.877 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:15:25.877 +02:00 [DBG] Connection id "0HNHEOT0LBBK2", Request id "0HNHEOT0LBBK2:00000005": started reading request body.
2025-11-29 01:15:25.878 +02:00 [DBG] Connection id "0HNHEOT0LBBK2", Request id "0HNHEOT0LBBK2:00000005": done reading request body.
2025-11-29 01:15:25.879 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:15:25.880 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:15:25.881 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:15:25.882 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:15:25.882 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:15:25.883 +02:00 [INF] Add Appointment called at "2025-11-29T01:15:25.8836938+02:00"
2025-11-29 01:15:25.884 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 5, Date: "2025-12-27", Shift: "Afternoon"
2025-11-29 01:15:25.885 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:15:25.887 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:15:25.888 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-29 01:15:25.889 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:25.890 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:25.891 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:15:25.892 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:15:25.893 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:15:25.894 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:15:25.894 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:15:25.895 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:15:25.911 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:15:25.912 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.913 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.914 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.915 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:25.916 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 01:15:25.917 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:15:25.918 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:15:25.919 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:15:25.920 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:15:25.931 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:15:25.932 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.933 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.934 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.935 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.936 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.937 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.939 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.940 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.941 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.942 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.943 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.945 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.946 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.947 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:25.947 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:25.948 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 15ms reading results.
2025-11-29 01:15:25.950 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:15:25.951 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:15:25.951 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:15:25.952 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:15:25.955 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:15:25.957 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:25.958 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:15:25.959 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:15:25.960 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:15:25.961 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:15:25.962 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:15:25.967 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:15:25.969 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:25.970 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:15:25.985 +02:00 [DBG] Rolling back transaction.
2025-11-29 01:15:25.986 +02:00 [DBG] Rolled back transaction.
2025-11-29 01:15:25.986 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:25.987 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:15:25.988 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 5
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-29 01:15:26.003 +02:00 [DBG] Disposing transaction.
2025-11-29 01:15:26.034 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 160.4542ms
2025-11-29 01:15:26.035 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:15:26.064 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-29 01:15:26.068 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:15:26.069 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:26.070 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:15:26.071 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 211.8071ms
2025-11-29 01:15:27.661 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 01:15:27.664 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 01:15:27.665 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 01:15:27.666 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:15:27.667 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:15:27.668 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:15:27.669 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:15:27.669 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:15:27.670 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:15:27.671 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 01:15:27.673 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:15:27.674 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:15:27.675 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:15:27.676 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:15:27.677 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:15:27.679 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:15:27.680 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:15:27.681 +02:00 [INF] get all schedule called at "2025-11-29T01:15:27.6816495+02:00"
2025-11-29 01:15:27.682 +02:00 [INF] Fetching all schedules
2025-11-29 01:15:27.683 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:15:27.684 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:15:27.685 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:15:27.685 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:27.686 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:27.687 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:15:27.688 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:15:27.689 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:15:27.690 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:15:27.697 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:15:27.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.699 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.700 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.701 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.702 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.703 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.703 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.704 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.705 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.706 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.706 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.707 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.708 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.709 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.710 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.710 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.711 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.712 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.713 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.714 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.715 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.715 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.716 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.717 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.718 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.719 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.719 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.720 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.721 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.722 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.722 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.723 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.724 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.725 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.726 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.726 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.727 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.728 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.729 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.730 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.731 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.731 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.732 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:27.733 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:27.734 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 35ms reading results.
2025-11-29 01:15:27.735 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:27.736 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:15:27.736 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:15:27.738 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:15:27.738 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:15:27.739 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:15:27.739 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:15:27.740 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:15:27.741 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 62.834ms
2025-11-29 01:15:27.742 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:15:27.743 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:15:27.744 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:27.745 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:15:27.745 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 84.1975ms
2025-11-29 01:15:37.867 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/3 - null null
2025-11-29 01:15:37.869 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/3'
2025-11-29 01:15:37.870 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/3'
2025-11-29 01:15:37.871 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:15:37.872 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:15:37.872 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:15:37.873 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:15:37.874 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:15:37.874 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:15:37.875 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:15:37.876 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:15:37.877 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:15:37.878 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:15:37.879 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:15:37.880 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:15:37.881 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:15:37.882 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:15:37.883 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:15:37.883 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:15:37.884 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:15:37.885 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:15:37.886 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:15:37.887 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:15:37.888 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:15:37.8881686+02:00"
2025-11-29 01:15:37.888 +02:00 [INF] Fetching doctor with ID 3
2025-11-29 01:15:37.889 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:15:37.890 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:15:37.891 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:15:37.892 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:37.892 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:37.893 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:15:37.894 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:15:37.895 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:15:37.895 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:15:37.905 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:15:37.906 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:37.907 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:37.908 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:37.909 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:37.910 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:37.911 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:37.912 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:37.912 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:37.913 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:37.914 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:37.915 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-29 01:15:37.916 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:37.917 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:15:37.918 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:15:37.920 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:15:37.920 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:15:37.921 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:15:37.921 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:15:37.922 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:15:37.923 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 42.378ms
2025-11-29 01:15:37.924 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:15:37.926 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:15:37.926 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:37.927 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:15:37.928 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/3 - 200 null application/json; charset=utf-8 61.0459ms
2025-11-29 01:15:40.255 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:15:40.256 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:15:40.257 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:15:40.258 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:15:40.258 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:15:40.259 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:15:40.259 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:15:40.260 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.4554ms
2025-11-29 01:15:40.261 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:15:40.264 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:15:40.264 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:15:40.265 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:15:40.266 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:15:40.266 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:15:40.267 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:15:40.268 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:15:40.268 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:15:40.269 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:15:40.270 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:15:40.271 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:15:40.272 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:15:40.273 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:15:40.274 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:15:40.275 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:15:40.276 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:15:40.276 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:15:40.277 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:15:40.278 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:15:40.279 +02:00 [DBG] Connection id "0HNHEOT0LBBK2", Request id "0HNHEOT0LBBK2:0000000D": started reading request body.
2025-11-29 01:15:40.280 +02:00 [DBG] Connection id "0HNHEOT0LBBK2", Request id "0HNHEOT0LBBK2:0000000D": done reading request body.
2025-11-29 01:15:40.280 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:15:40.281 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:15:40.282 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:15:40.283 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:15:40.283 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:15:40.284 +02:00 [INF] Add Appointment called at "2025-11-29T01:15:40.2846590+02:00"
2025-11-29 01:15:40.285 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 3, Date: "2025-12-09", Shift: "Morning"
2025-11-29 01:15:40.286 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:15:40.287 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:15:40.288 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:15:40.288 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:40.289 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:40.290 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:15:40.291 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:15:40.292 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:15:40.292 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:15:40.293 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:15:40.294 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:15:40.304 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:15:40.305 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.306 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.307 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.308 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:40.309 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 01:15:40.310 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:15:40.310 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:15:40.311 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:15:40.312 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:15:40.320 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:15:40.321 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.322 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.323 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.324 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.325 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.325 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.326 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.327 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.328 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.329 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:40.329 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-29 01:15:40.331 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:15:40.331 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:15:40.332 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:15:40.333 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:15:40.335 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:15:40.336 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:40.337 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:15:40.338 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:15:40.339 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:15:40.339 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:15:40.340 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:15:40.343 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:15:40.345 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:40.345 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:15:40.346 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.347 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.348 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.349 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.350 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.350 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:15:40.351 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:15:40.352 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:15:40.353 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:15:40.353 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:15:40.354 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 01:15:40.355 +02:00 [DBG] Created transaction savepoint.
2025-11-29 01:15:40.356 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:15:40.356 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:15:40.357 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:15:40.358 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:15:40.363 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:15:40.364 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 01:15:40.365 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:40.366 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:15:40.367 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:15:40.368 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:15:40.369 +02:00 [DBG] Committing transaction.
2025-11-29 01:15:40.369 +02:00 [DBG] Committed transaction.
2025-11-29 01:15:40.370 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:40.371 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:15:40.372 +02:00 [INF] Appointment created successfully with ID: 19
2025-11-29 01:15:40.372 +02:00 [DBG] Disposing transaction.
2025-11-29 01:15:40.373 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:15:40.374 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:15:40.375 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:15:40.375 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:15:40.376 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:15:40.377 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 01:15:40.377 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[19],action=[GetById],controller=[Appointment])
2025-11-29 01:15:40.379 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/19 and 
2025-11-29 01:15:40.380 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/19
2025-11-29 01:15:40.381 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 105.8464ms
2025-11-29 01:15:40.381 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:15:40.382 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:15:40.383 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:15:40.384 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:15:40.384 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 01:15:40.385 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 124.1372ms
2025-11-29 01:15:40.387 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:15:40.389 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:15:40.390 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:15:40.390 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:15:40.391 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:15:40.391 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:15:40.392 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 8.0124ms
2025-11-29 01:15:40.393 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 01:15:40.396 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:15:40.396 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 01:15:40.397 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 01:15:40.398 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:15:40.399 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:15:40.399 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:15:40.400 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:15:40.400 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-29 01:15:40.401 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Patient)
2025-11-29 01:15:40.402 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-29 01:15:40.402 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 401 0 null 9.3782ms
2025-11-29 01:15:40.405 +02:00 [DBG] Connection id "0HNHEOT0LBBK2", Request id "0HNHEOT0LBBK2:00000011": started reading request body.
2025-11-29 01:15:40.405 +02:00 [DBG] Connection id "0HNHEOT0LBBK2", Request id "0HNHEOT0LBBK2:00000011": done reading request body.
2025-11-29 01:15:45.724 +02:00 [DBG] Connection id "0HNHEOT0LBBK2" received FIN.
2025-11-29 01:15:45.725 +02:00 [DBG] Connection id "0HNHEOT0LBBK2" is closed. The last processed stream ID was 17.
2025-11-29 01:15:45.726 +02:00 [DBG] Connection id "0HNHEOT0LBBK2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:15:45.727 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBK2 completed.
2025-11-29 01:15:45.729 +02:00 [DBG] Connection id "0HNHEOT0LBBK2" stopped.
2025-11-29 01:15:59.970 +02:00 [DBG] Connection id "0HNHEOT0LBBK3" accepted.
2025-11-29 01:15:59.971 +02:00 [DBG] Connection id "0HNHEOT0LBBK3" started.
2025-11-29 01:15:59.975 +02:00 [DBG] Connection 0HNHEOT0LBBK3 established using the following protocol: "Tls13"
2025-11-29 01:15:59.978 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-11-29 01:15:59.984 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 01:15:59.985 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:15:59.986 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:15:59.987 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:15:59.987 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:15:59.988 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:15:59.988 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 11.1076ms
2025-11-29 01:15:59.990 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 54
2025-11-29 01:15:59.993 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 01:15:59.993 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-29 01:15:59.994 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 01:15:59.995 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:15:59.996 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:15:59.996 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:15:59.997 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:15:59.998 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 01:15:59.999 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-29 01:16:00.000 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:16:00.001 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:16:00.002 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:16:00.004 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:16:00.005 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:16:00.006 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 01:16:00.008 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 01:16:00.009 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 01:16:00.009 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-29 01:16:00.011 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:16:00.012 +02:00 [DBG] Connection id "0HNHEOT0LBBK3", Request id "0HNHEOT0LBBK3:00000003": started reading request body.
2025-11-29 01:16:00.012 +02:00 [DBG] Connection id "0HNHEOT0LBBK3", Request id "0HNHEOT0LBBK3:00000003": done reading request body.
2025-11-29 01:16:00.013 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-29 01:16:00.014 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 01:16:00.015 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 01:16:00.015 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 01:16:00.016 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 01:16:00.017 +02:00 [INF] Login called at "2025-11-29T01:16:00.0178317+02:00"
2025-11-29 01:16:00.018 +02:00 [INF] Login attempt for email: nour22110@gmail.com
2025-11-29 01:16:00.019 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:16:00.022 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:16:00.022 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:16:00.023 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.023 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.024 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:00.025 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:00.026 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:00.027 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 01:16:00.033 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 01:16:00.035 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:00.036 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.037 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 01:16:00.038 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.039 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:16:00.101 +02:00 [DBG] Creating JWT token for user a06c9a74-d53e-4235-a0b9-681147a73dfc
2025-11-29 01:16:00.103 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.104 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.105 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:00.105 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:00.106 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:00.107 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 01:16:00.110 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 01:16:00.112 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.112 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:16:00.113 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.114 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:16:00.116 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.117 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.118 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:00.118 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:00.119 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:00.120 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:16:00.125 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:16:00.126 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.127 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:16:00.128 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.129 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:16:00.130 +02:00 [DBG] JWT token created for user a06c9a74-d53e-4235-a0b9-681147a73dfc, expires at "2025-11-29T00:16:00.0000000Z"
2025-11-29 01:16:00.131 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.132 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.133 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:00.134 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:00.134 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:00.135 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:16:00.137 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:16:00.138 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.139 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:16:00.140 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.141 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:16:00.143 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.144 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.145 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:00.145 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:00.146 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:00.147 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 01:16:00.151 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 01:16:00.152 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.153 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:16:00.154 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.154 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:16:00.156 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:00.157 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:16:00.158 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:16:00.159 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:16:00.159 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:16:00.160 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:16:00.162 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.163 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.164 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:00.164 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:00.165 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:00.166 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 01:16:00.172 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 01:16:00.174 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.175 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:16:00.176 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.176 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:16:00.178 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:00.179 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:16:00.180 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.181 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.182 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:00.183 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:00.183 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:00.184 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 01:16:00.187 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 01:16:00.189 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:00.189 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:00.190 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.191 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 01:16:00.192 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.193 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:16:00.194 +02:00 [INF] Patient 2 logged in successfully
2025-11-29 01:16:00.195 +02:00 [INF] User nour22110@gmail.com logged in successfully with roles: Patient
2025-11-29 01:16:00.195 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:16:00.197 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:16:00.197 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:16:00.198 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:16:00.199 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:16:00.200 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-29 01:16:00.200 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 194.4923ms
2025-11-29 01:16:00.201 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 01:16:00.202 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:16:00.203 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:00.204 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:16:00.205 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 214.2226ms
2025-11-29 01:16:00.728 +02:00 [DBG] Connection id "0HNHEOT0LBBK3" received FIN.
2025-11-29 01:16:00.729 +02:00 [DBG] Connection id "0HNHEOT0LBBK3" is closed. The last processed stream ID was 3.
2025-11-29 01:16:00.729 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBK3 completed.
2025-11-29 01:16:00.729 +02:00 [DBG] Connection id "0HNHEOT0LBBK3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:16:00.732 +02:00 [DBG] Connection id "0HNHEOT0LBBK3" stopped.
2025-11-29 01:16:04.695 +02:00 [DBG] Connection id "0HNHEOT0LBBK4" accepted.
2025-11-29 01:16:04.696 +02:00 [DBG] Connection id "0HNHEOT0LBBK4" started.
2025-11-29 01:16:04.700 +02:00 [DBG] Connection 0HNHEOT0LBBK4 established using the following protocol: "Tls13"
2025-11-29 01:16:04.701 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 01:16:04.708 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 01:16:04.708 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 01:16:04.709 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:16:04.710 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:16:04.711 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:16:04.711 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:16:04.712 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:16:04.712 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:16:04.713 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 01:16:04.714 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:16:04.715 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:16:04.716 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:16:04.717 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:16:04.718 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:16:04.719 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:16:04.720 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:16:04.721 +02:00 [INF] get all schedule called at "2025-11-29T01:16:04.7211602+02:00"
2025-11-29 01:16:04.721 +02:00 [INF] Fetching all schedules
2025-11-29 01:16:04.722 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:16:04.724 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:16:04.724 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:16:04.725 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:04.726 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:04.727 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:04.728 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:04.729 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:04.730 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:16:04.738 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:16:04.740 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.741 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.742 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.743 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.745 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.746 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.748 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.749 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.750 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.751 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.752 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.753 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.754 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.755 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.756 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.757 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.758 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.759 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.760 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.761 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.762 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.763 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.764 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.765 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.766 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.767 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.768 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.770 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.770 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.771 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.772 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.773 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.774 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.774 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.775 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.776 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.777 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.778 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.779 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.779 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.781 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.782 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:04.783 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:04.783 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 43ms reading results.
2025-11-29 01:16:04.784 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:04.785 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:16:04.786 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:16:04.788 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:16:04.788 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:16:04.789 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:16:04.789 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:16:04.790 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:16:04.792 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 72.9935ms
2025-11-29 01:16:04.793 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:16:04.794 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:16:04.795 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:04.796 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:16:04.797 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 95.4927ms
2025-11-29 01:16:10.650 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/3 - null null
2025-11-29 01:16:10.652 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/3'
2025-11-29 01:16:10.653 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/3'
2025-11-29 01:16:10.654 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:16:10.655 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:16:10.656 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:16:10.657 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:16:10.657 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:16:10.658 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:16:10.659 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:16:10.660 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:16:10.661 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:16:10.663 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:16:10.664 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:16:10.665 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:16:10.666 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:16:10.667 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:16:10.668 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:16:10.669 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:16:10.671 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:16:10.672 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:16:10.673 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:16:10.674 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:16:10.675 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:16:10.6755425+02:00"
2025-11-29 01:16:10.676 +02:00 [INF] Fetching doctor with ID 3
2025-11-29 01:16:10.677 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:16:10.679 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:16:10.679 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:16:10.680 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:10.681 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:10.682 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:10.683 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:10.684 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:10.685 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:16:10.695 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:16:10.697 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:10.697 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:10.698 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:10.699 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:10.700 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:10.701 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:10.702 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:10.702 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:10.703 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:10.704 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:10.705 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-29 01:16:10.706 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:10.706 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:16:10.707 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:16:10.709 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:16:10.709 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:16:10.710 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:16:10.710 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:16:10.711 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:16:10.712 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 45.3755ms
2025-11-29 01:16:10.713 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:16:10.713 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:16:10.714 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:10.715 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:16:10.716 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/3 - 200 null application/json; charset=utf-8 66.2408ms
2025-11-29 01:16:12.096 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:16:12.098 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:16:12.099 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:16:12.099 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:16:12.100 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:16:12.100 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:16:12.101 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:16:12.102 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.5885ms
2025-11-29 01:16:12.103 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:16:12.105 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:16:12.106 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:16:12.107 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:16:12.108 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:16:12.108 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:16:12.109 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:16:12.110 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:16:12.110 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:16:12.111 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:16:12.112 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:16:12.113 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:16:12.114 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:16:12.115 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:16:12.116 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:16:12.117 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:16:12.118 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:16:12.118 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:16:12.119 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:16:12.120 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:16:12.121 +02:00 [DBG] Connection id "0HNHEOT0LBBK4", Request id "0HNHEOT0LBBK4:00000007": started reading request body.
2025-11-29 01:16:12.122 +02:00 [DBG] Connection id "0HNHEOT0LBBK4", Request id "0HNHEOT0LBBK4:00000007": done reading request body.
2025-11-29 01:16:12.123 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:16:12.124 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:16:12.125 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:16:12.125 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:16:12.126 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:16:12.127 +02:00 [INF] Add Appointment called at "2025-11-29T01:16:12.1274800+02:00"
2025-11-29 01:16:12.128 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 3, Date: "2025-12-09", Shift: "Morning"
2025-11-29 01:16:12.129 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:16:12.130 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:16:12.131 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:16:12.132 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:12.132 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:12.133 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:16:12.134 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:16:12.135 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:12.136 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:12.136 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:12.137 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:16:12.146 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:16:12.148 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:12.149 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:12.149 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:12.150 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:12.151 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 01:16:12.152 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:12.153 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:12.154 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:12.154 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:16:12.157 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:16:12.158 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:12.159 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:12.160 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:12.161 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:12.161 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:12.162 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:12.163 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:12.164 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:12.165 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:12.166 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:12.166 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-29 01:16:12.167 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:12.168 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:12.169 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:12.170 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:16:12.172 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:16:12.173 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:12.174 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:16:12.175 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:12.176 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:12.177 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:12.178 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:16:12.181 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:16:12.182 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:12.183 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:16:12.197 +02:00 [DBG] Rolling back transaction.
2025-11-29 01:16:12.198 +02:00 [DBG] Rolled back transaction.
2025-11-29 01:16:12.198 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:12.199 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:16:12.200 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 3
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-29 01:16:12.214 +02:00 [DBG] Disposing transaction.
2025-11-29 01:16:12.241 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 123.9804ms
2025-11-29 01:16:12.242 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:16:12.268 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-29 01:16:12.272 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:16:12.273 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:12.273 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:16:12.274 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 171.2743ms
2025-11-29 01:16:14.867 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 01:16:14.870 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 01:16:14.872 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 01:16:14.873 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:16:14.874 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:16:14.874 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:16:14.875 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:16:14.876 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:16:14.877 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:16:14.878 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 01:16:14.879 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:16:14.880 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:16:14.881 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:16:14.883 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:16:14.883 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:16:14.884 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:16:14.885 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:16:14.886 +02:00 [INF] get all schedule called at "2025-11-29T01:16:14.8867219+02:00"
2025-11-29 01:16:14.887 +02:00 [INF] Fetching all schedules
2025-11-29 01:16:14.888 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:16:14.889 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:16:14.890 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:16:14.890 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:14.891 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:14.892 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:14.893 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:14.893 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:14.894 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:16:14.899 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:16:14.901 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.902 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.903 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.905 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.906 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.907 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.908 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.908 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.910 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.911 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.912 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.913 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.914 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.915 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.916 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.917 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.919 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.920 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.920 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.921 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.922 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.923 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.924 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.925 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.925 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.926 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.927 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.928 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.928 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.929 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.930 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.931 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.932 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.933 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.933 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.934 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.935 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.936 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.936 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.938 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.939 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.939 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.940 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:14.941 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:14.942 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 40ms reading results.
2025-11-29 01:16:14.943 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:14.944 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:16:14.945 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:16:14.946 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:16:14.946 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:16:14.947 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:16:14.947 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:16:14.948 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:16:14.950 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 65.4813ms
2025-11-29 01:16:14.951 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:16:14.951 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:16:14.952 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:14.953 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:16:14.955 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 88.0502ms
2025-11-29 01:16:32.592 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/4 - null null
2025-11-29 01:16:32.595 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/4'
2025-11-29 01:16:32.595 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/4'
2025-11-29 01:16:32.597 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:16:32.598 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:16:32.598 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:16:32.599 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:16:32.600 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:16:32.601 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:16:32.602 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:16:32.603 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:16:32.604 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:16:32.605 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:16:32.607 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:16:32.608 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:16:32.609 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:16:32.610 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:16:32.612 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:16:32.612 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:16:32.614 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:16:32.615 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:16:32.616 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:16:32.617 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:16:32.618 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:16:32.6182355+02:00"
2025-11-29 01:16:32.618 +02:00 [INF] Fetching doctor with ID 4
2025-11-29 01:16:32.620 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:16:32.622 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:16:32.622 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:16:32.623 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:32.624 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:32.625 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:32.626 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:32.627 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:32.628 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:16:32.638 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:16:32.640 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:32.641 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:32.642 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:32.643 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:32.644 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:32.646 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:32.647 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:32.648 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:32.649 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:32.650 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:32.651 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-29 01:16:32.652 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:32.653 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:16:32.654 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:16:32.656 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:16:32.657 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:16:32.657 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:16:32.658 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:16:32.659 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:16:32.660 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 50.9688ms
2025-11-29 01:16:32.661 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:16:32.662 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:16:32.663 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:32.664 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:16:32.665 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/4 - 200 null application/json; charset=utf-8 73.0343ms
2025-11-29 01:16:34.408 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:16:34.410 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:16:34.410 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:16:34.411 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:16:34.412 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:16:34.412 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:16:34.413 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:16:34.413 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.4477ms
2025-11-29 01:16:34.414 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:16:34.417 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:16:34.417 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:16:34.418 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:16:34.419 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:16:34.419 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:16:34.420 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:16:34.421 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:16:34.421 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:16:34.422 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:16:34.423 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:16:34.424 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:16:34.425 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:16:34.426 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:16:34.427 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:16:34.428 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:16:34.429 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:16:34.430 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:16:34.431 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:16:34.432 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:16:34.433 +02:00 [DBG] Connection id "0HNHEOT0LBBK4", Request id "0HNHEOT0LBBK4:0000000F": started reading request body.
2025-11-29 01:16:34.434 +02:00 [DBG] Connection id "0HNHEOT0LBBK4", Request id "0HNHEOT0LBBK4:0000000F": done reading request body.
2025-11-29 01:16:34.435 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:16:34.436 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:16:34.437 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:16:34.438 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:16:34.438 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:16:34.439 +02:00 [INF] Add Appointment called at "2025-11-29T01:16:34.4396718+02:00"
2025-11-29 01:16:34.440 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 4, Date: "2025-12-09", Shift: "Afternoon"
2025-11-29 01:16:34.441 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:16:34.442 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:16:34.443 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:16:34.444 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:34.445 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:34.445 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:16:34.447 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:16:34.448 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:34.448 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:34.449 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:34.450 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:16:34.458 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:16:34.460 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.461 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.462 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.462 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:34.463 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 01:16:34.464 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:34.465 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:34.466 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:34.466 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:16:34.469 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:16:34.471 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.472 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.473 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.474 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.475 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.476 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.476 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.477 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.478 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.479 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:34.480 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-29 01:16:34.481 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:34.481 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:34.482 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:34.483 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:16:34.486 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:16:34.487 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:34.488 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:16:34.489 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:34.490 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:34.490 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:34.491 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:16:34.495 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:16:34.496 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:34.497 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:16:34.498 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.499 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.500 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.501 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.501 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.502 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:16:34.503 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:16:34.504 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:16:34.504 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:16:34.505 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:16:34.506 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 01:16:34.508 +02:00 [DBG] Created transaction savepoint.
2025-11-29 01:16:34.508 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:16:34.509 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:16:34.509 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:16:34.510 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:16:34.513 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:16:34.515 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 01:16:34.516 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:34.516 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:16:34.517 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:16:34.518 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:16:34.519 +02:00 [DBG] Committing transaction.
2025-11-29 01:16:34.520 +02:00 [DBG] Committed transaction.
2025-11-29 01:16:34.521 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:34.522 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:16:34.522 +02:00 [INF] Appointment created successfully with ID: 20
2025-11-29 01:16:34.523 +02:00 [DBG] Disposing transaction.
2025-11-29 01:16:34.524 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:16:34.525 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:16:34.525 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:16:34.526 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:16:34.526 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:16:34.527 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 01:16:34.528 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[20],action=[GetById],controller=[Appointment])
2025-11-29 01:16:34.529 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/20 and 
2025-11-29 01:16:34.530 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/20
2025-11-29 01:16:34.531 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 103.5204ms
2025-11-29 01:16:34.532 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:16:34.533 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:16:34.533 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:16:34.534 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:16:34.535 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 01:16:34.536 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 121.4202ms
2025-11-29 01:16:34.537 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:16:34.540 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:16:34.541 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:16:34.541 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:16:34.542 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:16:34.542 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:16:34.543 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 7.8027ms
2025-11-29 01:16:34.544 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 01:16:34.547 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:16:34.548 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 01:16:34.549 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 01:16:34.549 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:16:34.550 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:16:34.550 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:16:34.551 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:16:34.552 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-29 01:16:34.552 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Patient)
2025-11-29 01:16:34.553 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-29 01:16:34.553 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 401 0 null 9.5129ms
2025-11-29 01:16:34.556 +02:00 [DBG] Connection id "0HNHEOT0LBBK4", Request id "0HNHEOT0LBBK4:00000013": started reading request body.
2025-11-29 01:16:34.556 +02:00 [DBG] Connection id "0HNHEOT0LBBK4", Request id "0HNHEOT0LBBK4:00000013": done reading request body.
2025-11-29 01:16:34.557 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/refresh-token - text/plain 88
2025-11-29 01:16:34.559 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-11-29 01:16:34.560 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-11-29 01:16:34.560 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)'
2025-11-29 01:16:34.561 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:16:34.562 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:16:34.562 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:16:34.563 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:16:34.564 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)'
2025-11-29 01:16:34.564 +02:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken(Hospital.Application.DTO.Auth.RefreshToken) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-29 01:16:34.565 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:16:34.566 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:16:34.567 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:16:34.568 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:16:34.569 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:16:34.570 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 01:16:34.571 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 01:16:34.572 +02:00 [DBG] Attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken' ...
2025-11-29 01:16:34.573 +02:00 [DBG] Attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken' using the name '' in request data ...
2025-11-29 01:16:34.574 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'text/plain'.
2025-11-29 01:16:34.575 +02:00 [DBG] No input formatter was found to support the content type 'text/plain' for use with the [FromBody] attribute.
2025-11-29 01:16:34.576 +02:00 [DBG] Done attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken'.
2025-11-29 01:16:34.577 +02:00 [DBG] Done attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken'.
2025-11-29 01:16:34.578 +02:00 [DBG] Attempting to validate the bound parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken' ...
2025-11-29 01:16:34.579 +02:00 [DBG] Done attempting to validate the bound parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken'.
2025-11-29 01:16:34.580 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter'.
2025-11-29 01:16:34.581 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:16:34.582 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:16:34.583 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-29 01:16:34.584 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-29 01:16:34.585 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-11-29 01:16:34.586 +02:00 [INF] Executed action Hospital.Controllers.AuthController.RefreshToken (Hospital) in 16.2773ms
2025-11-29 01:16:34.587 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)'
2025-11-29 01:16:34.588 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/refresh-token - 415 null application/problem+json; charset=utf-8 31.2197ms
2025-11-29 01:16:34.590 +02:00 [DBG] Connection id "0HNHEOT0LBBK4", Request id "0HNHEOT0LBBK4:00000015": started reading request body.
2025-11-29 01:16:34.591 +02:00 [DBG] Connection id "0HNHEOT0LBBK4", Request id "0HNHEOT0LBBK4:00000015": done reading request body.
2025-11-29 01:20:39.651 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 01:20:39.658 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 01:20:39.659 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 01:20:39.660 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:20:39.661 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:20:39.662 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:20:39.662 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:20:39.663 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:20:39.664 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:20:39.665 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 01:20:39.666 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:20:39.667 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:20:39.668 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:20:39.670 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:20:39.671 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:20:39.672 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:20:39.673 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:20:39.674 +02:00 [INF] get all schedule called at "2025-11-29T01:20:39.6746772+02:00"
2025-11-29 01:20:39.675 +02:00 [INF] Fetching all schedules
2025-11-29 01:20:39.676 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:20:39.678 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:20:39.678 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:20:39.679 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:20:39.680 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:20:39.681 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:20:39.682 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:20:39.683 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:20:39.684 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:20:39.698 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:20:39.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.700 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.701 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.702 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.702 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.703 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.704 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.705 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.706 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.706 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.707 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.708 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.709 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.710 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.710 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.711 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.713 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.718 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.719 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.720 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.721 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.722 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.723 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.724 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.725 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.726 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.727 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.728 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.729 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.729 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.731 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.731 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.732 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.733 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.734 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.734 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.735 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.736 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.737 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.738 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.739 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.740 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.740 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:20:39.741 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:20:39.742 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 42ms reading results.
2025-11-29 01:20:39.743 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:20:39.744 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:20:39.745 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:20:39.746 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:20:39.747 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:20:39.747 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:20:39.748 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:20:39.748 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:20:39.750 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 77.624ms
2025-11-29 01:20:39.751 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:20:39.752 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:20:39.752 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:20:39.753 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:20:39.754 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 102.6435ms
2025-11-29 01:21:38.885 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/3 - null null
2025-11-29 01:21:38.891 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/3'
2025-11-29 01:21:38.892 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/3'
2025-11-29 01:21:38.893 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:21:38.894 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:21:38.894 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:21:38.895 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:21:38.895 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:21:38.896 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:21:38.897 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:21:38.898 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:21:38.899 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:21:38.900 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:21:38.902 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:21:38.903 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:21:38.904 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:21:38.905 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:21:38.906 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:21:38.908 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:21:38.909 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:21:38.911 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:21:38.912 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:21:38.913 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:21:38.914 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:21:38.9145271+02:00"
2025-11-29 01:21:38.915 +02:00 [INF] Fetching doctor with ID 3
2025-11-29 01:21:38.916 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:21:38.918 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:21:38.919 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:21:38.920 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:21:38.921 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:21:38.922 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:21:38.923 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:21:38.925 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 01:21:38.926 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:21:38.953 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:21:38.956 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:38.957 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:38.958 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:38.960 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:38.961 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:38.962 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:38.963 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:38.964 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:38.965 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:38.966 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:21:38.967 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-29 01:21:38.968 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:21:38.970 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:21:38.971 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:21:38.973 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:21:38.973 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:21:38.974 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:21:38.975 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:21:38.976 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:21:38.977 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 72.9213ms
2025-11-29 01:21:38.982 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:21:38.985 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:21:38.986 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:21:38.987 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:21:38.989 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/3 - 200 null application/json; charset=utf-8 104.1917ms
2025-11-29 01:21:52.623 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 01:21:52.625 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 01:21:52.626 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 01:21:52.628 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:21:52.629 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:21:52.629 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:21:52.630 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:21:52.630 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:21:52.631 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:21:52.632 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 01:21:52.633 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:21:52.634 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:21:52.635 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:21:52.636 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:21:52.637 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:21:52.638 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:21:52.638 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:21:52.639 +02:00 [INF] get all schedule called at "2025-11-29T01:21:52.6397761+02:00"
2025-11-29 01:21:52.640 +02:00 [INF] Fetching all schedules
2025-11-29 01:21:52.641 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:21:52.642 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:21:52.643 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:21:52.643 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:21:52.644 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:21:52.645 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:21:52.646 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:21:52.647 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:21:52.648 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:21:52.662 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:21:52.664 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.665 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.665 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.666 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.667 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.668 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.669 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.670 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.671 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.672 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.672 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.673 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.674 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.675 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.676 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.677 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.678 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.679 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.680 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.680 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.681 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.682 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.683 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.684 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.685 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.685 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.686 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.687 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.688 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.689 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.690 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.691 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.691 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.692 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.693 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.694 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.695 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.696 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.696 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.698 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.699 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.700 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:21:52.701 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:21:52.702 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 38ms reading results.
2025-11-29 01:21:52.703 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:21:52.704 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:21:52.705 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:21:52.707 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:21:52.708 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:21:52.708 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:21:52.709 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:21:52.710 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:21:52.712 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 74.1746ms
2025-11-29 01:21:52.713 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:21:52.714 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:21:52.715 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:21:52.716 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:21:52.717 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 93.9727ms
2025-11-29 01:22:07.686 +02:00 [DBG] Connection id "0HNHEOT0LBBK4" received FIN.
2025-11-29 01:22:07.765 +02:00 [DBG] Connection id "0HNHEOT0LBBK4" is closed. The last processed stream ID was 27.
2025-11-29 01:22:07.766 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBK4 completed.
2025-11-29 01:22:07.767 +02:00 [DBG] Connection id "0HNHEOT0LBBK4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:22:07.772 +02:00 [DBG] Connection id "0HNHEOT0LBBK4" stopped.
2025-11-29 01:22:13.567 +02:00 [DBG] Connection id "0HNHEOT0LBBK5" accepted.
2025-11-29 01:22:13.568 +02:00 [DBG] Connection id "0HNHEOT0LBBK5" started.
2025-11-29 01:22:13.571 +02:00 [DBG] Connection 0HNHEOT0LBBK5 established using the following protocol: "Tls13"
2025-11-29 01:22:13.573 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/3 - null null
2025-11-29 01:22:13.580 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/3'
2025-11-29 01:22:13.581 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/3'
2025-11-29 01:22:13.582 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:22:13.583 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:22:13.583 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:22:13.584 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:22:13.585 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:22:13.585 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:22:13.586 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:22:13.587 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:22:13.588 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:22:13.589 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:22:13.590 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:22:13.591 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:22:13.592 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:22:13.593 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:22:13.594 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:22:13.594 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:22:13.595 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:22:13.596 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:22:13.597 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:22:13.598 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:22:13.599 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:22:13.5995925+02:00"
2025-11-29 01:22:13.600 +02:00 [INF] Fetching doctor with ID 3
2025-11-29 01:22:13.600 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:22:13.602 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:22:13.602 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:22:13.603 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:13.604 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:13.605 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:22:13.605 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:22:13.606 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:22:13.607 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:22:13.624 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:22:13.626 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:13.627 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:13.628 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:13.629 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:13.630 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:13.632 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:13.720 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:13.722 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:13.724 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:13.728 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:13.731 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 105ms reading results.
2025-11-29 01:22:13.734 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:13.735 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:22:13.737 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:22:13.740 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:22:13.741 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:22:13.742 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:22:13.743 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:22:13.745 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:22:13.746 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 154.5663ms
2025-11-29 01:22:13.749 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:22:13.750 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:22:13.751 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:13.752 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:22:13.753 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/3 - 200 null application/json; charset=utf-8 180.372ms
2025-11-29 01:22:16.996 +02:00 [DBG] Connection id "0HNHEOT0LBBK5" received FIN.
2025-11-29 01:22:17.029 +02:00 [DBG] Connection id "0HNHEOT0LBBK5" is closed. The last processed stream ID was 1.
2025-11-29 01:22:17.029 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBK5 completed.
2025-11-29 01:22:17.031 +02:00 [DBG] Connection id "0HNHEOT0LBBK5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:22:17.034 +02:00 [DBG] Connection id "0HNHEOT0LBBK5" stopped.
2025-11-29 01:22:33.088 +02:00 [DBG] Connection id "0HNHEOT0LBBK6" accepted.
2025-11-29 01:22:33.089 +02:00 [DBG] Connection id "0HNHEOT0LBBK6" started.
2025-11-29 01:22:33.092 +02:00 [DBG] Connection 0HNHEOT0LBBK6 established using the following protocol: "Tls13"
2025-11-29 01:22:33.093 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:22:33.099 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:22:33.100 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:22:33.101 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:22:33.101 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:22:33.102 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:22:33.102 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:22:33.103 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 9.5544ms
2025-11-29 01:22:33.104 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:22:33.107 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:22:33.108 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:22:33.109 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:22:33.109 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:22:33.110 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:22:33.111 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:22:33.112 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:22:33.112 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:22:33.113 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:22:33.115 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:22:33.116 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:22:33.117 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:22:33.118 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:22:33.120 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:22:33.121 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:22:33.122 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:22:33.123 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:22:33.124 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:22:33.125 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:22:33.126 +02:00 [DBG] Connection id "0HNHEOT0LBBK6", Request id "0HNHEOT0LBBK6:00000003": started reading request body.
2025-11-29 01:22:33.127 +02:00 [DBG] Connection id "0HNHEOT0LBBK6", Request id "0HNHEOT0LBBK6:00000003": done reading request body.
2025-11-29 01:22:33.128 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:22:33.129 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:22:33.130 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:22:33.131 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:22:33.132 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:22:33.133 +02:00 [INF] Add Appointment called at "2025-11-29T01:22:33.1338669+02:00"
2025-11-29 01:22:33.134 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 3, Date: "2025-12-23", Shift: "Morning"
2025-11-29 01:22:33.136 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:22:33.137 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:22:33.138 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:22:33.139 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:33.140 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:33.141 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:22:33.142 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:22:33.143 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:22:33.144 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:22:33.145 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:22:33.146 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:22:33.158 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:22:33.160 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.161 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.163 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.164 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:33.165 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-29 01:22:33.166 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:22:33.167 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:22:33.168 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:22:33.169 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:22:33.178 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:22:33.180 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.181 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.182 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.183 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.184 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.185 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.186 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.187 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.188 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.189 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:33.190 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-29 01:22:33.192 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:22:33.193 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:22:33.194 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:22:33.195 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:22:33.197 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:22:33.199 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:33.199 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:22:33.201 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:22:33.202 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:22:33.202 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:22:33.203 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:22:33.207 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:22:33.208 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:33.209 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:22:33.210 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.211 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.212 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.213 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.214 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.215 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:22:33.215 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:22:33.216 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:22:33.217 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:22:33.218 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:22:33.219 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 01:22:33.220 +02:00 [DBG] Created transaction savepoint.
2025-11-29 01:22:33.220 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:22:33.221 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:22:33.222 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:22:33.223 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:22:33.226 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:22:33.228 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 01:22:33.229 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:33.230 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:22:33.231 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:33.232 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:22:33.233 +02:00 [DBG] Committing transaction.
2025-11-29 01:22:33.233 +02:00 [DBG] Committed transaction.
2025-11-29 01:22:33.234 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:33.235 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:22:33.236 +02:00 [INF] Appointment created successfully with ID: 21
2025-11-29 01:22:33.236 +02:00 [DBG] Disposing transaction.
2025-11-29 01:22:33.237 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:22:33.239 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:22:33.239 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:22:33.240 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:22:33.240 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:22:33.241 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 01:22:33.242 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[21],action=[GetById],controller=[Appointment])
2025-11-29 01:22:33.243 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/21 and 
2025-11-29 01:22:33.244 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/21
2025-11-29 01:22:33.245 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 124.4953ms
2025-11-29 01:22:33.246 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:22:33.247 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:22:33.248 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:33.249 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:22:33.249 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 01:22:33.250 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 146.1728ms
2025-11-29 01:22:33.252 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:22:33.255 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:22:33.255 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:22:33.256 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:22:33.257 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:22:33.258 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:22:33.258 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 9.1373ms
2025-11-29 01:22:33.259 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 01:22:33.262 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:22:33.263 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 01:22:33.264 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 01:22:33.265 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:22:33.265 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:22:33.266 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:22:33.267 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:22:33.268 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-29 01:22:33.268 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Patient)
2025-11-29 01:22:33.269 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-29 01:22:33.269 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 401 0 null 10.17ms
2025-11-29 01:22:33.272 +02:00 [DBG] Connection id "0HNHEOT0LBBK6", Request id "0HNHEOT0LBBK6:00000007": started reading request body.
2025-11-29 01:22:33.273 +02:00 [DBG] Connection id "0HNHEOT0LBBK6", Request id "0HNHEOT0LBBK6:00000007": done reading request body.
2025-11-29 01:22:35.799 +02:00 [DBG] Connection id "0HNHEOT0LBBK6" received FIN.
2025-11-29 01:22:35.800 +02:00 [DBG] Connection id "0HNHEOT0LBBK6" is closed. The last processed stream ID was 7.
2025-11-29 01:22:35.801 +02:00 [DBG] Connection id "0HNHEOT0LBBK6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:22:35.800 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBK6 completed.
2025-11-29 01:22:35.803 +02:00 [DBG] Connection id "0HNHEOT0LBBK6" stopped.
2025-11-29 01:22:56.565 +02:00 [DBG] Connection id "0HNHEOT0LBBK7" accepted.
2025-11-29 01:22:56.566 +02:00 [DBG] Connection id "0HNHEOT0LBBK7" started.
2025-11-29 01:22:56.570 +02:00 [DBG] Connection 0HNHEOT0LBBK7 established using the following protocol: "Tls13"
2025-11-29 01:22:56.572 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-11-29 01:22:56.605 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 01:22:56.606 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:22:56.607 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:22:56.608 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:22:56.609 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:22:56.610 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:22:56.610 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 38.8561ms
2025-11-29 01:22:56.612 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 54
2025-11-29 01:22:56.615 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 01:22:56.616 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-29 01:22:56.617 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 01:22:56.618 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:22:56.619 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:22:56.619 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:22:56.620 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:22:56.620 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 01:22:56.621 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-29 01:22:56.622 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:22:56.623 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:22:56.624 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:22:56.625 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:22:56.626 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:22:56.627 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 01:22:56.629 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 01:22:56.629 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 01:22:56.630 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-29 01:22:56.631 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:22:56.632 +02:00 [DBG] Connection id "0HNHEOT0LBBK7", Request id "0HNHEOT0LBBK7:00000003": started reading request body.
2025-11-29 01:22:56.633 +02:00 [DBG] Connection id "0HNHEOT0LBBK7", Request id "0HNHEOT0LBBK7:00000003": done reading request body.
2025-11-29 01:22:56.634 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-29 01:22:56.634 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 01:22:56.635 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 01:22:56.636 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 01:22:56.637 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 01:22:56.638 +02:00 [INF] Login called at "2025-11-29T01:22:56.6382069+02:00"
2025-11-29 01:22:56.638 +02:00 [INF] Login attempt for email: nour22110@gmail.com
2025-11-29 01:22:56.640 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:22:56.642 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:22:56.642 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:22:56.643 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.645 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.645 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:22:56.646 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:22:56.647 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:22:56.648 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 01:22:56.652 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 01:22:56.654 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:56.655 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.655 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:22:56.656 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.657 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:22:56.720 +02:00 [DBG] Creating JWT token for user a06c9a74-d53e-4235-a0b9-681147a73dfc
2025-11-29 01:22:56.721 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.723 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.724 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:22:56.725 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:22:56.726 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:22:56.726 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 01:22:56.730 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 01:22:56.731 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.732 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:22:56.733 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.734 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:22:56.735 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.736 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.737 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:22:56.738 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:22:56.739 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:22:56.740 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:22:56.745 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:22:56.746 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.747 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:22:56.748 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.749 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:22:56.750 +02:00 [DBG] JWT token created for user a06c9a74-d53e-4235-a0b9-681147a73dfc, expires at "2025-11-29T00:22:56.0000000Z"
2025-11-29 01:22:56.751 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.752 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.753 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:22:56.753 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:22:56.754 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:22:56.755 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:22:56.757 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 01:22:56.759 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.759 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:22:56.760 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.761 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:22:56.762 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.763 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.764 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:22:56.765 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:22:56.766 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:22:56.766 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 01:22:56.770 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 01:22:56.772 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.773 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:22:56.774 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.775 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:22:56.776 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:56.777 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:22:56.778 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:22:56.779 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:22:56.780 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:22:56.780 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:22:56.781 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.782 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.783 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:22:56.784 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:22:56.785 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:22:56.786 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 01:22:56.792 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 01:22:56.794 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.795 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:22:56.796 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.797 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:22:56.798 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:56.800 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:22:56.801 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.802 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.803 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:22:56.804 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:22:56.805 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:22:56.806 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 01:22:56.809 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 01:22:56.811 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:56.812 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:22:56.813 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.814 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 01:22:56.815 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.816 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:22:56.817 +02:00 [INF] Patient 2 logged in successfully
2025-11-29 01:22:56.818 +02:00 [INF] User nour22110@gmail.com logged in successfully with roles: Patient
2025-11-29 01:22:56.819 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:22:56.820 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:22:56.820 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:22:56.821 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:22:56.821 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:22:56.822 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-29 01:22:56.823 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 195.6172ms
2025-11-29 01:22:56.824 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 01:22:56.825 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:22:56.825 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:22:56.826 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:22:56.827 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 215.2683ms
2025-11-29 01:23:01.478 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 01:23:01.480 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 01:23:01.481 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 01:23:01.482 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:23:01.482 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:23:01.483 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:23:01.484 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:23:01.484 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:23:01.485 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:23:01.486 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 01:23:01.487 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:23:01.488 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:23:01.489 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:23:01.490 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:23:01.492 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:23:01.493 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:23:01.494 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:23:01.495 +02:00 [INF] get all schedule called at "2025-11-29T01:23:01.4954326+02:00"
2025-11-29 01:23:01.496 +02:00 [INF] Fetching all schedules
2025-11-29 01:23:01.497 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:23:01.499 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:23:01.500 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:23:01.500 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:23:01.501 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:23:01.502 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:23:01.503 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:23:01.504 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:23:01.504 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:23:01.512 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:23:01.514 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.515 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.516 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.517 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.518 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.519 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.520 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.521 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.522 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.523 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.524 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.525 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.526 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.527 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.528 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.529 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.530 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.531 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.532 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.532 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.533 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.534 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.535 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.536 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.537 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.537 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.538 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.539 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.540 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.541 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.542 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.543 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.544 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.545 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.546 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.547 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.547 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.549 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.549 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.551 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.552 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.553 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.554 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:23:01.555 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:23:01.556 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 41ms reading results.
2025-11-29 01:23:01.557 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:23:01.558 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:23:01.559 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:23:01.561 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:23:01.562 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:23:01.563 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:23:01.563 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:23:01.564 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:23:01.566 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 72.8092ms
2025-11-29 01:23:01.567 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:23:01.568 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:23:01.568 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:23:01.569 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:23:01.570 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 92.495ms
2025-11-29 01:28:16.158 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 01:28:16.163 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 01:28:16.164 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 01:28:16.165 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:28:16.166 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:28:16.166 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:28:16.167 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:28:16.168 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:28:16.168 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:28:16.169 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 01:28:16.170 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:28:16.171 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:28:16.172 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:28:16.173 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:28:16.174 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:28:16.175 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:28:16.176 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:28:16.177 +02:00 [INF] get all schedule called at "2025-11-29T01:28:16.1771548+02:00"
2025-11-29 01:28:16.177 +02:00 [INF] Fetching all schedules
2025-11-29 01:28:16.178 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:28:16.179 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:28:16.180 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:28:16.181 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:16.181 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:16.182 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:28:16.183 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:28:16.184 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:28:16.185 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:28:16.198 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:28:16.199 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.200 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.201 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.202 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.202 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.203 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.204 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.205 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.206 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.207 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.208 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.208 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.209 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.210 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.211 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.212 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.213 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.218 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.219 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.219 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.220 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.221 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.222 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.222 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.223 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.224 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.225 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.226 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.227 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.228 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.228 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.229 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.230 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.231 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.232 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.232 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.233 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.234 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.235 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.236 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.237 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.238 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.239 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:16.240 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:16.241 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 41ms reading results.
2025-11-29 01:28:16.242 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:16.243 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:28:16.244 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:28:16.245 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:28:16.246 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:28:16.246 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:28:16.247 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:28:16.247 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:28:16.249 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 73.9101ms
2025-11-29 01:28:16.250 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:28:16.251 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:28:16.251 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:16.252 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:28:16.253 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 95.339ms
2025-11-29 01:28:41.646 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 01:28:41.653 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 01:28:41.654 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 01:28:41.655 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:28:41.656 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:28:41.656 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:28:41.657 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:28:41.657 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:28:41.658 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:28:41.659 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:28:41.660 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:28:41.661 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:28:41.662 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:28:41.663 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:28:41.664 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:28:41.665 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:28:41.665 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:28:41.666 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:28:41.667 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:28:41.668 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:28:41.670 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:28:41.671 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:28:41.671 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:28:41.672 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:28:41.6726738+02:00"
2025-11-29 01:28:41.673 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 01:28:41.674 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:28:41.676 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:28:41.677 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:28:41.677 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:41.678 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:41.679 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:28:41.680 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:28:41.681 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:28:41.682 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:28:41.701 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:28:41.703 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:41.704 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:41.705 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:41.705 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:41.706 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:41.707 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:41.708 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:41.709 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:41.710 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:41.711 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:41.711 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:41.712 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:41.713 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-29 01:28:41.714 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:41.715 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:28:41.716 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:28:41.717 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:28:41.718 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:28:41.718 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:28:41.719 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:28:41.719 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:28:41.720 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 55.8264ms
2025-11-29 01:28:41.724 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:28:41.726 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:28:41.727 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:41.728 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:28:41.729 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 82.2718ms
2025-11-29 01:28:43.766 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:28:43.768 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:28:43.769 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:28:43.770 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:28:43.771 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:28:43.771 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:28:43.772 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:28:43.772 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 6.1175ms
2025-11-29 01:28:43.774 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:28:43.781 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:28:43.782 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:28:43.783 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:28:43.784 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:28:43.784 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:28:43.785 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:28:43.786 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:28:43.787 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:28:43.788 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:28:43.789 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:28:43.790 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:28:43.791 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:28:43.793 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:28:43.794 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:28:43.795 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:28:43.796 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:28:43.797 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:28:43.798 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:28:43.799 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:28:43.800 +02:00 [DBG] Connection id "0HNHEOT0LBBK7", Request id "0HNHEOT0LBBK7:0000000D": started reading request body.
2025-11-29 01:28:43.801 +02:00 [DBG] Connection id "0HNHEOT0LBBK7", Request id "0HNHEOT0LBBK7:0000000D": done reading request body.
2025-11-29 01:28:43.803 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:28:43.804 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:28:43.805 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:28:43.806 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:28:43.807 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:28:43.808 +02:00 [INF] Add Appointment called at "2025-11-29T01:28:43.8082576+02:00"
2025-11-29 01:28:43.809 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2026-01-01", Shift: "Evening"
2025-11-29 01:28:43.810 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:28:43.812 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:28:43.812 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:28:43.813 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:43.814 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:43.815 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:28:43.816 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:28:43.817 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:28:43.818 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:28:43.818 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:28:43.819 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:28:43.830 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:28:43.832 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.833 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.834 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.835 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:43.835 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 01:28:43.837 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:28:43.838 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:28:43.838 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:28:43.839 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:28:43.841 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:28:43.843 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.844 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.845 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.846 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.847 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.848 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.848 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.849 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.850 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.851 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.852 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.853 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:43.853 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-29 01:28:43.855 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:28:43.855 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:28:43.856 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:28:43.857 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:28:43.859 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:28:43.861 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:43.862 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:28:43.863 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:28:43.863 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:28:43.864 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:28:43.865 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:28:43.870 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:28:43.871 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:43.872 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 01:28:43.873 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.874 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.875 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.876 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.877 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.878 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:28:43.878 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:28:43.879 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:28:43.880 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:28:43.881 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:28:43.882 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 01:28:43.883 +02:00 [DBG] Created transaction savepoint.
2025-11-29 01:28:43.883 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:28:43.884 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:28:43.885 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:28:43.886 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:28:43.889 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:28:43.891 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 01:28:43.892 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:43.893 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:28:43.894 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:43.895 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:28:43.896 +02:00 [DBG] Committing transaction.
2025-11-29 01:28:43.897 +02:00 [DBG] Committed transaction.
2025-11-29 01:28:43.898 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:43.898 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:28:43.899 +02:00 [INF] Appointment created successfully with ID: 22
2025-11-29 01:28:43.900 +02:00 [DBG] Disposing transaction.
2025-11-29 01:28:43.900 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:28:43.902 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:28:43.903 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:28:43.903 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:28:43.904 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:28:43.905 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 01:28:43.906 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[22],action=[GetById],controller=[Appointment])
2025-11-29 01:28:43.907 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/22 and 
2025-11-29 01:28:43.908 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/22
2025-11-29 01:28:43.909 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 113.9768ms
2025-11-29 01:28:43.910 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:28:43.911 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:28:43.911 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:43.912 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:28:43.913 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 01:28:43.913 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 139.537ms
2025-11-29 01:28:43.915 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:28:43.918 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:28:43.918 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:28:43.919 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:28:43.919 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:28:43.920 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:28:43.921 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 7.8301ms
2025-11-29 01:28:43.923 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 01:28:43.925 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:28:43.925 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 01:28:43.926 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 01:28:43.927 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:28:43.927 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:28:43.928 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:28:43.966 +02:00 [DBG] Successfully validated the token.
2025-11-29 01:28:43.969 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-29 01:28:43.973 +02:00 [DBG] Authorization was successful.
2025-11-29 01:28:43.974 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 01:28:43.987 +02:00 [INF] Route matched with {action = "CreatePayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePayment(Hospital.Controllers.CreatePaymentRequest, System.Threading.CancellationToken) on controller Hospital.Controllers.PaymentController (Hospital).
2025-11-29 01:28:43.988 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:28:43.989 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:28:43.990 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:28:43.991 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:28:43.992 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:28:43.993 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PaymentController (Hospital)
2025-11-29 01:28:44.017 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PaymentController (Hospital)
2025-11-29 01:28:44.018 +02:00 [DBG] Attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' ...
2025-11-29 01:28:44.018 +02:00 [DBG] Attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' using the name '' in request data ...
2025-11-29 01:28:44.019 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:28:44.025 +02:00 [DBG] Connection id "0HNHEOT0LBBK7", Request id "0HNHEOT0LBBK7:00000011": started reading request body.
2025-11-29 01:28:44.026 +02:00 [DBG] Connection id "0HNHEOT0LBBK7", Request id "0HNHEOT0LBBK7:00000011": done reading request body.
2025-11-29 01:28:44.027 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Controllers.CreatePaymentRequest'
2025-11-29 01:28:44.028 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 01:28:44.029 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 01:28:44.030 +02:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' ...
2025-11-29 01:28:44.037 +02:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 01:28:44.037 +02:00 [DBG] Attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-11-29 01:28:44.039 +02:00 [DBG] Done attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-11-29 01:28:44.039 +02:00 [DBG] Attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-11-29 01:28:44.040 +02:00 [DBG] Done attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-11-29 01:28:44.044 +02:00 [INF] create payment by credite card called at "2025-11-29T01:28:44.0437466+02:00"
2025-11-29 01:28:44.049 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:28:44.052 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Payment)
    .Include(a => a.Patient)
    .ThenInclude(p => p.User)
    .Include(a => a.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(a => a.AppointmentId == __appointmentId_0)'
2025-11-29 01:28:44.059 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-11-29 01:28:44.061 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-29 01:28:44.062 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-29 01:28:44.064 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-29 01:28:44.065 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 01:28:44.094 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Appointment>(
    asyncEnumerable: new SingleQueryingEnumerable<Appointment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 9], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
                1 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Payment.Amount (decimal) Required, 13], [Property: Payment.AppointmentId (int) Required FK Index, 14], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Payment.Currency (string) Required MaxLength(3), 16], [Property: Payment.GatewayResponse (string), 17], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 18], [Property: Payment.PaymobOrderId (long?), 19], [Property: Payment.PaymobTransactionId (long?), 20], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 21], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 22] }
                2 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Patient.EmergencyContact (string) MaxLength(150), 25], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: Patient.UserId (string) Required FK Index, 27] }
                3 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 28], [Property: User.AccessFailedCount (int) Required, 29], [Property: User.ConcurrencyStamp (string) Concurrency, 30], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.DateOfBirth (DateOnly?), 32], [Property: User.Email (string) Index MaxLength(256), 33], [Property: User.EmailConfirmed (bool) Required, 34], [Property: User.FullName (string) Required MaxLength(150), 35], [Property: User.Gender (GenderType?) MaxLength(10), 36], [Property: User.LockoutEnabled (bool) Required, 37], [Property: User.LockoutEnd (DateTimeOffset?), 38], [Property: User.NormalizedEmail (string) Index MaxLength(256), 39], [Property: User.NormalizedUserName (string) Index MaxLength(256), 40], [Property: User.PasswordHash (string), 41], [Property: User.PhoneNumber (string), 42], [Property: User.PhoneNumberConfirmed (bool) Required, 43], [Property: User.RefreshToken (string), 44], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 45], [Property: User.Role (string) Required MaxLength(50), 46], [Property: User.SecurityStamp (string), 47], [Property: User.TwoFactorEnabled (bool) Required, 48], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 49], [Property: User.UserName (string) MaxLength(256), 50] }
                4 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 51], [Property: Doctor.Available (bool?), 52], [Property: Doctor.Biography (string), 53], [Property: Doctor.ConsultationFees (decimal) Required, 54], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 55], [Property: Doctor.ExperienceYears (int?), 56], [Property: Doctor.ImageURL (string) MaxLength(300), 57], [Property: Doctor.SpecializationId (int) Required FK Index, 58], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 59], [Property: Doctor.UserId (string) Required FK Index, 60] }
                5 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 61], [Property: User.AccessFailedCount (int) Required, 62], [Property: User.ConcurrencyStamp (string) Concurrency, 63], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 64], [Property: User.DateOfBirth (DateOnly?), 65], [Property: User.Email (string) Index MaxLength(256), 66], [Property: User.EmailConfirmed (bool) Required, 67], [Property: User.FullName (string) Required MaxLength(150), 68], [Property: User.Gender (GenderType?) MaxLength(10), 69], [Property: User.LockoutEnabled (bool) Required, 70], [Property: User.LockoutEnd (DateTimeOffset?), 71], [Property: User.NormalizedEmail (string) Index MaxLength(256), 72], [Property: User.NormalizedUserName (string) Index MaxLength(256), 73], [Property: User.PasswordHash (string), 74], [Property: User.PhoneNumber (string), 75], [Property: User.PhoneNumberConfirmed (bool) Required, 76], [Property: User.RefreshToken (string), 77], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 78], [Property: User.Role (string) Required MaxLength(50), 79], [Property: User.SecurityStamp (string), 80], [Property: User.TwoFactorEnabled (bool) Required, 81], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 82], [Property: User.UserName (string) MaxLength(256), 83] }
            SELECT TOP(1) a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PaymentId, p.Amount, p.AppointmentId, p.CreatedAt, p.Currency, p.GatewayResponse, p.PaymobMerchantOrderId, p.PaymobOrderId, p.PaymobTransactionId, p.Status, p.UpdatedAt, p0.PatientId, p0.CreatedAt, p0.EmergencyContact, p0.UpdatedAt, p0.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt, u0.UserName
            FROM Appointments AS a
            LEFT JOIN Payments AS p ON a.AppointmentId == p.AppointmentId
            INNER JOIN Patients AS p0 ON a.PatientId == p0.PatientId
            INNER JOIN Users AS u ON p0.UserId == u.Id
            INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
            INNER JOIN Users AS u0 ON d.UserId == u0.Id
            WHERE a.AppointmentId == @__appointmentId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 01:28:44.096 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:28:44.097 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:28:44.097 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:44.098 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:44.099 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:28:44.100 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:28:44.100 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:28:44.102 +02:00 [DBG] Executing DbCommand [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt], [p0].[PatientId], [p0].[CreatedAt], [p0].[EmergencyContact], [p0].[UpdatedAt], [p0].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName]
FROM [Appointments] AS [a]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
INNER JOIN [Patients] AS [p0] ON [a].[PatientId] = [p0].[PatientId]
INNER JOIN [Users] AS [u] ON [p0].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
WHERE [a].[AppointmentId] = @__appointmentId_0
2025-11-29 01:28:44.111 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt], [p0].[PatientId], [p0].[CreatedAt], [p0].[EmergencyContact], [p0].[UpdatedAt], [p0].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName]
FROM [Appointments] AS [a]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
INNER JOIN [Patients] AS [p0] ON [a].[PatientId] = [p0].[PatientId]
INNER JOIN [Users] AS [u] ON [p0].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
WHERE [a].[AppointmentId] = @__appointmentId_0
2025-11-29 01:28:44.115 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:44.118 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:44.119 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:44.120 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:44.120 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:44.122 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:44.122 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:44.123 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:44.124 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:28:44.125 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:44.126 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 01:28:44.127 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:44.128 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:28:44.169 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:28:44.170 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:28:44.171 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:28:44.172 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:28:44.172 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:28:44.173 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-29 01:28:44.184 +02:00 [INF] Executed action Hospital.Controllers.PaymentController.CreatePayment (Hospital) in 191.3064ms
2025-11-29 01:28:44.185 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 01:28:44.186 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:28:44.187 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:28:44.188 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:28:44.189 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 403 null application/json; charset=utf-8 266.391ms
2025-11-29 01:28:50.699 +02:00 [DBG] Connection id "0HNHEOT0LBBK7" received FIN.
2025-11-29 01:28:50.700 +02:00 [DBG] Connection id "0HNHEOT0LBBK7" is closed. The last processed stream ID was 17.
2025-11-29 01:28:50.700 +02:00 [DBG] The connection queue processing loop for 0HNHEOT0LBBK7 completed.
2025-11-29 01:28:50.701 +02:00 [DBG] Connection id "0HNHEOT0LBBK7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:28:50.703 +02:00 [DBG] Connection id "0HNHEOT0LBBK7" stopped.
2025-11-29 01:32:52.939 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-29 01:32:53.062 +02:00 [DBG] Hosting starting
2025-11-29 01:32:53.089 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 01:32:53.098 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-29 01:32:53.107 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-29 01:32:53.108 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-29 01:32:53.110 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-29 01:32:53.114 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-29 01:32:53.118 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-29 01:32:53.119 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-29 01:32:53.120 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-29 01:32:53.125 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-29 01:32:53.128 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-29 01:32:53.130 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-29 01:32:53.132 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-29 01:32:53.136 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-29 01:32:53.138 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-29 01:32:53.141 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-29 01:32:53.142 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-29 01:32:53.148 +02:00 [DBG] Middleware loaded
2025-11-29 01:32:53.149 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-29 01:32:53.151 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-29 01:32:53.260 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-29 01:32:53.366 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-29 01:32:53.366 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-29 01:32:53.367 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-29 01:32:53.368 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-29 01:32:53.369 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-29 01:32:53.369 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-29 01:32:53.441 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 01:32:53.442 +02:00 [INF] Hosting environment: Development
2025-11-29 01:32:53.443 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-29 01:32:53.443 +02:00 [DBG] Hosting started
2025-11-29 01:32:53.822 +02:00 [DBG] Connection id "0HNHEQPQ0U892" accepted.
2025-11-29 01:32:53.822 +02:00 [DBG] Connection id "0HNHEQPQ0U891" accepted.
2025-11-29 01:32:53.824 +02:00 [DBG] Connection id "0HNHEQPQ0U892" started.
2025-11-29 01:32:53.824 +02:00 [DBG] Connection id "0HNHEQPQ0U891" started.
2025-11-29 01:32:53.838 +02:00 [DBG] Connection id "0HNHEQPQ0U891" received FIN.
2025-11-29 01:32:53.838 +02:00 [DBG] Connection id "0HNHEQPQ0U892" received FIN.
2025-11-29 01:32:53.850 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 01:32:53.850 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 01:32:53.887 +02:00 [DBG] Connection id "0HNHEQPQ0U891" stopped.
2025-11-29 01:32:53.887 +02:00 [DBG] Connection id "0HNHEQPQ0U892" stopped.
2025-11-29 01:32:53.890 +02:00 [DBG] Connection id "0HNHEQPQ0U892" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:32:53.890 +02:00 [DBG] Connection id "0HNHEQPQ0U891" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:32:54.159 +02:00 [DBG] Connection id "0HNHEQPQ0U893" accepted.
2025-11-29 01:32:54.160 +02:00 [DBG] Connection id "0HNHEQPQ0U893" started.
2025-11-29 01:32:54.196 +02:00 [DBG] Connection 0HNHEQPQ0U893 established using the following protocol: "Tls13"
2025-11-29 01:32:54.266 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-29 01:32:54.370 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-29 01:32:54.397 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-29 01:32:54.398 +02:00 [DBG] Request did not match any endpoints
2025-11-29 01:32:54.440 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-29 01:32:54.442 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-29 01:32:54.456 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-29 01:32:54.458 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-29 01:32:54.461 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 203.8591ms
2025-11-29 01:32:54.494 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 01:32:54.494 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-29 01:32:54.502 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-29 01:32:54.504 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 10.5906ms
2025-11-29 01:32:54.539 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.8152ms
2025-11-29 01:32:54.676 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-29 01:32:54.679 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-29 01:32:54.680 +02:00 [DBG] Request did not match any endpoints
2025-11-29 01:32:54.723 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 47.8338ms
2025-11-29 01:33:00.914 +02:00 [DBG] Connection id "0HNHEQPQ0U893" received FIN.
2025-11-29 01:33:00.917 +02:00 [DBG] The connection queue processing loop for 0HNHEQPQ0U893 completed.
2025-11-29 01:33:00.919 +02:00 [DBG] Connection id "0HNHEQPQ0U893" is closed. The last processed stream ID was 7.
2025-11-29 01:33:00.920 +02:00 [DBG] Connection id "0HNHEQPQ0U893" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:33:00.922 +02:00 [DBG] Connection id "0HNHEQPQ0U893" stopped.
2025-11-29 01:33:04.133 +02:00 [DBG] Connection id "0HNHEQPQ0U894" accepted.
2025-11-29 01:33:04.134 +02:00 [DBG] Connection id "0HNHEQPQ0U894" started.
2025-11-29 01:33:04.138 +02:00 [DBG] Connection 0HNHEQPQ0U894 established using the following protocol: "Tls13"
2025-11-29 01:33:04.140 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:33:04.146 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:33:04.147 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:33:04.150 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:33:04.152 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:33:04.154 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:33:04.155 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:33:04.157 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 17.0579ms
2025-11-29 01:33:04.160 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:33:04.163 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:33:04.167 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:33:04.168 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:33:04.169 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:33:04.170 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:33:04.171 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:33:04.206 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:33:04.209 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:33:04.236 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:33:04.239 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:33:04.240 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:33:04.242 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:33:04.243 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:33:04.245 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:33:04.247 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:33:04.404 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-29 01:33:04.640 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:33:04.654 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:33:04.657 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:33:04.659 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:33:04.672 +02:00 [DBG] Connection id "0HNHEQPQ0U894", Request id "0HNHEQPQ0U894:00000003": started reading request body.
2025-11-29 01:33:04.674 +02:00 [DBG] Connection id "0HNHEQPQ0U894", Request id "0HNHEQPQ0U894:00000003": done reading request body.
2025-11-29 01:33:04.689 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:33:04.690 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:33:04.691 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:33:04.692 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:33:04.702 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:33:04.705 +02:00 [INF] Add Appointment called at "2025-11-29T01:33:04.7054199+02:00"
2025-11-29 01:33:04.709 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2026-01-01", Shift: "Evening"
2025-11-29 01:33:05.237 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-29 01:33:05.240 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-29 01:33:05.241 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-29 01:33:05.242 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-29 01:33:05.243 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-29 01:33:05.345 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-29 01:33:05.347 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-29 01:33:05.515 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:33:05.523 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:33:05.561 +02:00 [DBG] Created DbConnection. (37ms).
2025-11-29 01:33:05.565 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:05.807 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:05.810 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:33:05.818 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:33:05.874 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(p => p.User)
    .Include(p => p.MedicalRecords)
    .ThenInclude(m => m.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(p => p.PatientId == __id_0)'
2025-11-29 01:33:05.928 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-29 01:33:05.931 +02:00 [DBG] Including navigation: 'Patient.MedicalRecords'.
2025-11-29 01:33:05.933 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-11-29 01:33:05.934 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 01:33:06.115 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 5], [Property: User.AccessFailedCount (int) Required, 6], [Property: User.ConcurrencyStamp (string) Concurrency, 7], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: User.DateOfBirth (DateOnly?), 9], [Property: User.Email (string) Index MaxLength(256), 10], [Property: User.EmailConfirmed (bool) Required, 11], [Property: User.FullName (string) Required MaxLength(150), 12], [Property: User.Gender (GenderType?) MaxLength(10), 13], [Property: User.LockoutEnabled (bool) Required, 14], [Property: User.LockoutEnd (DateTimeOffset?), 15], [Property: User.NormalizedEmail (string) Index MaxLength(256), 16], [Property: User.NormalizedUserName (string) Index MaxLength(256), 17], [Property: User.PasswordHash (string), 18], [Property: User.PhoneNumber (string), 19], [Property: User.PhoneNumberConfirmed (bool) Required, 20], [Property: User.RefreshToken (string), 21], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 22], [Property: User.Role (string) Required MaxLength(50), 23], [Property: User.SecurityStamp (string), 24], [Property: User.TwoFactorEnabled (bool) Required, 25], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: User.UserName (string) MaxLength(256), 27] }
                2 -> 0
                3 -> 5
                4 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 28], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 29], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: MedicalRecord.Diagnosis (string), 31], [Property: MedicalRecord.DoctorId (int) Required FK Index, 32], [Property: MedicalRecord.Notes (string), 33], [Property: MedicalRecord.PatientId (int) Required FK Index, 34], [Property: MedicalRecord.TreatmentPlan (string), 35], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
                5 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Doctor.Available (bool?), 38], [Property: Doctor.Biography (string), 39], [Property: Doctor.ConsultationFees (decimal) Required, 40], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 41], [Property: Doctor.ExperienceYears (int?), 42], [Property: Doctor.ImageURL (string) MaxLength(300), 43], [Property: Doctor.SpecializationId (int) Required FK Index, 44], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Doctor.UserId (string) Required FK Index, 46] }
                6 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
                7 -> 28
                8 -> 37
                9 -> 47
            SELECT t.PatientId, t.CreatedAt, t.EmergencyContact, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t0.RecordId, t0.AppointmentId, t0.CreatedAt, t0.Diagnosis, t0.DoctorId, t0.Notes, t0.PatientId, t0.TreatmentPlan, t0.UpdatedAt, t0.DoctorId0, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt0, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt0, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt1, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt1, t0.UserName
            FROM 
            (
                SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
                FROM Patients AS p
                INNER JOIN Users AS u ON p.UserId == u.Id
                WHERE p.PatientId == @__id_0
            ) AS t
            LEFT JOIN 
            (
                SELECT m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId AS DoctorId0, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt AS CreatedAt0, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt AS UpdatedAt0, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt AS CreatedAt1, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt AS UpdatedAt1, u0.UserName
                FROM MedicalRecords AS m
                INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
                INNER JOIN Users AS u0 ON d.UserId == u0.Id
            ) AS t0 ON t.PatientId == t0.PatientId
            ORDER BY t.PatientId ASC, t.Id ASC, t0.RecordId ASC, t0.DoctorId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 01:33:06.152 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:33:06.158 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-11-29 01:33:06.166 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-11-29 01:33:06.174 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:33:06.233 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:33:06.269 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:06.307 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:06.309 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:06.346 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:06.351 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 113ms reading results.
2025-11-29 01:33:06.357 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-29 01:33:06.359 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 01:33:06.360 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-29 01:33:06.362 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-29 01:33:06.364 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-29 01:33:06.394 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-29 01:33:06.400 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 01:33:06.403 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:33:06.404 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:33:06.405 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:33:06.406 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:33:06.421 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:33:06.431 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:06.448 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:06.450 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:06.456 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:06.459 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:06.477 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:06.492 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:06.511 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:06.513 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:06.522 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:06.523 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:06.524 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:06.526 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 102ms reading results.
2025-11-29 01:33:06.529 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-11-29 01:33:06.533 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 01:33:06.536 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:33:06.537 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:33:06.538 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 01:33:06.539 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:33:06.543 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:33:06.546 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:06.547 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:33:06.557 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Any(a => a.PatientId == __patientId_0 && a.DoctorId == __doctorId_1 && a.Date == __date_2 && (int)a.Shift == (int)__shift_3)'
2025-11-29 01:33:06.564 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Appointments AS a
                WHERE (((a.PatientId == @__patientId_0) && (a.DoctorId == @__doctorId_1)) && (a.Date == @__date_2)) && (a.Shift == @__shift_3))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 01:33:06.574 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:33:06.576 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:33:06.581 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-11-29 01:33:06.582 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:33:06.589 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:33:06.592 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:06.593 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 01:33:06.634 +02:00 [DBG] Rolling back transaction.
2025-11-29 01:33:06.640 +02:00 [DBG] Rolled back transaction.
2025-11-29 01:33:06.643 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:06.650 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (6ms).
2025-11-29 01:33:06.652 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 1
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-29 01:33:06.683 +02:00 [DBG] Disposing transaction.
2025-11-29 01:33:06.728 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 2479.5276ms
2025-11-29 01:33:06.730 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:33:06.788 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-29 01:33:06.813 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:33:06.817 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:06.819 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:33:06.821 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 2661.0961ms
2025-11-29 01:33:10.177 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 01:33:10.180 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 01:33:10.182 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 01:33:10.184 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:33:10.185 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:33:10.185 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:33:10.186 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:33:10.187 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:33:10.188 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:33:10.192 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 01:33:10.193 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:33:10.194 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:33:10.196 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:33:10.197 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:33:10.198 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:33:10.199 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:33:10.202 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:33:10.204 +02:00 [INF] get all schedule called at "2025-11-29T01:33:10.2046428+02:00"
2025-11-29 01:33:10.206 +02:00 [INF] Fetching all schedules
2025-11-29 01:33:10.218 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:33:10.226 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(s => s.Branch)'
2025-11-29 01:33:10.228 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-29 01:33:10.229 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 01:33:10.231 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-29 01:33:10.233 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-11-29 01:33:10.249 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Specialization.Description (string), 44], [Property: Specialization.ImageURL (string) MaxLength(300), 45], [Property: Specialization.Name (string) Required MaxLength(120), 46], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 48], [Property: Branch.Address (string) MaxLength(250), 49], [Property: Branch.BranchName (string) Required MaxLength(150), 50], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Branch.Description (string), 52], [Property: Branch.Email (string) MaxLength(200), 53], [Property: Branch.ImageURL (string) MaxLength(300), 54], [Property: Branch.Latitude (double?), 55], [Property: Branch.Longitude (double?), 56], [Property: Branch.Phone (string) MaxLength(25), 57], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 58] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s0.SpecializationId, s0.CreatedAt, s0.Description, s0.ImageURL, s0.Name, s0.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s0 ON d.SpecializationId == s0.SpecializationId
        INNER JOIN Branches AS b ON s.BranchId == b.BranchId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 01:33:10.252 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:33:10.253 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-29 01:33:10.254 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:10.256 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:10.257 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:33:10.258 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:33:10.259 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 01:33:10.261 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:33:10.272 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:33:10.275 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.276 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.277 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.278 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.279 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.281 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.282 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.283 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.284 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.286 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.287 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.288 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.289 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.290 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.291 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.292 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.297 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.298 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.299 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.301 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.302 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.304 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.305 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.307 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.308 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.309 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.311 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.312 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.314 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.315 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.317 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.318 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.319 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.320 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.321 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.322 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.323 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.324 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.325 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.327 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.328 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.329 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.330 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:10.331 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:10.332 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 58ms reading results.
2025-11-29 01:33:10.333 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:10.334 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:33:10.351 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:33:10.353 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:33:10.354 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:33:10.355 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:33:10.357 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:33:10.358 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:33:10.376 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 177.1587ms
2025-11-29 01:33:10.378 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:33:10.379 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:33:10.379 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:10.380 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:33:10.381 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 205.7926ms
2025-11-29 01:33:10.915 +02:00 [DBG] Connection id "0HNHEQPQ0U894" received FIN.
2025-11-29 01:33:10.916 +02:00 [DBG] Connection id "0HNHEQPQ0U894" is closed. The last processed stream ID was 5.
2025-11-29 01:33:10.916 +02:00 [DBG] The connection queue processing loop for 0HNHEQPQ0U894 completed.
2025-11-29 01:33:10.918 +02:00 [DBG] Connection id "0HNHEQPQ0U894" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:33:10.920 +02:00 [DBG] Connection id "0HNHEQPQ0U894" stopped.
2025-11-29 01:33:33.920 +02:00 [DBG] Connection id "0HNHEQPQ0U895" accepted.
2025-11-29 01:33:33.926 +02:00 [DBG] Connection id "0HNHEQPQ0U895" started.
2025-11-29 01:33:33.929 +02:00 [DBG] Connection 0HNHEQPQ0U895 established using the following protocol: "Tls13"
2025-11-29 01:33:33.936 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 01:33:33.943 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 01:33:33.944 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 01:33:33.945 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:33:33.946 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:33:33.946 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:33:33.947 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:33:33.949 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:33:33.949 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:33:33.953 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:33:33.955 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:33:33.956 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:33:33.957 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:33:33.958 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:33:33.959 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:33:33.960 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:33:33.973 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:33:33.974 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:33:33.976 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:33:33.977 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:33:33.978 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:33:33.979 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:33:33.980 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:33:33.982 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:33:33.9822495+02:00"
2025-11-29 01:33:33.983 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 01:33:34.025 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:33:34.031 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:33:34.031 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:33:34.032 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:34.033 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:34.034 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:33:34.035 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:33:34.037 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 01:33:34.038 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:33:34.050 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:33:34.052 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:34.054 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:34.055 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:34.057 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:34.058 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:34.059 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:34.060 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:34.061 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:34.062 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:34.063 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:34.064 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:34.066 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:34.067 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-29 01:33:34.068 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:34.069 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:33:34.081 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:33:34.083 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:33:34.084 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:33:34.084 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:33:34.085 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:33:34.086 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:33:34.101 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 141.5226ms
2025-11-29 01:33:34.103 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:33:34.104 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:33:34.105 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:34.106 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:33:34.108 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 172.2817ms
2025-11-29 01:33:38.013 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:33:38.015 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:33:38.015 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:33:38.016 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:33:38.017 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:33:38.018 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:33:38.018 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:33:38.019 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 6.3399ms
2025-11-29 01:33:38.021 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 01:33:38.024 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:33:38.025 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:33:38.026 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:33:38.027 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:33:38.028 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:33:38.029 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:33:38.029 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:33:38.030 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:33:38.031 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:33:38.032 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:33:38.033 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:33:38.034 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:33:38.036 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:33:38.037 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:33:38.038 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:33:38.042 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:33:38.043 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:33:38.044 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:33:38.045 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:33:38.046 +02:00 [DBG] Connection id "0HNHEQPQ0U895", Request id "0HNHEQPQ0U895:00000005": started reading request body.
2025-11-29 01:33:38.047 +02:00 [DBG] Connection id "0HNHEQPQ0U895", Request id "0HNHEQPQ0U895:00000005": done reading request body.
2025-11-29 01:33:38.048 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 01:33:38.048 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:33:38.049 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:33:38.050 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:33:38.051 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:33:38.052 +02:00 [INF] Add Appointment called at "2025-11-29T01:33:38.0524534+02:00"
2025-11-29 01:33:38.053 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2026-01-08", Shift: "Evening"
2025-11-29 01:33:38.054 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:33:38.057 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:33:38.057 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:33:38.058 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:38.059 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:38.060 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 01:33:38.061 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 01:33:38.063 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:33:38.063 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:33:38.064 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:33:38.065 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:33:38.076 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 01:33:38.078 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.079 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.080 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.082 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:38.083 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-29 01:33:38.084 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:33:38.085 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:33:38.085 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:33:38.086 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:33:38.095 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:33:38.097 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.098 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.099 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.100 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.101 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.102 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.103 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.104 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.105 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.106 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.107 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.108 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:38.109 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-29 01:33:38.111 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:33:38.111 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:33:38.113 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 01:33:38.114 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:33:38.118 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 01:33:38.120 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:38.121 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:33:38.123 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:33:38.124 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:33:38.125 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 01:33:38.127 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:33:38.132 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 01:33:38.135 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:38.136 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 01:33:38.157 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.183 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.185 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.188 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.191 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.195 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:33:38.252 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:33:38.260 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 01:33:38.262 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 01:33:38.263 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 01:33:38.313 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 01:33:38.322 +02:00 [DBG] Created transaction savepoint.
2025-11-29 01:33:38.325 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:33:38.326 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:33:38.328 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-29 01:33:38.329 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:33:38.333 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 01:33:38.342 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 01:33:38.346 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:38.347 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-29 01:33:38.355 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.357 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 01:33:38.360 +02:00 [DBG] Committing transaction.
2025-11-29 01:33:38.362 +02:00 [DBG] Committed transaction.
2025-11-29 01:33:38.363 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:38.364 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:33:38.365 +02:00 [INF] Appointment created successfully with ID: 23
2025-11-29 01:33:38.368 +02:00 [DBG] Disposing transaction.
2025-11-29 01:33:38.370 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:33:38.371 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:33:38.372 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:33:38.372 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:33:38.373 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:33:38.374 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 01:33:38.387 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[23],action=[GetById],controller=[Appointment])
2025-11-29 01:33:38.391 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/23 and 
2025-11-29 01:33:38.393 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/23
2025-11-29 01:33:38.399 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 361.122ms
2025-11-29 01:33:38.400 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:33:38.405 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:33:38.406 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:38.408 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:33:38.410 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 389.4413ms
2025-11-29 01:33:38.411 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 01:33:38.416 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:33:38.418 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:33:38.419 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:33:38.419 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:33:38.420 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:33:38.422 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:33:38.423 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 11.7682ms
2025-11-29 01:33:38.425 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 01:33:38.429 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 01:33:38.430 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 01:33:38.432 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 01:33:38.432 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:33:38.433 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:33:38.434 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:33:38.492 +02:00 [DBG] Successfully validated the token.
2025-11-29 01:33:38.495 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-29 01:33:38.499 +02:00 [DBG] Authorization was successful.
2025-11-29 01:33:38.500 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 01:33:38.504 +02:00 [INF] Route matched with {action = "CreatePayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePayment(Hospital.Controllers.CreatePaymentRequest, System.Threading.CancellationToken) on controller Hospital.Controllers.PaymentController (Hospital).
2025-11-29 01:33:38.505 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:33:38.506 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:33:38.507 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:33:38.508 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:33:38.509 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:33:38.510 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PaymentController (Hospital)
2025-11-29 01:33:38.517 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PaymentController (Hospital)
2025-11-29 01:33:38.518 +02:00 [DBG] Attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' ...
2025-11-29 01:33:38.519 +02:00 [DBG] Attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' using the name '' in request data ...
2025-11-29 01:33:38.520 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:33:38.522 +02:00 [DBG] Connection id "0HNHEQPQ0U895", Request id "0HNHEQPQ0U895:00000009": started reading request body.
2025-11-29 01:33:38.524 +02:00 [DBG] Connection id "0HNHEQPQ0U895", Request id "0HNHEQPQ0U895:00000009": done reading request body.
2025-11-29 01:33:38.526 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Controllers.CreatePaymentRequest'
2025-11-29 01:33:38.527 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 01:33:38.528 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 01:33:38.529 +02:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' ...
2025-11-29 01:33:38.530 +02:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 01:33:38.531 +02:00 [DBG] Attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-11-29 01:33:38.533 +02:00 [DBG] Done attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-11-29 01:33:38.534 +02:00 [DBG] Attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-11-29 01:33:38.535 +02:00 [DBG] Done attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-11-29 01:33:38.538 +02:00 [INF] create payment by credite card called at "2025-11-29T01:33:38.5381939+02:00"
2025-11-29 01:33:38.543 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:33:38.546 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Payment)
    .Include(a => a.Patient)
    .ThenInclude(p => p.User)
    .Include(a => a.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(a => a.AppointmentId == __appointmentId_0)'
2025-11-29 01:33:38.550 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-11-29 01:33:38.551 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-29 01:33:38.552 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-29 01:33:38.554 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-29 01:33:38.555 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 01:33:38.574 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Appointment>(
    asyncEnumerable: new SingleQueryingEnumerable<Appointment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 9], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
                1 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Payment.Amount (decimal) Required, 13], [Property: Payment.AppointmentId (int) Required FK Index, 14], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Payment.Currency (string) Required MaxLength(3), 16], [Property: Payment.GatewayResponse (string), 17], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 18], [Property: Payment.PaymobOrderId (long?), 19], [Property: Payment.PaymobTransactionId (long?), 20], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 21], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 22] }
                2 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Patient.EmergencyContact (string) MaxLength(150), 25], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: Patient.UserId (string) Required FK Index, 27] }
                3 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 28], [Property: User.AccessFailedCount (int) Required, 29], [Property: User.ConcurrencyStamp (string) Concurrency, 30], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.DateOfBirth (DateOnly?), 32], [Property: User.Email (string) Index MaxLength(256), 33], [Property: User.EmailConfirmed (bool) Required, 34], [Property: User.FullName (string) Required MaxLength(150), 35], [Property: User.Gender (GenderType?) MaxLength(10), 36], [Property: User.LockoutEnabled (bool) Required, 37], [Property: User.LockoutEnd (DateTimeOffset?), 38], [Property: User.NormalizedEmail (string) Index MaxLength(256), 39], [Property: User.NormalizedUserName (string) Index MaxLength(256), 40], [Property: User.PasswordHash (string), 41], [Property: User.PhoneNumber (string), 42], [Property: User.PhoneNumberConfirmed (bool) Required, 43], [Property: User.RefreshToken (string), 44], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 45], [Property: User.Role (string) Required MaxLength(50), 46], [Property: User.SecurityStamp (string), 47], [Property: User.TwoFactorEnabled (bool) Required, 48], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 49], [Property: User.UserName (string) MaxLength(256), 50] }
                4 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 51], [Property: Doctor.Available (bool?), 52], [Property: Doctor.Biography (string), 53], [Property: Doctor.ConsultationFees (decimal) Required, 54], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 55], [Property: Doctor.ExperienceYears (int?), 56], [Property: Doctor.ImageURL (string) MaxLength(300), 57], [Property: Doctor.SpecializationId (int) Required FK Index, 58], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 59], [Property: Doctor.UserId (string) Required FK Index, 60] }
                5 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 61], [Property: User.AccessFailedCount (int) Required, 62], [Property: User.ConcurrencyStamp (string) Concurrency, 63], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 64], [Property: User.DateOfBirth (DateOnly?), 65], [Property: User.Email (string) Index MaxLength(256), 66], [Property: User.EmailConfirmed (bool) Required, 67], [Property: User.FullName (string) Required MaxLength(150), 68], [Property: User.Gender (GenderType?) MaxLength(10), 69], [Property: User.LockoutEnabled (bool) Required, 70], [Property: User.LockoutEnd (DateTimeOffset?), 71], [Property: User.NormalizedEmail (string) Index MaxLength(256), 72], [Property: User.NormalizedUserName (string) Index MaxLength(256), 73], [Property: User.PasswordHash (string), 74], [Property: User.PhoneNumber (string), 75], [Property: User.PhoneNumberConfirmed (bool) Required, 76], [Property: User.RefreshToken (string), 77], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 78], [Property: User.Role (string) Required MaxLength(50), 79], [Property: User.SecurityStamp (string), 80], [Property: User.TwoFactorEnabled (bool) Required, 81], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 82], [Property: User.UserName (string) MaxLength(256), 83] }
            SELECT TOP(1) a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PaymentId, p.Amount, p.AppointmentId, p.CreatedAt, p.Currency, p.GatewayResponse, p.PaymobMerchantOrderId, p.PaymobOrderId, p.PaymobTransactionId, p.Status, p.UpdatedAt, p0.PatientId, p0.CreatedAt, p0.EmergencyContact, p0.UpdatedAt, p0.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt, u0.UserName
            FROM Appointments AS a
            LEFT JOIN Payments AS p ON a.AppointmentId == p.AppointmentId
            INNER JOIN Patients AS p0 ON a.PatientId == p0.PatientId
            INNER JOIN Users AS u ON p0.UserId == u.Id
            INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
            INNER JOIN Users AS u0 ON d.UserId == u0.Id
            WHERE a.AppointmentId == @__appointmentId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 01:33:38.577 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:33:38.578 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:33:38.579 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:38.580 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:38.582 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:33:38.583 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:33:38.584 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:33:38.585 +02:00 [DBG] Executing DbCommand [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt], [p0].[PatientId], [p0].[CreatedAt], [p0].[EmergencyContact], [p0].[UpdatedAt], [p0].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName]
FROM [Appointments] AS [a]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
INNER JOIN [Patients] AS [p0] ON [a].[PatientId] = [p0].[PatientId]
INNER JOIN [Users] AS [u] ON [p0].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
WHERE [a].[AppointmentId] = @__appointmentId_0
2025-11-29 01:33:38.598 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt], [p0].[PatientId], [p0].[CreatedAt], [p0].[EmergencyContact], [p0].[UpdatedAt], [p0].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName]
FROM [Appointments] AS [a]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
INNER JOIN [Patients] AS [p0] ON [a].[PatientId] = [p0].[PatientId]
INNER JOIN [Users] AS [u] ON [p0].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
WHERE [a].[AppointmentId] = @__appointmentId_0
2025-11-29 01:33:38.603 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.607 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.608 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.609 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.610 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.612 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.613 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.614 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.615 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:33:38.616 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:38.617 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 16ms reading results.
2025-11-29 01:33:38.618 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:38.619 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:33:38.668 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:33:38.670 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:33:38.671 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:33:38.671 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:33:38.672 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:33:38.673 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType6`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-29 01:33:38.678 +02:00 [INF] Executed action Hospital.Controllers.PaymentController.CreatePayment (Hospital) in 167.3433ms
2025-11-29 01:33:38.679 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 01:33:38.680 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:33:38.681 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:33:38.681 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:33:38.683 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 403 null application/json; charset=utf-8 257.6354ms
2025-11-29 01:33:40.922 +02:00 [DBG] Connection id "0HNHEQPQ0U895" received FIN.
2025-11-29 01:33:40.923 +02:00 [DBG] Connection id "0HNHEQPQ0U895" is closed. The last processed stream ID was 9.
2025-11-29 01:33:40.923 +02:00 [DBG] The connection queue processing loop for 0HNHEQPQ0U895 completed.
2025-11-29 01:33:40.923 +02:00 [DBG] Connection id "0HNHEQPQ0U895" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:33:40.925 +02:00 [DBG] Connection id "0HNHEQPQ0U895" stopped.
2025-11-29 01:35:38.528 +02:00 [DBG] HttpMessageHandler expired after 120000ms for client 'IPaymobClient'
2025-11-29 01:35:48.530 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:35:48.534 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0917ms - processed: 0 items - remaining: 1 items
2025-11-29 01:35:58.535 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:35:58.536 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0053ms - processed: 0 items - remaining: 1 items
2025-11-29 01:36:08.537 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:36:08.538 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-11-29 01:36:18.539 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:36:18.540 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-11-29 01:36:28.542 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:36:28.543 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-11-29 01:36:38.544 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:36:38.545 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2025-11-29 01:36:48.547 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:36:48.547 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0819ms - processed: 0 items - remaining: 1 items
2025-11-29 01:36:58.549 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:36:58.550 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2025-11-29 01:37:08.552 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:37:08.553 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-11-29 01:37:18.556 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:37:18.556 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-11-29 01:37:28.558 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:37:28.560 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0092ms - processed: 0 items - remaining: 1 items
2025-11-29 01:37:38.562 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:37:38.563 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2025-11-29 01:37:48.563 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:37:48.564 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2025-11-29 01:37:58.565 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:37:58.566 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-11-29 01:38:08.566 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:38:08.567 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-11-29 01:38:18.569 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:38:18.570 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2025-11-29 01:38:28.571 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:38:28.572 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2025-11-29 01:38:38.573 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:38:38.574 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0082ms - processed: 0 items - remaining: 1 items
2025-11-29 01:38:48.576 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:38:48.577 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2025-11-29 01:38:58.579 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:38:58.580 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2025-11-29 01:39:08.581 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:39:08.582 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2025-11-29 01:39:18.583 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:39:18.583 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2025-11-29 01:39:28.585 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:39:28.585 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2025-11-29 01:39:38.586 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:39:38.587 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2025-11-29 01:39:48.588 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:39:48.589 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-11-29 01:39:58.593 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:39:58.593 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-11-29 01:40:01.154 +02:00 [DBG] Connection id "0HNHEQPQ0U896" accepted.
2025-11-29 01:40:01.160 +02:00 [DBG] Connection id "0HNHEQPQ0U896" started.
2025-11-29 01:40:01.164 +02:00 [DBG] Connection 0HNHEQPQ0U896 established using the following protocol: "Tls13"
2025-11-29 01:40:01.171 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 01:40:01.178 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 01:40:01.179 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 01:40:01.180 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:40:01.181 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:40:01.182 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:40:01.182 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:40:01.183 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:40:01.184 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:40:01.185 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:40:01.186 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:40:01.187 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:40:01.188 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:40:01.189 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:40:01.190 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:40:01.191 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:40:01.194 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:40:01.195 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:40:01.196 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:40:01.197 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:40:01.198 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:40:01.199 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:40:01.199 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:40:01.200 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:40:01.2009782+02:00"
2025-11-29 01:40:01.201 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 01:40:01.203 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:40:01.204 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:40:01.205 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:40:01.206 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:01.247 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:01.250 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:40:01.251 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:40:01.252 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:40:01.253 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:40:01.277 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:40:01.279 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:01.280 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:01.281 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:01.283 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:01.283 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:01.285 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:01.286 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:01.287 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:01.288 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:01.289 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:01.290 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:01.291 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:01.292 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-29 01:40:01.293 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:01.294 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:40:01.295 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:40:01.297 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:40:01.298 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:40:01.298 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:40:01.299 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:40:01.300 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:40:01.301 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 109.843ms
2025-11-29 01:40:01.302 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:40:01.303 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:40:01.305 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:01.306 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:40:01.307 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 136.9933ms
2025-11-29 01:40:03.427 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 01:40:03.429 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 01:40:03.430 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 01:40:03.432 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:40:03.433 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:40:03.434 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:40:03.435 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:40:03.435 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:40:03.436 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:40:03.437 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:40:03.439 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:40:03.441 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:40:03.443 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:40:03.445 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:40:03.446 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:40:03.447 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:40:03.460 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:40:03.461 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:40:03.462 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:40:03.463 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:40:03.464 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:40:03.465 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:40:03.466 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:40:03.467 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:40:03.4679083+02:00"
2025-11-29 01:40:03.468 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 01:40:03.469 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:40:03.472 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:40:03.472 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:40:03.473 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:03.474 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:03.475 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:40:03.476 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:40:03.477 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:40:03.478 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:40:03.490 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:40:03.493 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:03.494 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:03.495 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:03.496 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:03.497 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:03.498 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:03.499 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:03.500 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:03.501 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:03.502 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:03.503 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:03.504 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:03.505 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-29 01:40:03.507 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:03.508 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:40:03.509 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:40:03.511 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:40:03.512 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:40:03.512 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:40:03.513 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:40:03.514 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:40:03.515 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 68.2066ms
2025-11-29 01:40:03.517 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:40:03.517 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:40:03.518 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:03.520 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:40:03.521 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 94.5367ms
2025-11-29 01:40:05.994 +02:00 [DBG] Connection id "0HNHEQPQ0U896" received FIN.
2025-11-29 01:40:05.994 +02:00 [DBG] Connection id "0HNHEQPQ0U896" is closed. The last processed stream ID was 3.
2025-11-29 01:40:05.995 +02:00 [DBG] The connection queue processing loop for 0HNHEQPQ0U896 completed.
2025-11-29 01:40:05.995 +02:00 [DBG] Connection id "0HNHEQPQ0U896" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:40:05.998 +02:00 [DBG] Connection id "0HNHEQPQ0U896" stopped.
2025-11-29 01:40:08.595 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:40:08.596 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-11-29 01:40:18.598 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:40:18.599 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 1 items
2025-11-29 01:40:18.845 +02:00 [DBG] Connection id "0HNHEQPQ0U897" accepted.
2025-11-29 01:40:18.846 +02:00 [DBG] Connection id "0HNHEQPQ0U897" started.
2025-11-29 01:40:18.850 +02:00 [DBG] Connection 0HNHEQPQ0U897 established using the following protocol: "Tls13"
2025-11-29 01:40:18.853 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 01:40:18.856 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 01:40:18.858 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 01:40:18.859 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:40:18.860 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:40:18.861 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:40:18.862 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:40:18.863 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:40:18.864 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:40:18.865 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 01:40:18.867 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:40:18.868 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:40:18.869 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:40:18.870 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:40:18.871 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:40:18.873 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:40:18.874 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:40:18.875 +02:00 [INF] get all schedule called at "2025-11-29T01:40:18.8758731+02:00"
2025-11-29 01:40:18.876 +02:00 [INF] Fetching all schedules
2025-11-29 01:40:18.878 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:40:18.881 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:40:18.881 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:40:18.882 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:18.884 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:18.885 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:40:18.886 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:40:18.886 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:40:18.887 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:40:18.898 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:40:18.900 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.901 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.903 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.904 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.905 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.907 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.908 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.910 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.911 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.913 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.914 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.915 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.917 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.918 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.920 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.921 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.922 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.923 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.925 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.926 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.927 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.929 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.930 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.933 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.934 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.935 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.937 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.938 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.939 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.940 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.942 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.943 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.944 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.945 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.946 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.947 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.949 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.950 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.952 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.953 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.954 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.955 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:18.956 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:18.957 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 57ms reading results.
2025-11-29 01:40:18.959 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:18.960 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 01:40:18.961 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:40:18.964 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:40:18.964 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:40:18.965 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:40:18.966 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:40:18.967 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:40:18.972 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 99.8625ms
2025-11-29 01:40:18.974 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:40:18.975 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:40:18.976 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:18.977 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:40:18.978 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 125.505ms
2025-11-29 01:40:24.104 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 01:40:24.106 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 01:40:24.107 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 01:40:24.109 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:40:24.109 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:40:24.110 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:40:24.111 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:40:24.112 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:40:24.112 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:40:24.113 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:40:24.114 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:40:24.115 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:40:24.116 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:40:24.117 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:40:24.118 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:40:24.119 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:40:24.120 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:40:24.122 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:40:24.122 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:40:24.123 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:40:24.124 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:40:24.125 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:40:24.126 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:40:24.126 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:40:24.1269515+02:00"
2025-11-29 01:40:24.127 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 01:40:24.128 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:40:24.130 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:40:24.130 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:40:24.131 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:24.132 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:24.133 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:40:24.133 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:40:24.134 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 01:40:24.135 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:40:24.146 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:40:24.147 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:24.149 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:24.149 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:24.150 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:24.151 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:24.152 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:24.153 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:24.154 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:24.155 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:24.155 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:24.156 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:40:24.157 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:24.158 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-29 01:40:24.159 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:24.160 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:40:24.161 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:40:24.163 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:40:24.163 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:40:24.164 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:40:24.164 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:40:24.165 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:40:24.166 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 46.73ms
2025-11-29 01:40:24.167 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:40:24.168 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:40:24.169 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:40:24.170 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:40:24.171 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 67.179ms
2025-11-29 01:40:28.602 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:40:28.603 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-11-29 01:40:38.604 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:40:38.605 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2025-11-29 01:40:48.606 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:40:48.607 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0042ms - processed: 0 items - remaining: 1 items
2025-11-29 01:40:58.608 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:40:58.609 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-11-29 01:41:08.611 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:41:08.612 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-11-29 01:41:18.613 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:41:18.614 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-11-29 01:41:28.616 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:41:28.617 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-11-29 01:41:38.619 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:41:38.620 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-11-29 01:41:48.622 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:41:48.623 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-11-29 01:41:58.625 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 01:41:58.626 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-11-29 01:51:27.171 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-29 01:51:27.303 +02:00 [DBG] Hosting starting
2025-11-29 01:51:27.332 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 01:51:27.345 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-29 01:51:27.355 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-29 01:51:27.357 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-29 01:51:27.359 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-29 01:51:27.363 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-29 01:51:27.368 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-29 01:51:27.369 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-29 01:51:27.370 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-29 01:51:27.376 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-29 01:51:27.380 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-29 01:51:27.383 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-29 01:51:27.386 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-29 01:51:27.392 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-29 01:51:27.394 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-29 01:51:27.396 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-29 01:51:27.398 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-29 01:51:27.404 +02:00 [DBG] Middleware loaded
2025-11-29 01:51:27.406 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-29 01:51:27.409 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-29 01:51:27.488 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-29 01:51:27.576 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-29 01:51:27.578 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-29 01:51:27.579 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-29 01:51:27.579 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-29 01:51:27.580 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-29 01:51:27.581 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-29 01:51:27.654 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 01:51:27.656 +02:00 [INF] Hosting environment: Development
2025-11-29 01:51:27.657 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-29 01:51:27.658 +02:00 [DBG] Hosting started
2025-11-29 01:51:27.796 +02:00 [DBG] Connection id "0HNHER460K6JB" received FIN.
2025-11-29 01:51:27.802 +02:00 [DBG] Connection id "0HNHER460K6JB" accepted.
2025-11-29 01:51:27.803 +02:00 [DBG] Connection id "0HNHER460K6JB" started.
2025-11-29 01:51:27.817 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 01:51:27.844 +02:00 [DBG] Connection id "0HNHER460K6JB" stopped.
2025-11-29 01:51:27.847 +02:00 [DBG] Connection id "0HNHER460K6JB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:51:28.159 +02:00 [DBG] Connection id "0HNHER460K6JC" accepted.
2025-11-29 01:51:28.160 +02:00 [DBG] Connection id "0HNHER460K6JC" started.
2025-11-29 01:51:28.194 +02:00 [DBG] Connection 0HNHER460K6JC established using the following protocol: "Tls13"
2025-11-29 01:51:28.246 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-29 01:51:28.328 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-29 01:51:28.359 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-29 01:51:28.361 +02:00 [DBG] Request did not match any endpoints
2025-11-29 01:51:28.406 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-29 01:51:28.408 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-29 01:51:28.421 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-29 01:51:28.423 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-29 01:51:28.426 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 186.8436ms
2025-11-29 01:51:28.461 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 01:51:28.461 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-29 01:51:28.470 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-29 01:51:28.472 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 11.0845ms
2025-11-29 01:51:28.509 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.013ms
2025-11-29 01:51:28.597 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-29 01:51:28.600 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-29 01:51:28.600 +02:00 [DBG] Request did not match any endpoints
2025-11-29 01:51:28.637 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 40.7477ms
2025-11-29 01:51:30.782 +02:00 [DBG] Connection id "0HNHER460K6JD" accepted.
2025-11-29 01:51:30.782 +02:00 [DBG] Connection id "0HNHER460K6JD" received FIN.
2025-11-29 01:51:30.783 +02:00 [DBG] Connection id "0HNHER460K6JD" started.
2025-11-29 01:51:30.784 +02:00 [DBG] Connection id "0HNHER460K6JE" accepted.
2025-11-29 01:51:30.789 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 01:51:30.789 +02:00 [DBG] Connection id "0HNHER460K6JE" started.
2025-11-29 01:51:30.791 +02:00 [DBG] Connection id "0HNHER460K6JD" stopped.
2025-11-29 01:51:30.792 +02:00 [DBG] Connection id "0HNHER460K6JD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:51:30.800 +02:00 [DBG] Connection 0HNHER460K6JE established using the following protocol: "Tls13"
2025-11-29 01:51:30.805 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Patient - null null
2025-11-29 01:51:30.809 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-11-29 01:51:30.813 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetAllPatients (Hospital)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-11-29 01:51:30.814 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetAllPatients (Hospital)'
2025-11-29 01:51:30.817 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:51:30.844 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:51:30.847 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetAllPatients (Hospital)'
2025-11-29 01:51:30.863 +02:00 [INF] Route matched with {action = "GetAllPatients", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 01:51:30.866 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:51:30.867 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:51:30.869 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:51:30.870 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:51:30.871 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:51:30.873 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 01:51:30.972 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-29 01:51:31.175 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 01:51:31.178 +02:00 [INF] get all patient  called at "2025-11-29T01:51:31.1782467+02:00"
2025-11-29 01:51:31.181 +02:00 [INF] Fetching all patients
2025-11-29 01:51:31.669 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-29 01:51:31.670 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-29 01:51:31.671 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-29 01:51:31.673 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-29 01:51:31.675 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-29 01:51:31.765 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-29 01:51:31.766 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-29 01:51:31.908 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:51:31.946 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(p => p.User)
    .Include(p => p.MedicalRecords)
    .ThenInclude(m => m.Doctor)
    .ThenInclude(d => d.User)'
2025-11-29 01:51:32.006 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-29 01:51:32.008 +02:00 [DBG] Including navigation: 'Patient.MedicalRecords'.
2025-11-29 01:51:32.011 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-11-29 01:51:32.013 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 01:51:32.170 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
            1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 5], [Property: User.AccessFailedCount (int) Required, 6], [Property: User.ConcurrencyStamp (string) Concurrency, 7], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: User.DateOfBirth (DateOnly?), 9], [Property: User.Email (string) Index MaxLength(256), 10], [Property: User.EmailConfirmed (bool) Required, 11], [Property: User.FullName (string) Required MaxLength(150), 12], [Property: User.Gender (GenderType?) MaxLength(10), 13], [Property: User.LockoutEnabled (bool) Required, 14], [Property: User.LockoutEnd (DateTimeOffset?), 15], [Property: User.NormalizedEmail (string) Index MaxLength(256), 16], [Property: User.NormalizedUserName (string) Index MaxLength(256), 17], [Property: User.PasswordHash (string), 18], [Property: User.PhoneNumber (string), 19], [Property: User.PhoneNumberConfirmed (bool) Required, 20], [Property: User.RefreshToken (string), 21], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 22], [Property: User.Role (string) Required MaxLength(50), 23], [Property: User.SecurityStamp (string), 24], [Property: User.TwoFactorEnabled (bool) Required, 25], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: User.UserName (string) MaxLength(256), 27] }
            2 -> 0
            3 -> 5
            4 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 28], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 29], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: MedicalRecord.Diagnosis (string), 31], [Property: MedicalRecord.DoctorId (int) Required FK Index, 32], [Property: MedicalRecord.Notes (string), 33], [Property: MedicalRecord.PatientId (int) Required FK Index, 34], [Property: MedicalRecord.TreatmentPlan (string), 35], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
            5 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Doctor.Available (bool?), 38], [Property: Doctor.Biography (string), 39], [Property: Doctor.ConsultationFees (decimal) Required, 40], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 41], [Property: Doctor.ExperienceYears (int?), 42], [Property: Doctor.ImageURL (string) MaxLength(300), 43], [Property: Doctor.SpecializationId (int) Required FK Index, 44], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Doctor.UserId (string) Required FK Index, 46] }
            6 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
            7 -> 28
            8 -> 37
            9 -> 47
        SELECT p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, t.RecordId, t.AppointmentId, t.CreatedAt, t.Diagnosis, t.DoctorId, t.Notes, t.PatientId, t.TreatmentPlan, t.UpdatedAt, t.DoctorId0, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt0, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt0, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt1, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt1, t.UserName
        FROM Patients AS p
        INNER JOIN Users AS u ON p.UserId == u.Id
        LEFT JOIN 
        (
            SELECT m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId AS DoctorId0, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt AS CreatedAt0, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt AS UpdatedAt0, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt AS CreatedAt1, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt AS UpdatedAt1, u0.UserName
            FROM MedicalRecords AS m
            INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
            INNER JOIN Users AS u0 ON d.UserId == u0.Id
        ) AS t ON p.PatientId == t.PatientId
        ORDER BY p.PatientId ASC, u.Id ASC, t.RecordId ASC, t.DoctorId0 ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 01:51:32.196 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:51:32.211 +02:00 [DBG] Created DbConnection. (13ms).
2025-11-29 01:51:32.214 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:51:32.440 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:51:32.444 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:51:32.449 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-11-29 01:51:32.452 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-11-29 01:51:32.457 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [t].[RecordId], [t].[AppointmentId], [t].[CreatedAt], [t].[Diagnosis], [t].[DoctorId], [t].[Notes], [t].[PatientId], [t].[TreatmentPlan], [t].[UpdatedAt], [t].[DoctorId0], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt0], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt0], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM [Patients] AS [p]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t] ON [p].[PatientId] = [t].[PatientId]
ORDER BY [p].[PatientId], [u].[Id], [t].[RecordId], [t].[DoctorId0]
2025-11-29 01:51:32.509 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [t].[RecordId], [t].[AppointmentId], [t].[CreatedAt], [t].[Diagnosis], [t].[DoctorId], [t].[Notes], [t].[PatientId], [t].[TreatmentPlan], [t].[UpdatedAt], [t].[DoctorId0], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt0], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt0], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM [Patients] AS [p]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t] ON [p].[PatientId] = [t].[PatientId]
ORDER BY [p].[PatientId], [u].[Id], [t].[RecordId], [t].[DoctorId0]
2025-11-29 01:51:32.543 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:51:32.578 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:51:32.580 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:51:32.611 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:51:32.612 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:51:32.613 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:51:32.618 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:51:32.622 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 107ms reading results.
2025-11-29 01:51:32.626 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:51:32.631 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (5ms).
2025-11-29 01:51:32.632 +02:00 [INF] 2 patients retrieved successfully
2025-11-29 01:51:32.646 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:51:32.649 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:51:32.649 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:51:32.650 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:51:32.652 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:51:32.653 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Patient.PatientDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:51:32.672 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetAllPatients (Hospital) in 1797.626ms
2025-11-29 01:51:32.674 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetAllPatients (Hospital)'
2025-11-29 01:51:32.675 +02:00 [DBG] Connection id "0HNHER460K6JE" completed keep alive response.
2025-11-29 01:51:32.678 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:51:32.682 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:51:32.684 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-29 01:51:32.686 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Patient - 200 null application/json; charset=utf-8 1881.3197ms
2025-11-29 01:58:49.717 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-29 01:58:49.844 +02:00 [DBG] Hosting starting
2025-11-29 01:58:49.868 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 01:58:49.880 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-29 01:58:49.887 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-29 01:58:49.888 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-29 01:58:49.890 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-29 01:58:49.894 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-29 01:58:49.899 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-29 01:58:49.900 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-29 01:58:49.901 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-29 01:58:49.907 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-29 01:58:49.912 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-29 01:58:49.915 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-29 01:58:49.918 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-29 01:58:49.923 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-29 01:58:49.925 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-29 01:58:49.928 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-29 01:58:49.929 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-29 01:58:49.936 +02:00 [DBG] Middleware loaded
2025-11-29 01:58:49.938 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-29 01:58:49.940 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-29 01:58:50.023 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-29 01:58:50.103 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-29 01:58:50.105 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-29 01:58:50.105 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-29 01:58:50.106 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-29 01:58:50.107 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-29 01:58:50.108 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-29 01:58:50.179 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 01:58:50.180 +02:00 [INF] Hosting environment: Development
2025-11-29 01:58:50.181 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-29 01:58:50.182 +02:00 [DBG] Hosting started
2025-11-29 01:58:50.315 +02:00 [DBG] Connection id "0HNHER89SQDVH" accepted.
2025-11-29 01:58:50.317 +02:00 [DBG] Connection id "0HNHER89SQDVH" started.
2025-11-29 01:58:50.342 +02:00 [DBG] Connection id "0HNHER89SQDVI" accepted.
2025-11-29 01:58:50.347 +02:00 [DBG] Connection id "0HNHER89SQDVI" started.
2025-11-29 01:58:50.348 +02:00 [DBG] Connection id "0HNHER89SQDVH" received FIN.
2025-11-29 01:58:50.348 +02:00 [DBG] Connection id "0HNHER89SQDVI" received FIN.
2025-11-29 01:58:50.360 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 01:58:50.360 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 01:58:50.386 +02:00 [DBG] Connection id "0HNHER89SQDVI" stopped.
2025-11-29 01:58:50.386 +02:00 [DBG] Connection id "0HNHER89SQDVH" stopped.
2025-11-29 01:58:50.389 +02:00 [DBG] Connection id "0HNHER89SQDVH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:58:50.389 +02:00 [DBG] Connection id "0HNHER89SQDVI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:58:50.526 +02:00 [DBG] Connection id "0HNHER89SQDVJ" accepted.
2025-11-29 01:58:50.528 +02:00 [DBG] Connection id "0HNHER89SQDVJ" started.
2025-11-29 01:58:50.562 +02:00 [DBG] Connection 0HNHER89SQDVJ established using the following protocol: "Tls13"
2025-11-29 01:58:50.644 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-29 01:58:50.746 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-29 01:58:50.776 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-29 01:58:50.777 +02:00 [DBG] Request did not match any endpoints
2025-11-29 01:58:50.820 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-29 01:58:50.822 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-29 01:58:50.835 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-29 01:58:50.836 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-29 01:58:50.839 +02:00 [DBG] Connection id "0HNHER89SQDVJ" received FIN.
2025-11-29 01:58:50.841 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 208.9332ms
2025-11-29 01:58:50.846 +02:00 [DBG] Connection id "0HNHER89SQDVJ" is closed. The last processed stream ID was 1.
2025-11-29 01:58:50.846 +02:00 [DBG] Connection id "0HNHER89SQDVK" accepted.
2025-11-29 01:58:50.847 +02:00 [DBG] Connection id "0HNHER89SQDVJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 01:58:50.848 +02:00 [DBG] Connection id "0HNHER89SQDVK" started.
2025-11-29 01:58:50.852 +02:00 [DBG] The connection queue processing loop for 0HNHER89SQDVJ completed.
2025-11-29 01:58:50.854 +02:00 [DBG] Connection 0HNHER89SQDVK established using the following protocol: "Tls13"
2025-11-29 01:58:50.855 +02:00 [DBG] Connection id "0HNHER89SQDVJ" stopped.
2025-11-29 01:58:50.858 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 01:58:50.865 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-29 01:58:50.868 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 10.5438ms
2025-11-29 01:58:50.880 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-29 01:58:50.924 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.688ms
2025-11-29 01:58:50.988 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-29 01:58:50.992 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-29 01:58:50.993 +02:00 [DBG] Request did not match any endpoints
2025-11-29 01:58:51.041 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 54.0996ms
2025-11-29 01:59:03.843 +02:00 [DBG] Connection id "0HNHER89SQDVL" accepted.
2025-11-29 01:59:03.844 +02:00 [DBG] Connection id "0HNHER89SQDVL" started.
2025-11-29 01:59:03.849 +02:00 [DBG] Connection 0HNHER89SQDVL established using the following protocol: "Tls13"
2025-11-29 01:59:03.852 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 01:59:03.860 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 01:59:03.864 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 01:59:03.867 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:59:03.870 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:59:03.872 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:59:03.873 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:59:03.909 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:59:03.915 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:59:03.943 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 01:59:03.946 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:59:03.947 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:59:03.949 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:59:03.951 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:59:03.952 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:59:03.954 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:59:04.064 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-29 01:59:04.269 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 01:59:04.272 +02:00 [INF] get all schedule called at "2025-11-29T01:59:04.2723984+02:00"
2025-11-29 01:59:04.274 +02:00 [INF] Fetching all schedules
2025-11-29 01:59:04.718 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-29 01:59:04.719 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-29 01:59:04.720 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-29 01:59:04.721 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-29 01:59:04.723 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-29 01:59:04.835 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-29 01:59:04.837 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-29 01:59:04.992 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:59:05.028 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(s => s.Branch)'
2025-11-29 01:59:05.090 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-29 01:59:05.092 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 01:59:05.094 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-29 01:59:05.095 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-11-29 01:59:05.229 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Specialization.Description (string), 44], [Property: Specialization.ImageURL (string) MaxLength(300), 45], [Property: Specialization.Name (string) Required MaxLength(120), 46], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 48], [Property: Branch.Address (string) MaxLength(250), 49], [Property: Branch.BranchName (string) Required MaxLength(150), 50], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Branch.Description (string), 52], [Property: Branch.Email (string) MaxLength(200), 53], [Property: Branch.ImageURL (string) MaxLength(300), 54], [Property: Branch.Latitude (double?), 55], [Property: Branch.Longitude (double?), 56], [Property: Branch.Phone (string) MaxLength(25), 57], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 58] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s0.SpecializationId, s0.CreatedAt, s0.Description, s0.ImageURL, s0.Name, s0.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s0 ON d.SpecializationId == s0.SpecializationId
        INNER JOIN Branches AS b ON s.BranchId == b.BranchId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 01:59:05.255 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:59:05.271 +02:00 [DBG] Created DbConnection. (14ms).
2025-11-29 01:59:05.275 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:59:05.604 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:59:05.610 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:59:05.614 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-11-29 01:59:05.616 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-11-29 01:59:05.622 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:59:05.669 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 01:59:05.707 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.747 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.755 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.790 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.792 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.829 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.832 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.850 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.852 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.868 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.870 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.871 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.873 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.874 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.875 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.876 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.881 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.882 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.883 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.884 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.885 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.887 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.888 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.889 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.890 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.891 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.892 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.893 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.894 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.895 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.896 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.897 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.898 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.899 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.900 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.901 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.902 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.903 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.904 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.905 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.906 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.908 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.909 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:05.913 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:59:05.918 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 243ms reading results.
2025-11-29 01:59:05.922 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:59:05.927 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (4ms).
2025-11-29 01:59:05.944 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:59:05.947 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:59:05.948 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:59:05.949 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:59:05.951 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:59:05.952 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 01:59:05.976 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 2021.0006ms
2025-11-29 01:59:05.978 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 01:59:05.981 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:59:05.985 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:59:05.986 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 01:59:05.988 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 2135.5837ms
2025-11-29 01:59:09.039 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 01:59:09.043 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 01:59:09.045 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 01:59:09.046 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:59:09.047 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:59:09.048 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:59:09.048 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:59:09.050 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:59:09.050 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:59:09.058 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 01:59:09.060 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:59:09.061 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:59:09.062 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:59:09.063 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:59:09.064 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:59:09.065 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:59:09.078 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 01:59:09.088 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:59:09.091 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 01:59:09.093 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:59:09.094 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:59:09.095 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 01:59:09.098 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 01:59:09.100 +02:00 [INF] Get  doctor By Id called at "2025-11-29T01:59:09.1005566+02:00"
2025-11-29 01:59:09.102 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 01:59:09.136 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 01:59:09.143 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-29 01:59:09.148 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 01:59:09.149 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-29 01:59:09.151 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-29 01:59:09.153 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-29 01:59:09.199 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-29 01:59:09.208 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 01:59:09.216 +02:00 [DBG] Creating DbConnection.
2025-11-29 01:59:09.217 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 01:59:09.218 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:59:09.220 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:59:09.220 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 01:59:09.221 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 01:59:09.224 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-29 01:59:09.227 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:59:09.253 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 01:59:09.256 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:09.257 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:09.257 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:09.258 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:09.259 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:09.269 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:09.272 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:09.273 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:09.274 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:09.276 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:09.277 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 01:59:09.278 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:59:09.280 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 24ms reading results.
2025-11-29 01:59:09.281 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:59:09.282 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 01:59:09.292 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:59:09.294 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:59:09.294 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 01:59:09.295 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 01:59:09.295 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 01:59:09.297 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 01:59:09.312 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 247.636ms
2025-11-29 01:59:09.314 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 01:59:09.315 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 01:59:09.316 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 01:59:09.317 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 01:59:09.318 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 278.945ms
2025-11-29 01:59:11.261 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:59:11.263 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:59:11.263 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:59:11.264 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:59:11.265 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:59:11.266 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:59:11.266 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:59:11.268 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 7.3441ms
2025-11-29 01:59:11.270 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 103
2025-11-29 01:59:11.272 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:59:11.273 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:59:11.274 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:59:11.275 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:59:11.276 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:59:11.277 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:59:11.279 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:59:11.279 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:59:11.284 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:59:11.285 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:59:11.286 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:59:11.287 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:59:11.288 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:59:11.289 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:59:11.290 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:59:11.293 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:59:11.294 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:59:11.296 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:59:11.298 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:59:11.307 +02:00 [DBG] Connection id "0HNHER89SQDVL", Request id "0HNHER89SQDVL:00000007": started reading request body.
2025-11-29 01:59:11.309 +02:00 [DBG] Connection id "0HNHER89SQDVL", Request id "0HNHER89SQDVL:00000007": done reading request body.
2025-11-29 01:59:11.377 +02:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Int32. Path: $.patientId | LineNumber: 0 | BytePositionInLine: 17.
2025-11-29 01:59:11.378 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:59:11.379 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:59:11.380 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:59:11.385 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:59:11.386 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-29 01:59:11.388 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-29 01:59:11.389 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:59:11.390 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:59:11.391 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-29 01:59:11.392 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-29 01:59:11.393 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 01:59:11.687 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 396.3541ms
2025-11-29 01:59:11.688 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:59:11.689 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/problem+json; charset=utf-8 418.9098ms
2025-11-29 01:59:52.595 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 01:59:52.601 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:59:52.601 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 01:59:52.602 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:59:52.603 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:59:52.604 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:59:52.605 +02:00 [DBG] The request is a preflight request.
2025-11-29 01:59:52.605 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 10.4717ms
2025-11-29 01:59:52.607 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 103
2025-11-29 01:59:52.610 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:59:52.610 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:59:52.611 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:59:52.612 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:59:52.613 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:59:52.613 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:59:52.614 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:59:52.615 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:59:52.615 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:59:52.617 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:59:52.618 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:59:52.619 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:59:52.620 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:59:52.621 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:59:52.621 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:59:52.626 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:59:52.627 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:59:52.628 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:59:52.629 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:59:52.630 +02:00 [DBG] Connection id "0HNHER89SQDVL", Request id "0HNHER89SQDVL:0000000B": started reading request body.
2025-11-29 01:59:52.631 +02:00 [DBG] Connection id "0HNHER89SQDVL", Request id "0HNHER89SQDVL:0000000B": done reading request body.
2025-11-29 01:59:52.632 +02:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Int32. Path: $.patientId | LineNumber: 0 | BytePositionInLine: 17.
2025-11-29 01:59:52.633 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:59:52.634 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:59:52.635 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:59:52.636 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:59:52.636 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-29 01:59:52.637 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-29 01:59:52.638 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:59:52.640 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:59:52.640 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-29 01:59:52.642 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-29 01:59:52.643 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 01:59:52.644 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 22.2569ms
2025-11-29 01:59:52.645 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:59:52.646 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/problem+json; charset=utf-8 39.1617ms
2025-11-29 01:59:54.829 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 103
2025-11-29 01:59:54.833 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 01:59:54.835 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 01:59:54.836 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:59:54.837 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 01:59:54.838 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 01:59:54.839 +02:00 [INF] CORS policy execution successful.
2025-11-29 01:59:54.840 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 01:59:54.841 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:59:54.842 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 01:59:54.844 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 01:59:54.846 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 01:59:54.848 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 01:59:54.851 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 01:59:54.853 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 01:59:54.855 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:59:54.857 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 01:59:54.859 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:59:54.860 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 01:59:54.862 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 01:59:54.864 +02:00 [DBG] Connection id "0HNHER89SQDVL", Request id "0HNHER89SQDVL:0000000D": started reading request body.
2025-11-29 01:59:54.865 +02:00 [DBG] Connection id "0HNHER89SQDVL", Request id "0HNHER89SQDVL:0000000D": done reading request body.
2025-11-29 01:59:54.869 +02:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Int32. Path: $.patientId | LineNumber: 0 | BytePositionInLine: 17.
2025-11-29 01:59:54.870 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:59:54.872 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:59:54.874 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 01:59:54.876 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 01:59:54.878 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-29 01:59:54.879 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-29 01:59:54.881 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 01:59:54.884 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 01:59:54.885 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-29 01:59:54.888 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-29 01:59:54.889 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 01:59:54.892 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 36.8004ms
2025-11-29 01:59:54.893 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 01:59:54.895 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/problem+json; charset=utf-8 65.7892ms
2025-11-29 02:00:01.223 +02:00 [DBG] Connection id "0HNHER89SQDVL" received FIN.
2025-11-29 02:00:01.223 +02:00 [DBG] Connection id "0HNHER89SQDVK" received FIN.
2025-11-29 02:00:01.224 +02:00 [DBG] Connection id "0HNHER89SQDVL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:00:01.224 +02:00 [DBG] Connection id "0HNHER89SQDVL" is closed. The last processed stream ID was 13.
2025-11-29 02:00:01.228 +02:00 [DBG] Connection id "0HNHER89SQDVK" is closed. The last processed stream ID was 5.
2025-11-29 02:00:01.230 +02:00 [DBG] The connection queue processing loop for 0HNHER89SQDVK completed.
2025-11-29 02:00:01.236 +02:00 [DBG] The connection queue processing loop for 0HNHER89SQDVL completed.
2025-11-29 02:00:01.236 +02:00 [DBG] Connection id "0HNHER89SQDVK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:00:01.239 +02:00 [DBG] Connection id "0HNHER89SQDVL" stopped.
2025-11-29 02:00:01.241 +02:00 [DBG] Connection id "0HNHER89SQDVK" stopped.
2025-11-29 02:00:16.879 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-29 02:00:17.012 +02:00 [DBG] Hosting starting
2025-11-29 02:00:17.037 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 02:00:17.050 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-29 02:00:17.058 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-29 02:00:17.060 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-29 02:00:17.061 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-29 02:00:17.065 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-29 02:00:17.070 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-29 02:00:17.071 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-29 02:00:17.072 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-29 02:00:17.079 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-29 02:00:17.084 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-29 02:00:17.088 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-29 02:00:17.090 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-29 02:00:17.096 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-29 02:00:17.098 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-29 02:00:17.100 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-29 02:00:17.102 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-29 02:00:17.107 +02:00 [DBG] Middleware loaded
2025-11-29 02:00:17.110 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-29 02:00:17.112 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-29 02:00:17.191 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-29 02:00:17.286 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-29 02:00:17.287 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-29 02:00:17.288 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-29 02:00:17.289 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-29 02:00:17.290 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-29 02:00:17.291 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-29 02:00:17.376 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 02:00:17.377 +02:00 [INF] Hosting environment: Development
2025-11-29 02:00:17.378 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-29 02:00:17.379 +02:00 [DBG] Hosting started
2025-11-29 02:00:17.708 +02:00 [DBG] Connection id "0HNHER93U8IHR" accepted.
2025-11-29 02:00:17.708 +02:00 [DBG] Connection id "0HNHER93U8IHQ" accepted.
2025-11-29 02:00:17.710 +02:00 [DBG] Connection id "0HNHER93U8IHR" started.
2025-11-29 02:00:17.710 +02:00 [DBG] Connection id "0HNHER93U8IHQ" started.
2025-11-29 02:00:17.743 +02:00 [DBG] Connection id "0HNHER93U8IHR" received FIN.
2025-11-29 02:00:17.743 +02:00 [DBG] Connection id "0HNHER93U8IHQ" received FIN.
2025-11-29 02:00:17.756 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 02:00:17.756 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 02:00:17.787 +02:00 [DBG] Connection id "0HNHER93U8IHQ" stopped.
2025-11-29 02:00:17.787 +02:00 [DBG] Connection id "0HNHER93U8IHR" stopped.
2025-11-29 02:00:17.791 +02:00 [DBG] Connection id "0HNHER93U8IHR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:00:17.791 +02:00 [DBG] Connection id "0HNHER93U8IHQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:00:17.871 +02:00 [DBG] Connection id "0HNHER93U8IHS" accepted.
2025-11-29 02:00:17.873 +02:00 [DBG] Connection id "0HNHER93U8IHS" started.
2025-11-29 02:00:17.904 +02:00 [DBG] Connection 0HNHER93U8IHS established using the following protocol: "Tls13"
2025-11-29 02:00:17.963 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-29 02:00:18.063 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-29 02:00:18.110 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-29 02:00:18.112 +02:00 [DBG] Request did not match any endpoints
2025-11-29 02:00:18.168 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-29 02:00:18.170 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-29 02:00:18.188 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-29 02:00:18.191 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-29 02:00:18.196 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 241.1976ms
2025-11-29 02:00:18.235 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 02:00:18.235 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-29 02:00:18.245 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-29 02:00:18.247 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 12.3416ms
2025-11-29 02:00:18.287 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.7564ms
2025-11-29 02:00:18.341 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-29 02:00:18.345 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-29 02:00:18.346 +02:00 [DBG] Request did not match any endpoints
2025-11-29 02:00:18.391 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 50.6111ms
2025-11-29 02:00:25.644 +02:00 [DBG] Connection id "0HNHER93U8IHT" accepted.
2025-11-29 02:00:25.645 +02:00 [DBG] Connection id "0HNHER93U8IHT" started.
2025-11-29 02:00:25.649 +02:00 [DBG] Connection 0HNHER93U8IHT established using the following protocol: "Tls13"
2025-11-29 02:00:25.651 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 02:00:25.655 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:00:25.656 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:00:25.659 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:00:25.660 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:00:25.661 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:00:25.662 +02:00 [DBG] The request is a preflight request.
2025-11-29 02:00:25.664 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 12.8309ms
2025-11-29 02:00:25.666 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 103
2025-11-29 02:00:25.669 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:00:25.673 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 02:00:25.675 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:00:25.676 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:00:25.678 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:00:25.679 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:00:25.709 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:00:25.712 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:00:25.736 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 02:00:25.740 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:00:25.742 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:00:25.744 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:00:25.746 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:00:25.747 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:00:25.750 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:00:25.836 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-29 02:00:26.033 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:00:26.047 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:00:26.052 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 02:00:26.055 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:00:26.067 +02:00 [DBG] Connection id "0HNHER93U8IHT", Request id "0HNHER93U8IHT:00000003": started reading request body.
2025-11-29 02:00:26.069 +02:00 [DBG] Connection id "0HNHER93U8IHT", Request id "0HNHER93U8IHT:00000003": done reading request body.
2025-11-29 02:00:26.082 +02:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Int32. Path: $.patientId | LineNumber: 0 | BytePositionInLine: 17.
2025-11-29 02:00:26.083 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:00:26.084 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:00:26.085 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:00:26.090 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:00:26.093 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-29 02:00:26.095 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-29 02:00:26.097 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:00:26.100 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:00:26.102 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-29 02:00:26.104 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-29 02:00:26.105 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 02:00:26.128 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 376.7552ms
2025-11-29 02:00:26.129 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:00:26.131 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/problem+json; charset=utf-8 465.4785ms
2025-11-29 02:00:28.375 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 103
2025-11-29 02:00:28.377 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:00:28.378 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 02:00:28.379 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:00:28.380 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:00:28.381 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:00:28.381 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:00:28.383 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:00:28.384 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:00:28.385 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 02:00:28.387 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:00:28.388 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:00:28.388 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:00:28.390 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:00:28.391 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:00:28.391 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:00:28.398 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:00:28.399 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:00:28.400 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 02:00:28.401 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:00:28.402 +02:00 [DBG] Connection id "0HNHER93U8IHT", Request id "0HNHER93U8IHT:00000005": started reading request body.
2025-11-29 02:00:28.403 +02:00 [DBG] Connection id "0HNHER93U8IHT", Request id "0HNHER93U8IHT:00000005": done reading request body.
2025-11-29 02:00:28.405 +02:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Int32. Path: $.patientId | LineNumber: 0 | BytePositionInLine: 17.
2025-11-29 02:00:28.405 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:00:28.406 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:00:28.407 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:00:28.408 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:00:28.410 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-29 02:00:28.410 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-29 02:00:28.411 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:00:28.412 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:00:28.413 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-29 02:00:28.415 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-29 02:00:28.415 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 02:00:28.417 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 25.1183ms
2025-11-29 02:00:28.417 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:00:28.418 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/problem+json; charset=utf-8 43.0291ms
2025-11-29 02:00:32.486 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 02:00:32.489 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 02:00:32.490 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 02:00:32.492 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:00:32.494 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:00:32.495 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:00:32.496 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:00:32.499 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:00:32.500 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:00:32.504 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 02:00:32.505 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:00:32.506 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:00:32.507 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:00:32.509 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:00:32.510 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:00:32.511 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:00:32.514 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:00:32.516 +02:00 [INF] get all schedule called at "2025-11-29T02:00:32.5163495+02:00"
2025-11-29 02:00:32.518 +02:00 [INF] Fetching all schedules
2025-11-29 02:00:33.020 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-29 02:00:33.022 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-29 02:00:33.023 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-29 02:00:33.025 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-29 02:00:33.026 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-29 02:00:33.130 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-29 02:00:33.132 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-29 02:00:33.276 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:00:33.319 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(s => s.Branch)'
2025-11-29 02:00:33.390 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-29 02:00:33.393 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 02:00:33.395 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-29 02:00:33.397 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-11-29 02:00:33.554 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Specialization.Description (string), 44], [Property: Specialization.ImageURL (string) MaxLength(300), 45], [Property: Specialization.Name (string) Required MaxLength(120), 46], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 48], [Property: Branch.Address (string) MaxLength(250), 49], [Property: Branch.BranchName (string) Required MaxLength(150), 50], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Branch.Description (string), 52], [Property: Branch.Email (string) MaxLength(200), 53], [Property: Branch.ImageURL (string) MaxLength(300), 54], [Property: Branch.Latitude (double?), 55], [Property: Branch.Longitude (double?), 56], [Property: Branch.Phone (string) MaxLength(25), 57], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 58] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s0.SpecializationId, s0.CreatedAt, s0.Description, s0.ImageURL, s0.Name, s0.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s0 ON d.SpecializationId == s0.SpecializationId
        INNER JOIN Branches AS b ON s.BranchId == b.BranchId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 02:00:33.582 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:00:33.597 +02:00 [DBG] Created DbConnection. (14ms).
2025-11-29 02:00:33.601 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:00:33.801 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:00:33.804 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:00:33.813 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-11-29 02:00:33.815 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-11-29 02:00:33.821 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:00:33.864 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:00:33.897 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:33.938 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:33.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:33.978 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:33.980 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.016 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.018 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.038 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.039 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.059 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.060 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.061 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.063 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.064 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.065 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.066 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.070 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.071 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.073 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.074 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.075 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.076 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.078 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.079 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.080 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.081 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.082 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.083 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.084 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.085 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.087 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.088 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.089 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.090 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.091 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.092 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.093 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.094 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.095 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.097 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.098 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.099 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.100 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:34.105 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:00:34.110 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 241ms reading results.
2025-11-29 02:00:34.114 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:00:34.119 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (4ms).
2025-11-29 02:00:34.131 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:00:34.133 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:00:34.134 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:00:34.135 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:00:34.135 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:00:34.136 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 02:00:34.152 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 1640.9017ms
2025-11-29 02:00:34.154 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:00:34.155 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:00:34.158 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:00:34.160 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:00:34.161 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 1675.8068ms
2025-11-29 02:00:38.263 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:00:38.265 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:00:38.266 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:00:38.267 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:00:38.268 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:00:38.268 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:00:38.269 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:00:38.270 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:00:38.270 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:00:38.275 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:00:38.277 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:00:38.278 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:00:38.279 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:00:38.280 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:00:38.281 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:00:38.282 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:00:38.296 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:00:38.297 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:00:38.299 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:00:38.300 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:00:38.301 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:00:38.302 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:00:38.303 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:00:38.305 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:00:38.3055908+02:00"
2025-11-29 02:00:38.307 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:00:38.341 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:00:38.347 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-29 02:00:38.352 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 02:00:38.353 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-29 02:00:38.355 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-29 02:00:38.356 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-29 02:00:38.404 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-29 02:00:38.412 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 02:00:38.420 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:00:38.421 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:00:38.421 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:00:38.423 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:00:38.424 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:00:38.424 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:00:38.427 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-29 02:00:38.430 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:00:38.453 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:00:38.455 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:38.456 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:38.457 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:38.458 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:38.459 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:38.470 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:38.473 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:38.474 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:38.475 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:38.477 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:38.477 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:38.479 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:00:38.481 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 26ms reading results.
2025-11-29 02:00:38.482 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:00:38.483 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:00:38.493 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:00:38.495 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:00:38.495 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:00:38.496 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:00:38.496 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:00:38.497 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:00:38.510 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 228.0769ms
2025-11-29 02:00:38.512 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:00:38.513 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:00:38.514 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:00:38.515 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:00:38.516 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 253.5825ms
2025-11-29 02:00:40.319 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 02:00:40.320 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:00:40.321 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:00:40.322 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:00:40.322 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:00:40.323 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:00:40.323 +02:00 [DBG] The request is a preflight request.
2025-11-29 02:00:40.324 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.6789ms
2025-11-29 02:00:40.326 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 103
2025-11-29 02:00:40.328 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:00:40.329 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 02:00:40.330 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:00:40.331 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:00:40.331 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:00:40.332 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:00:40.333 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:00:40.333 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:00:40.334 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 02:00:40.335 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:00:40.336 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:00:40.338 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:00:40.339 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:00:40.340 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:00:40.343 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:00:40.345 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:00:40.346 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:00:40.346 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 02:00:40.348 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:00:40.349 +02:00 [DBG] Connection id "0HNHER93U8IHT", Request id "0HNHER93U8IHT:0000000D": started reading request body.
2025-11-29 02:00:40.350 +02:00 [DBG] Connection id "0HNHER93U8IHT", Request id "0HNHER93U8IHT:0000000D": done reading request body.
2025-11-29 02:00:40.351 +02:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Int32. Path: $.patientId | LineNumber: 0 | BytePositionInLine: 17.
2025-11-29 02:00:40.352 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:00:40.353 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:00:40.354 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:00:40.355 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:00:40.356 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-29 02:00:40.357 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-29 02:00:40.357 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:00:40.359 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:00:40.359 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-29 02:00:40.361 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-29 02:00:40.362 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 02:00:40.363 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 20.4646ms
2025-11-29 02:00:40.364 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:00:40.365 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/problem+json; charset=utf-8 39.5837ms
2025-11-29 02:00:44.871 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 02:00:44.873 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 02:00:44.874 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 02:00:44.876 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:00:44.877 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:00:44.878 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:00:44.879 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:00:44.880 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:00:44.881 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:00:44.882 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 02:00:44.883 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:00:44.884 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:00:44.885 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:00:44.886 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:00:44.887 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:00:44.889 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:00:44.890 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:00:44.891 +02:00 [INF] get all schedule called at "2025-11-29T02:00:44.8911686+02:00"
2025-11-29 02:00:44.892 +02:00 [INF] Fetching all schedules
2025-11-29 02:00:44.900 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:00:44.904 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:00:44.905 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:00:44.906 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:00:44.907 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:00:44.908 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:00:44.909 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:00:44.910 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:00:44.911 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:00:44.914 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:00:44.916 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.917 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.918 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.919 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.920 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.921 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.922 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.924 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.925 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.926 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.927 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.928 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.929 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.930 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.930 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.932 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.933 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.934 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.935 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.936 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.937 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.938 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.939 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.941 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.942 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.943 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.944 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.945 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.946 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.947 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.948 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.949 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.950 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.951 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.952 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.953 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.954 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.956 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.957 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.958 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.959 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:00:44.960 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:00:44.961 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 44ms reading results.
2025-11-29 02:00:44.962 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:00:44.963 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:00:44.964 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:00:44.965 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:00:44.966 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:00:44.967 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:00:44.967 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:00:44.968 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 02:00:44.970 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 81.7022ms
2025-11-29 02:00:44.971 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:00:44.972 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:00:44.973 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:00:44.974 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:00:44.975 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 104.3181ms
2025-11-29 02:04:59.751 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 02:04:59.759 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 02:04:59.760 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 02:04:59.761 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:04:59.762 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:04:59.762 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:04:59.763 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:04:59.764 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:04:59.765 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:04:59.765 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:04:59.766 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:04:59.767 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:04:59.768 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:04:59.769 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:04:59.770 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:04:59.771 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:04:59.774 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:04:59.775 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:04:59.776 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:04:59.777 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:04:59.778 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:04:59.779 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:04:59.780 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:04:59.781 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:04:59.7810565+02:00"
2025-11-29 02:04:59.781 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 02:04:59.783 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:04:59.784 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:04:59.785 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:04:59.786 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:04:59.787 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:04:59.788 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:04:59.788 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:04:59.789 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:04:59.790 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:04:59.807 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:04:59.809 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:04:59.810 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:04:59.811 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:04:59.812 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:04:59.813 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:04:59.814 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:04:59.815 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:04:59.816 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:04:59.817 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:04:59.817 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:04:59.818 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:04:59.819 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:04:59.820 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:04:59.821 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:04:59.822 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:04:59.822 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:04:59.823 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-29 02:04:59.824 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:04:59.825 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:04:59.826 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:04:59.828 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:04:59.828 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:04:59.829 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:04:59.829 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:04:59.830 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:04:59.832 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 61.2845ms
2025-11-29 02:04:59.833 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:04:59.834 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:04:59.835 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:04:59.836 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:04:59.837 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 85.7457ms
2025-11-29 02:12:30.386 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 02:12:30.391 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:12:30.392 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:12:30.393 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:12:30.394 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:12:30.394 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:12:30.395 +02:00 [DBG] The request is a preflight request.
2025-11-29 02:12:30.395 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 9.9903ms
2025-11-29 02:12:30.397 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 103
2025-11-29 02:12:30.399 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:12:30.400 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 02:12:30.401 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:12:30.402 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:12:30.402 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:12:30.403 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:12:30.403 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:12:30.404 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:12:30.405 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 02:12:30.406 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:12:30.407 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:12:30.408 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:12:30.409 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:12:30.410 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:12:30.411 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:12:30.412 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:12:30.413 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:12:30.414 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 02:12:30.416 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:12:30.417 +02:00 [DBG] Connection id "0HNHER93U8IHT", Request id "0HNHER93U8IHT:00000015": started reading request body.
2025-11-29 02:12:30.417 +02:00 [DBG] Connection id "0HNHER93U8IHT", Request id "0HNHER93U8IHT:00000015": done reading request body.
2025-11-29 02:12:30.419 +02:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Int32. Path: $.patientId | LineNumber: 0 | BytePositionInLine: 17.
2025-11-29 02:12:30.420 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:12:30.420 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:12:30.421 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:12:30.422 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:12:30.423 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-29 02:12:30.424 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-29 02:12:30.424 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:12:30.426 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:12:30.426 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-29 02:12:30.428 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-29 02:12:30.428 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 02:12:30.430 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 18.6077ms
2025-11-29 02:12:30.431 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:12:30.431 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/problem+json; charset=utf-8 34.432ms
2025-11-29 02:13:06.358 +02:00 [DBG] Connection id "0HNHER93U8IHT" received FIN.
2025-11-29 02:13:06.358 +02:00 [DBG] Connection id "0HNHER93U8IHS" received FIN.
2025-11-29 02:13:06.363 +02:00 [DBG] Connection id "0HNHER93U8IHT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:13:06.365 +02:00 [DBG] Connection id "0HNHER93U8IHS" is closed. The last processed stream ID was 7.
2025-11-29 02:13:06.365 +02:00 [DBG] Connection id "0HNHER93U8IHT" is closed. The last processed stream ID was 21.
2025-11-29 02:13:06.369 +02:00 [DBG] Connection id "0HNHER93U8IHS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:13:06.372 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8IHS completed.
2025-11-29 02:13:06.372 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8IHT completed.
2025-11-29 02:13:06.375 +02:00 [DBG] Connection id "0HNHER93U8IHT" stopped.
2025-11-29 02:13:06.375 +02:00 [DBG] Connection id "0HNHER93U8IHS" stopped.
2025-11-29 02:14:25.295 +02:00 [DBG] Connection id "0HNHER93U8IHU" received FIN.
2025-11-29 02:14:25.301 +02:00 [DBG] Connection id "0HNHER93U8IHU" accepted.
2025-11-29 02:14:25.301 +02:00 [DBG] Connection id "0HNHER93U8IHU" started.
2025-11-29 02:14:25.302 +02:00 [DBG] Connection id "0HNHER93U8IHV" accepted.
2025-11-29 02:14:25.308 +02:00 [DBG] Connection id "0HNHER93U8IHV" started.
2025-11-29 02:14:25.308 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 02:14:25.311 +02:00 [DBG] Connection id "0HNHER93U8IHU" stopped.
2025-11-29 02:14:25.312 +02:00 [DBG] Connection 0HNHER93U8IHV established using the following protocol: "Tls13"
2025-11-29 02:14:25.312 +02:00 [DBG] Connection id "0HNHER93U8IHU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:14:25.316 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/Appointment - application/json 143
2025-11-29 02:14:25.318 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:14:25.319 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 02:14:25.320 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:14:25.321 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:14:25.321 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:14:25.322 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:14:25.323 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 02:14:25.324 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:14:25.325 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:14:25.326 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:14:25.328 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:14:25.328 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:14:25.329 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:14:25.330 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:14:25.332 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:14:25.332 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 02:14:25.333 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:14:25.335 +02:00 [DBG] Connection id "0HNHER93U8IHV", Request id "0HNHER93U8IHV:00000001": started reading request body.
2025-11-29 02:14:25.336 +02:00 [DBG] Connection id "0HNHER93U8IHV", Request id "0HNHER93U8IHV:00000001": done reading request body.
2025-11-29 02:14:25.343 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 02:14:25.344 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:14:25.345 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:14:25.345 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:14:25.351 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:14:25.353 +02:00 [INF] Add Appointment called at "2025-11-29T02:14:25.3537121+02:00"
2025-11-29 02:14:25.356 +02:00 [INF] Creating appointment for PatientId: 1, DoctorId: 1, Date: "2025-12-28", Shift: "Morning"
2025-11-29 02:14:25.363 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:14:25.368 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:14:25.369 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:14:25.370 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:14:25.413 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:14:25.417 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 02:14:25.423 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 02:14:25.427 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(p => p.User)
    .Include(p => p.MedicalRecords)
    .ThenInclude(m => m.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(p => p.PatientId == __id_0)'
2025-11-29 02:14:25.429 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-29 02:14:25.430 +02:00 [DBG] Including navigation: 'Patient.MedicalRecords'.
2025-11-29 02:14:25.432 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-11-29 02:14:25.433 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 02:14:25.450 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 5], [Property: User.AccessFailedCount (int) Required, 6], [Property: User.ConcurrencyStamp (string) Concurrency, 7], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: User.DateOfBirth (DateOnly?), 9], [Property: User.Email (string) Index MaxLength(256), 10], [Property: User.EmailConfirmed (bool) Required, 11], [Property: User.FullName (string) Required MaxLength(150), 12], [Property: User.Gender (GenderType?) MaxLength(10), 13], [Property: User.LockoutEnabled (bool) Required, 14], [Property: User.LockoutEnd (DateTimeOffset?), 15], [Property: User.NormalizedEmail (string) Index MaxLength(256), 16], [Property: User.NormalizedUserName (string) Index MaxLength(256), 17], [Property: User.PasswordHash (string), 18], [Property: User.PhoneNumber (string), 19], [Property: User.PhoneNumberConfirmed (bool) Required, 20], [Property: User.RefreshToken (string), 21], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 22], [Property: User.Role (string) Required MaxLength(50), 23], [Property: User.SecurityStamp (string), 24], [Property: User.TwoFactorEnabled (bool) Required, 25], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: User.UserName (string) MaxLength(256), 27] }
                2 -> 0
                3 -> 5
                4 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 28], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 29], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: MedicalRecord.Diagnosis (string), 31], [Property: MedicalRecord.DoctorId (int) Required FK Index, 32], [Property: MedicalRecord.Notes (string), 33], [Property: MedicalRecord.PatientId (int) Required FK Index, 34], [Property: MedicalRecord.TreatmentPlan (string), 35], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
                5 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Doctor.Available (bool?), 38], [Property: Doctor.Biography (string), 39], [Property: Doctor.ConsultationFees (decimal) Required, 40], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 41], [Property: Doctor.ExperienceYears (int?), 42], [Property: Doctor.ImageURL (string) MaxLength(300), 43], [Property: Doctor.SpecializationId (int) Required FK Index, 44], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Doctor.UserId (string) Required FK Index, 46] }
                6 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
                7 -> 28
                8 -> 37
                9 -> 47
            SELECT t.PatientId, t.CreatedAt, t.EmergencyContact, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t0.RecordId, t0.AppointmentId, t0.CreatedAt, t0.Diagnosis, t0.DoctorId, t0.Notes, t0.PatientId, t0.TreatmentPlan, t0.UpdatedAt, t0.DoctorId0, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt0, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt0, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt1, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt1, t0.UserName
            FROM 
            (
                SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
                FROM Patients AS p
                INNER JOIN Users AS u ON p.UserId == u.Id
                WHERE p.PatientId == @__id_0
            ) AS t
            LEFT JOIN 
            (
                SELECT m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId AS DoctorId0, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt AS CreatedAt0, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt AS UpdatedAt0, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt AS CreatedAt1, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt AS UpdatedAt1, u0.UserName
                FROM MedicalRecords AS m
                INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
                INNER JOIN Users AS u0 ON d.UserId == u0.Id
            ) AS t0 ON t.PatientId == t0.PatientId
            ORDER BY t.PatientId ASC, t.Id ASC, t0.RecordId ASC, t0.DoctorId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 02:14:25.454 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:14:25.455 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:14:25.458 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-29 02:14:25.459 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 02:14:25.479 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 02:14:25.484 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:14:25.491 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:14:25.492 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:14:25.494 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:14:25.495 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-29 02:14:25.497 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:14:25.498 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:14:25.499 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:14:25.500 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:14:25.512 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:14:25.514 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:14:25.515 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:14:25.516 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:14:25.517 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:14:25.518 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:14:25.519 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:14:25.520 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:14:25.521 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:14:25.522 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:14:25.523 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:14:25.524 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:14:25.525 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:14:25.526 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-29 02:14:25.529 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-11-29 02:14:25.534 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 02:14:25.535 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:14:25.536 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:14:25.537 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:14:25.538 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 02:14:25.541 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 02:14:25.543 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:14:25.544 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 02:14:25.551 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Any(a => a.PatientId == __patientId_0 && a.DoctorId == __doctorId_1 && a.Date == __date_2 && (int)a.Shift == (int)__shift_3)'
2025-11-29 02:14:25.556 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Appointments AS a
                WHERE (((a.PatientId == @__patientId_0) && (a.DoctorId == @__doctorId_1)) && (a.Date == @__date_2)) && (a.Shift == @__shift_3))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 02:14:25.565 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:14:25.566 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:14:25.570 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-11-29 02:14:25.571 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 02:14:25.577 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 02:14:25.580 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:14:25.581 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 02:14:25.620 +02:00 [DBG] Rolling back transaction.
2025-11-29 02:14:25.623 +02:00 [DBG] Rolled back transaction.
2025-11-29 02:14:25.626 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:14:25.627 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:14:25.629 +02:00 [ERR] Failed to create appointment for PatientId: 1, DoctorId: 1
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-29 02:14:25.656 +02:00 [DBG] Disposing transaction.
2025-11-29 02:14:25.699 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 369.4297ms
2025-11-29 02:14:25.700 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:14:25.755 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-29 02:14:25.765 +02:00 [DBG] Connection id "0HNHER93U8IHV" completed keep alive response.
2025-11-29 02:14:25.765 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:14:25.766 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:14:25.767 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:14:25.768 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/Appointment - 400 null application/json 452.6174ms
2025-11-29 02:19:20.727 +02:00 [DBG] Connection id "0HNHER93U8II0" accepted.
2025-11-29 02:19:20.732 +02:00 [DBG] Connection id "0HNHER93U8II0" started.
2025-11-29 02:19:20.736 +02:00 [DBG] Connection 0HNHER93U8II0 established using the following protocol: "Tls13"
2025-11-29 02:19:20.745 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 02:19:20.747 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 02:19:20.748 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 02:19:20.749 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:19:20.750 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:19:20.751 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:19:20.752 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:19:20.753 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:19:20.753 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:19:20.754 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:19:20.756 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:19:20.757 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:19:20.758 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:19:20.760 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:19:20.761 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:19:20.762 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:19:20.774 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:19:20.775 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:19:20.777 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:19:20.778 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:19:20.779 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:19:20.780 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:19:20.781 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:19:20.782 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:19:20.7824035+02:00"
2025-11-29 02:19:20.783 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 02:19:20.784 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:19:20.786 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:19:20.787 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:19:20.788 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:19:20.789 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:19:20.791 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:19:20.791 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:19:20.792 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:19:20.793 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:19:20.811 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:19:20.813 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:20.814 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:20.815 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:20.816 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:20.817 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:20.818 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:20.819 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:20.821 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:20.821 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:20.822 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:20.823 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:20.825 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:20.826 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:20.827 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:20.828 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:20.829 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:19:20.830 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 17ms reading results.
2025-11-29 02:19:20.831 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:19:20.832 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:19:20.833 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:19:20.835 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:19:20.836 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:19:20.836 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:19:20.837 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:19:20.838 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:19:20.840 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 77.2619ms
2025-11-29 02:19:20.841 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:19:20.842 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:19:20.843 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:19:20.844 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:19:20.845 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 100.9312ms
2025-11-29 02:19:21.425 +02:00 [DBG] Connection id "0HNHER93U8II0" received FIN.
2025-11-29 02:19:21.426 +02:00 [DBG] Connection id "0HNHER93U8II0" is closed. The last processed stream ID was 1.
2025-11-29 02:19:21.426 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8II0 completed.
2025-11-29 02:19:21.427 +02:00 [DBG] Connection id "0HNHER93U8II0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:19:21.430 +02:00 [DBG] Connection id "0HNHER93U8II0" stopped.
2025-11-29 02:19:44.003 +02:00 [DBG] Connection id "0HNHER93U8II1" accepted.
2025-11-29 02:19:44.013 +02:00 [DBG] Connection id "0HNHER93U8II1" started.
2025-11-29 02:19:44.018 +02:00 [DBG] Connection 0HNHER93U8II1 established using the following protocol: "Tls13"
2025-11-29 02:19:44.028 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 02:19:44.031 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 02:19:44.032 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 02:19:44.033 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:19:44.034 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:19:44.035 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:19:44.036 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:19:44.037 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:19:44.038 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:19:44.039 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:19:44.041 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:19:44.042 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:19:44.044 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:19:44.046 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:19:44.047 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:19:44.049 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:19:44.050 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:19:44.052 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:19:44.053 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:19:44.054 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:19:44.056 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:19:44.057 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:19:44.058 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:19:44.059 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:19:44.0592879+02:00"
2025-11-29 02:19:44.060 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 02:19:44.061 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:19:44.063 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:19:44.064 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:19:44.065 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:19:44.066 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:19:44.068 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:19:44.069 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:19:44.070 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:19:44.071 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:19:44.090 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:19:44.093 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:44.095 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:44.096 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:44.097 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:44.098 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:44.099 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:44.101 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:44.102 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:44.103 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:44.104 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:44.105 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:44.106 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:44.107 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:44.109 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:44.110 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:44.111 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:19:44.112 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 19ms reading results.
2025-11-29 02:19:44.113 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:19:44.114 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:19:44.116 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:19:44.117 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:19:44.118 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:19:44.118 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:19:44.119 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:19:44.120 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:19:44.121 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 72.376ms
2025-11-29 02:19:44.122 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:19:44.123 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:19:44.124 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:19:44.125 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:19:44.126 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 98.6078ms
2025-11-29 02:19:46.066 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 02:19:46.069 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 02:19:46.070 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 02:19:46.072 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:19:46.073 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:19:46.074 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:19:46.074 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:19:46.075 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:19:46.076 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:19:46.077 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:19:46.079 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:19:46.080 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:19:46.081 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:19:46.083 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:19:46.084 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:19:46.085 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:19:46.087 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:19:46.088 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:19:46.089 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:19:46.090 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:19:46.091 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:19:46.092 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:19:46.093 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:19:46.094 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:19:46.0941816+02:00"
2025-11-29 02:19:46.094 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 02:19:46.096 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:19:46.098 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:19:46.099 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:19:46.100 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:19:46.101 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:19:46.102 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:19:46.103 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:19:46.104 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:19:46.105 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:19:46.118 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:19:46.120 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:46.121 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:46.122 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:46.123 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:46.124 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:46.125 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:46.126 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:46.127 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:46.128 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:46.129 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:46.130 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:46.131 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:46.132 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:46.133 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:46.134 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:19:46.134 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:19:46.135 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 15ms reading results.
2025-11-29 02:19:46.137 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:19:46.138 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:19:46.139 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:19:46.141 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:19:46.141 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:19:46.142 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:19:46.143 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:19:46.144 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:19:46.145 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 59.8491ms
2025-11-29 02:19:46.146 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:19:46.147 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:19:46.148 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:19:46.149 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:19:46.150 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 84.1688ms
2025-11-29 02:19:51.429 +02:00 [DBG] Connection id "0HNHER93U8II1" received FIN.
2025-11-29 02:19:51.430 +02:00 [DBG] Connection id "0HNHER93U8II1" is closed. The last processed stream ID was 3.
2025-11-29 02:19:51.430 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8II1 completed.
2025-11-29 02:19:51.431 +02:00 [DBG] Connection id "0HNHER93U8II1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:19:51.434 +02:00 [DBG] Connection id "0HNHER93U8II1" stopped.
2025-11-29 02:23:00.928 +02:00 [DBG] Connection id "0HNHER93U8II2" accepted.
2025-11-29 02:23:00.934 +02:00 [DBG] Connection id "0HNHER93U8II2" started.
2025-11-29 02:23:00.940 +02:00 [DBG] Connection 0HNHER93U8II2 established using the following protocol: "Tls13"
2025-11-29 02:23:00.948 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 02:23:00.955 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 02:23:00.956 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 02:23:00.957 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:23:00.958 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:23:00.959 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:23:00.960 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:23:00.960 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:23:00.961 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:23:00.962 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 02:23:00.964 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:23:00.965 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:23:00.966 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:23:00.968 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:23:00.969 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:23:00.970 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:23:00.973 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:23:00.974 +02:00 [INF] get all schedule called at "2025-11-29T02:23:00.9743123+02:00"
2025-11-29 02:23:00.975 +02:00 [INF] Fetching all schedules
2025-11-29 02:23:00.976 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:23:00.978 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:23:00.979 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:23:00.979 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:00.981 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:00.982 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:23:00.982 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:23:00.983 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:23:00.984 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:23:00.995 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:23:00.997 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:00.999 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.000 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.001 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.002 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.003 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.004 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.005 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.006 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.008 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.009 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.011 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.011 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.012 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.014 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.015 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.016 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.018 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.018 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.019 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.020 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.021 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.022 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.023 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.024 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.025 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.026 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.027 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.028 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.029 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.030 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.031 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.032 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.033 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.034 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.035 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.036 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.037 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.038 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.039 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.040 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.041 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.042 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:01.043 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:01.044 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 46ms reading results.
2025-11-29 02:23:01.045 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:01.046 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:23:01.048 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:23:01.050 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:23:01.050 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:23:01.051 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:23:01.052 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:23:01.052 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 02:23:01.054 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 84.1972ms
2025-11-29 02:23:01.055 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:23:01.056 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:23:01.056 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:01.057 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:23:01.058 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 111.1812ms
2025-11-29 02:23:01.463 +02:00 [DBG] Connection id "0HNHER93U8II2" received FIN.
2025-11-29 02:23:01.463 +02:00 [DBG] Connection id "0HNHER93U8II2" is closed. The last processed stream ID was 1.
2025-11-29 02:23:01.464 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8II2 completed.
2025-11-29 02:23:01.464 +02:00 [DBG] Connection id "0HNHER93U8II2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:23:01.468 +02:00 [DBG] Connection id "0HNHER93U8II2" stopped.
2025-11-29 02:23:05.595 +02:00 [DBG] Connection id "0HNHER93U8II3" accepted.
2025-11-29 02:23:05.596 +02:00 [DBG] Connection id "0HNHER93U8II3" started.
2025-11-29 02:23:05.600 +02:00 [DBG] Connection 0HNHER93U8II3 established using the following protocol: "Tls13"
2025-11-29 02:23:05.603 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:23:05.605 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:23:05.606 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:23:05.607 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:23:05.608 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:23:05.609 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:23:05.609 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:23:05.610 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:23:05.611 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:23:05.611 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:23:05.613 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:23:05.614 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:23:05.615 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:23:05.616 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:23:05.617 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:23:05.618 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:23:05.619 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:23:05.620 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:23:05.621 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:23:05.622 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:23:05.622 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:23:05.623 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:23:05.624 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:23:05.625 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:23:05.6252479+02:00"
2025-11-29 02:23:05.625 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:23:05.626 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:23:05.628 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:23:05.628 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:23:05.629 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:05.630 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:05.631 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:23:05.632 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:23:05.632 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:23:05.633 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:23:05.644 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:23:05.646 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:05.647 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:05.648 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:05.649 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:05.649 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:05.650 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:05.651 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:05.652 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:05.653 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:05.654 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:05.655 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:05.656 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:05.657 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-29 02:23:05.658 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:05.659 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:23:05.660 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:23:05.662 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:23:05.662 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:23:05.663 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:23:05.664 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:23:05.664 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:23:05.665 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 47.8452ms
2025-11-29 02:23:05.666 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:23:05.667 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:23:05.668 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:05.669 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:23:05.671 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 68.3822ms
2025-11-29 02:23:06.463 +02:00 [DBG] Connection id "0HNHER93U8II3" received FIN.
2025-11-29 02:23:06.464 +02:00 [DBG] Connection id "0HNHER93U8II3" is closed. The last processed stream ID was 1.
2025-11-29 02:23:06.464 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8II3 completed.
2025-11-29 02:23:06.465 +02:00 [DBG] Connection id "0HNHER93U8II3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:23:06.467 +02:00 [DBG] Connection id "0HNHER93U8II3" stopped.
2025-11-29 02:23:07.277 +02:00 [DBG] Connection id "0HNHER93U8II4" accepted.
2025-11-29 02:23:07.278 +02:00 [DBG] Connection id "0HNHER93U8II4" started.
2025-11-29 02:23:07.282 +02:00 [DBG] Connection 0HNHER93U8II4 established using the following protocol: "Tls13"
2025-11-29 02:23:07.284 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 02:23:07.285 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:23:07.286 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:23:07.287 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:23:07.288 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:23:07.289 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:23:07.290 +02:00 [DBG] The request is a preflight request.
2025-11-29 02:23:07.290 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 7.0129ms
2025-11-29 02:23:07.292 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 103
2025-11-29 02:23:07.295 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:23:07.297 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 02:23:07.298 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:23:07.299 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:23:07.299 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:23:07.300 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:23:07.301 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:23:07.302 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:23:07.302 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 02:23:07.304 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:23:07.305 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:23:07.306 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:23:07.308 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:23:07.309 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:23:07.310 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:23:07.311 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:23:07.313 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:23:07.314 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 02:23:07.315 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:23:07.316 +02:00 [DBG] Connection id "0HNHER93U8II4", Request id "0HNHER93U8II4:00000003": started reading request body.
2025-11-29 02:23:07.317 +02:00 [DBG] Connection id "0HNHER93U8II4", Request id "0HNHER93U8II4:00000003": done reading request body.
2025-11-29 02:23:07.320 +02:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Int32. Path: $.patientId | LineNumber: 0 | BytePositionInLine: 17.
2025-11-29 02:23:07.320 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:23:07.321 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:23:07.322 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:23:07.323 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:23:07.325 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-29 02:23:07.325 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-29 02:23:07.326 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:23:07.328 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:23:07.329 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-29 02:23:07.331 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-29 02:23:07.331 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 02:23:07.332 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 22.3316ms
2025-11-29 02:23:07.334 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:23:07.335 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/problem+json; charset=utf-8 42.3656ms
2025-11-29 02:23:11.463 +02:00 [DBG] Connection id "0HNHER93U8II4" received FIN.
2025-11-29 02:23:11.464 +02:00 [DBG] Connection id "0HNHER93U8II4" is closed. The last processed stream ID was 3.
2025-11-29 02:23:11.464 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8II4 completed.
2025-11-29 02:23:11.465 +02:00 [DBG] Connection id "0HNHER93U8II4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:23:11.467 +02:00 [DBG] Connection id "0HNHER93U8II4" stopped.
2025-11-29 02:23:12.347 +02:00 [DBG] Connection id "0HNHER93U8II5" accepted.
2025-11-29 02:23:12.349 +02:00 [DBG] Connection id "0HNHER93U8II5" started.
2025-11-29 02:23:12.352 +02:00 [DBG] Connection 0HNHER93U8II5 established using the following protocol: "Tls13"
2025-11-29 02:23:12.354 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 02:23:12.356 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 02:23:12.357 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 02:23:12.359 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:23:12.360 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:23:12.360 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:23:12.361 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:23:12.362 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:23:12.363 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:23:12.364 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 02:23:12.365 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:23:12.366 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:23:12.368 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:23:12.369 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:23:12.370 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:23:12.371 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:23:12.372 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:23:12.373 +02:00 [INF] get all schedule called at "2025-11-29T02:23:12.3730711+02:00"
2025-11-29 02:23:12.373 +02:00 [INF] Fetching all schedules
2025-11-29 02:23:12.374 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:23:12.376 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:23:12.376 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:23:12.377 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:12.378 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:12.379 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:23:12.380 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:23:12.381 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:23:12.381 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:23:12.389 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:23:12.391 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.392 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.393 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.393 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.394 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.395 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.396 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.397 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.397 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.398 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.400 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.401 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.402 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.403 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.404 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.405 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.407 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.408 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.409 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.409 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.410 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.411 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.412 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.413 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.414 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.415 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.417 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.418 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.419 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.419 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.420 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.421 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.422 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.423 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.425 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.426 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.427 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.428 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.429 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.430 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.431 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.432 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.433 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:12.434 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:12.435 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 44ms reading results.
2025-11-29 02:23:12.436 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:12.437 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:23:12.439 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:23:12.441 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:23:12.442 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:23:12.442 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:23:12.443 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:23:12.444 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 02:23:12.447 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 76.0414ms
2025-11-29 02:23:12.448 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:23:12.449 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:23:12.450 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:12.451 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:23:12.452 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 98.4932ms
2025-11-29 02:23:16.464 +02:00 [DBG] Connection id "0HNHER93U8II5" received FIN.
2025-11-29 02:23:16.465 +02:00 [DBG] Connection id "0HNHER93U8II5" is closed. The last processed stream ID was 1.
2025-11-29 02:23:16.465 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8II5 completed.
2025-11-29 02:23:16.466 +02:00 [DBG] Connection id "0HNHER93U8II5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:23:16.469 +02:00 [DBG] Connection id "0HNHER93U8II5" stopped.
2025-11-29 02:23:44.163 +02:00 [DBG] Connection id "0HNHER93U8II6" accepted.
2025-11-29 02:23:44.170 +02:00 [DBG] Connection id "0HNHER93U8II6" started.
2025-11-29 02:23:44.176 +02:00 [DBG] Connection 0HNHER93U8II6 established using the following protocol: "Tls13"
2025-11-29 02:23:44.184 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 02:23:44.191 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 02:23:44.192 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 02:23:44.194 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:23:44.195 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:23:44.196 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:23:44.197 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:23:44.199 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:23:44.200 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:23:44.201 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 02:23:44.203 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:23:44.204 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:23:44.206 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:23:44.208 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:23:44.210 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:23:44.211 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:23:44.213 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:23:44.214 +02:00 [INF] get all schedule called at "2025-11-29T02:23:44.2149089+02:00"
2025-11-29 02:23:44.215 +02:00 [INF] Fetching all schedules
2025-11-29 02:23:44.217 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:23:44.219 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:23:44.220 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:23:44.221 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:44.223 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:44.224 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:23:44.225 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:23:44.226 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:23:44.227 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:23:44.244 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:23:44.247 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.249 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.250 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.251 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.253 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.254 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.255 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.256 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.258 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.259 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.260 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.262 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.263 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.264 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.265 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.267 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.269 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.270 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.271 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.273 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.274 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.275 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.277 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.278 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.279 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.281 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.282 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.283 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.284 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.285 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.287 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.288 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.289 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.290 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.292 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.293 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.294 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.295 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.297 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.298 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.299 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.300 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.302 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:44.303 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:44.304 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 56ms reading results.
2025-11-29 02:23:44.305 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:44.306 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:23:44.308 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:23:44.309 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:23:44.310 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:23:44.311 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:23:44.311 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:23:44.313 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 02:23:44.315 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 103.4505ms
2025-11-29 02:23:44.316 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:23:44.317 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:23:44.318 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:44.319 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:23:44.320 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 136.5916ms
2025-11-29 02:23:47.037 +02:00 [DBG] Connection id "0HNHER93U8II6" received FIN.
2025-11-29 02:23:47.039 +02:00 [DBG] Connection id "0HNHER93U8II6" is closed. The last processed stream ID was 1.
2025-11-29 02:23:47.039 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8II6 completed.
2025-11-29 02:23:47.040 +02:00 [DBG] Connection id "0HNHER93U8II6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:23:47.045 +02:00 [DBG] Connection id "0HNHER93U8II6" stopped.
2025-11-29 02:23:51.490 +02:00 [DBG] Connection id "0HNHER93U8II7" accepted.
2025-11-29 02:23:51.491 +02:00 [DBG] Connection id "0HNHER93U8II7" started.
2025-11-29 02:23:51.494 +02:00 [DBG] Connection 0HNHER93U8II7 established using the following protocol: "Tls13"
2025-11-29 02:23:51.496 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:23:51.497 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:23:51.498 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:23:51.499 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:23:51.500 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:23:51.500 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:23:51.501 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:23:51.502 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:23:51.502 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:23:51.503 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:23:51.504 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:23:51.505 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:23:51.506 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:23:51.507 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:23:51.508 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:23:51.509 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:23:51.510 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:23:51.511 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:23:51.512 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:23:51.513 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:23:51.513 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:23:51.514 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:23:51.515 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:23:51.516 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:23:51.5163198+02:00"
2025-11-29 02:23:51.516 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:23:51.518 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:23:51.519 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:23:51.520 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:23:51.520 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:51.521 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:51.522 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:23:51.523 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:23:51.524 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:23:51.525 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:23:52.957 +02:00 [INF] Executed DbCommand (1,433ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:23:52.959 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:52.960 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:52.961 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:52.962 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:52.963 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:52.964 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:52.964 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:52.965 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:52.966 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:52.967 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:52.968 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:23:52.969 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:52.970 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-29 02:23:52.971 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:52.972 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:23:52.973 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:23:52.974 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:23:52.974 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:23:52.975 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:23:52.975 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:23:52.976 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:23:52.977 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 1468.2861ms
2025-11-29 02:23:52.978 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:23:52.979 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:23:52.980 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:23:52.980 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:23:52.981 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 1486.1097ms
2025-11-29 02:23:54.773 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 02:23:54.775 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:23:54.777 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:23:54.778 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:23:54.778 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:23:54.779 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:23:54.780 +02:00 [DBG] The request is a preflight request.
2025-11-29 02:23:54.781 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 8.6166ms
2025-11-29 02:23:54.783 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 103
2025-11-29 02:23:54.787 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:23:54.788 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 02:23:54.789 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:23:54.790 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:23:54.791 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:23:54.792 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:23:54.793 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:23:54.794 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:23:54.795 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 02:23:54.796 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:23:54.798 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:23:54.799 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:23:54.800 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:23:54.802 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:23:54.803 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:23:54.804 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:23:54.805 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:23:54.806 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 02:23:54.808 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:23:54.809 +02:00 [DBG] Connection id "0HNHER93U8II7", Request id "0HNHER93U8II7:00000005": started reading request body.
2025-11-29 02:23:54.810 +02:00 [DBG] Connection id "0HNHER93U8II7", Request id "0HNHER93U8II7:00000005": done reading request body.
2025-11-29 02:23:54.812 +02:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Int32. Path: $.patientId | LineNumber: 0 | BytePositionInLine: 17.
2025-11-29 02:23:54.813 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:23:54.814 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:23:54.815 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:23:54.816 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:23:54.817 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-29 02:23:54.818 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-29 02:23:54.819 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:23:54.820 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:23:54.821 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-29 02:23:54.823 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-29 02:23:54.824 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 02:23:54.825 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 22.3424ms
2025-11-29 02:23:54.827 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:23:54.828 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/problem+json; charset=utf-8 44.8679ms
2025-11-29 02:24:04.865 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 02:24:04.868 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 02:24:04.869 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 02:24:04.871 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:24:04.872 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:24:04.873 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:24:04.874 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:24:04.875 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:24:04.875 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:24:04.876 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 02:24:04.878 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:24:04.879 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:24:04.880 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:24:04.882 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:24:04.883 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:24:04.884 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:24:04.885 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:24:04.887 +02:00 [INF] get all schedule called at "2025-11-29T02:24:04.8871422+02:00"
2025-11-29 02:24:04.888 +02:00 [INF] Fetching all schedules
2025-11-29 02:24:04.889 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:24:04.892 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:24:04.893 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:24:04.894 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:24:04.895 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:24:04.896 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:24:04.897 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:24:04.898 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:24:04.899 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:24:04.908 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:24:04.910 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.911 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.912 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.913 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.914 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.915 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.916 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.917 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.919 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.920 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.921 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.922 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.923 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.924 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.926 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.927 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.929 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.930 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.932 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.933 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.935 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.936 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.937 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.938 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.940 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.941 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.942 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.943 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.944 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.945 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.946 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.947 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.948 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.950 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.951 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.952 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.953 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.954 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.956 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.957 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.958 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.959 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:04.960 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:24:04.962 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 51ms reading results.
2025-11-29 02:24:04.963 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:24:04.964 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:24:04.966 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:24:04.967 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:24:04.968 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:24:04.968 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:24:04.969 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:24:04.970 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 02:24:04.972 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 88.187ms
2025-11-29 02:24:04.974 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:24:04.974 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:24:04.975 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:24:04.977 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:24:04.978 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 113.324ms
2025-11-29 02:24:43.357 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:24:43.366 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:24:43.366 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:24:43.367 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:24:43.368 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:24:43.369 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:24:43.370 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:24:43.370 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:24:43.371 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:24:43.372 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:24:43.374 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:24:43.375 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:24:43.375 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:24:43.377 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:24:43.378 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:24:43.379 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:24:43.380 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:24:43.381 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:24:43.382 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:24:43.383 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:24:43.383 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:24:43.384 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:24:43.385 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:24:43.386 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:24:43.3866142+02:00"
2025-11-29 02:24:43.387 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:24:43.388 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:24:43.389 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:24:43.390 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:24:43.391 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:24:43.392 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:24:43.393 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:24:43.394 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:24:43.395 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:24:43.396 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:24:43.405 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:24:43.407 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:43.408 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:43.409 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:43.410 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:43.411 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:43.412 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:43.414 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:43.415 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:43.416 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:43.417 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:43.418 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:24:43.419 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:24:43.420 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-29 02:24:43.421 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:24:43.422 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:24:43.423 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:24:43.425 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:24:43.426 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:24:43.426 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:24:43.427 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:24:43.428 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:24:43.429 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 49.9743ms
2025-11-29 02:24:43.433 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:24:43.435 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:24:43.436 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:24:43.437 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:24:43.438 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 81.0512ms
2025-11-29 02:27:17.704 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 02:27:17.711 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:27:17.711 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:27:17.712 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:27:17.713 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:27:17.713 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:27:17.714 +02:00 [DBG] The request is a preflight request.
2025-11-29 02:27:17.715 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 10.7236ms
2025-11-29 02:27:17.720 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 112
2025-11-29 02:27:17.723 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:27:17.724 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 02:27:17.725 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:27:17.726 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:27:17.727 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:27:17.727 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:27:17.728 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:27:17.729 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:27:17.730 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 02:27:17.732 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:27:17.733 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:27:17.734 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:27:17.736 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:27:17.737 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:27:17.738 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:27:17.739 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:27:17.740 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:27:17.741 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 02:27:17.742 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:27:17.744 +02:00 [DBG] Connection id "0HNHER93U8II7", Request id "0HNHER93U8II7:0000000D": started reading request body.
2025-11-29 02:27:17.745 +02:00 [DBG] Connection id "0HNHER93U8II7", Request id "0HNHER93U8II7:0000000D": done reading request body.
2025-11-29 02:27:17.747 +02:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Int32. Path: $.patientId | LineNumber: 0 | BytePositionInLine: 17.
2025-11-29 02:27:17.748 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:27:17.749 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:27:17.751 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:27:17.752 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:27:17.754 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-29 02:27:17.754 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-29 02:27:17.755 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:27:17.760 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:27:17.761 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-29 02:27:17.763 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-29 02:27:17.764 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 02:27:17.766 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 27.8163ms
2025-11-29 02:27:17.767 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:27:17.769 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/problem+json; charset=utf-8 49.6381ms
2025-11-29 02:27:23.275 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 02:27:23.276 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:27:23.277 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:27:23.278 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:27:23.279 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:27:23.279 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:27:23.280 +02:00 [DBG] The request is a preflight request.
2025-11-29 02:27:23.281 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 6.0143ms
2025-11-29 02:27:23.282 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 112
2025-11-29 02:27:23.285 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:27:23.285 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 02:27:23.286 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:27:23.287 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:27:23.288 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:27:23.289 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:27:23.289 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:27:23.290 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:27:23.291 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 02:27:23.292 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:27:23.293 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:27:23.294 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:27:23.295 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:27:23.296 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:27:23.297 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:27:23.298 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:27:23.299 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:27:23.300 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 02:27:23.301 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:27:23.302 +02:00 [DBG] Connection id "0HNHER93U8II7", Request id "0HNHER93U8II7:00000011": started reading request body.
2025-11-29 02:27:23.303 +02:00 [DBG] Connection id "0HNHER93U8II7", Request id "0HNHER93U8II7:00000011": done reading request body.
2025-11-29 02:27:23.305 +02:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Int32. Path: $.patientId | LineNumber: 0 | BytePositionInLine: 17.
2025-11-29 02:27:23.305 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:27:23.306 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:27:23.307 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:27:23.308 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:27:23.309 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-29 02:27:23.309 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-29 02:27:23.310 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:27:23.311 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:27:23.312 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-29 02:27:23.313 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-29 02:27:23.314 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 02:27:23.315 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 17.492ms
2025-11-29 02:27:23.316 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:27:23.317 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/problem+json; charset=utf-8 34.6272ms
2025-11-29 02:27:26.162 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 112
2025-11-29 02:27:26.164 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:27:26.165 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 02:27:26.166 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:27:26.167 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:27:26.167 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:27:26.168 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:27:26.169 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:27:26.169 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:27:26.170 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 02:27:26.171 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:27:26.172 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:27:26.173 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:27:26.174 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:27:26.175 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:27:26.176 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:27:26.178 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:27:26.179 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:27:26.180 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 02:27:26.181 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:27:26.182 +02:00 [DBG] Connection id "0HNHER93U8II7", Request id "0HNHER93U8II7:00000013": started reading request body.
2025-11-29 02:27:26.182 +02:00 [DBG] Connection id "0HNHER93U8II7", Request id "0HNHER93U8II7:00000013": done reading request body.
2025-11-29 02:27:26.184 +02:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Int32. Path: $.patientId | LineNumber: 0 | BytePositionInLine: 17.
2025-11-29 02:27:26.184 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:27:26.185 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:27:26.186 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:27:26.187 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:27:26.188 +02:00 [DBG] The request has model state errors, returning an error response.
2025-11-29 02:27:26.188 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-11-29 02:27:26.189 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:27:26.190 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:27:26.191 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-29 02:27:26.193 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-29 02:27:26.194 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 02:27:26.195 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 18.3097ms
2025-11-29 02:27:26.196 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:27:26.196 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/problem+json; charset=utf-8 34.2286ms
2025-11-29 02:27:42.079 +02:00 [DBG] Connection id "0HNHER93U8II7" received FIN.
2025-11-29 02:27:42.080 +02:00 [DBG] Connection id "0HNHER93U8II7" is closed. The last processed stream ID was 19.
2025-11-29 02:27:42.080 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8II7 completed.
2025-11-29 02:27:42.081 +02:00 [DBG] Connection id "0HNHER93U8II7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:27:42.083 +02:00 [DBG] Connection id "0HNHER93U8II7" stopped.
2025-11-29 02:28:06.952 +02:00 [DBG] Connection id "0HNHER93U8II8" accepted.
2025-11-29 02:28:06.957 +02:00 [DBG] Connection id "0HNHER93U8II8" started.
2025-11-29 02:28:06.963 +02:00 [DBG] Connection 0HNHER93U8II8 established using the following protocol: "Tls13"
2025-11-29 02:28:06.970 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Appointment - null null
2025-11-29 02:28:06.990 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:28:06.991 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:28:06.991 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:28:06.992 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:28:06.993 +02:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-11-29 02:28:06.994 +02:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-11-29 02:28:06.994 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Appointment - 405 0 null 25.123ms
2025-11-29 02:28:09.636 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Appointment - null null
2025-11-29 02:28:09.641 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:28:09.642 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:28:09.643 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:28:09.644 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:28:09.645 +02:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-11-29 02:28:09.646 +02:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-11-29 02:28:09.646 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Appointment - 405 0 null 10.225ms
2025-11-29 02:28:27.085 +02:00 [DBG] Connection id "0HNHER93U8II8" received FIN.
2025-11-29 02:28:27.086 +02:00 [DBG] Connection id "0HNHER93U8II8" is closed. The last processed stream ID was 3.
2025-11-29 02:28:27.086 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8II8 completed.
2025-11-29 02:28:27.087 +02:00 [DBG] Connection id "0HNHER93U8II8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:28:27.091 +02:00 [DBG] Connection id "0HNHER93U8II8" stopped.
2025-11-29 02:29:56.359 +02:00 [DBG] Connection id "0HNHER93U8II9" accepted.
2025-11-29 02:29:56.381 +02:00 [DBG] Connection id "0HNHER93U8II9" started.
2025-11-29 02:29:56.389 +02:00 [DBG] Connection 0HNHER93U8II9 established using the following protocol: "Tls13"
2025-11-29 02:29:56.400 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:29:56.410 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:29:56.411 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:29:56.413 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:29:56.414 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:29:56.415 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:29:56.416 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:29:56.417 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:29:56.419 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:29:56.420 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:29:56.421 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:29:56.423 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:29:56.425 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:29:56.427 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:29:56.429 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:29:56.430 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:29:56.432 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:29:56.434 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:29:56.435 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:29:56.437 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:29:56.438 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:29:56.440 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:29:56.441 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:29:56.443 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:29:56.4431259+02:00"
2025-11-29 02:29:56.444 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:29:56.446 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:29:56.449 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:29:56.450 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:29:56.451 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:29:56.467 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:29:56.470 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:29:56.471 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:29:56.473 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:29:56.474 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:29:56.490 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:29:56.493 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.494 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.496 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.497 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.498 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.499 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.500 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.501 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.502 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.503 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.504 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.505 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:29:56.506 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 02:29:56.508 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:29:56.509 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:29:56.510 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:29:56.512 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:29:56.513 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:29:56.513 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:29:56.514 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:29:56.515 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:29:56.516 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 86.0841ms
2025-11-29 02:29:56.518 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:29:56.518 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:29:56.520 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:29:56.521 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:29:56.522 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:29:56.523 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:29:56.524 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:29:56.525 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-29 02:29:56.526 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:29:56.527 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 128.1884ms
2025-11-29 02:29:56.528 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:29:56.532 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:29:56.532 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:29:56.533 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:29:56.534 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:29:56.536 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:29:56.537 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:29:56.538 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:29:56.539 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:29:56.541 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:29:56.542 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:29:56.543 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:29:56.544 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:29:56.546 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:29:56.547 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:29:56.548 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:29:56.549 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:29:56.551 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:29:56.552 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:29:56.5521979+02:00"
2025-11-29 02:29:56.553 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:29:56.554 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:29:56.556 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:29:56.557 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:29:56.557 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:29:56.559 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:29:56.560 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:29:56.561 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:29:56.562 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:29:56.563 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:29:56.567 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:29:56.569 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.570 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.571 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.572 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.573 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.574 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.576 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.577 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.578 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.579 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.580 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:29:56.581 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:29:56.582 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 02:29:56.583 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:29:56.584 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:29:56.586 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:29:56.588 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:29:56.588 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:29:56.589 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:29:56.590 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:29:56.591 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:29:56.592 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 50.2292ms
2025-11-29 02:29:56.594 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:29:56.595 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:29:56.596 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:29:56.597 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:29:56.599 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 81.2626ms
2025-11-29 02:29:57.103 +02:00 [DBG] Connection id "0HNHER93U8II9" received FIN.
2025-11-29 02:29:57.104 +02:00 [DBG] Connection id "0HNHER93U8II9" is closed. The last processed stream ID was 3.
2025-11-29 02:29:57.104 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8II9 completed.
2025-11-29 02:29:57.105 +02:00 [DBG] Connection id "0HNHER93U8II9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:29:57.108 +02:00 [DBG] Connection id "0HNHER93U8II9" stopped.
2025-11-29 02:30:01.120 +02:00 [DBG] Connection id "0HNHER93U8IIA" accepted.
2025-11-29 02:30:01.121 +02:00 [DBG] Connection id "0HNHER93U8IIA" started.
2025-11-29 02:30:01.125 +02:00 [DBG] Connection 0HNHER93U8IIA established using the following protocol: "Tls13"
2025-11-29 02:30:01.128 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:30:01.131 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:30:01.132 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:30:01.134 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:01.135 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:30:01.136 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:30:01.137 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:30:01.138 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:30:01.139 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:01.140 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:30:01.141 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:30:01.143 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:30:01.144 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:30:01.145 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:30:01.146 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:30:01.148 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:30:01.149 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:30:01.150 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:30:01.151 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:30:01.153 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:01.153 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:01.154 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:30:01.155 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:01.156 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:30:01.1566107+02:00"
2025-11-29 02:30:01.157 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:30:01.158 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:30:01.160 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:30:01.161 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-29 02:30:01.162 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:01.163 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:01.164 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:30:01.165 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:30:01.166 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:30:01.167 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:30:01.186 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:30:01.188 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.190 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.191 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.192 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.193 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.195 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.196 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.197 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.198 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.199 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.200 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.201 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:01.202 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 02:30:01.203 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:01.204 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:30:01.206 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:30:01.207 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:30:01.208 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:30:01.209 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:30:01.209 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:30:01.210 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:30:01.212 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 64.0798ms
2025-11-29 02:30:01.213 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:01.214 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:30:01.215 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:01.216 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:30:01.217 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 89.5222ms
2025-11-29 02:30:01.316 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:30:01.319 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:30:01.321 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:30:01.322 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:01.323 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:30:01.323 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:30:01.324 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:30:01.325 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:30:01.326 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:01.327 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:30:01.329 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:30:01.330 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:30:01.331 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:30:01.333 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:30:01.334 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:30:01.335 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:30:01.337 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:30:01.338 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:30:01.339 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:30:01.340 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:01.341 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:01.342 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:30:01.343 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:01.344 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:30:01.3447127+02:00"
2025-11-29 02:30:01.345 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:30:01.347 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:30:01.349 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:30:01.350 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:30:01.351 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:01.352 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:01.353 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:30:01.354 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:30:01.356 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:30:01.357 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:30:01.361 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:30:01.364 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.366 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.367 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.369 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.370 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.372 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.373 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.374 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.375 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.377 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.378 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:01.379 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:01.380 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 16ms reading results.
2025-11-29 02:30:01.381 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:01.383 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:30:01.384 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:30:01.386 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:30:01.387 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:30:01.388 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:30:01.389 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:30:01.390 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:30:01.391 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 56.4668ms
2025-11-29 02:30:01.393 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:01.394 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:30:01.395 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:01.397 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:30:01.398 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 82.3375ms
2025-11-29 02:30:06.119 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:30:06.121 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:30:06.123 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:30:06.124 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:06.126 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:30:06.127 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:30:06.128 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:30:06.129 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:30:06.130 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:06.131 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:30:06.132 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:30:06.134 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:30:06.135 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:30:06.137 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:30:06.139 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:30:06.140 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:30:06.142 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:30:06.144 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:30:06.146 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:30:06.147 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:06.149 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:06.150 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:30:06.151 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:06.153 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:30:06.1531782+02:00"
2025-11-29 02:30:06.154 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:30:06.155 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:30:06.157 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:30:06.158 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:30:06.159 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:06.161 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:06.162 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:30:06.163 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:30:06.165 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:30:06.166 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:30:06.189 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:30:06.192 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.193 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.195 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.197 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.198 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.200 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.201 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.203 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.204 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.205 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.207 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.208 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:06.209 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 17ms reading results.
2025-11-29 02:30:06.211 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:06.212 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:30:06.214 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:30:06.217 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:30:06.218 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:30:06.219 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:30:06.219 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:30:06.221 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:30:06.222 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 81.6778ms
2025-11-29 02:30:06.224 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:06.225 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:30:06.227 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:06.229 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:30:06.230 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 111.5214ms
2025-11-29 02:30:06.359 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:30:06.361 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:30:06.362 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:30:06.364 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:06.365 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:30:06.366 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:30:06.367 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:30:06.368 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:30:06.370 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:06.371 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:30:06.373 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:30:06.374 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:30:06.376 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:30:06.379 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:30:06.380 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:30:06.382 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:30:06.383 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:30:06.385 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:30:06.386 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:30:06.388 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:06.389 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:06.390 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:30:06.391 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:06.393 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:30:06.3931089+02:00"
2025-11-29 02:30:06.394 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:30:06.396 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:30:06.399 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:30:06.399 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:30:06.401 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:06.402 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:06.404 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:30:06.405 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:30:06.407 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:30:06.408 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:30:06.441 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:30:06.444 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.445 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.447 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.449 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.450 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.451 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.453 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.454 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.455 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.456 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.458 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:06.459 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:06.460 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 16ms reading results.
2025-11-29 02:30:06.462 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:06.463 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:30:06.465 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:30:06.467 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:30:06.468 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:30:06.469 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:30:06.470 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:30:06.471 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:30:06.472 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 90.572ms
2025-11-29 02:30:06.474 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:06.475 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:30:06.476 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:06.477 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:30:06.479 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 120.6671ms
2025-11-29 02:30:07.106 +02:00 [DBG] Connection id "0HNHER93U8IIA" received FIN.
2025-11-29 02:30:07.107 +02:00 [DBG] Connection id "0HNHER93U8IIA" is closed. The last processed stream ID was 7.
2025-11-29 02:30:07.107 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8IIA completed.
2025-11-29 02:30:07.108 +02:00 [DBG] Connection id "0HNHER93U8IIA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:30:07.111 +02:00 [DBG] Connection id "0HNHER93U8IIA" stopped.
2025-11-29 02:30:11.117 +02:00 [DBG] Connection id "0HNHER93U8IIB" accepted.
2025-11-29 02:30:11.118 +02:00 [DBG] Connection id "0HNHER93U8IIB" started.
2025-11-29 02:30:11.121 +02:00 [DBG] Connection 0HNHER93U8IIB established using the following protocol: "Tls13"
2025-11-29 02:30:11.123 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:30:11.131 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:30:11.132 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:30:11.133 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:11.134 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:30:11.134 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:30:11.135 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:30:11.136 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:30:11.137 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:11.138 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:30:11.139 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:30:11.141 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:30:11.142 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:30:11.144 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:30:11.145 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:30:11.146 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:30:11.148 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:30:11.149 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:30:11.150 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:30:11.156 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:11.157 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:11.159 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:30:11.161 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:11.162 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:30:11.1628057+02:00"
2025-11-29 02:30:11.163 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:30:11.164 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:30:11.167 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:30:11.168 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-29 02:30:11.170 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:11.172 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:11.173 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:30:11.175 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:30:11.176 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:30:11.177 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:30:11.225 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:30:11.228 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.230 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.231 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.233 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.234 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.236 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.238 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.239 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.241 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.242 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.244 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.245 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:11.247 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 18ms reading results.
2025-11-29 02:30:11.249 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:11.250 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:30:11.252 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:30:11.254 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:30:11.255 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:30:11.256 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:30:11.257 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:30:11.258 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:30:11.260 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 113.6202ms
2025-11-29 02:30:11.261 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:11.263 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:30:11.264 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:11.266 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:30:11.268 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 145.0897ms
2025-11-29 02:30:11.342 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:30:11.344 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:30:11.345 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:30:11.347 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:11.348 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:30:11.349 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:30:11.350 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:30:11.351 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:30:11.352 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:11.353 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:30:11.354 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:30:11.355 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:30:11.356 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:30:11.358 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:30:11.359 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:30:11.360 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:30:11.361 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:30:11.363 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:30:11.364 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:30:11.365 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:11.367 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:11.368 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:30:11.369 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:30:11.370 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:30:11.3706596+02:00"
2025-11-29 02:30:11.371 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:30:11.372 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:30:11.374 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:30:11.375 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:30:11.376 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:11.377 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:11.378 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:30:11.380 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:30:11.381 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:30:11.383 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:30:11.409 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:30:11.411 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.413 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.414 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.415 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.417 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.418 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.419 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.420 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.422 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.423 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.424 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:30:11.425 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:11.427 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 15ms reading results.
2025-11-29 02:30:11.428 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:11.429 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:30:11.431 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:30:11.433 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:30:11.434 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:30:11.434 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:30:11.435 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:30:11.436 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:30:11.438 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 77.5492ms
2025-11-29 02:30:11.439 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:30:11.440 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:30:11.441 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:30:11.442 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:30:11.443 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 101.2547ms
2025-11-29 02:30:17.107 +02:00 [DBG] Connection id "0HNHER93U8IIB" received FIN.
2025-11-29 02:30:17.108 +02:00 [DBG] Connection id "0HNHER93U8IIB" is closed. The last processed stream ID was 3.
2025-11-29 02:30:17.108 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8IIB completed.
2025-11-29 02:30:17.109 +02:00 [DBG] Connection id "0HNHER93U8IIB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:30:17.111 +02:00 [DBG] Connection id "0HNHER93U8IIB" stopped.
2025-11-29 02:31:37.246 +02:00 [DBG] Connection id "0HNHER93U8IIC" accepted.
2025-11-29 02:31:37.252 +02:00 [DBG] Connection id "0HNHER93U8IIC" started.
2025-11-29 02:31:37.256 +02:00 [DBG] Connection 0HNHER93U8IIC established using the following protocol: "Tls13"
2025-11-29 02:31:37.265 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:31:37.272 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:31:37.273 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:31:37.275 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:31:37.276 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:31:37.276 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:31:37.277 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:31:37.278 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:31:37.279 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:31:37.280 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:31:37.282 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:31:37.283 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:31:37.284 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:31:37.285 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:31:37.287 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:31:37.288 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:31:37.290 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:31:37.291 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:31:37.292 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:31:37.294 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:31:37.295 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:31:37.296 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:31:37.297 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:31:37.298 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:31:37.2986277+02:00"
2025-11-29 02:31:37.299 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:31:37.300 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:31:37.303 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:31:37.303 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:31:37.304 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:31:37.306 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:31:37.307 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:31:37.308 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:31:37.309 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:31:37.310 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:31:37.323 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:31:37.325 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.327 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.328 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.329 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.330 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.332 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.333 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.334 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.335 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.336 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.337 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.339 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:31:37.340 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-29 02:31:37.341 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:31:37.342 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:31:37.344 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:31:37.346 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:31:37.346 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:31:37.347 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:31:37.348 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:31:37.349 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:31:37.350 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 61.7913ms
2025-11-29 02:31:37.351 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:31:37.351 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:31:37.353 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:31:37.354 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:31:37.355 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:31:37.356 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:31:37.357 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:31:37.358 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-29 02:31:37.359 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:31:37.360 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 96.1894ms
2025-11-29 02:31:37.361 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:31:37.364 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:31:37.365 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:31:37.366 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:31:37.367 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:31:37.368 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:31:37.369 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:31:37.371 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:31:37.372 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:31:37.373 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:31:37.375 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:31:37.376 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:31:37.377 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:31:37.378 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:31:37.379 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:31:37.380 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:31:37.381 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:31:37.382 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:31:37.383 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:31:37.3838018+02:00"
2025-11-29 02:31:37.384 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:31:37.385 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:31:37.387 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:31:37.388 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:31:37.389 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:31:37.390 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:31:37.391 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:31:37.391 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:31:37.393 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:31:37.394 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:31:37.397 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:31:37.399 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.400 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.401 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.403 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.404 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.405 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.406 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.407 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.408 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.409 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.410 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:31:37.411 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:31:37.412 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 02:31:37.414 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:31:37.415 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:31:37.416 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:31:37.417 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:31:37.418 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:31:37.419 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:31:37.419 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:31:37.420 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:31:37.422 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 46.8994ms
2025-11-29 02:31:37.423 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:31:37.424 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:31:37.425 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:31:37.426 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:31:37.427 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 76.1957ms
2025-11-29 02:31:42.123 +02:00 [DBG] Connection id "0HNHER93U8IIC" received FIN.
2025-11-29 02:31:42.124 +02:00 [DBG] Connection id "0HNHER93U8IIC" is closed. The last processed stream ID was 3.
2025-11-29 02:31:42.124 +02:00 [DBG] Connection id "0HNHER93U8IIC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:31:42.126 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8IIC completed.
2025-11-29 02:31:42.127 +02:00 [DBG] Connection id "0HNHER93U8IIC" stopped.
2025-11-29 02:32:39.731 +02:00 [DBG] Connection id "0HNHER93U8IID" accepted.
2025-11-29 02:32:39.738 +02:00 [DBG] Connection id "0HNHER93U8IID" started.
2025-11-29 02:32:39.744 +02:00 [DBG] Connection 0HNHER93U8IID established using the following protocol: "Tls13"
2025-11-29 02:32:39.752 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:32:39.762 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:32:39.764 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:32:39.766 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:32:39.767 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:32:39.768 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:32:39.769 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:32:39.770 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:32:39.770 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:32:39.771 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:32:39.773 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:32:39.774 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:32:39.775 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:32:39.777 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:32:39.778 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:32:39.779 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:32:39.781 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:32:39.782 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:32:39.783 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:32:39.784 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:32:39.785 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:32:39.787 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:32:39.788 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:32:39.790 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:32:39.7903227+02:00"
2025-11-29 02:32:39.791 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:32:39.792 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:32:39.795 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:32:39.796 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:32:39.797 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:32:39.798 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:32:39.800 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:32:39.801 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:32:39.802 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:32:39.803 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:32:39.817 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:32:39.820 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.821 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.822 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.823 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.824 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.825 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.826 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.828 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.829 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.830 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.831 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.832 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:32:39.834 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-29 02:32:39.835 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:32:39.837 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:32:39.838 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:32:39.841 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:32:39.841 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:32:39.842 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:32:39.843 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:32:39.844 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:32:39.845 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 65.922ms
2025-11-29 02:32:39.847 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:32:39.847 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:32:39.849 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:32:39.850 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:32:39.851 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:32:39.852 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:32:39.853 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:32:39.854 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-29 02:32:39.855 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:32:39.856 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 103.8251ms
2025-11-29 02:32:39.856 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:32:39.860 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:32:39.860 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:32:39.861 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:32:39.862 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:32:39.863 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:32:39.865 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:32:39.866 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:32:39.867 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:32:39.868 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:32:39.869 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:32:39.871 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:32:39.873 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:32:39.874 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:32:39.875 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:32:39.876 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:32:39.877 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:32:39.879 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:32:39.880 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:32:39.8802846+02:00"
2025-11-29 02:32:39.881 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:32:39.882 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:32:39.888 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:32:39.889 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:32:39.890 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:32:39.891 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:32:39.893 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:32:39.895 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:32:39.897 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-29 02:32:39.898 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:32:39.903 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:32:39.906 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.908 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.909 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.910 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.912 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.913 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.915 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.916 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.917 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.919 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.920 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:32:39.921 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:32:39.923 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 17ms reading results.
2025-11-29 02:32:39.925 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:32:39.926 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:32:39.928 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:32:39.930 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:32:39.931 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:32:39.932 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:32:39.933 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:32:39.934 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:32:39.936 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 66.7413ms
2025-11-29 02:32:39.937 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:32:39.938 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:32:39.939 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:32:39.940 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:32:39.942 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 95.3392ms
2025-11-29 02:32:42.135 +02:00 [DBG] Connection id "0HNHER93U8IID" received FIN.
2025-11-29 02:32:42.136 +02:00 [DBG] Connection id "0HNHER93U8IID" is closed. The last processed stream ID was 3.
2025-11-29 02:32:42.136 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8IID completed.
2025-11-29 02:32:42.138 +02:00 [DBG] Connection id "0HNHER93U8IID" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:32:42.141 +02:00 [DBG] Connection id "0HNHER93U8IID" stopped.
2025-11-29 02:36:05.240 +02:00 [DBG] Connection id "0HNHER93U8IIE" accepted.
2025-11-29 02:36:05.249 +02:00 [DBG] Connection id "0HNHER93U8IIE" started.
2025-11-29 02:36:05.254 +02:00 [DBG] Connection 0HNHER93U8IIE established using the following protocol: "Tls13"
2025-11-29 02:36:05.264 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:36:05.275 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:36:05.277 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:36:05.278 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:36:05.279 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:36:05.280 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:36:05.281 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:36:05.282 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:36:05.283 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:36:05.285 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:36:05.286 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:36:05.288 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:36:05.289 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:36:05.291 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:36:05.293 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:36:05.294 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:36:05.296 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:36:05.297 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:36:05.299 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:36:05.300 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:36:05.302 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:36:05.303 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:36:05.304 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:36:05.306 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:36:05.3063374+02:00"
2025-11-29 02:36:05.307 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:36:05.309 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:36:05.311 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:36:05.312 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:36:05.313 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:36:05.329 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:36:05.333 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:36:05.334 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:36:05.336 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:36:05.337 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:36:05.358 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:36:05.361 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.363 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.364 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.365 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.366 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.367 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.368 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.370 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.371 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.372 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.373 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.374 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:36:05.375 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-29 02:36:05.377 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:36:05.378 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:36:05.380 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:36:05.381 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:36:05.382 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:36:05.383 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:36:05.383 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:36:05.384 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:36:05.385 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 91.3159ms
2025-11-29 02:36:05.387 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:36:05.387 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:36:05.389 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:36:05.390 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:36:05.391 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:36:05.392 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:36:05.393 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:36:05.394 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-11-29 02:36:05.395 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:36:05.397 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 132.8418ms
2025-11-29 02:36:05.397 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:36:05.401 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:36:05.402 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:36:05.403 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:36:05.404 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:36:05.406 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:36:05.407 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:36:05.408 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:36:05.410 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:36:05.411 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:36:05.413 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:36:05.414 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:36:05.416 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:36:05.417 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:36:05.419 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:36:05.420 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:36:05.421 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:36:05.423 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:36:05.425 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:36:05.4252870+02:00"
2025-11-29 02:36:05.426 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:36:05.427 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:36:05.430 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:36:05.431 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:36:05.432 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:36:05.433 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:36:05.434 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:36:05.435 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:36:05.436 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:36:05.438 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:36:05.442 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:36:05.445 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.446 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.447 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.448 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.449 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.450 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.452 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.453 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.454 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.455 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.456 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:36:05.457 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:36:05.458 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 02:36:05.459 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:36:05.461 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:36:05.462 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:36:05.464 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:36:05.464 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:36:05.465 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:36:05.465 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:36:05.466 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:36:05.468 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 55.1285ms
2025-11-29 02:36:05.469 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:36:05.470 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:36:05.471 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:36:05.472 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:36:05.473 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 86.8906ms
2025-11-29 02:36:12.176 +02:00 [DBG] Connection id "0HNHER93U8IIE" received FIN.
2025-11-29 02:36:12.177 +02:00 [DBG] Connection id "0HNHER93U8IIE" is closed. The last processed stream ID was 3.
2025-11-29 02:36:12.178 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8IIE completed.
2025-11-29 02:36:12.178 +02:00 [DBG] Connection id "0HNHER93U8IIE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:36:12.181 +02:00 [DBG] Connection id "0HNHER93U8IIE" stopped.
2025-11-29 02:37:51.636 +02:00 [DBG] Connection id "0HNHER93U8IIF" accepted.
2025-11-29 02:37:51.640 +02:00 [DBG] Connection id "0HNHER93U8IIF" started.
2025-11-29 02:37:51.643 +02:00 [DBG] Connection 0HNHER93U8IIF established using the following protocol: "Tls13"
2025-11-29 02:37:51.649 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 02:37:51.654 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:37:51.655 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:37:51.656 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:37:51.656 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:37:51.657 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:37:51.657 +02:00 [DBG] The request is a preflight request.
2025-11-29 02:37:51.658 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 9.1051ms
2025-11-29 02:37:51.659 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 02:37:51.662 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:37:51.663 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 02:37:51.664 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:37:51.664 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:37:51.665 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:37:51.666 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:37:51.667 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:37:51.667 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:37:51.668 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 02:37:51.669 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:37:51.670 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:37:51.671 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:37:51.673 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:37:51.673 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:37:51.674 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:37:51.675 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:37:51.676 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:37:51.677 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 02:37:51.678 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:37:51.679 +02:00 [DBG] Connection id "0HNHER93U8IIF", Request id "0HNHER93U8IIF:00000003": started reading request body.
2025-11-29 02:37:51.680 +02:00 [DBG] Connection id "0HNHER93U8IIF", Request id "0HNHER93U8IIF:00000003": done reading request body.
2025-11-29 02:37:51.681 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 02:37:51.682 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:37:51.683 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:37:51.684 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:37:51.685 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:37:51.686 +02:00 [INF] Add Appointment called at "2025-11-29T02:37:51.6863669+02:00"
2025-11-29 02:37:51.687 +02:00 [INF] Creating appointment for PatientId: 0, DoctorId: 1, Date: "2025-11-30", Shift: "Evening"
2025-11-29 02:37:51.688 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:37:51.691 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:37:51.691 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:37:51.692 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:37:51.693 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:37:51.694 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 02:37:51.695 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 02:37:51.696 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:37:51.697 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:37:51.698 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:37:51.699 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 02:37:51.712 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 02:37:51.714 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:37:51.714 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 02:37:51.716 +02:00 [WRN] Patient with ID 0 not found
2025-11-29 02:37:51.740 +02:00 [DBG] Rolling back transaction.
2025-11-29 02:37:51.741 +02:00 [DBG] Rolled back transaction.
2025-11-29 02:37:51.741 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:37:51.742 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:37:51.743 +02:00 [ERR] Failed to create appointment for PatientId: 0, DoctorId: 1
System.ArgumentException: Patient does not exist.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 64
2025-11-29 02:37:51.759 +02:00 [DBG] Disposing transaction.
2025-11-29 02:37:51.790 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 115.7526ms
2025-11-29 02:37:51.791 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:37:51.836 +02:00 [ERR]  Exception caught: Patient does not exist.
System.ArgumentException: Patient does not exist.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 64
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-29 02:37:51.843 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:37:51.845 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:37:51.846 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:37:51.847 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 187.4314ms
2025-11-29 02:37:52.190 +02:00 [DBG] Connection id "0HNHER93U8IIF" received FIN.
2025-11-29 02:37:52.191 +02:00 [DBG] Connection id "0HNHER93U8IIF" is closed. The last processed stream ID was 3.
2025-11-29 02:37:52.191 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8IIF completed.
2025-11-29 02:37:52.194 +02:00 [DBG] Connection id "0HNHER93U8IIF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:37:52.197 +02:00 [DBG] Connection id "0HNHER93U8IIF" stopped.
2025-11-29 02:37:58.733 +02:00 [DBG] Connection id "0HNHER93U8IIG" accepted.
2025-11-29 02:37:58.734 +02:00 [DBG] Connection id "0HNHER93U8IIG" started.
2025-11-29 02:37:58.737 +02:00 [DBG] Connection 0HNHER93U8IIG established using the following protocol: "Tls13"
2025-11-29 02:37:58.739 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 02:37:58.742 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 02:37:58.743 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 02:37:58.744 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:37:58.745 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:37:58.746 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:37:58.747 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:37:58.747 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:37:58.748 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:37:58.749 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 02:37:58.751 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:37:58.751 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:37:58.752 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:37:58.753 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:37:58.754 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:37:58.755 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:37:58.756 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:37:58.757 +02:00 [INF] get all schedule called at "2025-11-29T02:37:58.7577653+02:00"
2025-11-29 02:37:58.758 +02:00 [INF] Fetching all schedules
2025-11-29 02:37:58.759 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:37:58.761 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:37:58.761 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:37:58.762 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:37:58.764 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:37:58.764 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:37:58.765 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:37:58.766 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:37:58.767 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:37:58.775 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:37:58.776 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.777 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.778 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.779 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.780 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.781 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.782 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.783 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.784 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.784 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.785 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.786 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.787 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.788 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.789 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.790 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.791 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.792 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.793 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.794 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.795 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.796 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.797 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.798 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.799 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.800 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.801 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.801 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.802 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.803 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.804 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.805 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.806 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.807 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.808 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.809 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.810 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.811 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.812 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.813 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.814 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.815 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.816 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:58.816 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:37:58.817 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 41ms reading results.
2025-11-29 02:37:58.818 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:37:58.819 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:37:58.820 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:37:58.822 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:37:58.822 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:37:58.823 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:37:58.824 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:37:58.825 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 02:37:58.827 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 71.3564ms
2025-11-29 02:37:58.828 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:37:58.829 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:37:58.830 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:37:58.831 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:37:58.832 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 94.1211ms
2025-11-29 02:37:59.942 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 02:37:59.945 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 02:37:59.946 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 02:37:59.948 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:37:59.949 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:37:59.950 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:37:59.951 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:37:59.951 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:37:59.952 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:37:59.953 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:37:59.955 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:37:59.956 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:37:59.958 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:37:59.959 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:37:59.960 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:37:59.961 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:37:59.962 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:37:59.964 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:37:59.965 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:37:59.966 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:37:59.967 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:37:59.967 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:37:59.968 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:37:59.970 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:37:59.9700507+02:00"
2025-11-29 02:37:59.970 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 02:37:59.972 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:37:59.974 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:37:59.974 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:37:59.975 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:37:59.976 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:37:59.977 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:37:59.978 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:37:59.979 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:37:59.980 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:37:59.992 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:37:59.994 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:59.995 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:59.996 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:59.997 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:59.998 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:37:59.999 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:00.000 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:00.001 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:00.002 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:00.003 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:00.003 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:00.005 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:00.006 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:00.007 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:00.008 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:00.009 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:00.010 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 15ms reading results.
2025-11-29 02:38:00.011 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:00.012 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:38:00.013 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:38:00.015 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:38:00.015 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:38:00.016 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:38:00.016 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:38:00.018 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:38:00.019 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 57.6796ms
2025-11-29 02:38:00.020 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:38:00.021 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:38:00.021 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:00.022 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:38:00.023 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 80.8655ms
2025-11-29 02:38:01.455 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 02:38:01.457 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 02:38:01.458 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 02:38:01.459 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:38:01.460 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:38:01.462 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:38:01.462 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:38:01.463 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:38:01.465 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:38:01.466 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 02:38:01.467 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:38:01.468 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:38:01.469 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:38:01.471 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:38:01.472 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:38:01.473 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:38:01.474 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:38:01.474 +02:00 [INF] get all schedule called at "2025-11-29T02:38:01.4749462+02:00"
2025-11-29 02:38:01.475 +02:00 [INF] Fetching all schedules
2025-11-29 02:38:01.476 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:38:01.478 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:38:01.478 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:38:01.479 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:01.480 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:01.481 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:01.481 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:01.482 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:38:01.483 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:38:01.491 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:38:01.493 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.494 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.495 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.496 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.497 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.498 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.499 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.500 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.501 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.502 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.503 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.504 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.506 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.507 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.508 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.509 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.510 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.512 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.513 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.513 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.514 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.515 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.516 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.517 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.518 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.519 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.520 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.521 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.522 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.523 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.524 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.526 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.527 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.528 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.529 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.530 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.531 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.532 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.533 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.534 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.536 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.537 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.538 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:01.539 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:01.540 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 47ms reading results.
2025-11-29 02:38:01.542 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:01.543 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:38:01.545 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:38:01.547 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:38:01.548 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:38:01.549 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:38:01.550 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:38:01.551 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 02:38:01.553 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 80.5358ms
2025-11-29 02:38:01.555 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:38:01.556 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:38:01.557 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:01.558 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:38:01.560 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 104.7964ms
2025-11-29 02:38:02.191 +02:00 [DBG] Connection id "0HNHER93U8IIG" received FIN.
2025-11-29 02:38:02.192 +02:00 [DBG] Connection id "0HNHER93U8IIG" is closed. The last processed stream ID was 5.
2025-11-29 02:38:02.192 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8IIG completed.
2025-11-29 02:38:02.193 +02:00 [DBG] Connection id "0HNHER93U8IIG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:38:02.196 +02:00 [DBG] Connection id "0HNHER93U8IIG" stopped.
2025-11-29 02:38:25.414 +02:00 [DBG] Connection id "0HNHER93U8IIH" accepted.
2025-11-29 02:38:25.419 +02:00 [DBG] Connection id "0HNHER93U8IIH" started.
2025-11-29 02:38:25.423 +02:00 [DBG] Connection 0HNHER93U8IIH established using the following protocol: "Tls13"
2025-11-29 02:38:25.430 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-11-29 02:38:25.440 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 02:38:25.441 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:38:25.442 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:38:25.442 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:38:25.443 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:38:25.444 +02:00 [DBG] The request is a preflight request.
2025-11-29 02:38:25.445 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 14.4038ms
2025-11-29 02:38:25.447 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 54
2025-11-29 02:38:25.450 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 02:38:25.451 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-29 02:38:25.453 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 02:38:25.453 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:38:25.454 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:38:25.455 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:38:25.455 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:38:25.456 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 02:38:25.462 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-29 02:38:25.463 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:38:25.464 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:38:25.465 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:38:25.467 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:38:25.468 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:38:25.469 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 02:38:25.471 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 02:38:25.472 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 02:38:25.473 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-29 02:38:25.474 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:38:25.476 +02:00 [DBG] Connection id "0HNHER93U8IIH", Request id "0HNHER93U8IIH:00000003": started reading request body.
2025-11-29 02:38:25.477 +02:00 [DBG] Connection id "0HNHER93U8IIH", Request id "0HNHER93U8IIH:00000003": done reading request body.
2025-11-29 02:38:25.478 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-29 02:38:25.479 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 02:38:25.480 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 02:38:25.481 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 02:38:25.484 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 02:38:25.486 +02:00 [INF] Login called at "2025-11-29T02:38:25.4860684+02:00"
2025-11-29 02:38:25.491 +02:00 [INF] Login attempt for email: nour22110@gmail.com
2025-11-29 02:38:25.497 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:38:25.500 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-11-29 02:38:25.509 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 02:38:25.515 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:38:25.516 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:38:25.516 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.518 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.519 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:25.519 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:25.520 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:38:25.522 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 02:38:25.528 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 02:38:25.530 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:25.531 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.532 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 02:38:25.534 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.535 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:38:25.665 +02:00 [DBG] Creating JWT token for user a06c9a74-d53e-4235-a0b9-681147a73dfc
2025-11-29 02:38:25.677 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2025-11-29 02:38:25.681 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 02:38:25.683 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.684 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.685 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:25.686 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:25.687 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:38:25.688 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 02:38:25.693 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 02:38:25.695 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.696 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 02:38:25.697 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.698 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:38:25.705 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-11-29 02:38:25.710 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 02:38:25.712 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.713 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.713 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:25.714 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:25.715 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:38:25.716 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 02:38:25.721 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 02:38:25.723 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.724 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 02:38:25.725 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.726 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:38:25.734 +02:00 [DBG] JWT token created for user a06c9a74-d53e-4235-a0b9-681147a73dfc, expires at "2025-11-29T01:38:25.0000000Z"
2025-11-29 02:38:25.735 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.737 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.738 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:25.738 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:25.739 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:38:25.740 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 02:38:25.742 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 02:38:25.743 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.745 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 02:38:25.746 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.747 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:38:25.754 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-11-29 02:38:25.758 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 02:38:25.760 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.761 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.762 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:25.763 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:25.764 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:38:25.765 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 02:38:25.769 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 02:38:25.771 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.772 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 02:38:25.773 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.774 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:38:25.789 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:25.793 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 02:38:25.799 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 02:38:25.808 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 02:38:25.810 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 02:38:25.811 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 02:38:25.867 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.868 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.872 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:25.873 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:25.875 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:38:25.876 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 02:38:25.890 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 02:38:25.896 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.897 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-29 02:38:25.899 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.900 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:38:25.905 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:25.907 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 02:38:25.929 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .FirstOrDefault(p => p.UserId == __user_Id_0)'
2025-11-29 02:38:25.933 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
            SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId
            FROM Patients AS p
            WHERE p.UserId == @__user_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 02:38:25.935 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.935 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.936 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:25.937 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:25.938 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:38:25.939 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 02:38:25.943 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 02:38:25.946 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:25.947 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:25.948 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.949 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-29 02:38:25.950 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.951 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:38:25.952 +02:00 [INF] Patient 2 logged in successfully
2025-11-29 02:38:25.953 +02:00 [INF] User nour22110@gmail.com logged in successfully with roles: Patient
2025-11-29 02:38:25.954 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:38:25.955 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:38:25.956 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:38:25.956 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:38:25.957 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:38:25.958 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-29 02:38:25.962 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 492.6148ms
2025-11-29 02:38:25.963 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 02:38:25.964 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:38:25.964 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:25.965 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:38:25.966 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 520.0121ms
2025-11-29 02:38:27.196 +02:00 [DBG] Connection id "0HNHER93U8IIH" received FIN.
2025-11-29 02:38:27.199 +02:00 [DBG] Connection id "0HNHER93U8IIH" is closed. The last processed stream ID was 3.
2025-11-29 02:38:27.200 +02:00 [DBG] Connection id "0HNHER93U8IIH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:38:27.199 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8IIH completed.
2025-11-29 02:38:27.203 +02:00 [DBG] Connection id "0HNHER93U8IIH" stopped.
2025-11-29 02:38:27.472 +02:00 [DBG] Connection id "0HNHER93U8III" accepted.
2025-11-29 02:38:27.474 +02:00 [DBG] Connection id "0HNHER93U8III" started.
2025-11-29 02:38:27.477 +02:00 [DBG] Connection 0HNHER93U8III established using the following protocol: "Tls13"
2025-11-29 02:38:27.479 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 02:38:27.482 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 02:38:27.483 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 02:38:27.484 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:38:27.485 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:38:27.486 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:38:27.487 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:38:27.487 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:38:27.488 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:38:27.489 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 02:38:27.491 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:38:27.492 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:38:27.493 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:38:27.495 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:38:27.497 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:38:27.498 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:38:27.499 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:38:27.500 +02:00 [INF] get all schedule called at "2025-11-29T02:38:27.5004438+02:00"
2025-11-29 02:38:27.501 +02:00 [INF] Fetching all schedules
2025-11-29 02:38:27.502 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:38:27.503 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:38:27.504 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:38:27.505 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:27.507 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:27.508 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:27.509 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:27.510 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:38:27.511 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:38:27.522 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:38:27.524 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.526 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.527 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.528 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.530 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.531 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.532 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.533 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.535 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.536 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.537 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.538 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.539 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.541 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.542 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.543 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.545 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.547 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.548 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.549 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.551 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.552 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.553 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.555 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.556 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.557 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.559 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.560 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.562 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.563 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.564 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.566 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.567 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.568 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.570 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.571 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.573 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.574 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.575 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.577 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.578 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.580 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.581 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:27.582 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:27.584 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 59ms reading results.
2025-11-29 02:38:27.586 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:27.587 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:38:27.589 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:38:27.591 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:38:27.592 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:38:27.593 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:38:27.594 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:38:27.596 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 02:38:27.599 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 100.9076ms
2025-11-29 02:38:27.600 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:38:27.601 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:38:27.602 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:27.604 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:38:27.605 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 126.2216ms
2025-11-29 02:38:33.223 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 02:38:33.225 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 02:38:33.226 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 02:38:33.228 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:38:33.229 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:38:33.229 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:38:33.230 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:38:33.230 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:38:33.231 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:38:33.232 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:38:33.233 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:38:33.234 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:38:33.235 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:38:33.236 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:38:33.237 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:38:33.238 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:38:33.239 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:38:33.240 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:38:33.240 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:38:33.241 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:38:33.242 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:38:33.243 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:38:33.244 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:38:33.245 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:38:33.2453323+02:00"
2025-11-29 02:38:33.246 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 02:38:33.247 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:38:33.248 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:38:33.249 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:38:33.250 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:33.251 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:33.252 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:33.253 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:33.253 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:38:33.254 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:38:33.266 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:38:33.267 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:33.268 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:33.269 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:33.271 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:33.271 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:33.272 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:33.273 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:33.274 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:33.275 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:33.276 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:33.277 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:33.278 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:33.278 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:33.279 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:33.280 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:33.281 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:33.282 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-29 02:38:33.283 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:33.284 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:38:33.285 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:38:33.287 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:38:33.287 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:38:33.288 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:38:33.288 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:38:33.289 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:38:33.290 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 52.1141ms
2025-11-29 02:38:33.291 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:38:33.292 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:38:33.293 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:33.294 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:38:33.295 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 71.8066ms
2025-11-29 02:38:35.488 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 02:38:35.490 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:38:35.490 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:38:35.491 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:38:35.492 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:38:35.493 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:38:35.493 +02:00 [DBG] The request is a preflight request.
2025-11-29 02:38:35.494 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 6.1696ms
2025-11-29 02:38:35.495 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 02:38:35.498 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:38:35.499 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 02:38:35.500 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:38:35.500 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:38:35.501 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:38:35.502 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:38:35.502 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:38:35.503 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:38:35.504 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 02:38:35.505 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:38:35.506 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:38:35.507 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:38:35.508 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:38:35.509 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:38:35.510 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:38:35.511 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:38:35.512 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:38:35.513 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 02:38:35.514 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:38:35.515 +02:00 [DBG] Connection id "0HNHER93U8III", Request id "0HNHER93U8III:00000007": started reading request body.
2025-11-29 02:38:35.516 +02:00 [DBG] Connection id "0HNHER93U8III", Request id "0HNHER93U8III:00000007": done reading request body.
2025-11-29 02:38:35.517 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 02:38:35.518 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:38:35.518 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:38:35.519 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:38:35.520 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:38:35.521 +02:00 [INF] Add Appointment called at "2025-11-29T02:38:35.5217024+02:00"
2025-11-29 02:38:35.522 +02:00 [INF] Creating appointment for PatientId: 2, DoctorId: 5, Date: "2026-01-09", Shift: "Evening"
2025-11-29 02:38:35.523 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:38:35.532 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:38:35.533 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:38:35.533 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:35.534 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:35.535 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 02:38:35.536 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 02:38:35.537 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:35.538 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:35.539 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:38:35.540 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 02:38:35.550 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 02:38:35.552 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.553 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.554 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.555 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:35.556 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 02:38:35.557 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:35.558 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:38:35.559 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:38:35.560 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:38:35.562 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:38:35.564 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.565 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.565 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.566 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.567 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.568 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.569 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.570 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.571 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.572 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.572 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.573 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.574 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.575 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.576 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.577 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:35.578 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-29 02:38:35.579 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:35.580 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:35.581 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:38:35.582 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 02:38:35.584 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 02:38:35.585 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:35.586 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 02:38:35.587 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:35.588 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:35.589 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:38:35.590 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 02:38:35.595 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 02:38:35.597 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:35.597 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 02:38:35.613 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.630 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.633 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.634 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.637 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.639 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 02:38:35.679 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 02:38:35.682 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 02:38:35.683 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 02:38:35.684 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 02:38:35.703 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 02:38:35.715 +02:00 [DBG] Created transaction savepoint.
2025-11-29 02:38:35.716 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:35.717 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:35.720 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-29 02:38:35.722 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 02:38:35.734 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 02:38:35.744 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 02:38:35.749 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:35.750 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 02:38:35.755 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.756 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 02:38:35.759 +02:00 [DBG] Committing transaction.
2025-11-29 02:38:35.762 +02:00 [DBG] Committed transaction.
2025-11-29 02:38:35.763 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:35.764 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:38:35.766 +02:00 [INF] Appointment created successfully with ID: 24
2025-11-29 02:38:35.770 +02:00 [DBG] Disposing transaction.
2025-11-29 02:38:35.772 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:38:35.774 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:38:35.775 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:38:35.775 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:38:35.776 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:38:35.777 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 02:38:35.795 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[24],action=[GetById],controller=[Appointment])
2025-11-29 02:38:35.800 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/24 and 
2025-11-29 02:38:35.802 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/24
2025-11-29 02:38:35.808 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 297.5859ms
2025-11-29 02:38:35.809 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:38:35.810 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:38:35.811 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:35.812 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:38:35.813 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 02:38:35.813 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 318.1634ms
2025-11-29 02:38:35.815 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 02:38:35.818 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:38:35.819 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:38:35.819 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:38:35.820 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:38:35.821 +02:00 [DBG] The request is a preflight request.
2025-11-29 02:38:35.821 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 8.8788ms
2025-11-29 02:38:35.823 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 02:38:35.826 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 02:38:35.827 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 02:38:35.828 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 02:38:35.829 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:38:35.829 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:38:35.830 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:38:35.863 +02:00 [DBG] Successfully validated the token.
2025-11-29 02:38:35.866 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-29 02:38:35.872 +02:00 [DBG] Authorization was successful.
2025-11-29 02:38:35.872 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 02:38:35.876 +02:00 [INF] Route matched with {action = "CreatePayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePayment(Hospital.Controllers.CreatePaymentRequest, System.Threading.CancellationToken) on controller Hospital.Controllers.PaymentController (Hospital).
2025-11-29 02:38:35.877 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:38:35.878 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:38:35.879 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:38:35.881 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:38:35.882 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:38:35.883 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PaymentController (Hospital)
2025-11-29 02:38:35.889 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PaymentController (Hospital)
2025-11-29 02:38:35.890 +02:00 [DBG] Attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' ...
2025-11-29 02:38:35.891 +02:00 [DBG] Attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' using the name '' in request data ...
2025-11-29 02:38:35.892 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:38:35.893 +02:00 [DBG] Connection id "0HNHER93U8III", Request id "0HNHER93U8III:0000000B": started reading request body.
2025-11-29 02:38:35.894 +02:00 [DBG] Connection id "0HNHER93U8III", Request id "0HNHER93U8III:0000000B": done reading request body.
2025-11-29 02:38:35.895 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Controllers.CreatePaymentRequest'
2025-11-29 02:38:35.896 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 02:38:35.897 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 02:38:35.898 +02:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' ...
2025-11-29 02:38:35.900 +02:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 02:38:35.901 +02:00 [DBG] Attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-11-29 02:38:35.902 +02:00 [DBG] Done attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-11-29 02:38:35.904 +02:00 [DBG] Attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-11-29 02:38:35.905 +02:00 [DBG] Done attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-11-29 02:38:35.907 +02:00 [INF] create payment by credite card called at "2025-11-29T02:38:35.9075423+02:00"
2025-11-29 02:38:35.912 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:38:35.914 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Payment)
    .Include(a => a.Patient)
    .ThenInclude(p => p.User)
    .Include(a => a.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(a => a.AppointmentId == __appointmentId_0)'
2025-11-29 02:38:35.917 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-11-29 02:38:35.918 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-29 02:38:35.920 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-29 02:38:35.921 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-29 02:38:35.922 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 02:38:35.939 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Appointment>(
    asyncEnumerable: new SingleQueryingEnumerable<Appointment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 9], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
                1 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Payment.Amount (decimal) Required, 13], [Property: Payment.AppointmentId (int) Required FK Index, 14], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Payment.Currency (string) Required MaxLength(3), 16], [Property: Payment.GatewayResponse (string), 17], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 18], [Property: Payment.PaymobOrderId (long?), 19], [Property: Payment.PaymobTransactionId (long?), 20], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 21], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 22] }
                2 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Patient.EmergencyContact (string) MaxLength(150), 25], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: Patient.UserId (string) Required FK Index, 27] }
                3 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 28], [Property: User.AccessFailedCount (int) Required, 29], [Property: User.ConcurrencyStamp (string) Concurrency, 30], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.DateOfBirth (DateOnly?), 32], [Property: User.Email (string) Index MaxLength(256), 33], [Property: User.EmailConfirmed (bool) Required, 34], [Property: User.FullName (string) Required MaxLength(150), 35], [Property: User.Gender (GenderType?) MaxLength(10), 36], [Property: User.LockoutEnabled (bool) Required, 37], [Property: User.LockoutEnd (DateTimeOffset?), 38], [Property: User.NormalizedEmail (string) Index MaxLength(256), 39], [Property: User.NormalizedUserName (string) Index MaxLength(256), 40], [Property: User.PasswordHash (string), 41], [Property: User.PhoneNumber (string), 42], [Property: User.PhoneNumberConfirmed (bool) Required, 43], [Property: User.RefreshToken (string), 44], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 45], [Property: User.Role (string) Required MaxLength(50), 46], [Property: User.SecurityStamp (string), 47], [Property: User.TwoFactorEnabled (bool) Required, 48], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 49], [Property: User.UserName (string) MaxLength(256), 50] }
                4 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 51], [Property: Doctor.Available (bool?), 52], [Property: Doctor.Biography (string), 53], [Property: Doctor.ConsultationFees (decimal) Required, 54], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 55], [Property: Doctor.ExperienceYears (int?), 56], [Property: Doctor.ImageURL (string) MaxLength(300), 57], [Property: Doctor.SpecializationId (int) Required FK Index, 58], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 59], [Property: Doctor.UserId (string) Required FK Index, 60] }
                5 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 61], [Property: User.AccessFailedCount (int) Required, 62], [Property: User.ConcurrencyStamp (string) Concurrency, 63], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 64], [Property: User.DateOfBirth (DateOnly?), 65], [Property: User.Email (string) Index MaxLength(256), 66], [Property: User.EmailConfirmed (bool) Required, 67], [Property: User.FullName (string) Required MaxLength(150), 68], [Property: User.Gender (GenderType?) MaxLength(10), 69], [Property: User.LockoutEnabled (bool) Required, 70], [Property: User.LockoutEnd (DateTimeOffset?), 71], [Property: User.NormalizedEmail (string) Index MaxLength(256), 72], [Property: User.NormalizedUserName (string) Index MaxLength(256), 73], [Property: User.PasswordHash (string), 74], [Property: User.PhoneNumber (string), 75], [Property: User.PhoneNumberConfirmed (bool) Required, 76], [Property: User.RefreshToken (string), 77], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 78], [Property: User.Role (string) Required MaxLength(50), 79], [Property: User.SecurityStamp (string), 80], [Property: User.TwoFactorEnabled (bool) Required, 81], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 82], [Property: User.UserName (string) MaxLength(256), 83] }
            SELECT TOP(1) a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PaymentId, p.Amount, p.AppointmentId, p.CreatedAt, p.Currency, p.GatewayResponse, p.PaymobMerchantOrderId, p.PaymobOrderId, p.PaymobTransactionId, p.Status, p.UpdatedAt, p0.PatientId, p0.CreatedAt, p0.EmergencyContact, p0.UpdatedAt, p0.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt, u0.UserName
            FROM Appointments AS a
            LEFT JOIN Payments AS p ON a.AppointmentId == p.AppointmentId
            INNER JOIN Patients AS p0 ON a.PatientId == p0.PatientId
            INNER JOIN Users AS u ON p0.UserId == u.Id
            INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
            INNER JOIN Users AS u0 ON d.UserId == u0.Id
            WHERE a.AppointmentId == @__appointmentId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 02:38:35.942 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:38:35.942 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:38:35.943 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:35.944 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:35.945 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:35.946 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:35.947 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:38:35.948 +02:00 [DBG] Executing DbCommand [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt], [p0].[PatientId], [p0].[CreatedAt], [p0].[EmergencyContact], [p0].[UpdatedAt], [p0].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName]
FROM [Appointments] AS [a]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
INNER JOIN [Patients] AS [p0] ON [a].[PatientId] = [p0].[PatientId]
INNER JOIN [Users] AS [u] ON [p0].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
WHERE [a].[AppointmentId] = @__appointmentId_0
2025-11-29 02:38:35.959 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt], [p0].[PatientId], [p0].[CreatedAt], [p0].[EmergencyContact], [p0].[UpdatedAt], [p0].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName]
FROM [Appointments] AS [a]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
INNER JOIN [Patients] AS [p0] ON [a].[PatientId] = [p0].[PatientId]
INNER JOIN [Users] AS [u] ON [p0].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
WHERE [a].[AppointmentId] = @__appointmentId_0
2025-11-29 02:38:35.963 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.966 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.968 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.969 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.970 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.971 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.973 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.974 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.975 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:35.976 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:35.977 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 16ms reading results.
2025-11-29 02:38:35.978 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:35.980 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:38:36.015 +02:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-11-29 02:38:36.018 +02:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-11-29 02:38:36.742 +02:00 [INF] Received HTTP response headers after 720.7807ms - 201
2025-11-29 02:38:36.744 +02:00 [INF] End processing HTTP request after 730.7138ms - 201
2025-11-29 02:38:36.749 +02:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-11-29 02:38:36.750 +02:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-11-29 02:38:36.965 +02:00 [INF] Received HTTP response headers after 214.0512ms - 201
2025-11-29 02:38:36.966 +02:00 [INF] End processing HTTP request after 217.3553ms - 201
2025-11-29 02:38:36.974 +02:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-11-29 02:38:36.975 +02:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-11-29 02:38:37.194 +02:00 [INF] Received HTTP response headers after 218.5895ms - 201
2025-11-29 02:38:37.195 +02:00 [INF] End processing HTTP request after 221.1438ms - 201
2025-11-29 02:38:37.199 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Payment.PaymentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:37.212 +02:00 [DBG] The navigation 'Payment.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:37.214 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:37.215 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:37.216 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 02:38:37.223 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 02:38:37.225 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 02:38:37.225 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 02:38:37.227 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 02:38:37.228 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:37.230 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:37.231 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:38:37.231 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:38:37.234 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-29 02:38:37.236 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-29 02:38:37.242 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-29 02:38:37.244 +02:00 [DBG] The foreign key property 'Payment.PaymentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 02:38:37.246 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:37.247 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 02:38:37.249 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:37.250 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:38:37.252 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:38:37.254 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 02:38:37.255 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:38:37.257 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:38:37.257 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:38:37.258 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:38:37.258 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:38:37.259 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-29 02:38:37.264 +02:00 [INF] Executed action Hospital.Controllers.PaymentController.CreatePayment (Hospital) in 1381.2294ms
2025-11-29 02:38:37.265 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 02:38:37.266 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:38:37.267 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:38:37.267 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:38:37.268 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 200 null application/json; charset=utf-8 1445.6268ms
2025-11-29 02:40:35.890 +02:00 [DBG] HttpMessageHandler expired after 120000ms for client 'IPaymobClient'
2025-11-29 02:40:45.893 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:40:45.896 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0591ms - processed: 0 items - remaining: 1 items
2025-11-29 02:40:55.898 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:40:55.899 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-11-29 02:41:05.901 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:41:05.902 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2025-11-29 02:41:15.903 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:41:15.903 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2025-11-29 02:41:25.905 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:41:25.906 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2025-11-29 02:41:35.908 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:41:35.910 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2025-11-29 02:41:45.911 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:41:45.912 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2025-11-29 02:41:55.916 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:41:55.917 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-11-29 02:42:05.918 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:42:05.919 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2025-11-29 02:42:07.154 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:42:07.160 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:42:07.161 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:42:07.163 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:42:07.164 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:42:07.165 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:42:07.166 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:42:07.166 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:42:07.167 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:42:07.168 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:42:07.169 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:42:07.170 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:42:07.172 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:42:07.173 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:42:07.174 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:42:07.175 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:42:07.176 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:42:07.177 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:42:07.179 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:42:07.180 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:42:07.181 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:42:07.182 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:42:07.183 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:42:07.184 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:42:07.1840488+02:00"
2025-11-29 02:42:07.184 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:42:07.185 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:42:07.187 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:42:07.188 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:42:07.189 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:42:07.199 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:42:07.201 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:42:07.202 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:42:07.203 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:42:07.204 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:42:07.213 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:42:07.215 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:07.216 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:07.217 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:07.217 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:07.218 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:07.219 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:07.220 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:07.221 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:07.222 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:07.222 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:07.223 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:07.224 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:42:07.225 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-29 02:42:07.226 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:42:07.227 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:42:07.228 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:42:07.229 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:42:07.230 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:42:07.230 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:42:07.231 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:42:07.232 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:42:07.232 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 57.3457ms
2025-11-29 02:42:07.236 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:42:07.239 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:42:07.239 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:42:07.240 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:42:07.241 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 87.4128ms
2025-11-29 02:42:13.072 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:42:13.075 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:42:13.076 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:42:13.077 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:42:13.078 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:42:13.079 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:42:13.080 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:42:13.081 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:42:13.082 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:42:13.083 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:42:13.085 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:42:13.086 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:42:13.088 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:42:13.089 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:42:13.091 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:42:13.092 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:42:13.094 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:42:13.095 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:42:13.096 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:42:13.097 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:42:13.099 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:42:13.100 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:42:13.101 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:42:13.102 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:42:13.1023219+02:00"
2025-11-29 02:42:13.103 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:42:13.104 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:42:13.106 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:42:13.107 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:42:13.107 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:42:13.109 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:42:13.110 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:42:13.111 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:42:13.112 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:42:13.113 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:42:13.127 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:42:13.130 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:13.131 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:13.132 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:13.133 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:13.134 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:13.135 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:13.137 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:13.138 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:13.139 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:13.140 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:13.141 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:42:13.143 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:42:13.144 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-29 02:42:13.145 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:42:13.146 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:42:13.148 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:42:13.150 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:42:13.150 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:42:13.151 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:42:13.152 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:42:13.153 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:42:13.155 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 62.4506ms
2025-11-29 02:42:13.156 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:42:13.157 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:42:13.158 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:42:13.159 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:42:13.160 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 87.9873ms
2025-11-29 02:42:15.922 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:42:15.924 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2025-11-29 02:42:25.926 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:42:25.927 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0047ms - processed: 0 items - remaining: 1 items
2025-11-29 02:42:35.929 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:42:35.930 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2025-11-29 02:42:45.931 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:42:45.932 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2025-11-29 02:42:55.934 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:42:55.935 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0133ms - processed: 0 items - remaining: 1 items
2025-11-29 02:43:05.936 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:43:05.937 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2025-11-29 02:43:15.940 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:43:15.941 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-11-29 02:43:25.942 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:43:25.943 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2025-11-29 02:43:35.944 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:43:35.945 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2025-11-29 02:43:37.959 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:43:37.965 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:43:37.966 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:43:37.968 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:43:37.969 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:43:37.969 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:43:37.970 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:43:37.971 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:43:37.971 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:43:37.972 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:43:37.974 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:43:37.975 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:43:37.976 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:43:37.977 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:43:37.979 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:43:37.980 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:43:37.981 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:43:37.982 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:43:37.983 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:43:37.984 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:43:37.985 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:43:37.986 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:43:37.987 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:43:37.988 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:43:37.9880216+02:00"
2025-11-29 02:43:37.988 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:43:37.989 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:43:37.991 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:43:37.991 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:43:37.992 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:43:37.993 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:43:37.994 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:43:37.994 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:43:37.995 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:43:37.996 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:43:38.007 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:43:38.009 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:38.010 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:38.011 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:38.011 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:38.012 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:38.013 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:38.014 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:38.015 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:38.016 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:38.017 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:38.017 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:38.018 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:43:38.019 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-29 02:43:38.020 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:43:38.021 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:43:38.022 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:43:38.023 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:43:38.024 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:43:38.025 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:43:38.025 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:43:38.026 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:43:38.027 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 47.5188ms
2025-11-29 02:43:38.028 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:43:38.032 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:43:38.034 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:43:38.035 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:43:38.035 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 76.9895ms
2025-11-29 02:43:45.947 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:43:45.949 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2025-11-29 02:43:53.734 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 02:43:53.737 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 02:43:53.740 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 02:43:53.742 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:43:53.743 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:43:53.743 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:43:53.745 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:43:53.746 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:43:53.747 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:43:53.748 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 02:43:53.750 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:43:53.752 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:43:53.754 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:43:53.756 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:43:53.758 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:43:53.760 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:43:53.762 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:43:53.764 +02:00 [INF] get all schedule called at "2025-11-29T02:43:53.7645641+02:00"
2025-11-29 02:43:53.765 +02:00 [INF] Fetching all schedules
2025-11-29 02:43:53.767 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:43:53.770 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:43:53.771 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-29 02:43:53.773 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:43:53.775 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:43:53.776 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:43:53.778 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:43:53.779 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:43:53.781 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:43:53.791 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:43:53.795 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.797 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.798 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.800 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.801 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.803 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.804 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.806 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.808 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.809 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.811 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.813 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.814 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.816 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.817 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.818 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.820 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.821 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.823 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.824 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.826 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.828 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.829 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.831 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.832 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.833 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.835 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.836 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.837 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.838 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.839 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.841 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.842 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.843 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.844 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.846 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.847 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.848 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.849 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.851 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.852 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.853 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.854 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:53.855 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:43:53.857 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 62ms reading results.
2025-11-29 02:43:53.858 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:43:53.859 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:43:53.861 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:43:53.863 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:43:53.864 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:43:53.864 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:43:53.865 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:43:53.866 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 02:43:53.869 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 108.8218ms
2025-11-29 02:43:53.876 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:43:53.877 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:43:53.878 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:43:53.879 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:43:53.880 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 146.0262ms
2025-11-29 02:43:55.951 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:43:55.952 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2025-11-29 02:43:58.132 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:43:58.134 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:43:58.135 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:43:58.136 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:43:58.137 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:43:58.138 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:43:58.139 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:43:58.139 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:43:58.140 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:43:58.141 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:43:58.142 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:43:58.144 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:43:58.145 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:43:58.146 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:43:58.147 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:43:58.149 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:43:58.150 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:43:58.151 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:43:58.152 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:43:58.153 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:43:58.154 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:43:58.155 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:43:58.156 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:43:58.157 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:43:58.1579678+02:00"
2025-11-29 02:43:58.158 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:43:58.159 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:43:58.161 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:43:58.162 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:43:58.163 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:43:58.164 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:43:58.165 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:43:58.166 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:43:58.167 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:43:58.168 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:43:58.172 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:43:58.174 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:58.175 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:58.175 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:58.176 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:58.177 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:58.178 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:58.179 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:58.180 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:58.181 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:58.181 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:58.182 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:43:58.183 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:43:58.184 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-29 02:43:58.185 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:43:58.186 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:43:58.187 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:43:58.188 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:43:58.189 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:43:58.189 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:43:58.190 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:43:58.191 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:43:58.192 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 43.1299ms
2025-11-29 02:43:58.193 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:43:58.193 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:43:58.194 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:43:58.195 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:43:58.196 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 64.2103ms
2025-11-29 02:44:00.273 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 02:44:00.275 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:44:00.276 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:44:00.276 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:44:00.277 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:44:00.277 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:44:00.278 +02:00 [DBG] The request is a preflight request.
2025-11-29 02:44:00.278 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.6893ms
2025-11-29 02:44:00.280 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 02:44:00.282 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:44:00.283 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 02:44:00.284 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:44:00.285 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:44:00.285 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:44:00.286 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:44:00.286 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:44:00.287 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:44:00.288 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 02:44:00.289 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:44:00.290 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:44:00.291 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:44:00.292 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:44:00.293 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:44:00.294 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:44:00.295 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:44:00.296 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:44:00.296 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 02:44:00.297 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:44:00.298 +02:00 [DBG] Connection id "0HNHER93U8III", Request id "0HNHER93U8III:00000019": started reading request body.
2025-11-29 02:44:00.299 +02:00 [DBG] Connection id "0HNHER93U8III", Request id "0HNHER93U8III:00000019": done reading request body.
2025-11-29 02:44:00.300 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 02:44:00.301 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:44:00.301 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:44:00.302 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:44:00.303 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:44:00.304 +02:00 [INF] Add Appointment called at "2025-11-29T02:44:00.3043524+02:00"
2025-11-29 02:44:00.304 +02:00 [INF] Creating appointment for PatientId: 2, DoctorId: 1, Date: "2025-11-30", Shift: "Evening"
2025-11-29 02:44:00.306 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:44:00.307 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:44:00.307 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:44:00.308 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:00.309 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:00.310 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 02:44:00.311 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 02:44:00.312 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:44:00.312 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:44:00.313 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:44:00.314 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 02:44:00.323 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 02:44:00.325 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.326 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.326 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.327 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:00.328 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 02:44:00.330 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:44:00.330 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:44:00.331 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:44:00.332 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:44:00.334 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:44:00.336 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.336 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.337 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.338 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.339 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.340 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.341 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.342 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.342 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.344 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.345 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.346 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:00.346 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-29 02:44:00.348 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:44:00.348 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:44:00.349 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:44:00.350 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 02:44:00.353 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 02:44:00.354 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:00.355 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 02:44:00.356 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:44:00.356 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:44:00.357 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:44:00.358 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 02:44:00.362 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 02:44:00.364 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:00.365 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 02:44:00.367 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.368 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.368 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.369 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.370 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.371 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 02:44:00.372 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 02:44:00.373 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 02:44:00.373 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 02:44:00.374 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 02:44:00.375 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 02:44:00.376 +02:00 [DBG] Created transaction savepoint.
2025-11-29 02:44:00.377 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:44:00.378 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:44:00.379 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:44:00.379 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 02:44:00.383 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 02:44:00.384 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 02:44:00.385 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:00.386 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 02:44:00.387 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.388 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 02:44:00.389 +02:00 [DBG] Committing transaction.
2025-11-29 02:44:00.390 +02:00 [DBG] Committed transaction.
2025-11-29 02:44:00.390 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:00.391 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:44:00.392 +02:00 [INF] Appointment created successfully with ID: 25
2025-11-29 02:44:00.393 +02:00 [DBG] Disposing transaction.
2025-11-29 02:44:00.393 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:44:00.395 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:44:00.395 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:44:00.396 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:44:00.396 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:44:00.397 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 02:44:00.398 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[25],action=[GetById],controller=[Appointment])
2025-11-29 02:44:00.399 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/25 and 
2025-11-29 02:44:00.400 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/25
2025-11-29 02:44:00.402 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 107.9775ms
2025-11-29 02:44:00.403 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:44:00.404 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:44:00.404 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:00.405 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:44:00.406 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 126.4972ms
2025-11-29 02:44:00.408 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 02:44:00.410 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 02:44:00.411 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:44:00.412 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:44:00.412 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:44:00.413 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:44:00.413 +02:00 [DBG] The request is a preflight request.
2025-11-29 02:44:00.414 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 5.6144ms
2025-11-29 02:44:00.415 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 02:44:00.418 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 02:44:00.418 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 02:44:00.419 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 02:44:00.420 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:44:00.421 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:44:00.421 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:44:00.423 +02:00 [DBG] Successfully validated the token.
2025-11-29 02:44:00.423 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-29 02:44:00.425 +02:00 [DBG] Authorization was successful.
2025-11-29 02:44:00.425 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 02:44:00.426 +02:00 [INF] Route matched with {action = "CreatePayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePayment(Hospital.Controllers.CreatePaymentRequest, System.Threading.CancellationToken) on controller Hospital.Controllers.PaymentController (Hospital).
2025-11-29 02:44:00.428 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:44:00.429 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:44:00.430 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:44:00.431 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:44:00.432 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:44:00.433 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PaymentController (Hospital)
2025-11-29 02:44:00.435 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PaymentController (Hospital)
2025-11-29 02:44:00.436 +02:00 [DBG] Attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' ...
2025-11-29 02:44:00.437 +02:00 [DBG] Attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' using the name '' in request data ...
2025-11-29 02:44:00.438 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:44:00.439 +02:00 [DBG] Connection id "0HNHER93U8III", Request id "0HNHER93U8III:0000001D": started reading request body.
2025-11-29 02:44:00.440 +02:00 [DBG] Connection id "0HNHER93U8III", Request id "0HNHER93U8III:0000001D": done reading request body.
2025-11-29 02:44:00.441 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Controllers.CreatePaymentRequest'
2025-11-29 02:44:00.441 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 02:44:00.442 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 02:44:00.443 +02:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' ...
2025-11-29 02:44:00.444 +02:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 02:44:00.444 +02:00 [DBG] Attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-11-29 02:44:00.445 +02:00 [DBG] Done attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-11-29 02:44:00.446 +02:00 [DBG] Attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-11-29 02:44:00.447 +02:00 [DBG] Done attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-11-29 02:44:00.448 +02:00 [INF] create payment by credite card called at "2025-11-29T02:44:00.4483232+02:00"
2025-11-29 02:44:00.449 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:44:00.450 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:44:00.451 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:44:00.451 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:00.452 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:00.453 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:44:00.454 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:44:00.455 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:44:00.455 +02:00 [DBG] Executing DbCommand [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt], [p0].[PatientId], [p0].[CreatedAt], [p0].[EmergencyContact], [p0].[UpdatedAt], [p0].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName]
FROM [Appointments] AS [a]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
INNER JOIN [Patients] AS [p0] ON [a].[PatientId] = [p0].[PatientId]
INNER JOIN [Users] AS [u] ON [p0].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
WHERE [a].[AppointmentId] = @__appointmentId_0
2025-11-29 02:44:00.463 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt], [p0].[PatientId], [p0].[CreatedAt], [p0].[EmergencyContact], [p0].[UpdatedAt], [p0].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName]
FROM [Appointments] AS [a]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
INNER JOIN [Patients] AS [p0] ON [a].[PatientId] = [p0].[PatientId]
INNER JOIN [Users] AS [u] ON [p0].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
WHERE [a].[AppointmentId] = @__appointmentId_0
2025-11-29 02:44:00.465 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.466 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.467 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.467 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.468 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.469 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.470 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.471 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.472 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:00.473 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:00.473 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-29 02:44:00.474 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:00.475 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:44:00.476 +02:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-11-29 02:44:00.477 +02:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-11-29 02:44:01.022 +02:00 [INF] Received HTTP response headers after 544.1066ms - 201
2025-11-29 02:44:01.023 +02:00 [INF] End processing HTTP request after 546.5382ms - 201
2025-11-29 02:44:01.024 +02:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-11-29 02:44:01.025 +02:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-11-29 02:44:01.235 +02:00 [INF] Received HTTP response headers after 208.827ms - 201
2025-11-29 02:44:01.236 +02:00 [INF] End processing HTTP request after 211.5274ms - 201
2025-11-29 02:44:01.237 +02:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-11-29 02:44:01.238 +02:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-11-29 02:44:01.450 +02:00 [INF] Received HTTP response headers after 211.5127ms - 201
2025-11-29 02:44:01.451 +02:00 [INF] End processing HTTP request after 214.4988ms - 201
2025-11-29 02:44:01.452 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Payment.PaymentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:01.453 +02:00 [DBG] The navigation 'Payment.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:01.454 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:01.455 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:01.456 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 02:44:01.457 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 02:44:01.458 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 02:44:01.459 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 02:44:01.460 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 02:44:01.461 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:01.462 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:01.463 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:44:01.464 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:44:01.464 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:44:01.465 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-29 02:44:01.469 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-29 02:44:01.471 +02:00 [DBG] The foreign key property 'Payment.PaymentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 02:44:01.471 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:01.472 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 02:44:01.473 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:01.474 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:44:01.475 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:44:01.477 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 02:44:01.478 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:44:01.479 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:44:01.480 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:44:01.480 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:44:01.481 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:44:01.481 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-29 02:44:01.482 +02:00 [INF] Executed action Hospital.Controllers.PaymentController.CreatePayment (Hospital) in 1049.8356ms
2025-11-29 02:44:01.483 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 02:44:01.484 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:44:01.485 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:44:01.486 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:44:01.486 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 200 null application/json; charset=utf-8 1071.4744ms
2025-11-29 02:44:05.953 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:44:05.955 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2025-11-29 02:44:15.957 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:44:15.960 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.004ms - processed: 0 items - remaining: 1 items
2025-11-29 02:44:25.962 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:44:25.963 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2025-11-29 02:44:35.964 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:44:35.965 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2025-11-29 02:44:45.965 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:44:45.967 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0148ms - processed: 0 items - remaining: 1 items
2025-11-29 02:44:55.968 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:44:55.969 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 1 items
2025-11-29 02:45:05.970 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:45:05.971 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2025-11-29 02:45:15.973 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:45:15.974 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2025-11-29 02:45:17.552 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 02:45:17.560 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 02:45:17.561 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 02:45:17.563 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:45:17.564 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:45:17.564 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:45:17.565 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:45:17.566 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:45:17.567 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:45:17.568 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:45:17.570 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:45:17.572 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:45:17.573 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:45:17.574 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:45:17.576 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:45:17.577 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:45:17.578 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:45:17.580 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:45:17.581 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:45:17.582 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:45:17.583 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:45:17.584 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:45:17.585 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:45:17.586 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:45:17.5869127+02:00"
2025-11-29 02:45:17.587 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 02:45:17.588 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:45:17.590 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:45:17.591 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:45:17.592 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:45:17.593 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:45:17.594 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:45:17.595 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:45:17.597 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:45:17.598 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:45:17.609 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:45:17.610 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:17.611 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:17.612 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:17.613 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:17.614 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:17.615 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:17.616 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:17.617 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:17.618 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:17.618 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:17.619 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:17.620 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:17.621 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:17.622 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:17.623 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:17.624 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:45:17.625 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-29 02:45:17.626 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:45:17.627 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:45:17.628 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:45:17.630 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:45:17.630 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:45:17.631 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:45:17.631 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:45:17.632 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:45:17.633 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 55.814ms
2025-11-29 02:45:17.634 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:45:17.635 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:45:17.636 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:45:17.637 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:45:17.638 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 86.3431ms
2025-11-29 02:45:24.893 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 02:45:24.895 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 02:45:24.896 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 02:45:24.897 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:45:24.898 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:45:24.899 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:45:24.900 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:45:24.900 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:45:24.901 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:45:24.902 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 02:45:24.903 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:45:24.904 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:45:24.905 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:45:24.906 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:45:24.907 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:45:24.909 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:45:24.910 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:45:24.911 +02:00 [INF] get all schedule called at "2025-11-29T02:45:24.9119093+02:00"
2025-11-29 02:45:24.912 +02:00 [INF] Fetching all schedules
2025-11-29 02:45:24.913 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:45:24.915 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:45:24.916 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:45:24.916 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:45:24.918 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:45:24.919 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:45:24.919 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:45:24.920 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:45:24.921 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:45:24.928 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:45:24.930 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.931 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.932 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.933 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.934 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.935 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.936 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.937 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.939 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.940 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.942 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.943 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.944 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.945 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.946 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.949 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.950 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.951 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.952 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.953 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.955 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.957 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.958 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.960 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.961 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.963 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.964 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.965 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.967 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.968 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.969 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.970 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.971 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.972 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.974 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.975 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.976 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.977 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.979 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.980 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.981 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:45:24.982 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:45:24.983 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 53ms reading results.
2025-11-29 02:45:24.984 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:45:24.985 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:45:24.987 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:45:24.989 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:45:24.990 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:45:24.990 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:45:24.991 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:45:24.992 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 02:45:24.995 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 85.8527ms
2025-11-29 02:45:24.996 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:45:24.997 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:45:24.998 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:45:24.999 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:45:25.000 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 107.0608ms
2025-11-29 02:45:25.976 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:45:25.977 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 1 items
2025-11-29 02:45:35.978 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:45:35.979 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-11-29 02:45:45.981 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:45:45.981 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2025-11-29 02:45:55.982 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 02:45:55.983 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0171ms - processed: 0 items - remaining: 1 items
2025-11-29 02:46:00.435 +02:00 [DBG] HttpMessageHandler expired after 120000ms for client 'IPaymobClient'
2025-11-29 02:46:05.984 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:46:05.985 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 2 items
2025-11-29 02:46:15.987 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:46:15.988 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 2 items
2025-11-29 02:46:25.988 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:46:25.989 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2025-11-29 02:46:35.989 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:46:35.990 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2025-11-29 02:46:45.992 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:46:45.993 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2025-11-29 02:46:55.993 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:46:55.995 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 2 items
2025-11-29 02:47:05.996 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:47:05.997 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 2 items
2025-11-29 02:47:15.997 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:47:15.998 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 2 items
2025-11-29 02:47:25.999 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:47:25.999 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 2 items
2025-11-29 02:47:36.000 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:47:36.001 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-11-29 02:47:46.001 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:47:46.002 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2025-11-29 02:47:56.002 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:47:56.003 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2025-11-29 02:48:06.004 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:48:06.005 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-11-29 02:48:16.006 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:48:16.006 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 2 items
2025-11-29 02:48:26.007 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:48:26.008 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0887ms - processed: 0 items - remaining: 2 items
2025-11-29 02:48:36.010 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:48:36.011 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0047ms - processed: 0 items - remaining: 2 items
2025-11-29 02:48:46.013 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:48:46.014 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2025-11-29 02:48:56.015 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:48:56.016 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0656ms - processed: 0 items - remaining: 2 items
2025-11-29 02:49:06.017 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:49:06.019 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 02:49:16.020 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:49:16.021 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-11-29 02:49:26.022 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:49:26.022 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 02:49:36.023 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:49:36.023 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 02:49:46.025 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:49:46.027 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2025-11-29 02:49:56.028 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:49:56.028 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-11-29 02:50:06.029 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:50:06.030 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2025-11-29 02:50:16.031 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:50:16.032 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 2 items
2025-11-29 02:50:26.035 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:50:26.035 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 02:50:36.037 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:50:36.038 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 02:50:46.040 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:50:46.041 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 02:50:56.042 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:50:56.043 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 02:51:06.043 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:51:06.044 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 02:51:16.045 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:51:16.046 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2025-11-29 02:51:26.047 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:51:26.047 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 02:51:36.049 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:51:36.049 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2025-11-29 02:51:46.051 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:51:46.052 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 02:51:56.053 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:51:56.054 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 02:52:06.056 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:52:06.056 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 02:52:16.058 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:52:16.059 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-11-29 02:52:26.060 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:52:26.061 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 02:52:36.062 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:52:36.063 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 2 items
2025-11-29 02:52:46.065 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:52:46.065 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2025-11-29 02:52:56.066 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:52:56.067 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2025-11-29 02:52:57.193 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 02:52:57.199 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 02:52:57.200 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 02:52:57.201 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:52:57.202 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:52:57.203 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:52:57.204 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:52:57.204 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:52:57.205 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:52:57.206 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 02:52:57.208 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:52:57.209 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:52:57.210 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:52:57.212 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:52:57.213 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:52:57.214 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:52:57.215 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:52:57.216 +02:00 [INF] get all schedule called at "2025-11-29T02:52:57.2166677+02:00"
2025-11-29 02:52:57.217 +02:00 [INF] Fetching all schedules
2025-11-29 02:52:57.218 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:52:57.220 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:52:57.220 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:52:57.221 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:52:57.231 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:52:57.234 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:52:57.235 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:52:57.236 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:52:57.237 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:52:57.244 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:52:57.246 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.246 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.247 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.248 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.249 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.250 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.251 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.252 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.252 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.253 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.254 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.255 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.256 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.257 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.258 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.259 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.260 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.265 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.266 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.267 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.268 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.269 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.270 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.271 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.272 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.273 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.275 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.276 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.277 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.278 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.279 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.280 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.281 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.283 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.284 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.286 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.287 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.289 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.290 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.291 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.293 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.294 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.296 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:52:57.297 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:52:57.298 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 52ms reading results.
2025-11-29 02:52:57.300 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:52:57.301 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:52:57.303 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:52:57.305 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:52:57.306 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:52:57.306 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:52:57.307 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:52:57.308 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 02:52:57.311 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 96.5494ms
2025-11-29 02:52:57.312 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:52:57.313 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:52:57.314 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:52:57.315 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:52:57.316 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 123.68ms
2025-11-29 02:53:06.067 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:53:06.068 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2025-11-29 02:53:16.069 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:53:16.070 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0038ms - processed: 0 items - remaining: 2 items
2025-11-29 02:53:26.071 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:53:26.072 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 02:53:27.602 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 02:53:27.610 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 02:53:27.612 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 02:53:27.613 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:53:27.614 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:53:27.615 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:53:27.616 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:53:27.617 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:53:27.618 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:53:27.619 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 02:53:27.620 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:53:27.621 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:53:27.623 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:53:27.624 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:53:27.626 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:53:27.627 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:53:27.628 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:53:27.630 +02:00 [INF] get all schedule called at "2025-11-29T02:53:27.6300350+02:00"
2025-11-29 02:53:27.630 +02:00 [INF] Fetching all schedules
2025-11-29 02:53:27.632 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:53:27.634 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:53:27.634 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:53:27.635 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:53:27.637 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:53:27.639 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:53:27.640 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:53:27.641 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:53:27.643 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:53:27.654 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:53:27.656 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.658 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.659 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.661 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.662 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.663 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.664 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.665 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.667 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.668 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.669 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.670 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.671 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.672 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.674 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.675 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.677 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.684 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.685 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.686 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.688 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.689 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.690 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.691 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.692 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.694 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.695 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.697 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.698 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.700 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.702 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.703 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.704 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.705 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.707 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.708 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.709 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.710 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.712 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.713 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.714 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.716 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:53:27.717 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:53:27.718 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 61ms reading results.
2025-11-29 02:53:27.719 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:53:27.720 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:53:27.722 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:53:27.724 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:53:27.725 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:53:27.725 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:53:27.726 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:53:27.727 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 02:53:27.730 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 102.671ms
2025-11-29 02:53:27.736 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:53:27.737 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:53:27.738 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:53:27.739 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:53:27.740 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 138.4405ms
2025-11-29 02:53:36.074 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:53:36.075 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2025-11-29 02:53:37.354 +02:00 [DBG] Connection id "0HNHER93U8III" received FIN.
2025-11-29 02:53:37.355 +02:00 [DBG] Connection id "0HNHER93U8III" is closed. The last processed stream ID was 37.
2025-11-29 02:53:37.355 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8III completed.
2025-11-29 02:53:37.356 +02:00 [DBG] Connection id "0HNHER93U8III" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:53:37.358 +02:00 [DBG] Connection id "0HNHER93U8III" stopped.
2025-11-29 02:53:46.077 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:53:46.077 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 02:53:56.078 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:53:56.079 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 02:54:01.859 +02:00 [DBG] Connection id "0HNHER93U8IIJ" accepted.
2025-11-29 02:54:01.865 +02:00 [DBG] Connection id "0HNHER93U8IIJ" started.
2025-11-29 02:54:01.870 +02:00 [DBG] Connection 0HNHER93U8IIJ established using the following protocol: "Tls13"
2025-11-29 02:54:01.872 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 02:54:01.879 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 02:54:01.880 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 02:54:01.881 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:54:01.881 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:54:01.882 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:54:01.883 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:54:01.883 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:54:01.884 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:54:01.885 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 02:54:01.886 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:54:01.887 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:54:01.887 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:54:01.889 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:54:01.890 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:54:01.891 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:54:01.892 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 02:54:01.893 +02:00 [INF] get all schedule called at "2025-11-29T02:54:01.8931291+02:00"
2025-11-29 02:54:01.894 +02:00 [INF] Fetching all schedules
2025-11-29 02:54:01.895 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:54:01.897 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:54:01.897 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:54:01.898 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:01.899 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:01.900 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:54:01.901 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:54:01.902 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:54:01.903 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:54:01.920 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 02:54:01.922 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.923 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.924 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.925 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.926 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.927 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.928 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.929 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.932 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.933 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.934 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.936 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.937 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.938 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.939 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.941 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.942 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.943 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.945 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.946 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.947 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.948 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.949 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.950 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.951 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.952 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.953 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.954 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.955 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.956 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.958 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.960 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.961 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.962 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.963 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.964 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.966 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.967 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.968 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.969 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.970 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.971 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:01.972 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:01.973 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 51ms reading results.
2025-11-29 02:54:01.974 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:01.975 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:54:01.976 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:54:01.978 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:54:01.978 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:54:01.979 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:54:01.979 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:54:01.980 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 02:54:01.982 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 91.1425ms
2025-11-29 02:54:01.983 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 02:54:01.983 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:54:01.984 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:01.985 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:54:01.986 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 114.5249ms
2025-11-29 02:54:06.081 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:54:06.082 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 2 items
2025-11-29 02:54:07.393 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:54:07.396 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:54:07.397 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:54:07.398 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:54:07.399 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:54:07.400 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:54:07.401 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:54:07.402 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:54:07.403 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:54:07.404 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:54:07.405 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:54:07.406 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:54:07.407 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:54:07.408 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:54:07.409 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:54:07.410 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:54:07.411 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:54:07.412 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:54:07.413 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:54:07.414 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:54:07.414 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:54:07.415 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:54:07.416 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:54:07.417 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:54:07.4175868+02:00"
2025-11-29 02:54:07.418 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:54:07.419 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:54:07.420 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:54:07.420 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:54:07.421 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:07.422 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:07.423 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:54:07.423 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:54:07.424 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:54:07.425 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:54:07.434 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:54:07.436 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:07.437 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:07.438 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:07.439 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:07.439 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:07.440 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:07.441 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:07.442 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:07.443 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:07.444 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:07.444 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:07.445 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:07.446 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-29 02:54:07.447 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:07.448 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:54:07.449 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:54:07.450 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:54:07.451 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:54:07.451 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:54:07.452 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:54:07.452 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:54:07.453 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 43.1874ms
2025-11-29 02:54:07.454 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:54:07.455 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:54:07.456 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:07.457 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:54:07.458 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 65.0504ms
2025-11-29 02:54:12.357 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 02:54:12.359 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:54:12.359 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:54:12.360 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:54:12.361 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:54:12.361 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:54:12.362 +02:00 [DBG] The request is a preflight request.
2025-11-29 02:54:12.362 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.7114ms
2025-11-29 02:54:12.364 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 02:54:12.367 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 02:54:12.368 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 02:54:12.369 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:54:12.370 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:54:12.370 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:54:12.371 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:54:12.371 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:54:12.372 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:54:12.373 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 02:54:12.374 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:54:12.375 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:54:12.376 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:54:12.377 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:54:12.378 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:54:12.379 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:54:12.380 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 02:54:12.380 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:54:12.381 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 02:54:12.382 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:54:12.383 +02:00 [DBG] Connection id "0HNHER93U8IIJ", Request id "0HNHER93U8IIJ:00000007": started reading request body.
2025-11-29 02:54:12.384 +02:00 [DBG] Connection id "0HNHER93U8IIJ", Request id "0HNHER93U8IIJ:00000007": done reading request body.
2025-11-29 02:54:12.385 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 02:54:12.385 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:54:12.386 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:54:12.387 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 02:54:12.388 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 02:54:12.389 +02:00 [INF] Add Appointment called at "2025-11-29T02:54:12.3896129+02:00"
2025-11-29 02:54:12.390 +02:00 [INF] Creating appointment for PatientId: 2, DoctorId: 1, Date: "2025-12-18", Shift: "Evening"
2025-11-29 02:54:12.391 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:54:12.393 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:54:12.393 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:54:12.394 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:12.395 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:12.396 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 02:54:12.397 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 02:54:12.398 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:54:12.399 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:54:12.399 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:54:12.400 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 02:54:12.411 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 02:54:12.413 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.414 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.414 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.415 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:12.416 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 02:54:12.417 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:54:12.418 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:54:12.419 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:54:12.420 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:54:12.421 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:54:12.423 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.424 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.425 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.426 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.427 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.428 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.428 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.429 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.430 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.431 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.432 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.433 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:12.434 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-29 02:54:12.435 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:54:12.436 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:54:12.437 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:54:12.438 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 02:54:12.440 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 02:54:12.442 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:12.443 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 02:54:12.444 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:54:12.445 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:54:12.446 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:54:12.447 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 02:54:12.450 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 02:54:12.452 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:12.452 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 02:54:12.454 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.455 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.455 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.456 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.457 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.458 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 02:54:12.459 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 02:54:12.460 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 02:54:12.461 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 02:54:12.461 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 02:54:12.462 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 02:54:12.463 +02:00 [DBG] Created transaction savepoint.
2025-11-29 02:54:12.464 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:54:12.465 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:54:12.466 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:54:12.467 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 02:54:12.471 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 02:54:12.472 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 02:54:12.473 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:12.474 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 02:54:12.475 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.476 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 02:54:12.477 +02:00 [DBG] Committing transaction.
2025-11-29 02:54:12.478 +02:00 [DBG] Committed transaction.
2025-11-29 02:54:12.478 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:12.479 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:54:12.480 +02:00 [INF] Appointment created successfully with ID: 26
2025-11-29 02:54:12.481 +02:00 [DBG] Disposing transaction.
2025-11-29 02:54:12.481 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:54:12.482 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:54:12.483 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:54:12.483 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:54:12.484 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:54:12.485 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 02:54:12.485 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[26],action=[GetById],controller=[Appointment])
2025-11-29 02:54:12.487 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/26 and 
2025-11-29 02:54:12.488 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/26
2025-11-29 02:54:12.489 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 110.0701ms
2025-11-29 02:54:12.490 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 02:54:12.491 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:54:12.491 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:12.492 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:54:12.493 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 129.186ms
2025-11-29 02:54:12.497 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 02:54:12.499 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 02:54:12.499 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 02:54:12.500 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:54:12.501 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:54:12.501 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:54:12.502 +02:00 [DBG] The request is a preflight request.
2025-11-29 02:54:12.502 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 5.4235ms
2025-11-29 02:54:12.504 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 02:54:12.506 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 02:54:12.507 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 02:54:12.508 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 02:54:12.509 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:54:12.509 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:54:12.510 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:54:12.511 +02:00 [DBG] Successfully validated the token.
2025-11-29 02:54:12.511 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-29 02:54:12.513 +02:00 [DBG] Authorization was successful.
2025-11-29 02:54:12.513 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 02:54:12.514 +02:00 [INF] Route matched with {action = "CreatePayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePayment(Hospital.Controllers.CreatePaymentRequest, System.Threading.CancellationToken) on controller Hospital.Controllers.PaymentController (Hospital).
2025-11-29 02:54:12.515 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:54:12.516 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:54:12.517 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:54:12.518 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:54:12.519 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:54:12.520 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PaymentController (Hospital)
2025-11-29 02:54:12.523 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PaymentController (Hospital)
2025-11-29 02:54:12.523 +02:00 [DBG] Attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' ...
2025-11-29 02:54:12.524 +02:00 [DBG] Attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' using the name '' in request data ...
2025-11-29 02:54:12.525 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 02:54:12.526 +02:00 [DBG] Connection id "0HNHER93U8IIJ", Request id "0HNHER93U8IIJ:0000000B": started reading request body.
2025-11-29 02:54:12.527 +02:00 [DBG] Connection id "0HNHER93U8IIJ", Request id "0HNHER93U8IIJ:0000000B": done reading request body.
2025-11-29 02:54:12.528 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Controllers.CreatePaymentRequest'
2025-11-29 02:54:12.529 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 02:54:12.530 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 02:54:12.531 +02:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' ...
2025-11-29 02:54:12.532 +02:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 02:54:12.532 +02:00 [DBG] Attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-11-29 02:54:12.533 +02:00 [DBG] Done attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-11-29 02:54:12.534 +02:00 [DBG] Attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-11-29 02:54:12.535 +02:00 [DBG] Done attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-11-29 02:54:12.536 +02:00 [INF] create payment by credite card called at "2025-11-29T02:54:12.5361485+02:00"
2025-11-29 02:54:12.537 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:54:12.538 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:54:12.538 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:54:12.539 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:12.540 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:12.541 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:54:12.541 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:54:12.542 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:54:12.543 +02:00 [DBG] Executing DbCommand [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt], [p0].[PatientId], [p0].[CreatedAt], [p0].[EmergencyContact], [p0].[UpdatedAt], [p0].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName]
FROM [Appointments] AS [a]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
INNER JOIN [Patients] AS [p0] ON [a].[PatientId] = [p0].[PatientId]
INNER JOIN [Users] AS [u] ON [p0].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
WHERE [a].[AppointmentId] = @__appointmentId_0
2025-11-29 02:54:12.550 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt], [p0].[PatientId], [p0].[CreatedAt], [p0].[EmergencyContact], [p0].[UpdatedAt], [p0].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName]
FROM [Appointments] AS [a]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
INNER JOIN [Patients] AS [p0] ON [a].[PatientId] = [p0].[PatientId]
INNER JOIN [Users] AS [u] ON [p0].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
WHERE [a].[AppointmentId] = @__appointmentId_0
2025-11-29 02:54:12.552 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.553 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.553 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.554 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.555 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.556 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.557 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.558 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.559 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:12.560 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:12.561 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-29 02:54:12.562 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:12.563 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:54:12.564 +02:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-11-29 02:54:12.565 +02:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-11-29 02:54:13.093 +02:00 [INF] Received HTTP response headers after 527.2291ms - 201
2025-11-29 02:54:13.094 +02:00 [INF] End processing HTTP request after 529.632ms - 201
2025-11-29 02:54:13.095 +02:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-11-29 02:54:13.095 +02:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-11-29 02:54:13.316 +02:00 [INF] Received HTTP response headers after 220.2665ms - 201
2025-11-29 02:54:13.317 +02:00 [INF] End processing HTTP request after 222.5612ms - 201
2025-11-29 02:54:13.318 +02:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-11-29 02:54:13.319 +02:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-11-29 02:54:13.536 +02:00 [INF] Received HTTP response headers after 216.1848ms - 201
2025-11-29 02:54:13.537 +02:00 [INF] End processing HTTP request after 218.6763ms - 201
2025-11-29 02:54:13.538 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Payment.PaymentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:13.539 +02:00 [DBG] The navigation 'Payment.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:13.540 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:13.540 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:13.541 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 02:54:13.542 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 02:54:13.543 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 02:54:13.543 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 02:54:13.544 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 02:54:13.545 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:13.546 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:13.547 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:54:13.548 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 02:54:13.549 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:54:13.550 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-29 02:54:13.553 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-29 02:54:13.554 +02:00 [DBG] The foreign key property 'Payment.PaymentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 02:54:13.555 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:13.556 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 02:54:13.557 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:13.558 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 02:54:13.559 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:13.561 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 02:54:13.562 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:54:13.563 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:54:13.563 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:54:13.564 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:54:13.564 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:54:13.565 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-29 02:54:13.566 +02:00 [INF] Executed action Hospital.Controllers.PaymentController.CreatePayment (Hospital) in 1046.4379ms
2025-11-29 02:54:13.567 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 02:54:13.568 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:54:13.569 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:13.570 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 02:54:13.571 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 200 null application/json; charset=utf-8 1067.0012ms
2025-11-29 02:54:16.087 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:54:16.088 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-11-29 02:54:26.088 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:54:26.089 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2025-11-29 02:54:33.127 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 02:54:33.129 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 02:54:33.130 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 02:54:33.132 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:54:33.132 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 02:54:33.133 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 02:54:33.134 +02:00 [INF] CORS policy execution successful.
2025-11-29 02:54:33.134 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 02:54:33.135 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:54:33.136 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 02:54:33.137 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 02:54:33.139 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 02:54:33.140 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 02:54:33.141 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 02:54:33.143 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 02:54:33.144 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:54:33.146 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 02:54:33.147 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:54:33.149 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 02:54:33.150 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:54:33.151 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:54:33.152 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 02:54:33.153 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 02:54:33.154 +02:00 [INF] Get  doctor By Id called at "2025-11-29T02:54:33.1547229+02:00"
2025-11-29 02:54:33.155 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 02:54:33.157 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 02:54:33.159 +02:00 [DBG] Creating DbConnection.
2025-11-29 02:54:33.160 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 02:54:33.161 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:33.163 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:33.164 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 02:54:33.166 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 02:54:33.167 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 02:54:33.168 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:54:33.181 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 02:54:33.183 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:33.184 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:33.185 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:33.186 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:33.187 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:33.188 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:33.189 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:33.190 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:33.191 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:33.192 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:33.193 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 02:54:33.194 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:33.196 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 12ms reading results.
2025-11-29 02:54:33.197 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:33.198 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 02:54:33.199 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 02:54:33.201 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 02:54:33.202 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 02:54:33.202 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 02:54:33.203 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 02:54:33.204 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 02:54:33.206 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 61.7818ms
2025-11-29 02:54:33.207 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 02:54:33.208 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 02:54:33.210 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 02:54:33.211 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 02:54:33.213 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 85.39ms
2025-11-29 02:54:36.090 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:54:36.091 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 02:54:46.093 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:54:46.094 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0041ms - processed: 0 items - remaining: 2 items
2025-11-29 02:54:56.096 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:54:56.097 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 2 items
2025-11-29 02:55:06.098 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:55:06.099 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2025-11-29 02:55:16.099 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:55:16.100 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2025-11-29 02:55:17.370 +02:00 [DBG] Connection id "0HNHER93U8IIJ" received FIN.
2025-11-29 02:55:17.371 +02:00 [DBG] Connection id "0HNHER93U8IIJ" is closed. The last processed stream ID was 13.
2025-11-29 02:55:17.372 +02:00 [DBG] Connection id "0HNHER93U8IIJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 02:55:17.378 +02:00 [DBG] The connection queue processing loop for 0HNHER93U8IIJ completed.
2025-11-29 02:55:17.379 +02:00 [DBG] Connection id "0HNHER93U8IIJ" stopped.
2025-11-29 02:55:26.102 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:55:26.102 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-11-29 02:55:36.103 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:55:36.104 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 02:55:46.105 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:55:46.106 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-11-29 02:55:56.107 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:55:56.108 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-11-29 02:56:06.109 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 02:56:06.110 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-11-29 02:56:12.524 +02:00 [DBG] HttpMessageHandler expired after 120000ms for client 'IPaymobClient'
2025-11-29 02:56:16.110 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2025-11-29 02:56:16.110 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 3 items
2025-11-29 02:56:26.112 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2025-11-29 02:56:26.113 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 3 items
2025-11-29 02:56:36.115 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2025-11-29 02:56:36.116 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 3 items
2025-11-29 02:56:46.117 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2025-11-29 02:56:46.119 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 3 items
2025-11-29 02:56:56.120 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2025-11-29 02:56:56.121 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 3 items
2025-11-29 02:57:06.121 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2025-11-29 02:57:06.123 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 3 items
2025-11-29 02:57:16.124 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2025-11-29 02:57:16.125 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 3 items
2025-11-29 02:57:26.126 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2025-11-29 02:57:26.128 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 3 items
2025-11-29 02:57:36.129 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2025-11-29 02:57:36.130 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 3 items
2025-11-29 02:57:46.131 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 3 items
2025-11-29 02:57:46.132 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 3 items
2025-11-29 18:17:39.006 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-29 18:17:39.103 +02:00 [DBG] Hosting starting
2025-11-29 18:17:39.116 +02:00 [INF] User profile is available. Using 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 18:17:39.124 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-69bbab29-81b6-4865-ac9a-ae2b6fa39013.xml'.
2025-11-29 18:17:39.150 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-80d0efac-0f9c-4630-990a-b52d8a5ce829.xml'.
2025-11-29 18:17:39.166 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-c9eadb9e-fd70-4dbd-a2e4-2439a22a723f.xml'.
2025-11-29 18:17:39.180 +02:00 [DBG] Reading data from file 'C:\Users\yossr\AppData\Local\ASP.NET\DataProtection-Keys\key-e6a4e949-cc09-4772-b903-b3c0844fb846.xml'.
2025-11-29 18:17:39.198 +02:00 [DBG] Found key {69bbab29-81b6-4865-ac9a-ae2b6fa39013}.
2025-11-29 18:17:39.204 +02:00 [DBG] Found key {80d0efac-0f9c-4630-990a-b52d8a5ce829}.
2025-11-29 18:17:39.205 +02:00 [DBG] Found key {c9eadb9e-fd70-4dbd-a2e4-2439a22a723f}.
2025-11-29 18:17:39.205 +02:00 [DBG] Found key {e6a4e949-cc09-4772-b903-b3c0844fb846}.
2025-11-29 18:17:39.210 +02:00 [DBG] Considering key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} with expiration date 2026-01-04 04:20:00Z as default key.
2025-11-29 18:17:39.214 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-29 18:17:39.216 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-11-29 18:17:39.218 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-29 18:17:39.222 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-11-29 18:17:39.225 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-11-29 18:17:39.227 +02:00 [DBG] Using key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} as the default key.
2025-11-29 18:17:39.228 +02:00 [DBG] Key ring with default key {69bbab29-81b6-4865-ac9a-ae2b6fa39013} was loaded during application startup.
2025-11-29 18:17:39.234 +02:00 [DBG] Middleware loaded
2025-11-29 18:17:39.236 +02:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16501 B).
2025-11-29 18:17:39.237 +02:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-11-29 18:17:39.300 +02:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-11-29 18:17:39.364 +02:00 [INF] Now listening on: https://localhost:7217
2025-11-29 18:17:39.366 +02:00 [INF] Now listening on: http://localhost:5163
2025-11-29 18:17:39.367 +02:00 [DBG] Loaded hosting startup assembly Hospital
2025-11-29 18:17:39.368 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-11-29 18:17:39.369 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-11-29 18:17:39.370 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-11-29 18:17:39.442 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 18:17:39.443 +02:00 [INF] Hosting environment: Development
2025-11-29 18:17:39.443 +02:00 [INF] Content root path: D:\Hospital\Hospital\Hospital
2025-11-29 18:17:39.444 +02:00 [DBG] Hosting started
2025-11-29 18:17:39.497 +02:00 [DBG] Connection id "0HNHFCB8HU7E5" accepted.
2025-11-29 18:17:39.497 +02:00 [DBG] Connection id "0HNHFCB8HU7E6" accepted.
2025-11-29 18:17:39.498 +02:00 [DBG] Connection id "0HNHFCB8HU7E5" started.
2025-11-29 18:17:39.499 +02:00 [DBG] Connection id "0HNHFCB8HU7E6" started.
2025-11-29 18:17:39.521 +02:00 [DBG] Connection id "0HNHFCB8HU7E6" received FIN.
2025-11-29 18:17:39.521 +02:00 [DBG] Connection id "0HNHFCB8HU7E5" received FIN.
2025-11-29 18:17:39.528 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 18:17:39.528 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 18:17:39.552 +02:00 [DBG] Connection id "0HNHFCB8HU7E5" stopped.
2025-11-29 18:17:39.552 +02:00 [DBG] Connection id "0HNHFCB8HU7E6" stopped.
2025-11-29 18:17:39.554 +02:00 [DBG] Connection id "0HNHFCB8HU7E6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 18:17:39.554 +02:00 [DBG] Connection id "0HNHFCB8HU7E5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 18:17:40.257 +02:00 [DBG] Connection id "0HNHFCB8HU7E7" accepted.
2025-11-29 18:17:40.260 +02:00 [DBG] Connection id "0HNHFCB8HU7E7" started.
2025-11-29 18:17:40.289 +02:00 [DBG] Connection id "0HNHFCB8HU7E7" received FIN.
2025-11-29 18:17:40.289 +02:00 [DBG] Connection id "0HNHFCB8HU7E8" accepted.
2025-11-29 18:17:40.292 +02:00 [DBG] Connection id "0HNHFCB8HU7E8" started.
2025-11-29 18:17:40.296 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 18:17:40.300 +02:00 [DBG] Connection id "0HNHFCB8HU7E7" stopped.
2025-11-29 18:17:40.301 +02:00 [DBG] Connection id "0HNHFCB8HU7E7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 18:17:40.312 +02:00 [DBG] Connection 0HNHFCB8HU7E8 established using the following protocol: "Tls13"
2025-11-29 18:17:40.372 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/index.html - null null
2025-11-29 18:17:40.475 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-29 18:17:40.501 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-29 18:17:40.502 +02:00 [DBG] Request did not match any endpoints
2025-11-29 18:17:40.554 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-11-29 18:17:40.558 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-11-29 18:17:40.576 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-11-29 18:17:40.577 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-11-29 18:17:40.580 +02:00 [DBG] Connection id "0HNHFCB8HU7E8" received FIN.
2025-11-29 18:17:40.582 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/index.html - 200 null text/html;charset=utf-8 211.1506ms
2025-11-29 18:17:40.586 +02:00 [DBG] Connection id "0HNHFCB8HU7E8" is closed. The last processed stream ID was 1.
2025-11-29 18:17:40.589 +02:00 [DBG] Connection id "0HNHFCB8HU7E8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 18:17:40.592 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7E8 completed.
2025-11-29 18:17:40.595 +02:00 [DBG] Connection id "0HNHFCB8HU7E8" stopped.
2025-11-29 18:17:40.658 +02:00 [DBG] Connection id "0HNHFCB8HU7E9" accepted.
2025-11-29 18:17:40.660 +02:00 [DBG] Connection id "0HNHFCB8HU7E9" started.
2025-11-29 18:17:40.670 +02:00 [DBG] Connection 0HNHFCB8HU7E9 established using the following protocol: "Tls13"
2025-11-29 18:17:40.674 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_vs/browserLink - null null
2025-11-29 18:17:40.674 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 18:17:40.685 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-29 18:17:40.690 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 15.7771ms
2025-11-29 18:17:40.740 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.9384ms
2025-11-29 18:17:40.784 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-29 18:17:40.788 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-29 18:17:40.790 +02:00 [DBG] Request did not match any endpoints
2025-11-29 18:17:40.843 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 58.8199ms
2025-11-29 18:17:42.897 +02:00 [DBG] Connection id "0HNHFCB8HU7E9" received FIN.
2025-11-29 18:17:42.899 +02:00 [DBG] Connection id "0HNHFCB8HU7E9" is closed. The last processed stream ID was 5.
2025-11-29 18:17:42.899 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7E9 completed.
2025-11-29 18:17:42.900 +02:00 [DBG] Connection id "0HNHFCB8HU7E9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 18:17:42.902 +02:00 [DBG] Connection id "0HNHFCB8HU7E9" stopped.
2025-11-29 18:22:07.879 +02:00 [DBG] Connection id "0HNHFCB8HU7EA" accepted.
2025-11-29 18:22:07.880 +02:00 [DBG] Connection id "0HNHFCB8HU7EA" started.
2025-11-29 18:22:07.883 +02:00 [DBG] Connection 0HNHFCB8HU7EA established using the following protocol: "Tls13"
2025-11-29 18:22:07.885 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 18:22:07.890 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 18:22:07.893 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 18:22:07.894 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:22:07.896 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:22:07.897 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:22:07.898 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:22:08.367 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:22:08.369 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:22:08.387 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 18:22:08.389 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:22:08.390 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:22:08.391 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:22:08.392 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:22:08.393 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:22:08.395 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:22:08.823 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-29 18:22:08.976 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:22:08.979 +02:00 [INF] get all schedule called at "2025-11-29T18:22:08.9796967+02:00"
2025-11-29 18:22:08.981 +02:00 [INF] Fetching all schedules
2025-11-29 18:22:09.360 +02:00 [DBG] The index {'BranchesBranchId'} was not created on entity type 'BranchDoctor (Dictionary<string, object>)' as the properties are already covered by the index {'BranchesBranchId', 'DoctorsDoctorId'}.
2025-11-29 18:22:09.362 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchService (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'ServiceId'}.
2025-11-29 18:22:09.363 +02:00 [DBG] The index {'BranchId'} was not created on entity type 'BranchSpecialization (Dictionary<string, object>)' as the properties are already covered by the index {'BranchId', 'SpecializationId'}.
2025-11-29 18:22:09.364 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserRole<string>' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-11-29 18:22:09.365 +02:00 [DBG] The index {'UserId'} was not created on entity type 'IdentityUserToken<string>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-11-29 18:22:09.444 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).BranchesBranchId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-29 18:22:09.445 +02:00 [DBG] The property 'BranchDoctor (Dictionary<string, object>).DoctorsDoctorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-11-29 18:22:09.572 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:22:09.823 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(s => s.Branch)'
2025-11-29 18:22:09.867 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-29 18:22:09.869 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 18:22:09.870 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-29 18:22:09.872 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-11-29 18:22:09.980 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Specialization.Description (string), 44], [Property: Specialization.ImageURL (string) MaxLength(300), 45], [Property: Specialization.Name (string) Required MaxLength(120), 46], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 48], [Property: Branch.Address (string) MaxLength(250), 49], [Property: Branch.BranchName (string) Required MaxLength(150), 50], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Branch.Description (string), 52], [Property: Branch.Email (string) MaxLength(200), 53], [Property: Branch.ImageURL (string) MaxLength(300), 54], [Property: Branch.Latitude (double?), 55], [Property: Branch.Longitude (double?), 56], [Property: Branch.Phone (string) MaxLength(25), 57], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 58] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s0.SpecializationId, s0.CreatedAt, s0.Description, s0.ImageURL, s0.Name, s0.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s0 ON d.SpecializationId == s0.SpecializationId
        INNER JOIN Branches AS b ON s.BranchId == b.BranchId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 18:22:10.001 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:22:10.013 +02:00 [DBG] Created DbConnection. (11ms).
2025-11-29 18:22:10.016 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:10.492 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:10.496 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:22:10.498 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-11-29 18:22:10.500 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-29 18:22:10.504 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:22:10.542 +02:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:22:10.566 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.594 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.601 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.625 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.626 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.652 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.653 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.667 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.668 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.681 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.682 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.683 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.684 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.684 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.685 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.686 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.688 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.689 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.690 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.691 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.692 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.693 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.694 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.695 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.695 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.696 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.697 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.698 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.699 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.700 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.701 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.701 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.702 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.703 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.704 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.704 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.705 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.706 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.707 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.708 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.709 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.710 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.710 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:10.714 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:10.718 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 171ms reading results.
2025-11-29 18:22:10.720 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:10.724 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (3ms).
2025-11-29 18:22:10.734 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:22:10.737 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:22:10.737 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:22:10.738 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:22:10.738 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 18:22:10.739 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 18:22:10.757 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 2361.1673ms
2025-11-29 18:22:10.758 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:22:10.760 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:22:10.763 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:10.764 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 18:22:10.765 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 2880.6556ms
2025-11-29 18:22:29.905 +02:00 [DBG] Connection id "0HNHFCB8HU7EA" received FIN.
2025-11-29 18:22:29.908 +02:00 [DBG] Connection id "0HNHFCB8HU7EA" is closed. The last processed stream ID was 1.
2025-11-29 18:22:29.908 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7EA completed.
2025-11-29 18:22:29.909 +02:00 [DBG] Connection id "0HNHFCB8HU7EA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 18:22:29.911 +02:00 [DBG] Connection id "0HNHFCB8HU7EA" stopped.
2025-11-29 18:22:33.632 +02:00 [DBG] Connection id "0HNHFCB8HU7EB" accepted.
2025-11-29 18:22:33.633 +02:00 [DBG] Connection id "0HNHFCB8HU7EB" started.
2025-11-29 18:22:33.636 +02:00 [DBG] Connection 0HNHFCB8HU7EB established using the following protocol: "Tls13"
2025-11-29 18:22:33.638 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 18:22:33.642 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 18:22:33.642 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 18:22:33.644 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:22:33.644 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:22:33.645 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:22:33.646 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:22:33.648 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:22:33.649 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:22:33.650 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 18:22:33.652 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:22:33.653 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:22:33.654 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:22:33.655 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:22:33.656 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:22:33.657 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:22:33.659 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:22:33.660 +02:00 [INF] get all schedule called at "2025-11-29T18:22:33.6607517+02:00"
2025-11-29 18:22:33.661 +02:00 [INF] Fetching all schedules
2025-11-29 18:22:33.694 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:22:33.699 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:22:33.700 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-29 18:22:33.701 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:33.702 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:33.703 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:22:33.704 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:22:33.705 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:22:33.706 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:22:33.716 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:22:33.718 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.719 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.720 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.721 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.722 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.723 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.724 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.725 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.726 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.727 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.728 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.729 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.729 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.730 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.731 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.732 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.733 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.734 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.735 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.736 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.737 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.738 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.739 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.740 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.741 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.742 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.743 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.744 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.745 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.746 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.747 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.748 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.749 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.750 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.751 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.752 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.753 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.754 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.755 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.756 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.757 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.758 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:33.759 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:33.760 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 42ms reading results.
2025-11-29 18:22:33.761 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:33.762 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 18:22:33.764 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:22:33.766 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:22:33.766 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:22:33.767 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:22:33.768 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 18:22:33.769 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 18:22:33.771 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 113.458ms
2025-11-29 18:22:33.772 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:22:33.772 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:22:33.773 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:33.774 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 18:22:33.775 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 136.4826ms
2025-11-29 18:22:38.070 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 18:22:38.072 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 18:22:38.073 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 18:22:38.074 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 18:22:38.075 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:22:38.075 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:22:38.076 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:22:38.078 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:22:38.079 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 18:22:38.086 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 18:22:38.088 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:22:38.088 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:22:38.089 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:22:38.091 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:22:38.092 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:22:38.093 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 18:22:38.106 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 18:22:38.113 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 18:22:38.115 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 18:22:38.116 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 18:22:38.117 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 18:22:38.118 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 18:22:38.121 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 18:22:38.123 +02:00 [INF] Get  doctor By Id called at "2025-11-29T18:22:38.1237330+02:00"
2025-11-29 18:22:38.125 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 18:22:38.134 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:22:38.138 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .Include(d => d.Branches)
    .FirstOrDefault(d => d.DoctorId == __doctorId_0)'
2025-11-29 18:22:38.142 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 18:22:38.143 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-29 18:22:38.145 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-29 18:22:38.146 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-29 18:22:38.182 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-29 18:22:38.190 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
                2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
                3 -> 0
                4 -> 10
                5 -> 33
                6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
                7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
                8 -> 39
                9 -> 40
                10 -> 41
                11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
                12 -> 52
            SELECT t.DoctorId, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t.SpecializationId0, t.CreatedAt1, t.Description, t.ImageURL0, t.Name, t.UpdatedAt1, t0.BranchesBranchId, t0.DoctorsDoctorId, t0.BranchId, t0.Address, t0.BranchName, t0.CreatedAt, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt, s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt
            FROM 
            (
                SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName, s.SpecializationId AS SpecializationId0, s.CreatedAt AS CreatedAt1, s.Description, s.ImageURL AS ImageURL0, s.Name, s.UpdatedAt AS UpdatedAt1
                FROM Doctors AS d
                INNER JOIN Users AS u ON d.UserId == u.Id
                INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
                WHERE d.DoctorId == @__doctorId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
                FROM DoctorBranches AS d0
                INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
            ) AS t0 ON t.DoctorId == t0.DoctorsDoctorId
            LEFT JOIN Schedules AS s0 ON t.DoctorId == s0.DoctorId
            ORDER BY t.DoctorId ASC, t.Id ASC, t.SpecializationId0 ASC, t0.BranchesBranchId ASC, t0.DoctorsDoctorId ASC, t0.BranchId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 18:22:38.196 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:22:38.196 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:22:38.197 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:38.198 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:38.198 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:22:38.199 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:22:38.201 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 18:22:38.204 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 18:22:38.267 +02:00 [INF] Executed DbCommand (65ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 18:22:38.269 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:38.271 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:38.271 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:38.272 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:38.273 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:38.281 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:38.283 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:38.284 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:38.285 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:38.286 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:38.287 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:38.288 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:38.289 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 20ms reading results.
2025-11-29 18:22:38.290 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:38.291 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:22:38.299 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:22:38.301 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:22:38.301 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:22:38.301 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:22:38.302 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 18:22:38.303 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 18:22:38.313 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 220.4177ms
2025-11-29 18:22:38.314 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 18:22:38.315 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:22:38.316 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:38.317 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 18:22:38.318 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 247.9716ms
2025-11-29 18:22:55.195 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Services - null null
2025-11-29 18:22:55.197 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Services'
2025-11-29 18:22:55.199 +02:00 [DBG] Endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)' with route pattern 'api/Services' is valid for the request path '/api/Services'
2025-11-29 18:22:55.200 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-29 18:22:55.201 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:22:55.201 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:22:55.202 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:22:55.203 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:22:55.204 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-29 18:22:55.207 +02:00 [INF] Route matched with {action = "GetAll", controller = "Services"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.ServicesController (Hospital).
2025-11-29 18:22:55.208 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:22:55.209 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:22:55.210 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:22:55.211 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:22:55.212 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:22:55.213 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-29 18:22:55.214 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-29 18:22:55.216 +02:00 [INF] get all services called at "2025-11-29T18:22:55.2158927+02:00"
2025-11-29 18:22:55.217 +02:00 [INF] Fetching all services
2025-11-29 18:22:55.218 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:22:55.220 +02:00 [DBG] Compiling query expression: 
'DbSet<Service>()
    .Include(s => s.Branches)'
2025-11-29 18:22:55.222 +02:00 [DBG] Including navigation: 'Service.Branches'.
2025-11-29 18:22:55.230 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Service>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Service.ServiceId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Service.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Service.Description (string), 2], [Property: Service.ImageURL (string) MaxLength(300), 3], [Property: Service.Name (string) Required MaxLength(120), 4], [Property: Service.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 5] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: BranchService (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 6], [Property: BranchService (Dictionary<string, object>).ServiceId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 7] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Branch.Address (string) MaxLength(250), 9], [Property: Branch.BranchName (string) Required MaxLength(150), 10], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 11], [Property: Branch.Description (string), 12], [Property: Branch.Email (string) MaxLength(200), 13], [Property: Branch.ImageURL (string) MaxLength(300), 14], [Property: Branch.Latitude (double?), 15], [Property: Branch.Longitude (double?), 16], [Property: Branch.Phone (string) MaxLength(25), 17], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 18] }
            4 -> 6
            5 -> 7
            6 -> 8
        SELECT s.ServiceId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, t.BranchId, t.ServiceId, t.BranchId0, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Latitude, t.Longitude, t.Phone, t.UpdatedAt
        FROM Services AS s
        LEFT JOIN 
        (
            SELECT b.BranchId, b.ServiceId, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt, b0.Description, b0.Email, b0.ImageURL, b0.Latitude, b0.Longitude, b0.Phone, b0.UpdatedAt
            FROM BranchServices AS b
            INNER JOIN Branches AS b0 ON b.BranchId == b0.BranchId
        ) AS t ON s.ServiceId == t.ServiceId
        ORDER BY s.ServiceId ASC, t.BranchId ASC, t.ServiceId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Service>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 18:22:55.232 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:22:55.233 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:22:55.234 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:55.235 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:55.235 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:22:55.236 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:22:55.237 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:22:55.238 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[ServiceId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt]
FROM [Services] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[ServiceId] = [t].[ServiceId]
ORDER BY [s].[ServiceId], [t].[BranchId], [t].[ServiceId]
2025-11-29 18:22:55.244 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[ServiceId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt]
FROM [Services] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[ServiceId] = [t].[ServiceId]
ORDER BY [s].[ServiceId], [t].[BranchId], [t].[ServiceId]
2025-11-29 18:22:55.249 +02:00 [DBG] Context 'AppDbContext' started tracking 'Service' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:55.257 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:55.259 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:55.260 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:55.261 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:55.262 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:55.263 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 16ms reading results.
2025-11-29 18:22:55.264 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:55.265 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:22:55.266 +02:00 [INF] 1 services retrieved
2025-11-29 18:22:55.270 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:22:55.271 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:22:55.271 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:22:55.272 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:22:55.272 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 18:22:55.273 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.ServiceDTOS.ServiceDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 18:22:55.276 +02:00 [INF] Executed action Hospital.Controllers.ServicesController.GetAll (Hospital) in 63.1131ms
2025-11-29 18:22:55.277 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-29 18:22:55.277 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:22:55.278 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:55.279 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 18:22:55.280 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Services - 200 null application/json; charset=utf-8 85.1366ms
2025-11-29 18:22:57.503 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - null null
2025-11-29 18:22:57.505 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/GetAll'
2025-11-29 18:22:57.507 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)' with route pattern 'api/Specializations/GetAll' is valid for the request path '/api/Specializations/GetAll'
2025-11-29 18:22:57.508 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 18:22:57.509 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:22:57.509 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:22:57.510 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:22:57.510 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:22:57.511 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 18:22:57.515 +02:00 [INF] Route matched with {action = "GetAll", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Specialization.SpecializationDTO]]] GetAll() on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-29 18:22:57.516 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:22:57.517 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:22:57.518 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:22:57.519 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:22:57.520 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:22:57.521 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-29 18:22:57.523 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-29 18:22:57.524 +02:00 [INF] get all Specialization called at "2025-11-29T18:22:57.5242870+02:00"
2025-11-29 18:22:57.525 +02:00 [INF] Fetching all specializations in the system
2025-11-29 18:22:57.527 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:22:57.529 +02:00 [DBG] Compiling query expression: 
'DbSet<Specialization>()
    .Include(s => s.Branches)
    .Include(s => s.Doctors)
    .ThenInclude(d => d.User)'
2025-11-29 18:22:57.530 +02:00 [DBG] Including navigation: 'Specialization.Branches'.
2025-11-29 18:22:57.531 +02:00 [DBG] Including navigation: 'Specialization.Doctors'.
2025-11-29 18:22:57.532 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 18:22:57.543 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-29 18:22:57.546 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Specialization>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Specialization.Description (string), 2], [Property: Specialization.ImageURL (string) MaxLength(300), 3], [Property: Specialization.Name (string) Required MaxLength(120), 4], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 5] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: BranchSpecialization (Dictionary<string, object>).BranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 6], [Property: BranchSpecialization (Dictionary<string, object>).SpecializationId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 7] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 8], [Property: Branch.Address (string) MaxLength(250), 9], [Property: Branch.BranchName (string) Required MaxLength(150), 10], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 11], [Property: Branch.Description (string), 12], [Property: Branch.Email (string) MaxLength(200), 13], [Property: Branch.ImageURL (string) MaxLength(300), 14], [Property: Branch.Latitude (double?), 15], [Property: Branch.Longitude (double?), 16], [Property: Branch.Phone (string) MaxLength(25), 17], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 18] }
            4 -> 6
            5 -> 7
            6 -> 8
            7 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Doctor.Available (bool?), 20], [Property: Doctor.Biography (string), 21], [Property: Doctor.ConsultationFees (decimal) Required, 22], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 23], [Property: Doctor.ExperienceYears (int?), 24], [Property: Doctor.ImageURL (string) MaxLength(300), 25], [Property: Doctor.SpecializationId (int) Required FK Index, 26], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 27], [Property: Doctor.UserId (string) Required FK Index, 28] }
            8 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 29], [Property: User.AccessFailedCount (int) Required, 30], [Property: User.ConcurrencyStamp (string) Concurrency, 31], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: User.DateOfBirth (DateOnly?), 33], [Property: User.Email (string) Index MaxLength(256), 34], [Property: User.EmailConfirmed (bool) Required, 35], [Property: User.FullName (string) Required MaxLength(150), 36], [Property: User.Gender (GenderType?) MaxLength(10), 37], [Property: User.LockoutEnabled (bool) Required, 38], [Property: User.LockoutEnd (DateTimeOffset?), 39], [Property: User.NormalizedEmail (string) Index MaxLength(256), 40], [Property: User.NormalizedUserName (string) Index MaxLength(256), 41], [Property: User.PasswordHash (string), 42], [Property: User.PhoneNumber (string), 43], [Property: User.PhoneNumberConfirmed (bool) Required, 44], [Property: User.RefreshToken (string), 45], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 46], [Property: User.Role (string) Required MaxLength(50), 47], [Property: User.SecurityStamp (string), 48], [Property: User.TwoFactorEnabled (bool) Required, 49], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.UserName (string) MaxLength(256), 51] }
            9 -> 19
            10 -> 29
        SELECT s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, t.BranchId, t.SpecializationId, t.BranchId0, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Latitude, t.Longitude, t.Phone, t.UpdatedAt, t0.DoctorId, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt0, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt0, t0.UserName
        FROM Specializations AS s
        LEFT JOIN 
        (
            SELECT b.BranchId, b.SpecializationId, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt, b0.Description, b0.Email, b0.ImageURL, b0.Latitude, b0.Longitude, b0.Phone, b0.UpdatedAt
            FROM BranchSpecializations AS b
            INNER JOIN Branches AS b0 ON b.BranchId == b0.BranchId
        ) AS t ON s.SpecializationId == t.SpecializationId
        LEFT JOIN 
        (
            SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
            FROM Doctors AS d
            INNER JOIN Users AS u ON d.UserId == u.Id
        ) AS t0 ON s.SpecializationId == t0.SpecializationId
        ORDER BY s.SpecializationId ASC, t.BranchId ASC, t.SpecializationId ASC, t.BranchId0 ASC, t0.DoctorId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Specialization>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 18:22:57.548 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:22:57.549 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:22:57.550 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:57.551 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:57.552 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:22:57.553 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:22:57.554 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:22:57.555 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-29 18:22:57.566 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-29 18:22:57.568 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.571 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.573 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.574 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.575 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.576 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.577 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.578 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.579 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.580 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.581 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.582 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.584 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.585 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.586 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.587 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.588 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.589 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.590 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.591 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.592 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.593 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.594 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.595 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.596 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.598 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.599 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.600 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.600 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.601 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.602 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:22:57.603 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:57.604 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 35ms reading results.
2025-11-29 18:22:57.605 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:57.606 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:22:57.610 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:22:57.611 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:22:57.612 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:22:57.612 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:22:57.613 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 18:22:57.614 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Specialization.SpecializationDTO, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 18:22:57.617 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.GetAll (Hospital) in 95.6307ms
2025-11-29 18:22:57.618 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 18:22:57.619 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:22:57.619 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:57.620 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 18:22:57.621 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - 200 null application/json; charset=utf-8 118.0861ms
2025-11-29 18:22:58.441 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-29 18:22:58.443 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-29 18:22:58.444 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-29 18:22:58.445 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 18:22:58.446 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:22:58.446 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:22:58.447 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:22:58.448 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:22:58.448 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 18:22:58.451 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-29 18:22:58.452 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:22:58.453 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:22:58.454 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:22:58.455 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:22:58.456 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:22:58.457 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-29 18:22:58.458 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-29 18:22:58.460 +02:00 [INF] Get All Branch called at "2025-11-29T18:22:58.4601853+02:00"
2025-11-29 18:22:58.461 +02:00 [INF] Fetching all branches
2025-11-29 18:22:58.462 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:22:58.465 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .AsNoTracking()'
2025-11-29 18:22:58.468 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Branch>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
        SELECT b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Branches AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 18:22:58.470 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:22:58.470 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:22:58.471 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:58.472 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:58.473 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:22:58.473 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:22:58.474 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:22:58.475 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-29 18:22:58.477 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-29 18:22:58.479 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:58.480 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 18:22:58.481 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:58.481 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:22:58.485 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:22:58.486 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:22:58.487 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:22:58.487 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:22:58.488 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 18:22:58.488 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 18:22:58.489 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 32.2674ms
2025-11-29 18:22:58.490 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 18:22:58.491 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:22:58.492 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:22:58.493 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 18:22:58.493 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 52.6234ms
2025-11-29 18:23:00.243 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Event/GetAllEventsInSystem - null null
2025-11-29 18:23:00.245 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/GetAllEventsInSystem'
2025-11-29 18:23:00.246 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)' with route pattern 'api/Event/GetAllEventsInSystem' is valid for the request path '/api/Event/GetAllEventsInSystem'
2025-11-29 18:23:00.247 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-29 18:23:00.248 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:23:00.248 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:23:00.249 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:23:00.250 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:23:00.250 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-29 18:23:00.253 +02:00 [INF] Route matched with {action = "GetAllEventsInSystem", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllEventsInSystem() on controller Hospital.Controllers.EventController (Hospital).
2025-11-29 18:23:00.254 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:23:00.255 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:23:00.256 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:23:00.257 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:23:00.258 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:23:00.259 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-29 18:23:00.261 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-29 18:23:00.263 +02:00 [INF] get all  event in system  called at "2025-11-29T18:23:00.2630653+02:00"
2025-11-29 18:23:00.264 +02:00 [INF] Fetching all events in the system
2025-11-29 18:23:00.266 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:23:00.268 +02:00 [DBG] Compiling query expression: 
'DbSet<Event>()
    .AsNoTracking()'
2025-11-29 18:23:00.270 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Event>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Event.EventId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Event.BranchId (int?) FK Index, 1], [Property: Event.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Event.Description (string), 3], [Property: Event.EventDate (DateTime) Required, 4], [Property: Event.ImageURL (string) MaxLength(300), 5], [Property: Event.Title (string) Required MaxLength(150), 6], [Property: Event.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 7] }
        SELECT e.EventId, e.BranchId, e.CreatedAt, e.Description, e.EventDate, e.ImageURL, e.Title, e.UpdatedAt
        FROM Events AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Event>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 18:23:00.272 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:23:00.273 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:23:00.274 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:00.275 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:00.276 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:23:00.276 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:23:00.277 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:23:00.278 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-29 18:23:00.281 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-29 18:23:00.282 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:00.283 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 18:23:00.284 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:00.285 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 18:23:00.286 +02:00 [INF] No events found in the system
2025-11-29 18:23:00.287 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:23:00.288 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:23:00.289 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:23:00.289 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:23:00.290 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-29 18:23:00.291 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-11-29 18:23:00.292 +02:00 [INF] Executed action Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital) in 32.4296ms
2025-11-29 18:23:00.293 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-29 18:23:00.293 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:23:00.294 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:00.295 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 18:23:00.296 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Event/GetAllEventsInSystem - 404 null text/plain; charset=utf-8 53.1508ms
2025-11-29 18:23:01.800 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/News/GetAllNewsInSystem - null null
2025-11-29 18:23:01.802 +02:00 [DBG] 1 candidate(s) found for the request path '/api/News/GetAllNewsInSystem'
2025-11-29 18:23:01.803 +02:00 [DBG] Endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)' with route pattern 'api/News/GetAllNewsInSystem' is valid for the request path '/api/News/GetAllNewsInSystem'
2025-11-29 18:23:01.804 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)'
2025-11-29 18:23:01.805 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:23:01.805 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:23:01.806 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:23:01.806 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:23:01.807 +02:00 [INF] Executing endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)'
2025-11-29 18:23:01.810 +02:00 [INF] Route matched with {action = "GetAllNewsInSystem", controller = "News"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllNewsInSystem() on controller Hospital.Controllers.NewsController (Hospital).
2025-11-29 18:23:01.811 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:23:01.812 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:23:01.813 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:23:01.814 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:23:01.815 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:23:01.816 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-29 18:23:01.818 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.NewsController (Hospital)
2025-11-29 18:23:01.819 +02:00 [INF] get all News in system  called at "2025-11-29T18:23:01.8197763+02:00"
2025-11-29 18:23:01.821 +02:00 [INF] Retrieving all news in the system
2025-11-29 18:23:01.823 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:23:01.824 +02:00 [DBG] Compiling query expression: 
'DbSet<News>()
    .AsNoTracking()'
2025-11-29 18:23:01.827 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<News>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: News.NewsId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: News.BranchId (int?) FK Index, 1], [Property: News.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: News.Date (DateTime) Required, 3], [Property: News.Description (string), 4], [Property: News.ImageURL (string) MaxLength(300), 5], [Property: News.Title (string) Required MaxLength(150), 6], [Property: News.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 7] }
        SELECT n.NewsId, n.BranchId, n.CreatedAt, n.Date, n.Description, n.ImageURL, n.Title, n.UpdatedAt
        FROM News AS n), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, News>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 18:23:01.828 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:23:01.829 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:23:01.829 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:01.830 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:01.831 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:23:01.832 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:23:01.832 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:23:01.833 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
2025-11-29 18:23:01.837 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[NewsId], [n].[BranchId], [n].[CreatedAt], [n].[Date], [n].[Description], [n].[ImageURL], [n].[Title], [n].[UpdatedAt]
FROM [News] AS [n]
2025-11-29 18:23:01.838 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:01.839 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 18:23:01.840 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:01.841 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:23:01.842 +02:00 [INF] No news found in the system
2025-11-29 18:23:01.842 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:23:01.844 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:23:01.844 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:23:01.845 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:23:01.845 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-29 18:23:01.846 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-11-29 18:23:01.847 +02:00 [INF] Executed action Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital) in 30.3622ms
2025-11-29 18:23:01.848 +02:00 [INF] Executed endpoint 'Hospital.Controllers.NewsController.GetAllNewsInSystem (Hospital)'
2025-11-29 18:23:01.849 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:23:01.849 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:01.850 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 18:23:01.851 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/News/GetAllNewsInSystem - 404 null text/plain; charset=utf-8 50.9973ms
2025-11-29 18:23:04.911 +02:00 [DBG] Connection id "0HNHFCB8HU7EB" received FIN.
2025-11-29 18:23:04.912 +02:00 [DBG] Connection id "0HNHFCB8HU7EB" is closed. The last processed stream ID was 13.
2025-11-29 18:23:04.912 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7EB completed.
2025-11-29 18:23:04.913 +02:00 [DBG] Connection id "0HNHFCB8HU7EB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 18:23:04.915 +02:00 [DBG] Connection id "0HNHFCB8HU7EB" stopped.
2025-11-29 18:23:05.487 +02:00 [DBG] Connection id "0HNHFCB8HU7EC" accepted.
2025-11-29 18:23:05.488 +02:00 [DBG] Connection id "0HNHFCB8HU7EC" started.
2025-11-29 18:23:05.491 +02:00 [DBG] Connection 0HNHFCB8HU7EC established using the following protocol: "Tls13"
2025-11-29 18:23:05.493 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Event/GetAllEventsInSystem - null null
2025-11-29 18:23:05.495 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/GetAllEventsInSystem'
2025-11-29 18:23:05.496 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)' with route pattern 'api/Event/GetAllEventsInSystem' is valid for the request path '/api/Event/GetAllEventsInSystem'
2025-11-29 18:23:05.497 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-29 18:23:05.498 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:23:05.498 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:23:05.499 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:23:05.499 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:23:05.500 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-29 18:23:05.501 +02:00 [INF] Route matched with {action = "GetAllEventsInSystem", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllEventsInSystem() on controller Hospital.Controllers.EventController (Hospital).
2025-11-29 18:23:05.502 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:23:05.503 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:23:05.504 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:23:05.505 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:23:05.506 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:23:05.507 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-29 18:23:05.509 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-29 18:23:05.510 +02:00 [INF] get all  event in system  called at "2025-11-29T18:23:05.5103511+02:00"
2025-11-29 18:23:05.511 +02:00 [INF] Fetching all events in the system
2025-11-29 18:23:05.512 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:23:05.513 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:23:05.513 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:23:05.514 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:05.515 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:05.516 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:23:05.517 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:23:05.517 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:23:05.518 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-29 18:23:05.522 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-29 18:23:05.523 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:05.524 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 18:23:05.525 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:05.526 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:23:05.527 +02:00 [INF] No events found in the system
2025-11-29 18:23:05.527 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:23:05.529 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:23:05.529 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:23:05.530 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:23:05.530 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-29 18:23:05.531 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-11-29 18:23:05.532 +02:00 [INF] Executed action Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital) in 24.9672ms
2025-11-29 18:23:05.533 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-29 18:23:05.533 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:23:05.534 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:05.535 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 18:23:05.536 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Event/GetAllEventsInSystem - 404 null text/plain; charset=utf-8 43.4725ms
2025-11-29 18:23:06.307 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Event/GetAllEventsInSystem - null null
2025-11-29 18:23:06.309 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Event/GetAllEventsInSystem'
2025-11-29 18:23:06.310 +02:00 [DBG] Endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)' with route pattern 'api/Event/GetAllEventsInSystem' is valid for the request path '/api/Event/GetAllEventsInSystem'
2025-11-29 18:23:06.311 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-29 18:23:06.312 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:23:06.312 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:23:06.313 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:23:06.314 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:23:06.314 +02:00 [INF] Executing endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-29 18:23:06.315 +02:00 [INF] Route matched with {action = "GetAllEventsInSystem", controller = "Event"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllEventsInSystem() on controller Hospital.Controllers.EventController (Hospital).
2025-11-29 18:23:06.316 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:23:06.317 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:23:06.318 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:23:06.320 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:23:06.321 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:23:06.322 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-29 18:23:06.325 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.EventController (Hospital)
2025-11-29 18:23:06.326 +02:00 [INF] get all  event in system  called at "2025-11-29T18:23:06.3267773+02:00"
2025-11-29 18:23:06.327 +02:00 [INF] Fetching all events in the system
2025-11-29 18:23:06.328 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:23:06.329 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:23:06.330 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:23:06.330 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:06.331 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:06.332 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:23:06.333 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:23:06.334 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:23:06.335 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-29 18:23:06.338 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EventId], [e].[BranchId], [e].[CreatedAt], [e].[Description], [e].[EventDate], [e].[ImageURL], [e].[Title], [e].[UpdatedAt]
FROM [Events] AS [e]
2025-11-29 18:23:06.339 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:06.340 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 18:23:06.341 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:06.342 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:23:06.343 +02:00 [INF] No events found in the system
2025-11-29 18:23:06.343 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:23:06.345 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:23:06.345 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:23:06.346 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:23:06.346 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-11-29 18:23:06.347 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-11-29 18:23:06.348 +02:00 [INF] Executed action Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital) in 26.4232ms
2025-11-29 18:23:06.349 +02:00 [INF] Executed endpoint 'Hospital.Controllers.EventController.GetAllEventsInSystem (Hospital)'
2025-11-29 18:23:06.350 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:23:06.351 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:23:06.351 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 18:23:06.352 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Event/GetAllEventsInSystem - 404 null text/plain; charset=utf-8 45.2782ms
2025-11-29 18:23:44.922 +02:00 [DBG] Connection id "0HNHFCB8HU7EC" received FIN.
2025-11-29 18:23:44.923 +02:00 [DBG] Connection id "0HNHFCB8HU7EC" is closed. The last processed stream ID was 3.
2025-11-29 18:23:44.923 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7EC completed.
2025-11-29 18:23:44.924 +02:00 [DBG] Connection id "0HNHFCB8HU7EC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 18:23:44.926 +02:00 [DBG] Connection id "0HNHFCB8HU7EC" stopped.
2025-11-29 18:45:01.401 +02:00 [DBG] Connection id "0HNHFCB8HU7ED" accepted.
2025-11-29 18:45:01.402 +02:00 [DBG] Connection id "0HNHFCB8HU7ED" started.
2025-11-29 18:45:01.406 +02:00 [DBG] Connection 0HNHFCB8HU7ED established using the following protocol: "Tls13"
2025-11-29 18:45:01.408 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 18:45:01.411 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 18:45:01.412 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 18:45:01.413 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:45:01.414 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:45:01.415 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:45:01.416 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:45:01.417 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:45:01.418 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:45:01.419 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 18:45:01.421 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:45:01.422 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:45:01.423 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:45:01.425 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:45:01.426 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:45:01.427 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:45:01.431 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:45:01.432 +02:00 [INF] get all schedule called at "2025-11-29T18:45:01.4322569+02:00"
2025-11-29 18:45:01.432 +02:00 [INF] Fetching all schedules
2025-11-29 18:45:01.434 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:45:01.436 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:45:01.437 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:45:01.438 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:45:01.476 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:45:01.477 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:45:01.478 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:45:01.479 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:45:01.479 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:45:01.493 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:45:01.494 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.495 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.496 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.497 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.498 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.499 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.499 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.500 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.501 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.502 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.502 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.503 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.504 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.505 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.506 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.507 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.508 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.509 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.509 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.510 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.511 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.512 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.513 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.514 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.515 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.516 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.517 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.518 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.518 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.519 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.520 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.521 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.522 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.523 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.523 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.524 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.525 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.526 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.527 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.528 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.529 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.529 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.530 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:01.531 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:45:01.532 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 37ms reading results.
2025-11-29 18:45:01.533 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:45:01.534 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:45:01.535 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:45:01.536 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:45:01.537 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:45:01.537 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:45:01.538 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 18:45:01.539 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 18:45:01.540 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 112.5706ms
2025-11-29 18:45:01.541 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:45:01.541 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:45:01.542 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:45:01.543 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 18:45:01.544 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 135.9272ms
2025-11-29 18:45:10.153 +02:00 [DBG] Connection id "0HNHFCB8HU7ED" received FIN.
2025-11-29 18:45:10.154 +02:00 [DBG] Connection id "0HNHFCB8HU7ED" is closed. The last processed stream ID was 1.
2025-11-29 18:45:10.155 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7ED completed.
2025-11-29 18:45:10.155 +02:00 [DBG] Connection id "0HNHFCB8HU7ED" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 18:45:10.159 +02:00 [DBG] Connection id "0HNHFCB8HU7ED" stopped.
2025-11-29 18:45:10.394 +02:00 [DBG] Connection id "0HNHFCB8HU7EE" accepted.
2025-11-29 18:45:10.395 +02:00 [DBG] Connection id "0HNHFCB8HU7EE" started.
2025-11-29 18:45:10.400 +02:00 [DBG] Connection 0HNHFCB8HU7EE established using the following protocol: "Tls13"
2025-11-29 18:45:10.402 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 18:45:10.405 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 18:45:10.407 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 18:45:10.408 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:45:10.409 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:45:10.410 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:45:10.411 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:45:10.411 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:45:10.413 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:45:10.414 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 18:45:10.416 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:45:10.418 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:45:10.419 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:45:10.420 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:45:10.421 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:45:10.422 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:45:10.424 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:45:10.425 +02:00 [INF] get all schedule called at "2025-11-29T18:45:10.4255689+02:00"
2025-11-29 18:45:10.426 +02:00 [INF] Fetching all schedules
2025-11-29 18:45:10.428 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:45:10.430 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:45:10.431 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:45:10.432 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:45:10.433 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:45:10.435 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:45:10.436 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:45:10.437 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 18:45:10.438 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:45:10.449 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:45:10.453 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.454 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.455 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.457 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.458 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.459 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.460 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.462 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.463 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.464 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.465 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.467 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.468 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.470 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.471 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.472 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.473 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.475 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.476 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.477 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.478 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.479 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.480 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.481 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.483 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.484 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.485 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.486 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.487 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.488 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.489 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.490 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.491 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.492 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.493 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.494 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.495 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.496 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.497 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.498 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.499 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.500 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.501 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:45:10.502 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:45:10.503 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 50ms reading results.
2025-11-29 18:45:10.504 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:45:10.505 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:45:10.507 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:45:10.508 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:45:10.509 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:45:10.509 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:45:10.510 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 18:45:10.511 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 18:45:10.513 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 90.1975ms
2025-11-29 18:45:10.514 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:45:10.515 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:45:10.515 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:45:10.516 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 18:45:10.517 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 115.3324ms
2025-11-29 18:45:32.079 +02:00 [DBG] Connection id "0HNHFCB8HU7EF" accepted.
2025-11-29 18:45:32.080 +02:00 [DBG] Connection id "0HNHFCB8HU7EF" started.
2025-11-29 18:45:32.084 +02:00 [DBG] Connection 0HNHFCB8HU7EF established using the following protocol: "Tls13"
2025-11-29 18:45:32.096 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - null null
2025-11-29 18:45:32.099 +02:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-11-29 18:45:32.100 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/_framework/aspnetcore-browser-refresh.js - 200 16501 application/javascript; charset=utf-8 4.4767ms
2025-11-29 18:45:32.175 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - null null
2025-11-29 18:45:32.177 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-29 18:45:32.178 +02:00 [DBG] Request did not match any endpoints
2025-11-29 18:45:32.200 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.8521ms
2025-11-29 18:46:31.549 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 18:46:31.551 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 18:46:31.552 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 18:46:31.553 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:46:31.554 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:46:31.555 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:46:31.555 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:46:31.556 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:46:31.557 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:46:31.558 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 18:46:31.559 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:46:31.560 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:46:31.561 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:46:31.563 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:46:31.564 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:46:31.565 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:46:31.566 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:46:31.567 +02:00 [INF] get all schedule called at "2025-11-29T18:46:31.5675345+02:00"
2025-11-29 18:46:31.568 +02:00 [INF] Fetching all schedules
2025-11-29 18:46:31.569 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:46:31.570 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:46:31.571 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:46:31.572 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:46:31.573 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:46:31.574 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:46:31.575 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:46:31.576 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:46:31.577 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:46:31.586 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:46:31.588 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.589 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.590 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.591 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.592 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.593 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.594 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.595 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.596 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.597 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.597 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.598 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.599 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.600 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.601 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.601 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.602 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.603 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.604 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.605 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.606 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.607 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.608 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.609 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.610 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.611 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.612 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.613 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.614 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.615 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.616 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.617 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.618 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.619 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.620 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.620 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.621 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.622 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.623 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.624 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.625 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.626 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.627 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:46:31.628 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:46:31.628 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 40ms reading results.
2025-11-29 18:46:31.629 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:46:31.630 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:46:31.631 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:46:31.633 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:46:31.633 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:46:31.634 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:46:31.634 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 18:46:31.635 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 18:46:31.636 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 71.6361ms
2025-11-29 18:46:31.637 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:46:31.638 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:46:31.639 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:46:31.639 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 18:46:31.640 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 91.7459ms
2025-11-29 18:47:40.345 +02:00 [DBG] Connection id "0HNHFCB8HU7EF" received FIN.
2025-11-29 18:47:40.345 +02:00 [DBG] Connection id "0HNHFCB8HU7EE" received FIN.
2025-11-29 18:47:40.346 +02:00 [DBG] Connection id "0HNHFCB8HU7EF" is closed. The last processed stream ID was 3.
2025-11-29 18:47:40.348 +02:00 [DBG] Connection id "0HNHFCB8HU7EF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 18:47:40.346 +02:00 [DBG] Connection id "0HNHFCB8HU7EE" is closed. The last processed stream ID was 3.
2025-11-29 18:47:40.347 +02:00 [DBG] Connection id "0HNHFCB8HU7EE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 18:47:40.346 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7EF completed.
2025-11-29 18:47:40.350 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7EE completed.
2025-11-29 18:47:40.351 +02:00 [DBG] Connection id "0HNHFCB8HU7EF" stopped.
2025-11-29 18:47:40.351 +02:00 [DBG] Connection id "0HNHFCB8HU7EE" stopped.
2025-11-29 18:48:16.030 +02:00 [DBG] Connection id "0HNHFCB8HU7EG" accepted.
2025-11-29 18:48:16.032 +02:00 [DBG] Connection id "0HNHFCB8HU7EG" started.
2025-11-29 18:48:16.041 +02:00 [DBG] Connection 0HNHFCB8HU7EG established using the following protocol: "Tls13"
2025-11-29 18:48:16.045 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 18:48:16.046 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 18:48:16.047 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 18:48:16.050 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:48:16.050 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:48:16.051 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:48:16.051 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:48:16.052 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:48:16.053 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:48:16.053 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 18:48:16.057 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:48:16.058 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:48:16.059 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:48:16.061 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:48:16.062 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:48:16.066 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:48:16.068 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:48:16.071 +02:00 [INF] get all schedule called at "2025-11-29T18:48:16.0714041+02:00"
2025-11-29 18:48:16.072 +02:00 [INF] Fetching all schedules
2025-11-29 18:48:16.074 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:48:16.079 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:48:16.080 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:48:16.081 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:48:16.082 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:48:16.084 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:48:16.086 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:48:16.087 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-29 18:48:16.088 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:48:16.111 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:48:16.114 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.116 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.118 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.120 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.121 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.123 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.124 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.126 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.127 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.128 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.129 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.130 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.132 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.133 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.134 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.136 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.137 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.138 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.139 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.141 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.142 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.143 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.144 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.145 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.147 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.148 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.149 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.150 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.152 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.153 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.154 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.155 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.156 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.157 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.159 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.160 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.161 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.163 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.164 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.166 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.167 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.170 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.171 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:16.173 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:48:16.175 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 60ms reading results.
2025-11-29 18:48:16.177 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:48:16.178 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 18:48:16.180 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:48:16.185 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:48:16.185 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:48:16.190 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:48:16.193 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 18:48:16.206 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 18:48:16.209 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 142.8739ms
2025-11-29 18:48:16.232 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:48:16.238 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:48:16.240 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:48:16.241 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 18:48:16.243 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 197.8468ms
2025-11-29 18:48:20.422 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 18:48:20.424 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 18:48:20.425 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 18:48:20.426 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:48:20.427 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:48:20.427 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:48:20.428 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:48:20.429 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:48:20.429 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:48:20.430 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 18:48:20.432 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:48:20.433 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:48:20.434 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:48:20.435 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:48:20.436 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:48:20.437 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:48:20.439 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:48:20.440 +02:00 [INF] get all schedule called at "2025-11-29T18:48:20.4402534+02:00"
2025-11-29 18:48:20.440 +02:00 [INF] Fetching all schedules
2025-11-29 18:48:20.441 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:48:20.442 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:48:20.443 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:48:20.444 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:48:20.445 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:48:20.445 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:48:20.446 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:48:20.447 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:48:20.448 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:48:20.449 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:48:20.451 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.452 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.453 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.454 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.454 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.455 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.456 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.457 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.458 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.459 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.459 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.460 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.461 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.462 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.463 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.464 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.464 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.466 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.467 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.467 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.468 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.469 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.470 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.470 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.471 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.472 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.473 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.474 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.475 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.476 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.476 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.477 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.478 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.479 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.480 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.481 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.481 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.482 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.483 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.484 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.485 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.486 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.487 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:48:20.488 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:48:20.489 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 37ms reading results.
2025-11-29 18:48:20.490 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:48:20.490 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:48:20.492 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:48:20.493 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:48:20.493 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:48:20.494 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:48:20.495 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 18:48:20.495 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 18:48:20.497 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 59.1619ms
2025-11-29 18:48:20.498 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:48:20.498 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:48:20.499 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:48:20.500 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 18:48:20.501 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 79.1226ms
2025-11-29 18:50:10.647 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 18:50:10.650 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 18:50:10.651 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 18:50:10.652 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:50:10.653 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:50:10.654 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:50:10.654 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:50:10.655 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:50:10.656 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:50:10.657 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 18:50:10.659 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:50:10.661 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:50:10.662 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:50:10.664 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:50:10.665 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:50:10.666 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:50:10.667 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:50:10.668 +02:00 [INF] get all schedule called at "2025-11-29T18:50:10.6689239+02:00"
2025-11-29 18:50:10.669 +02:00 [INF] Fetching all schedules
2025-11-29 18:50:10.671 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:50:10.672 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:50:10.673 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:50:10.674 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:50:10.675 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:50:10.676 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:50:10.677 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:50:10.678 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:50:10.679 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:50:10.688 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:50:10.690 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.691 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.692 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.693 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.694 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.695 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.696 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.697 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.700 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.701 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.702 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.703 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.704 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.705 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.706 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.708 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.709 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.710 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.711 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.712 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.713 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.714 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.715 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.716 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.717 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.718 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.719 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.720 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.721 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.722 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.723 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.724 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.725 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.726 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.727 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.728 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.729 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.730 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.731 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.732 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.733 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.734 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:50:10.735 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:50:10.736 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 45ms reading results.
2025-11-29 18:50:10.737 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:50:10.738 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:50:10.740 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:50:10.741 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:50:10.742 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:50:10.742 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:50:10.743 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 18:50:10.744 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 18:50:10.745 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 79.2976ms
2025-11-29 18:50:10.746 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:50:10.748 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:50:10.749 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:50:10.750 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 18:50:10.751 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 103.8122ms
2025-11-29 18:51:30.201 +02:00 [DBG] Connection id "0HNHFCB8HU7EG" received FIN.
2025-11-29 18:51:30.202 +02:00 [DBG] Connection id "0HNHFCB8HU7EG" is closed. The last processed stream ID was 5.
2025-11-29 18:51:30.202 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7EG completed.
2025-11-29 18:51:30.203 +02:00 [DBG] Connection id "0HNHFCB8HU7EG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 18:51:30.205 +02:00 [DBG] Connection id "0HNHFCB8HU7EG" stopped.
2025-11-29 18:52:03.188 +02:00 [DBG] Connection id "0HNHFCB8HU7EH" accepted.
2025-11-29 18:52:03.189 +02:00 [DBG] Connection id "0HNHFCB8HU7EH" started.
2025-11-29 18:52:03.192 +02:00 [DBG] Connection 0HNHFCB8HU7EH established using the following protocol: "Tls13"
2025-11-29 18:52:03.193 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-11-29 18:52:03.195 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 18:52:03.196 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 18:52:03.197 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:52:03.197 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:52:03.198 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:52:03.198 +02:00 [DBG] The request is a preflight request.
2025-11-29 18:52:03.199 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 6.033ms
2025-11-29 18:52:03.201 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 54
2025-11-29 18:52:03.204 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 18:52:03.205 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-29 18:52:03.206 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 18:52:03.206 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:52:03.207 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:52:03.208 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:52:03.208 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:52:03.209 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 18:52:03.212 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-29 18:52:03.213 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:52:03.214 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:52:03.215 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:52:03.216 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:52:03.217 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:52:03.218 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 18:52:03.221 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 18:52:03.222 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 18:52:03.223 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-29 18:52:03.225 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 18:52:03.230 +02:00 [DBG] Connection id "0HNHFCB8HU7EH", Request id "0HNHFCB8HU7EH:00000003": started reading request body.
2025-11-29 18:52:03.231 +02:00 [DBG] Connection id "0HNHFCB8HU7EH", Request id "0HNHFCB8HU7EH:00000003": done reading request body.
2025-11-29 18:52:03.238 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-29 18:52:03.239 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 18:52:03.240 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 18:52:03.241 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 18:52:03.246 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 18:52:03.247 +02:00 [INF] Login called at "2025-11-29T18:52:03.2477807+02:00"
2025-11-29 18:52:03.250 +02:00 [INF] Login attempt for email: nour22110@gmail.com
2025-11-29 18:52:03.253 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:52:03.255 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-11-29 18:52:03.259 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 18:52:03.263 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:52:03.263 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:52:03.264 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.265 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.266 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:52:03.266 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:52:03.267 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:52:03.268 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 18:52:03.273 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 18:52:03.275 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:52:03.276 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.276 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 18:52:03.277 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.278 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:52:03.343 +02:00 [DBG] Creating JWT token for user a06c9a74-d53e-4235-a0b9-681147a73dfc
2025-11-29 18:52:03.349 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserClaim<string>>()
    .Where(uc => uc.UserId.Equals(__user_Id_0))
    .Select(c => c.ToClaim())'
2025-11-29 18:52:03.352 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Claim>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: IdentityUserClaim<string>.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdentityUserClaim<string>.ClaimType (string), 1], [Property: IdentityUserClaim<string>.ClaimValue (string), 2], [Property: IdentityUserClaim<string>.UserId (string) Required FK Index, 3] }
        SELECT a.Id, a.ClaimType, a.ClaimValue, a.UserId
        FROM AspNetUserClaims AS a
        WHERE a.UserId == @__user_Id_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Claim>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 18:52:03.353 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.354 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.355 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:52:03.355 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:52:03.356 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:52:03.357 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 18:52:03.360 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 18:52:03.361 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.362 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 18:52:03.364 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.365 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:52:03.370 +02:00 [DBG] Compiling query expression: 
'DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-11-29 18:52:03.374 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 18:52:03.375 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.376 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.377 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:52:03.377 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:52:03.378 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:52:03.379 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 18:52:03.383 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 18:52:03.385 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.386 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 18:52:03.387 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.388 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:52:03.393 +02:00 [DBG] JWT token created for user a06c9a74-d53e-4235-a0b9-681147a73dfc, expires at "2025-11-29T17:52:03.0000000Z"
2025-11-29 18:52:03.394 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.395 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.396 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:52:03.397 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:52:03.397 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:52:03.399 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 18:52:03.400 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 18:52:03.401 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.402 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 18:52:03.403 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.404 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:52:03.409 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-11-29 18:52:03.413 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string) Concurrency, 2], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: User.DateOfBirth (DateOnly?), 4], [Property: User.Email (string) Index MaxLength(256), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.FullName (string) Required MaxLength(150), 7], [Property: User.Gender (GenderType?) MaxLength(10), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string) Index MaxLength(256), 11], [Property: User.NormalizedUserName (string) Index MaxLength(256), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.RefreshToken (string), 16], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 17], [Property: User.Role (string) Required MaxLength(50), 18], [Property: User.SecurityStamp (string), 19], [Property: User.TwoFactorEnabled (bool) Required, 20], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: User.UserName (string) MaxLength(256), 22] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName
            FROM Users AS u
            WHERE u.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 18:52:03.414 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.415 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.416 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:52:03.416 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:52:03.417 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:52:03.418 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 18:52:03.422 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 18:52:03.423 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.424 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 18:52:03.425 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.426 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:52:03.436 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:52:03.439 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 18:52:03.443 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 18:52:03.449 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 18:52:03.451 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 18:52:03.451 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 18:52:03.496 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.497 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.499 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:52:03.500 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:52:03.503 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-29 18:52:03.504 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 18:52:03.517 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 18:52:03.522 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.523 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 18:52:03.524 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.525 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:52:03.528 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:52:03.530 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 18:52:03.602 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .FirstOrDefault(p => p.UserId == __user_Id_0)'
2025-11-29 18:52:03.605 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
            SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId
            FROM Patients AS p
            WHERE p.UserId == @__user_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 18:52:03.607 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.608 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.609 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:52:03.609 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:52:03.610 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:52:03.611 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 18:52:03.615 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 18:52:03.622 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:52:03.623 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:52:03.627 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.628 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-29 18:52:03.629 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.629 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:52:03.631 +02:00 [INF] Patient 2 logged in successfully
2025-11-29 18:52:03.631 +02:00 [INF] User nour22110@gmail.com logged in successfully with roles: Patient
2025-11-29 18:52:03.632 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:52:03.633 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:52:03.634 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:52:03.634 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:52:03.635 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 18:52:03.636 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-29 18:52:03.638 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 419.8456ms
2025-11-29 18:52:03.639 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 18:52:03.640 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:52:03.640 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:52:03.641 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 18:52:03.642 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 441.3868ms
2025-11-29 18:52:15.207 +02:00 [DBG] Connection id "0HNHFCB8HU7EH" received FIN.
2025-11-29 18:52:15.208 +02:00 [DBG] Connection id "0HNHFCB8HU7EH" is closed. The last processed stream ID was 3.
2025-11-29 18:52:15.208 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7EH completed.
2025-11-29 18:52:15.209 +02:00 [DBG] Connection id "0HNHFCB8HU7EH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 18:52:15.212 +02:00 [DBG] Connection id "0HNHFCB8HU7EH" stopped.
2025-11-29 18:53:58.883 +02:00 [DBG] Connection id "0HNHFCB8HU7EI" accepted.
2025-11-29 18:53:58.884 +02:00 [DBG] Connection id "0HNHFCB8HU7EI" started.
2025-11-29 18:53:58.887 +02:00 [DBG] Connection 0HNHFCB8HU7EI established using the following protocol: "Tls13"
2025-11-29 18:53:58.889 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-11-29 18:53:58.891 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 18:53:58.891 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 18:53:58.892 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:53:58.893 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:53:58.893 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:53:58.894 +02:00 [DBG] The request is a preflight request.
2025-11-29 18:53:58.894 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 5.9233ms
2025-11-29 18:53:58.896 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 54
2025-11-29 18:53:58.898 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 18:53:58.899 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-29 18:53:58.900 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 18:53:58.901 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:53:58.901 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:53:58.902 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:53:58.902 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:53:58.903 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 18:53:58.904 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-29 18:53:58.905 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:53:58.906 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:53:58.907 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:53:58.908 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:53:58.909 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:53:58.910 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 18:53:58.913 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 18:53:58.914 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 18:53:58.916 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-29 18:53:58.917 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 18:53:58.918 +02:00 [DBG] Connection id "0HNHFCB8HU7EI", Request id "0HNHFCB8HU7EI:00000003": started reading request body.
2025-11-29 18:53:58.919 +02:00 [DBG] Connection id "0HNHFCB8HU7EI", Request id "0HNHFCB8HU7EI:00000003": done reading request body.
2025-11-29 18:53:58.920 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-29 18:53:58.921 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 18:53:58.922 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 18:53:58.923 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 18:53:58.924 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 18:53:58.926 +02:00 [INF] Login called at "2025-11-29T18:53:58.9262260+02:00"
2025-11-29 18:53:58.927 +02:00 [INF] Login attempt for email: nour22110@gmail.com
2025-11-29 18:53:58.929 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:53:58.931 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:53:58.932 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:53:58.933 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:58.934 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:58.935 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:53:58.936 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:53:58.937 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:53:58.938 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 18:53:58.943 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 18:53:58.945 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:53:58.946 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:58.947 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 18:53:58.948 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:58.949 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:53:59.018 +02:00 [DBG] Creating JWT token for user a06c9a74-d53e-4235-a0b9-681147a73dfc
2025-11-29 18:53:59.019 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.020 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.021 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:53:59.022 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:53:59.023 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:53:59.024 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 18:53:59.028 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 18:53:59.030 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.031 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 18:53:59.033 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.034 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:53:59.035 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.036 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.038 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:53:59.038 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:53:59.039 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:53:59.040 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 18:53:59.045 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 18:53:59.047 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.048 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 18:53:59.049 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.050 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 18:53:59.051 +02:00 [DBG] JWT token created for user a06c9a74-d53e-4235-a0b9-681147a73dfc, expires at "2025-11-29T17:53:59.0000000Z"
2025-11-29 18:53:59.053 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.054 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.055 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:53:59.055 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:53:59.056 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:53:59.057 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 18:53:59.059 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 18:53:59.060 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.061 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 18:53:59.062 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.063 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:53:59.066 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.067 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.068 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:53:59.069 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:53:59.070 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:53:59.071 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 18:53:59.074 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 18:53:59.076 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.076 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 18:53:59.077 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.078 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:53:59.080 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:53:59.081 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 18:53:59.081 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 18:53:59.082 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 18:53:59.083 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 18:53:59.084 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 18:53:59.086 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.087 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.088 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:53:59.089 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:53:59.090 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:53:59.091 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 18:53:59.097 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 18:53:59.099 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.100 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 18:53:59.101 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.102 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:53:59.103 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:53:59.104 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 18:53:59.106 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.108 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.109 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:53:59.109 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:53:59.110 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:53:59.111 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 18:53:59.115 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 18:53:59.117 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:53:59.118 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:53:59.119 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.120 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 18:53:59.121 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.122 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 18:53:59.123 +02:00 [INF] Patient 2 logged in successfully
2025-11-29 18:53:59.124 +02:00 [INF] User nour22110@gmail.com logged in successfully with roles: Patient
2025-11-29 18:53:59.125 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:53:59.126 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:53:59.127 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:53:59.128 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:53:59.128 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 18:53:59.129 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-29 18:53:59.130 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 220.1818ms
2025-11-29 18:53:59.131 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 18:53:59.132 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:53:59.132 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:53:59.133 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 18:53:59.135 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 238.8425ms
2025-11-29 18:54:00.223 +02:00 [DBG] Connection id "0HNHFCB8HU7EI" received FIN.
2025-11-29 18:54:00.224 +02:00 [DBG] Connection id "0HNHFCB8HU7EI" is closed. The last processed stream ID was 3.
2025-11-29 18:54:00.224 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7EI completed.
2025-11-29 18:54:00.225 +02:00 [DBG] Connection id "0HNHFCB8HU7EI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 18:54:00.229 +02:00 [DBG] Connection id "0HNHFCB8HU7EI" stopped.
2025-11-29 18:54:01.028 +02:00 [DBG] Connection id "0HNHFCB8HU7EJ" accepted.
2025-11-29 18:54:01.029 +02:00 [DBG] Connection id "0HNHFCB8HU7EJ" started.
2025-11-29 18:54:01.032 +02:00 [DBG] Connection 0HNHFCB8HU7EJ established using the following protocol: "Tls13"
2025-11-29 18:54:01.033 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 18:54:01.035 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 18:54:01.036 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 18:54:01.037 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:54:01.038 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 18:54:01.039 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 18:54:01.040 +02:00 [INF] CORS policy execution successful.
2025-11-29 18:54:01.040 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 18:54:01.041 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:54:01.042 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 18:54:01.044 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 18:54:01.045 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 18:54:01.046 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 18:54:01.048 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 18:54:01.049 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 18:54:01.050 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:54:01.051 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 18:54:01.052 +02:00 [INF] get all schedule called at "2025-11-29T18:54:01.0527765+02:00"
2025-11-29 18:54:01.053 +02:00 [INF] Fetching all schedules
2025-11-29 18:54:01.054 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 18:54:01.056 +02:00 [DBG] Creating DbConnection.
2025-11-29 18:54:01.056 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 18:54:01.057 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:54:01.058 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:54:01.059 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 18:54:01.060 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 18:54:01.061 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 18:54:01.062 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:54:01.072 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 18:54:01.074 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.075 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.076 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.077 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.078 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.079 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.080 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.081 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.082 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.083 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.084 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.085 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.087 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.087 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.088 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.089 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.091 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.092 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.093 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.094 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.094 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.096 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.097 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.098 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.099 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.100 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.101 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.101 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.102 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.103 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.104 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.105 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.107 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.107 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.108 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.110 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.111 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.112 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.113 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.114 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.115 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.116 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.117 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 18:54:01.118 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:54:01.119 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 45ms reading results.
2025-11-29 18:54:01.120 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:54:01.122 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 18:54:01.123 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 18:54:01.124 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 18:54:01.125 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 18:54:01.126 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 18:54:01.127 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 18:54:01.128 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 18:54:01.129 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 79.002ms
2025-11-29 18:54:01.130 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 18:54:01.131 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 18:54:01.132 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 18:54:01.133 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 18:54:01.134 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 100.8742ms
2025-11-29 18:54:10.224 +02:00 [DBG] Connection id "0HNHFCB8HU7EJ" received FIN.
2025-11-29 18:54:10.225 +02:00 [DBG] Connection id "0HNHFCB8HU7EJ" is closed. The last processed stream ID was 1.
2025-11-29 18:54:10.226 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7EJ completed.
2025-11-29 18:54:10.227 +02:00 [DBG] Connection id "0HNHFCB8HU7EJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 18:54:10.229 +02:00 [DBG] Connection id "0HNHFCB8HU7EJ" stopped.
2025-11-29 19:02:02.816 +02:00 [DBG] Connection id "0HNHFCB8HU7EK" accepted.
2025-11-29 19:02:02.817 +02:00 [DBG] Connection id "0HNHFCB8HU7EK" started.
2025-11-29 19:02:02.818 +02:00 [DBG] Connection id "0HNHFCB8HU7EL" accepted.
2025-11-29 19:02:02.818 +02:00 [DBG] Connection id "0HNHFCB8HU7EK" received FIN.
2025-11-29 19:02:02.819 +02:00 [DBG] Connection id "0HNHFCB8HU7EL" started.
2025-11-29 19:02:02.820 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 19:02:02.822 +02:00 [DBG] Connection id "0HNHFCB8HU7EK" stopped.
2025-11-29 19:02:02.823 +02:00 [DBG] Connection id "0HNHFCB8HU7EK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 19:02:02.824 +02:00 [DBG] Connection 0HNHFCB8HU7EL established using the following protocol: "Tls13"
2025-11-29 19:02:02.827 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Patient/1 - null null
2025-11-29 19:02:02.829 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/1'
2025-11-29 19:02:02.830 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/1'
2025-11-29 19:02:02.831 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:02:02.832 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:02:02.832 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:02:02.833 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:02:02.836 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:02:02.837 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:02:02.838 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:02:02.839 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:02:02.841 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:02:02.842 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:02:02.843 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:02:02.844 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:02:02.845 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:02:02.846 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:02:02.847 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:02:02.848 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:02:02.849 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:02:02.850 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:02:02.852 +02:00 [INF] get patient by id called at "2025-11-29T19:02:02.8519000+02:00"
2025-11-29 19:02:02.853 +02:00 [INF] Fetching patient with ID: 1
2025-11-29 19:02:02.855 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:02:02.857 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(p => p.User)
    .Include(p => p.MedicalRecords)
    .ThenInclude(m => m.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(p => p.PatientId == __id_0)'
2025-11-29 19:02:02.858 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-29 19:02:02.859 +02:00 [DBG] Including navigation: 'Patient.MedicalRecords'.
2025-11-29 19:02:02.860 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-11-29 19:02:02.861 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 19:02:02.876 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Patient>(
    asyncEnumerable: new SingleQueryingEnumerable<Patient>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 5], [Property: User.AccessFailedCount (int) Required, 6], [Property: User.ConcurrencyStamp (string) Concurrency, 7], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: User.DateOfBirth (DateOnly?), 9], [Property: User.Email (string) Index MaxLength(256), 10], [Property: User.EmailConfirmed (bool) Required, 11], [Property: User.FullName (string) Required MaxLength(150), 12], [Property: User.Gender (GenderType?) MaxLength(10), 13], [Property: User.LockoutEnabled (bool) Required, 14], [Property: User.LockoutEnd (DateTimeOffset?), 15], [Property: User.NormalizedEmail (string) Index MaxLength(256), 16], [Property: User.NormalizedUserName (string) Index MaxLength(256), 17], [Property: User.PasswordHash (string), 18], [Property: User.PhoneNumber (string), 19], [Property: User.PhoneNumberConfirmed (bool) Required, 20], [Property: User.RefreshToken (string), 21], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 22], [Property: User.Role (string) Required MaxLength(50), 23], [Property: User.SecurityStamp (string), 24], [Property: User.TwoFactorEnabled (bool) Required, 25], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: User.UserName (string) MaxLength(256), 27] }
                2 -> 0
                3 -> 5
                4 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 28], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 29], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: MedicalRecord.Diagnosis (string), 31], [Property: MedicalRecord.DoctorId (int) Required FK Index, 32], [Property: MedicalRecord.Notes (string), 33], [Property: MedicalRecord.PatientId (int) Required FK Index, 34], [Property: MedicalRecord.TreatmentPlan (string), 35], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
                5 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Doctor.Available (bool?), 38], [Property: Doctor.Biography (string), 39], [Property: Doctor.ConsultationFees (decimal) Required, 40], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 41], [Property: Doctor.ExperienceYears (int?), 42], [Property: Doctor.ImageURL (string) MaxLength(300), 43], [Property: Doctor.SpecializationId (int) Required FK Index, 44], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Doctor.UserId (string) Required FK Index, 46] }
                6 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
                7 -> 28
                8 -> 37
                9 -> 47
            SELECT t.PatientId, t.CreatedAt, t.EmergencyContact, t.UpdatedAt, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt0, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt0, t.UserName, t0.RecordId, t0.AppointmentId, t0.CreatedAt, t0.Diagnosis, t0.DoctorId, t0.Notes, t0.PatientId, t0.TreatmentPlan, t0.UpdatedAt, t0.DoctorId0, t0.Available, t0.Biography, t0.ConsultationFees, t0.CreatedAt0, t0.ExperienceYears, t0.ImageURL, t0.SpecializationId, t0.UpdatedAt0, t0.UserId, t0.Id, t0.AccessFailedCount, t0.ConcurrencyStamp, t0.CreatedAt1, t0.DateOfBirth, t0.Email, t0.EmailConfirmed, t0.FullName, t0.Gender, t0.LockoutEnabled, t0.LockoutEnd, t0.NormalizedEmail, t0.NormalizedUserName, t0.PasswordHash, t0.PhoneNumber, t0.PhoneNumberConfirmed, t0.RefreshToken, t0.RefreshTokenExpiryTime, t0.Role, t0.SecurityStamp, t0.TwoFactorEnabled, t0.UpdatedAt1, t0.UserName
            FROM 
            (
                SELECT TOP(1) p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt AS CreatedAt0, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt AS UpdatedAt0, u.UserName
                FROM Patients AS p
                INNER JOIN Users AS u ON p.UserId == u.Id
                WHERE p.PatientId == @__id_0
            ) AS t
            LEFT JOIN 
            (
                SELECT m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId AS DoctorId0, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt AS CreatedAt0, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt AS UpdatedAt0, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt AS CreatedAt1, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt AS UpdatedAt1, u0.UserName
                FROM MedicalRecords AS m
                INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
                INNER JOIN Users AS u0 ON d.UserId == u0.Id
            ) AS t0 ON t.PatientId == t0.PatientId
            ORDER BY t.PatientId ASC, t.Id ASC, t0.RecordId ASC, t0.DoctorId0 ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 19:02:02.878 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:02:02.879 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:02:02.880 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:02.913 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:02.914 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:02:02.914 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:02:02.915 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:02:02.916 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:02:02.933 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:02:02.935 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:02:02.936 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:02:02.937 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:02:02.938 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:02.939 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 19:02:02.940 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:02.941 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:02:02.942 +02:00 [INF] Patient with ID 1 retrieved successfully
2025-11-29 19:02:02.945 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:02:02.946 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:02:02.947 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:02:02.947 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:02:02.948 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:02:02.948 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:02:02.953 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 109.7387ms
2025-11-29 19:02:02.953 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:02:02.954 +02:00 [DBG] Connection id "0HNHFCB8HU7EL" completed keep alive response.
2025-11-29 19:02:02.955 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:02:02.955 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:02.956 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:02:02.957 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Patient/1 - 200 null application/json; charset=utf-8 129.7759ms
2025-11-29 19:02:08.113 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:02:08.116 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:02:08.117 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:02:08.119 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:02:08.119 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:02:08.120 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:02:08.121 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:02:08.121 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:02:08.123 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:02:08.123 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:02:08.124 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:02:08.126 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:02:08.127 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:02:08.128 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:02:08.129 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:02:08.130 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:02:08.131 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:02:08.133 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:02:08.133 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:02:08.134 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:02:08.135 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:02:08.136 +02:00 [INF] get patient by id called at "2025-11-29T19:02:08.1367670+02:00"
2025-11-29 19:02:08.137 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:02:08.138 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:02:08.140 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:02:08.141 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:02:08.142 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:08.143 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:08.144 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:02:08.144 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:02:08.145 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:02:08.146 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:02:08.149 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:02:08.151 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:02:08.152 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:02:08.152 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:02:08.153 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:08.154 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 19:02:08.156 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:08.157 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 19:02:08.158 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:02:08.159 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:02:08.160 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:02:08.161 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:02:08.162 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:02:08.162 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:02:08.163 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:02:08.165 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 36.5076ms
2025-11-29 19:02:08.166 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:02:08.167 +02:00 [DBG] Connection id "0HNHFCB8HU7EL" completed keep alive response.
2025-11-29 19:02:08.168 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:02:08.168 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:08.169 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 19:02:08.171 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 57.1595ms
2025-11-29 19:02:19.308 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Patient - null null
2025-11-29 19:02:19.309 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient'
2025-11-29 19:02:19.310 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetAllPatients (Hospital)' with route pattern 'api/Patient' is valid for the request path '/api/Patient'
2025-11-29 19:02:19.312 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetAllPatients (Hospital)'
2025-11-29 19:02:19.312 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:02:19.313 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:02:19.313 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetAllPatients (Hospital)'
2025-11-29 19:02:19.316 +02:00 [INF] Route matched with {action = "GetAllPatients", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPatients() on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:02:19.317 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:02:19.318 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:02:19.319 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:02:19.320 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:02:19.321 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:02:19.322 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:02:19.323 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:02:19.326 +02:00 [INF] get all patient  called at "2025-11-29T19:02:19.3260461+02:00"
2025-11-29 19:02:19.327 +02:00 [INF] Fetching all patients
2025-11-29 19:02:19.328 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:02:19.330 +02:00 [DBG] Compiling query expression: 
'DbSet<Patient>()
    .Include(p => p.User)
    .Include(p => p.MedicalRecords)
    .ThenInclude(m => m.Doctor)
    .ThenInclude(d => d.User)'
2025-11-29 19:02:19.331 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-29 19:02:19.332 +02:00 [DBG] Including navigation: 'Patient.MedicalRecords'.
2025-11-29 19:02:19.333 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-11-29 19:02:19.333 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 19:02:19.344 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Patient>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: Patient.EmergencyContact (string) MaxLength(150), 2], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Patient.UserId (string) Required FK Index, 4] }
            1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 5], [Property: User.AccessFailedCount (int) Required, 6], [Property: User.ConcurrencyStamp (string) Concurrency, 7], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: User.DateOfBirth (DateOnly?), 9], [Property: User.Email (string) Index MaxLength(256), 10], [Property: User.EmailConfirmed (bool) Required, 11], [Property: User.FullName (string) Required MaxLength(150), 12], [Property: User.Gender (GenderType?) MaxLength(10), 13], [Property: User.LockoutEnabled (bool) Required, 14], [Property: User.LockoutEnd (DateTimeOffset?), 15], [Property: User.NormalizedEmail (string) Index MaxLength(256), 16], [Property: User.NormalizedUserName (string) Index MaxLength(256), 17], [Property: User.PasswordHash (string), 18], [Property: User.PhoneNumber (string), 19], [Property: User.PhoneNumberConfirmed (bool) Required, 20], [Property: User.RefreshToken (string), 21], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 22], [Property: User.Role (string) Required MaxLength(50), 23], [Property: User.SecurityStamp (string), 24], [Property: User.TwoFactorEnabled (bool) Required, 25], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: User.UserName (string) MaxLength(256), 27] }
            2 -> 0
            3 -> 5
            4 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 28], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 29], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: MedicalRecord.Diagnosis (string), 31], [Property: MedicalRecord.DoctorId (int) Required FK Index, 32], [Property: MedicalRecord.Notes (string), 33], [Property: MedicalRecord.PatientId (int) Required FK Index, 34], [Property: MedicalRecord.TreatmentPlan (string), 35], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 36] }
            5 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 37], [Property: Doctor.Available (bool?), 38], [Property: Doctor.Biography (string), 39], [Property: Doctor.ConsultationFees (decimal) Required, 40], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 41], [Property: Doctor.ExperienceYears (int?), 42], [Property: Doctor.ImageURL (string) MaxLength(300), 43], [Property: Doctor.SpecializationId (int) Required FK Index, 44], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Doctor.UserId (string) Required FK Index, 46] }
            6 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
            7 -> 28
            8 -> 37
            9 -> 47
        SELECT p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, t.RecordId, t.AppointmentId, t.CreatedAt, t.Diagnosis, t.DoctorId, t.Notes, t.PatientId, t.TreatmentPlan, t.UpdatedAt, t.DoctorId0, t.Available, t.Biography, t.ConsultationFees, t.CreatedAt0, t.ExperienceYears, t.ImageURL, t.SpecializationId, t.UpdatedAt0, t.UserId, t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt1, t.DateOfBirth, t.Email, t.EmailConfirmed, t.FullName, t.Gender, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.RefreshToken, t.RefreshTokenExpiryTime, t.Role, t.SecurityStamp, t.TwoFactorEnabled, t.UpdatedAt1, t.UserName
        FROM Patients AS p
        INNER JOIN Users AS u ON p.UserId == u.Id
        LEFT JOIN 
        (
            SELECT m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId AS DoctorId0, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt AS CreatedAt0, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt AS UpdatedAt0, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt AS CreatedAt1, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt AS UpdatedAt1, u0.UserName
            FROM MedicalRecords AS m
            INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
            INNER JOIN Users AS u0 ON d.UserId == u0.Id
        ) AS t ON p.PatientId == t.PatientId
        ORDER BY p.PatientId ASC, u.Id ASC, t.RecordId ASC, t.DoctorId0 ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Patient>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 19:02:19.346 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:02:19.346 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:02:19.347 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:19.348 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:19.349 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:02:19.349 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:02:19.350 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:02:19.351 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [t].[RecordId], [t].[AppointmentId], [t].[CreatedAt], [t].[Diagnosis], [t].[DoctorId], [t].[Notes], [t].[PatientId], [t].[TreatmentPlan], [t].[UpdatedAt], [t].[DoctorId0], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt0], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt0], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM [Patients] AS [p]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t] ON [p].[PatientId] = [t].[PatientId]
ORDER BY [p].[PatientId], [u].[Id], [t].[RecordId], [t].[DoctorId0]
2025-11-29 19:02:19.360 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [t].[RecordId], [t].[AppointmentId], [t].[CreatedAt], [t].[Diagnosis], [t].[DoctorId], [t].[Notes], [t].[PatientId], [t].[TreatmentPlan], [t].[UpdatedAt], [t].[DoctorId0], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt0], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt0], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt1], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt1], [t].[UserName]
FROM [Patients] AS [p]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t] ON [p].[PatientId] = [t].[PatientId]
ORDER BY [p].[PatientId], [u].[Id], [t].[RecordId], [t].[DoctorId0]
2025-11-29 19:02:19.362 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:02:19.363 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:02:19.364 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:02:19.365 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:02:19.366 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:02:19.367 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:02:19.368 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:19.368 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-11-29 19:02:19.369 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:19.370 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:02:19.371 +02:00 [INF] 2 patients retrieved successfully
2025-11-29 19:02:19.374 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:02:19.376 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:02:19.376 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:02:19.377 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:02:19.377 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:02:19.378 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Patient.PatientDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 19:02:19.379 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetAllPatients (Hospital) in 57.7718ms
2025-11-29 19:02:19.380 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetAllPatients (Hospital)'
2025-11-29 19:02:19.381 +02:00 [DBG] Connection id "0HNHFCB8HU7EL" completed keep alive response.
2025-11-29 19:02:19.382 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:02:19.383 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:19.384 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:02:19.384 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Patient - 200 null application/json; charset=utf-8 76.8515ms
2025-11-29 19:02:24.079 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:02:24.081 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:02:24.082 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:02:24.082 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:02:24.083 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:02:24.084 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:02:24.084 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:02:24.085 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:02:24.086 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:02:24.087 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:02:24.088 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:02:24.089 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:02:24.090 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:02:24.091 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:02:24.091 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:02:24.092 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:02:24.093 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:02:24.094 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:02:24.095 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:02:24.096 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:02:24.096 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:02:24.097 +02:00 [INF] get patient by id called at "2025-11-29T19:02:24.0978302+02:00"
2025-11-29 19:02:24.098 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:02:24.099 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:02:24.100 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:02:24.101 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:02:24.101 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:24.102 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:24.103 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:02:24.104 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:02:24.104 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:02:24.105 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:02:24.115 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:02:24.117 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:02:24.118 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:02:24.119 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:02:24.119 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:24.120 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 19:02:24.121 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:24.122 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:02:24.123 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:02:24.124 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:02:24.125 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:02:24.126 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:02:24.126 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:02:24.127 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:02:24.127 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:02:24.128 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 37.5787ms
2025-11-29 19:02:24.129 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:02:24.130 +02:00 [DBG] Connection id "0HNHFCB8HU7EL" completed keep alive response.
2025-11-29 19:02:24.130 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:02:24.131 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:02:24.132 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:02:24.133 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 53.9076ms
2025-11-29 19:04:34.802 +02:00 [DBG] Connection id "0HNHFCB8HU7EL" disconnecting.
2025-11-29 19:04:34.804 +02:00 [DBG] Connection id "0HNHFCB8HU7EL" stopped.
2025-11-29 19:04:34.805 +02:00 [DBG] Connection id "0HNHFCB8HU7EL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 19:16:42.159 +02:00 [DBG] Connection id "0HNHFCB8HU7EM" accepted.
2025-11-29 19:16:42.160 +02:00 [DBG] Connection id "0HNHFCB8HU7EM" started.
2025-11-29 19:16:42.162 +02:00 [DBG] Connection 0HNHFCB8HU7EM established using the following protocol: "Tls13"
2025-11-29 19:16:42.164 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:16:42.165 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:16:42.166 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:16:42.167 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:16:42.167 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:16:42.168 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:16:42.169 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:16:42.169 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:16:42.170 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:16:42.171 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:16:42.172 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:16:42.172 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:16:42.173 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:16:42.174 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:16:42.175 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:16:42.176 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:16:42.177 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:16:42.178 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:16:42.179 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:16:42.179 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:16:42.180 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:16:42.181 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:16:42.182 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:16:42.182 +02:00 [INF] get patient by id called at "2025-11-29T19:16:42.1828960+02:00"
2025-11-29 19:16:42.183 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:16:42.184 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:16:42.186 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:16:42.186 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:16:42.187 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:42.284 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:42.284 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:16:42.285 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:16:42.286 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:16:42.287 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:16:42.306 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:16:42.308 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:42.309 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:42.310 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:42.311 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:42.312 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-29 19:16:42.313 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:42.314 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:16:42.315 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:16:42.316 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:16:42.318 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:16:42.318 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:16:42.319 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:16:42.319 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:16:42.320 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:16:42.322 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 145.7155ms
2025-11-29 19:16:42.323 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:16:42.323 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:16:42.324 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:42.325 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:16:42.326 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 162.5862ms
2025-11-29 19:16:46.762 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 19:16:46.764 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 19:16:46.764 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 19:16:46.766 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 19:16:46.767 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:16:46.767 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:16:46.768 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:16:46.769 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:16:46.769 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 19:16:46.770 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 19:16:46.771 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:16:46.772 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:16:46.773 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:16:46.775 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:16:46.776 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:16:46.777 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 19:16:46.778 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 19:16:46.779 +02:00 [INF] get all schedule called at "2025-11-29T19:16:46.7792629+02:00"
2025-11-29 19:16:46.779 +02:00 [INF] Fetching all schedules
2025-11-29 19:16:46.780 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:16:46.782 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:16:46.783 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:16:46.784 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:46.785 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:46.785 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:16:46.786 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:16:46.787 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:16:46.788 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 19:16:46.798 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 19:16:46.800 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.800 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.801 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.802 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.803 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.804 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.805 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.806 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.806 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.807 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.808 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.809 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.810 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.811 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.811 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.812 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.813 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.814 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.815 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.816 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.817 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.818 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.819 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.819 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.820 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.821 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.822 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.823 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.824 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.824 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.825 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.826 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.827 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.828 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.829 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.830 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.830 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.831 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.832 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.833 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.834 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.835 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.836 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:46.836 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:46.837 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 37ms reading results.
2025-11-29 19:16:46.838 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:46.839 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:16:46.840 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:16:46.842 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:16:46.842 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:16:46.843 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:16:46.843 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:16:46.844 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 19:16:46.845 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 68.1327ms
2025-11-29 19:16:46.846 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 19:16:46.847 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:16:46.847 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:46.848 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:16:46.849 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 87.5994ms
2025-11-29 19:16:48.055 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:16:48.058 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:16:48.059 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:16:48.060 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:16:48.061 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:16:48.062 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:16:48.063 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:16:48.063 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:16:48.064 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:16:48.065 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:16:48.066 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:16:48.067 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:16:48.068 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:16:48.069 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:16:48.070 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:16:48.071 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:16:48.072 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:16:48.073 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:16:48.074 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:16:48.075 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:16:48.076 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:16:48.076 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:16:48.077 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:16:48.078 +02:00 [INF] get patient by id called at "2025-11-29T19:16:48.0785286+02:00"
2025-11-29 19:16:48.079 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:16:48.080 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:16:48.081 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:16:48.082 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:16:48.082 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:48.083 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:48.084 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:16:48.085 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:16:48.086 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:16:48.087 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:16:48.097 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:16:48.099 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:48.100 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:48.101 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:48.102 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:48.103 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 19:16:48.104 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:48.105 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:16:48.105 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:16:48.106 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:16:48.108 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:16:48.108 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:16:48.109 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:16:48.109 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:16:48.110 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:16:48.111 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 39.9227ms
2025-11-29 19:16:48.112 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:16:48.112 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:16:48.113 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:48.114 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 19:16:48.116 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 60.9294ms
2025-11-29 19:16:50.442 +02:00 [DBG] Connection id "0HNHFCB8HU7EM" received FIN.
2025-11-29 19:16:50.443 +02:00 [DBG] Connection id "0HNHFCB8HU7EM" is closed. The last processed stream ID was 5.
2025-11-29 19:16:50.443 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7EM completed.
2025-11-29 19:16:50.444 +02:00 [DBG] Connection id "0HNHFCB8HU7EM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 19:16:50.447 +02:00 [DBG] Connection id "0HNHFCB8HU7EM" stopped.
2025-11-29 19:16:50.557 +02:00 [DBG] Connection id "0HNHFCB8HU7EN" accepted.
2025-11-29 19:16:50.558 +02:00 [DBG] Connection id "0HNHFCB8HU7EN" started.
2025-11-29 19:16:50.563 +02:00 [DBG] Connection 0HNHFCB8HU7EN established using the following protocol: "Tls13"
2025-11-29 19:16:50.566 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:16:50.568 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:16:50.569 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:16:50.570 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:16:50.571 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:16:50.571 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:16:50.572 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:16:50.572 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:16:50.573 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:16:50.574 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:16:50.575 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:16:50.576 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:16:50.577 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:16:50.578 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:16:50.579 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:16:50.580 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:16:50.581 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:16:50.582 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:16:50.583 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:16:50.584 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:16:50.585 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:16:50.586 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:16:50.588 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:16:50.589 +02:00 [INF] get patient by id called at "2025-11-29T19:16:50.5893323+02:00"
2025-11-29 19:16:50.589 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:16:50.591 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:16:50.592 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:16:50.593 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:16:50.593 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:50.594 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:50.595 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:16:50.596 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:16:50.597 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:16:50.598 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:16:50.609 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:16:50.611 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:50.612 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:50.613 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:50.613 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:50.614 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 19:16:50.615 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:50.617 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 19:16:50.618 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:16:50.618 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:16:50.619 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:16:50.620 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:16:50.620 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:16:50.621 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:16:50.622 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:16:50.623 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 43.1148ms
2025-11-29 19:16:50.624 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:16:50.625 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:16:50.626 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:50.627 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:16:50.628 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 62.0364ms
2025-11-29 19:16:53.214 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:16:53.217 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:16:53.219 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:16:53.221 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:16:53.222 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:16:53.223 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:16:53.225 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:16:53.226 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:16:53.227 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:16:53.228 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:16:53.229 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:16:53.230 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:16:53.231 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:16:53.233 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:16:53.234 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:16:53.235 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:16:53.236 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:16:53.237 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:16:53.238 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:16:53.239 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:16:53.240 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:16:53.241 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:16:53.242 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:16:53.243 +02:00 [INF] get patient by id called at "2025-11-29T19:16:53.2434155+02:00"
2025-11-29 19:16:53.244 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:16:53.245 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:16:53.247 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:16:53.248 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:16:53.248 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:53.250 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:53.251 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:16:53.251 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:16:53.252 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:16:53.253 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:16:53.266 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:16:53.269 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:53.271 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:53.272 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:16:53.274 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:53.275 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-29 19:16:53.276 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:53.278 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 19:16:53.279 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:16:53.280 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:16:53.282 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:16:53.283 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:16:53.284 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:16:53.285 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:16:53.286 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:16:53.287 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 51.8581ms
2025-11-29 19:16:53.288 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:16:53.289 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:16:53.289 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:16:53.290 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:16:53.292 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 77.06ms
2025-11-29 19:17:40.280 +02:00 [DBG] Connection id "0HNHFCB8HU7EN" received FIN.
2025-11-29 19:17:40.281 +02:00 [DBG] Connection id "0HNHFCB8HU7EN" is closed. The last processed stream ID was 3.
2025-11-29 19:17:40.282 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7EN completed.
2025-11-29 19:17:40.283 +02:00 [DBG] Connection id "0HNHFCB8HU7EN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 19:17:40.285 +02:00 [DBG] Connection id "0HNHFCB8HU7EN" stopped.
2025-11-29 19:18:38.298 +02:00 [DBG] Connection id "0HNHFCB8HU7EO" received FIN.
2025-11-29 19:18:38.299 +02:00 [DBG] Connection id "0HNHFCB8HU7EO" accepted.
2025-11-29 19:18:38.299 +02:00 [DBG] Connection id "0HNHFCB8HU7EO" started.
2025-11-29 19:18:38.300 +02:00 [DBG] Connection id "0HNHFCB8HU7EP" accepted.
2025-11-29 19:18:38.300 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 19:18:38.301 +02:00 [DBG] Connection id "0HNHFCB8HU7EP" started.
2025-11-29 19:18:38.302 +02:00 [DBG] Connection id "0HNHFCB8HU7EO" stopped.
2025-11-29 19:18:38.303 +02:00 [DBG] Connection id "0HNHFCB8HU7EO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 19:18:38.305 +02:00 [DBG] Connection 0HNHFCB8HU7EP established using the following protocol: "Tls13"
2025-11-29 19:18:38.306 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7217/api/MedicalRecord/Create - application/json 153
2025-11-29 19:18:38.308 +02:00 [DBG] 1 candidate(s) found for the request path '/api/MedicalRecord/Create'
2025-11-29 19:18:38.308 +02:00 [DBG] Endpoint 'Hospital.Controllers.MedicalRecordController.Add (Hospital)' with route pattern 'api/MedicalRecord/Create' is valid for the request path '/api/MedicalRecord/Create'
2025-11-29 19:18:38.309 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.MedicalRecordController.Add (Hospital)'
2025-11-29 19:18:38.310 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:18:38.311 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:18:38.311 +02:00 [INF] Executing endpoint 'Hospital.Controllers.MedicalRecordController.Add (Hospital)'
2025-11-29 19:18:38.314 +02:00 [INF] Route matched with {action = "Add", controller = "MedicalRecord"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Hospital.Application.DTO.MedicalRecord.PatientMedicalRecordDto]] Add(Hospital.Application.DTO.MedicalRecord.AddMedicalRecordDto) on controller Hospital.Controllers.MedicalRecordController (Hospital).
2025-11-29 19:18:38.315 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:18:38.316 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:18:38.317 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:18:38.318 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:18:38.319 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:18:38.320 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.MedicalRecordController (Hospital)
2025-11-29 19:18:38.321 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.MedicalRecordController (Hospital)
2025-11-29 19:18:38.322 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.MedicalRecord.AddMedicalRecordDto' ...
2025-11-29 19:18:38.323 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.MedicalRecord.AddMedicalRecordDto' using the name '' in request data ...
2025-11-29 19:18:38.324 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 19:18:38.325 +02:00 [DBG] Connection id "0HNHFCB8HU7EP", Request id "0HNHFCB8HU7EP:00000001": started reading request body.
2025-11-29 19:18:38.326 +02:00 [DBG] Connection id "0HNHFCB8HU7EP", Request id "0HNHFCB8HU7EP:00000001": done reading request body.
2025-11-29 19:18:38.329 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.MedicalRecord.AddMedicalRecordDto'
2025-11-29 19:18:38.330 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.MedicalRecord.AddMedicalRecordDto'.
2025-11-29 19:18:38.330 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.MedicalRecord.AddMedicalRecordDto'.
2025-11-29 19:18:38.331 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.MedicalRecord.AddMedicalRecordDto' ...
2025-11-29 19:18:38.333 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.MedicalRecord.AddMedicalRecordDto'.
2025-11-29 19:18:38.334 +02:00 [INF] add medical record  called at "2025-11-29T19:18:38.3342179+02:00"
2025-11-29 19:18:38.336 +02:00 [INF] Adding medical record for DoctorId 1, PatientId 2, AppointmentId 1
2025-11-29 19:18:38.337 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 19:18:38.338 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:18:38.339 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:18:38.340 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:18:38.340 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.341 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.342 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:18:38.343 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:18:38.344 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:18:38.344 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 19:18:38.355 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 19:18:38.356 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.357 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.358 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.359 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.360 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.361 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.362 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.363 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.363 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.364 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.365 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.366 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.367 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-29 19:18:38.368 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.369 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:18:38.370 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:18:38.371 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.372 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.372 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:18:38.373 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:18:38.374 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:18:38.375 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:18:38.384 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:18:38.386 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.386 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.388 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.388 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.389 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 19:18:38.390 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.391 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:18:38.392 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:18:38.394 +02:00 [INF] Fetching appointment by ID: 1
2025-11-29 19:18:38.396 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)
    .FirstOrDefault(a => a.AppointmentId == __id_0)'
2025-11-29 19:18:38.398 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-29 19:18:38.399 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-29 19:18:38.399 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-29 19:18:38.408 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Appointment>(
    asyncEnumerable: new SingleQueryingEnumerable<Appointment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 9], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
                1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Patient.EmergencyContact (string) MaxLength(150), 14], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Patient.UserId (string) Required FK Index, 16] }
                2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: Doctor.Available (bool?), 18], [Property: Doctor.Biography (string), 19], [Property: Doctor.ConsultationFees (decimal) Required, 20], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: Doctor.ExperienceYears (int?), 22], [Property: Doctor.ImageURL (string) MaxLength(300), 23], [Property: Doctor.SpecializationId (int) Required FK Index, 24], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 25], [Property: Doctor.UserId (string) Required FK Index, 26] }
                3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: Branch.Address (string) MaxLength(250), 28], [Property: Branch.BranchName (string) Required MaxLength(150), 29], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: Branch.Description (string), 31], [Property: Branch.Email (string) MaxLength(200), 32], [Property: Branch.ImageURL (string) MaxLength(300), 33], [Property: Branch.Latitude (double?), 34], [Property: Branch.Longitude (double?), 35], [Property: Branch.Phone (string) MaxLength(25), 36], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37] }
            SELECT TOP(1) a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM Appointments AS a
            INNER JOIN Patients AS p ON a.PatientId == p.PatientId
            INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
            INNER JOIN Branches AS b ON a.BranchId == b.BranchId
            WHERE a.AppointmentId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 19:18:38.409 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.410 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.411 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:18:38.412 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:18:38.413 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:18:38.414 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[AppointmentId] = @__id_0
2025-11-29 19:18:38.420 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[AppointmentId] = @__id_0
2025-11-29 19:18:38.428 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.429 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.439 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.440 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.441 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.442 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 20ms reading results.
2025-11-29 19:18:38.443 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.443 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:18:38.461 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'MedicalRecord.RecordId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.470 +02:00 [DBG] The navigation 'MedicalRecord.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.472 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.473 +02:00 [DBG] The navigation 'MedicalRecord.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.475 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.476 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 19:18:38.509 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 19:18:38.511 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 19:18:38.512 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 19:18:38.513 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 19:18:38.522 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.523 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.524 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:18:38.524 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:18:38.525 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:18:38.526 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [MedicalRecords] ([AppointmentId], [CreatedAt], [Diagnosis], [DoctorId], [Notes], [PatientId], [TreatmentPlan], [UpdatedAt])
OUTPUT INSERTED.[RecordId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-29 19:18:38.538 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [MedicalRecords] ([AppointmentId], [CreatedAt], [Diagnosis], [DoctorId], [Notes], [PatientId], [TreatmentPlan], [UpdatedAt])
OUTPUT INSERTED.[RecordId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-29 19:18:38.543 +02:00 [DBG] The foreign key property 'MedicalRecord.RecordId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 19:18:38.546 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.547 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-29 19:18:38.548 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.549 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:18:38.551 +02:00 [DBG] An entity of type 'MedicalRecord' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:18:38.552 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 19:18:38.555 +02:00 [DBG] Compiling query expression: 
'DbSet<MedicalRecord>()
    .Include(r => r.Doctor)
    .ThenInclude(d => d.User)
    .Include(r => r.Patient)
    .ThenInclude(p => p.User)
    .Include(r => r.Appointment)
    .ThenInclude(a => a.Branch)
    .FirstOrDefault(r => r.RecordId == __id_0)'
2025-11-29 19:18:38.556 +02:00 [DBG] Including navigation: 'MedicalRecord.Doctor'.
2025-11-29 19:18:38.557 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 19:18:38.558 +02:00 [DBG] Including navigation: 'MedicalRecord.Patient'.
2025-11-29 19:18:38.559 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-29 19:18:38.560 +02:00 [DBG] Including navigation: 'MedicalRecord.Appointment'.
2025-11-29 19:18:38.561 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-29 19:18:38.579 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<MedicalRecord>(
    asyncEnumerable: new SingleQueryingEnumerable<MedicalRecord>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: MedicalRecord.RecordId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: MedicalRecord.AppointmentId (int) Required FK Index, 1], [Property: MedicalRecord.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: MedicalRecord.Diagnosis (string), 3], [Property: MedicalRecord.DoctorId (int) Required FK Index, 4], [Property: MedicalRecord.Notes (string), 5], [Property: MedicalRecord.PatientId (int) Required FK Index, 6], [Property: MedicalRecord.TreatmentPlan (string), 7], [Property: MedicalRecord.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
                1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
                2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
                3 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Patient.EmergencyContact (string) MaxLength(150), 44], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 45], [Property: Patient.UserId (string) Required FK Index, 46] }
                4 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 47], [Property: User.AccessFailedCount (int) Required, 48], [Property: User.ConcurrencyStamp (string) Concurrency, 49], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 50], [Property: User.DateOfBirth (DateOnly?), 51], [Property: User.Email (string) Index MaxLength(256), 52], [Property: User.EmailConfirmed (bool) Required, 53], [Property: User.FullName (string) Required MaxLength(150), 54], [Property: User.Gender (GenderType?) MaxLength(10), 55], [Property: User.LockoutEnabled (bool) Required, 56], [Property: User.LockoutEnd (DateTimeOffset?), 57], [Property: User.NormalizedEmail (string) Index MaxLength(256), 58], [Property: User.NormalizedUserName (string) Index MaxLength(256), 59], [Property: User.PasswordHash (string), 60], [Property: User.PhoneNumber (string), 61], [Property: User.PhoneNumberConfirmed (bool) Required, 62], [Property: User.RefreshToken (string), 63], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 64], [Property: User.Role (string) Required MaxLength(50), 65], [Property: User.SecurityStamp (string), 66], [Property: User.TwoFactorEnabled (bool) Required, 67], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 68], [Property: User.UserName (string) MaxLength(256), 69] }
                5 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 70], [Property: Appointment.BranchId (int) Required FK Index, 71], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 72], [Property: Appointment.CreatedBy (string) FK Index, 73], [Property: Appointment.Date (DateOnly) Required, 74], [Property: Appointment.DoctorId (int) Required FK Index, 75], [Property: Appointment.Notes (string), 76], [Property: Appointment.PatientId (int) Required FK Index, 77], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 78], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 79], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 80], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 81] }
                6 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 82], [Property: Branch.Address (string) MaxLength(250), 83], [Property: Branch.BranchName (string) Required MaxLength(150), 84], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 85], [Property: Branch.Description (string), 86], [Property: Branch.Email (string) MaxLength(200), 87], [Property: Branch.ImageURL (string) MaxLength(300), 88], [Property: Branch.Latitude (double?), 89], [Property: Branch.Longitude (double?), 90], [Property: Branch.Phone (string) MaxLength(25), 91], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 92] }
            SELECT TOP(1) m.RecordId, m.AppointmentId, m.CreatedAt, m.Diagnosis, m.DoctorId, m.Notes, m.PatientId, m.TreatmentPlan, m.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt, u0.UserName, a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM MedicalRecords AS m
            INNER JOIN Doctors AS d ON m.DoctorId == d.DoctorId
            INNER JOIN Users AS u ON d.UserId == u.Id
            INNER JOIN Patients AS p ON m.PatientId == p.PatientId
            INNER JOIN Users AS u0 ON p.UserId == u0.Id
            INNER JOIN Appointments AS a ON m.AppointmentId == a.AppointmentId
            INNER JOIN Branches AS b ON a.BranchId == b.BranchId
            WHERE m.RecordId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, MedicalRecord>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 19:18:38.582 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.584 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.585 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:18:38.586 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:18:38.587 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 19:18:38.589 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName], [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [MedicalRecords] AS [m]
INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Patients] AS [p] ON [m].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u0] ON [p].[UserId] = [u0].[Id]
INNER JOIN [Appointments] AS [a] ON [m].[AppointmentId] = [a].[AppointmentId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [m].[RecordId] = @__id_0
2025-11-29 19:18:38.609 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName], [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [MedicalRecords] AS [m]
INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Patients] AS [p] ON [m].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u0] ON [p].[UserId] = [u0].[Id]
INNER JOIN [Appointments] AS [a] ON [m].[AppointmentId] = [a].[AppointmentId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [m].[RecordId] = @__id_0
2025-11-29 19:18:38.613 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.616 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 19:18:38.617 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.618 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 19:18:38.620 +02:00 [INF] Medical record added successfully with RecordId 1
2025-11-29 19:18:38.626 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:18:38.628 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:18:38.628 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:18:38.629 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:18:38.630 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:18:38.631 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.MedicalRecord.MedicalRecordDto'.
2025-11-29 19:18:38.641 +02:00 [INF] Executed action Hospital.Controllers.MedicalRecordController.Add (Hospital) in 321.6904ms
2025-11-29 19:18:38.642 +02:00 [INF] Executed endpoint 'Hospital.Controllers.MedicalRecordController.Add (Hospital)'
2025-11-29 19:18:38.643 +02:00 [DBG] Connection id "0HNHFCB8HU7EP" completed keep alive response.
2025-11-29 19:18:38.644 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:18:38.645 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:18:38.646 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:18:38.647 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7217/api/MedicalRecord/Create - 200 null application/json; charset=utf-8 341.0486ms
2025-11-29 19:20:49.316 +02:00 [DBG] Connection id "0HNHFCB8HU7EP" disconnecting.
2025-11-29 19:20:49.318 +02:00 [DBG] Connection id "0HNHFCB8HU7EP" stopped.
2025-11-29 19:20:49.319 +02:00 [DBG] Connection id "0HNHFCB8HU7EP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 19:22:36.417 +02:00 [DBG] Connection id "0HNHFCB8HU7EQ" accepted.
2025-11-29 19:22:36.418 +02:00 [DBG] Connection id "0HNHFCB8HU7EQ" started.
2025-11-29 19:22:36.421 +02:00 [DBG] Connection 0HNHFCB8HU7EQ established using the following protocol: "Tls13"
2025-11-29 19:22:36.423 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:22:36.425 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:22:36.425 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:22:36.427 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:22:36.427 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:22:36.428 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:22:36.429 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:22:36.429 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:22:36.430 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:22:36.431 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:22:36.432 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:22:36.433 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:22:36.434 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:22:36.436 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:22:36.437 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:22:36.438 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:22:36.439 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:22:36.440 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:22:36.441 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:22:36.442 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:22:36.443 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:22:36.444 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:22:36.446 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:22:36.447 +02:00 [INF] get patient by id called at "2025-11-29T19:22:36.4473076+02:00"
2025-11-29 19:22:36.448 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:22:36.449 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:22:36.451 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:22:36.452 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:22:36.453 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:22:36.486 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:22:36.487 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:22:36.488 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:22:36.489 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:22:36.490 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:22:36.507 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:22:36.509 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:22:36.510 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:22:36.510 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:22:36.512 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:22:36.513 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:22:36.514 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:22:36.515 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:22:36.516 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:22:36.517 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:22:36.517 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-29 19:22:36.518 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:22:36.519 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:22:36.520 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:22:36.521 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:22:36.523 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:22:36.523 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:22:36.524 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:22:36.524 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:22:36.525 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:22:36.526 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 88.6839ms
2025-11-29 19:22:36.527 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:22:36.528 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:22:36.529 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:22:36.530 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:22:36.531 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 107.9237ms
2025-11-29 19:24:09.518 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:24:09.521 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:24:09.522 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:24:09.524 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:24:09.525 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:24:09.526 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:24:09.528 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:24:09.529 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:24:09.530 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:24:09.531 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:24:09.533 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:24:09.535 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:24:09.537 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:24:09.539 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:24:09.541 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:24:09.542 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:24:09.545 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:24:09.546 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:24:09.548 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:24:09.550 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:24:09.551 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:24:09.552 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:24:09.554 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:24:09.555 +02:00 [INF] get patient by id called at "2025-11-29T19:24:09.5558607+02:00"
2025-11-29 19:24:09.557 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:24:09.558 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:24:09.561 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:24:09.561 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:24:09.563 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:24:09.564 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:24:09.566 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:24:09.567 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:24:09.568 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 19:24:09.570 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:24:09.589 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:24:09.592 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:09.593 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:09.595 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:09.596 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:09.597 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:09.598 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:09.599 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:09.600 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:09.601 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:24:09.603 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-29 19:24:09.604 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:24:09.605 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 19:24:09.607 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:24:09.608 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:24:09.609 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:24:09.610 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:24:09.611 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:24:09.611 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:24:09.612 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:24:09.613 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 70.9866ms
2025-11-29 19:24:09.614 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:24:09.615 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:24:09.616 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:24:09.617 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 19:24:09.619 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 100.3496ms
2025-11-29 19:24:13.235 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:24:13.237 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:24:13.238 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:24:13.239 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:24:13.240 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:24:13.241 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:24:13.241 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:24:13.242 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:24:13.243 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:24:13.244 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:24:13.246 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:24:13.248 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:24:13.249 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:24:13.250 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:24:13.251 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:24:13.252 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:24:13.253 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:24:13.254 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:24:13.255 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:24:13.256 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:24:13.257 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:24:13.259 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:24:13.260 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:24:13.261 +02:00 [INF] get patient by id called at "2025-11-29T19:24:13.2611135+02:00"
2025-11-29 19:24:13.262 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:24:13.263 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:24:13.265 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:24:13.266 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:24:13.267 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:24:13.268 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:24:13.269 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:24:13.270 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:24:13.271 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 19:24:13.272 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:24:13.275 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:24:13.277 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:13.278 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:13.279 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:13.280 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:13.281 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:13.282 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:13.283 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:13.284 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:24:13.285 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:24:13.286 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-29 19:24:13.287 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:24:13.288 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:24:13.289 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:24:13.289 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:24:13.290 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:24:13.291 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:24:13.291 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:24:13.292 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:24:13.293 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:24:13.294 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 41.8137ms
2025-11-29 19:24:13.295 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:24:13.295 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:24:13.296 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:24:13.297 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:24:13.298 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 62.6489ms
2025-11-29 19:26:24.493 +02:00 [DBG] Connection id "0HNHFCB8HU7EQ" is closing.
2025-11-29 19:26:24.495 +02:00 [DBG] Connection id "0HNHFCB8HU7EQ" is closed. The last processed stream ID was 5.
2025-11-29 19:26:24.496 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7EQ completed.
2025-11-29 19:26:24.496 +02:00 [DBG] Connection id "0HNHFCB8HU7EQ" received FIN.
2025-11-29 19:26:24.497 +02:00 [DBG] Connection id "0HNHFCB8HU7EQ" stopped.
2025-11-29 19:26:24.498 +02:00 [DBG] Connection id "0HNHFCB8HU7EQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 19:31:15.155 +02:00 [DBG] Connection id "0HNHFCB8HU7ER" accepted.
2025-11-29 19:31:15.156 +02:00 [DBG] Connection id "0HNHFCB8HU7ER" started.
2025-11-29 19:31:15.160 +02:00 [DBG] Connection 0HNHFCB8HU7ER established using the following protocol: "Tls13"
2025-11-29 19:31:15.161 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:31:15.164 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:31:15.165 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:31:15.166 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:31:15.167 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:31:15.168 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:31:15.169 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:31:15.170 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:31:15.171 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:31:15.172 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:31:15.173 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:31:15.174 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:31:15.175 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:31:15.177 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:31:15.178 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:31:15.179 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:31:15.180 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:31:15.182 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:31:15.183 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:31:15.184 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:31:15.185 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:31:15.186 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:31:15.187 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:31:15.188 +02:00 [INF] get patient by id called at "2025-11-29T19:31:15.1885996+02:00"
2025-11-29 19:31:15.189 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:31:15.190 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:31:15.192 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:31:15.193 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:31:15.193 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:31:15.233 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:31:15.234 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:31:15.235 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:31:15.235 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:31:15.236 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:31:15.256 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:31:15.258 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:31:15.259 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:31:15.260 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:31:15.261 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:31:15.262 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:31:15.263 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:31:15.263 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:31:15.264 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:31:15.265 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:31:15.266 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-29 19:31:15.268 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:31:15.268 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:31:15.269 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:31:15.270 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:31:15.272 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:31:15.273 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:31:15.273 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:31:15.274 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:31:15.275 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:31:15.277 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 97.6318ms
2025-11-29 19:31:15.278 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:31:15.279 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:31:15.280 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:31:15.281 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 19:31:15.282 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 120.7325ms
2025-11-29 19:32:40.511 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:32:40.514 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:32:40.516 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:32:40.517 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:32:40.518 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:32:40.520 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:32:40.521 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:32:40.522 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:32:40.523 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:32:40.524 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:32:40.526 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:32:40.528 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:32:40.530 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:32:40.532 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:32:40.534 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:32:40.536 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:32:40.537 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:32:40.538 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:32:40.540 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:32:40.541 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:32:40.542 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:32:40.543 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:32:40.545 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:32:40.546 +02:00 [INF] get patient by id called at "2025-11-29T19:32:40.5462706+02:00"
2025-11-29 19:32:40.547 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:32:40.548 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:32:40.551 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:32:40.551 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:32:40.552 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:32:40.554 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:32:40.555 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:32:40.556 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:32:40.558 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 19:32:40.559 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:32:40.573 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:32:40.575 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:40.576 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:40.577 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:40.578 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:40.579 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:40.580 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:40.581 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:40.582 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:40.583 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:32:40.584 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-29 19:32:40.585 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:32:40.586 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:32:40.588 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:32:40.588 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:32:40.590 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:32:40.591 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:32:40.591 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:32:40.592 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:32:40.593 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:32:40.594 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 58.4536ms
2025-11-29 19:32:40.595 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:32:40.596 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:32:40.597 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:32:40.598 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 19:32:40.599 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 87.9428ms
2025-11-29 19:32:58.002 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 19:32:58.004 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 19:32:58.005 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 19:32:58.005 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 19:32:58.006 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:32:58.007 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:32:58.008 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:32:58.008 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:32:58.009 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 19:32:58.010 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 19:32:58.012 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:32:58.013 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:32:58.014 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:32:58.015 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:32:58.017 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:32:58.018 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 19:32:58.019 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 19:32:58.020 +02:00 [INF] get all schedule called at "2025-11-29T19:32:58.0201422+02:00"
2025-11-29 19:32:58.020 +02:00 [INF] Fetching all schedules
2025-11-29 19:32:58.021 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:32:58.023 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:32:58.023 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:32:58.024 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:32:58.025 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:32:58.025 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:32:58.026 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:32:58.027 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:32:58.028 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 19:32:58.036 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 19:32:58.038 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.039 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.040 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.041 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.041 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.042 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.043 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.044 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.045 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.046 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.047 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.048 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.048 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.049 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.050 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.051 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.052 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.053 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.054 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.055 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.056 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.057 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.058 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.058 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.059 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.060 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.061 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.062 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.062 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.063 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.064 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.065 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.066 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.067 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.067 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.069 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.069 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.070 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.071 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.072 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.073 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.074 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.074 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:32:58.075 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:32:58.076 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 37ms reading results.
2025-11-29 19:32:58.077 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:32:58.078 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 19:32:58.079 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:32:58.081 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:32:58.081 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:32:58.082 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:32:58.082 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:32:58.083 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 19:32:58.084 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 66.1695ms
2025-11-29 19:32:58.085 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 19:32:58.086 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:32:58.086 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:32:58.087 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:32:58.088 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 85.8492ms
2025-11-29 19:33:00.592 +02:00 [DBG] Connection id "0HNHFCB8HU7ER" received FIN.
2025-11-29 19:33:00.593 +02:00 [DBG] Connection id "0HNHFCB8HU7ER" is closed. The last processed stream ID was 5.
2025-11-29 19:33:00.593 +02:00 [DBG] Connection id "0HNHFCB8HU7ER" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 19:33:00.595 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7ER completed.
2025-11-29 19:33:00.596 +02:00 [DBG] Connection id "0HNHFCB8HU7ER" stopped.
2025-11-29 19:33:28.175 +02:00 [DBG] Connection id "0HNHFCB8HU7ES" accepted.
2025-11-29 19:33:28.176 +02:00 [DBG] Connection id "0HNHFCB8HU7ES" started.
2025-11-29 19:33:28.180 +02:00 [DBG] Connection 0HNHFCB8HU7ES established using the following protocol: "Tls13"
2025-11-29 19:33:28.181 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:33:28.183 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:33:28.184 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:33:28.185 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:33:28.186 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:33:28.186 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:33:28.187 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:33:28.188 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:33:28.188 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:33:28.190 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:33:28.192 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:33:28.193 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:33:28.194 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:33:28.196 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:33:28.197 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:33:28.198 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:33:28.199 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:33:28.200 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:33:28.201 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:33:28.202 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:33:28.203 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:33:28.204 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:33:28.205 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:33:28.206 +02:00 [INF] get patient by id called at "2025-11-29T19:33:28.2062815+02:00"
2025-11-29 19:33:28.206 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:33:28.207 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:33:28.209 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:33:28.209 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:33:28.210 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:33:28.211 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:33:28.212 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:33:28.212 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:33:28.213 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:33:28.214 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:33:28.225 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:33:28.227 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:33:28.228 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:33:28.229 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:33:28.230 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:33:28.230 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:33:28.232 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:33:28.233 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:33:28.234 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:33:28.235 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:33:28.235 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-29 19:33:28.236 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:33:28.237 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:33:28.238 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:33:28.239 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:33:28.240 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:33:28.241 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:33:28.241 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:33:28.242 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:33:28.243 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:33:28.244 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 45.3918ms
2025-11-29 19:33:28.245 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:33:28.245 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:33:28.246 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:33:28.247 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:33:28.248 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 67.0582ms
2025-11-29 19:35:39.787 +02:00 [DBG] Connection id "0HNHFCB8HU7ES" is closing.
2025-11-29 19:35:39.788 +02:00 [DBG] Connection id "0HNHFCB8HU7ES" is closed. The last processed stream ID was 1.
2025-11-29 19:35:39.790 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7ES completed.
2025-11-29 19:35:39.790 +02:00 [DBG] Connection id "0HNHFCB8HU7ES" received FIN.
2025-11-29 19:35:39.790 +02:00 [DBG] Connection id "0HNHFCB8HU7ES" stopped.
2025-11-29 19:35:39.792 +02:00 [DBG] Connection id "0HNHFCB8HU7ES" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 19:42:43.865 +02:00 [DBG] Connection id "0HNHFCB8HU7ET" accepted.
2025-11-29 19:42:43.866 +02:00 [DBG] Connection id "0HNHFCB8HU7ET" started.
2025-11-29 19:42:43.870 +02:00 [DBG] Connection 0HNHFCB8HU7ET established using the following protocol: "Tls13"
2025-11-29 19:42:43.871 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 19:42:43.873 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 19:42:43.874 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 19:42:43.875 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 19:42:43.876 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:42:43.877 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:42:43.878 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:42:43.878 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:42:43.879 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 19:42:43.880 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 19:42:43.882 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:42:43.884 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:42:43.885 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:42:43.886 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:42:43.887 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:42:43.889 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 19:42:43.890 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 19:42:43.891 +02:00 [INF] get all schedule called at "2025-11-29T19:42:43.8914134+02:00"
2025-11-29 19:42:43.892 +02:00 [INF] Fetching all schedules
2025-11-29 19:42:43.893 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:42:43.894 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:42:43.896 +02:00 [DBG] Created DbConnection. (1ms).
2025-11-29 19:42:43.897 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:42:43.951 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:42:43.953 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:42:43.953 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:42:43.954 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:42:43.955 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 19:42:43.970 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 19:42:43.972 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.973 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.973 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.974 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.975 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.976 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.977 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.978 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.979 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.979 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.980 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.981 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.982 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.983 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.984 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.985 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.986 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.987 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.988 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.988 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.989 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.990 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.991 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.992 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.993 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.994 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.995 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.996 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.996 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.997 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:43.999 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:44.000 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:44.000 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:44.001 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:44.002 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:44.003 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:44.004 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:44.005 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:44.005 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:44.007 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:44.007 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:44.008 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:44.009 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:44.010 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:42:44.010 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 38ms reading results.
2025-11-29 19:42:44.011 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:42:44.012 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:42:44.013 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:42:44.014 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:42:44.015 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:42:44.015 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:42:44.016 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:42:44.017 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 19:42:44.018 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 128.9568ms
2025-11-29 19:42:44.018 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 19:42:44.019 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:42:44.020 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:42:44.021 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:42:44.022 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 150.7584ms
2025-11-29 19:42:45.690 +02:00 [DBG] Connection id "0HNHFCB8HU7ET" received FIN.
2025-11-29 19:42:45.691 +02:00 [DBG] Connection id "0HNHFCB8HU7ET" is closed. The last processed stream ID was 1.
2025-11-29 19:42:45.691 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7ET completed.
2025-11-29 19:42:45.692 +02:00 [DBG] Connection id "0HNHFCB8HU7ET" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 19:42:45.695 +02:00 [DBG] Connection id "0HNHFCB8HU7ET" stopped.
2025-11-29 19:42:45.714 +02:00 [DBG] Connection id "0HNHFCB8HU7EU" accepted.
2025-11-29 19:42:45.715 +02:00 [DBG] Connection id "0HNHFCB8HU7EU" started.
2025-11-29 19:42:45.717 +02:00 [DBG] Connection 0HNHFCB8HU7EU established using the following protocol: "Tls13"
2025-11-29 19:42:45.718 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:42:45.720 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:42:45.721 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:42:45.722 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:42:45.722 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:42:45.723 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:42:45.723 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:42:45.724 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:42:45.725 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:42:45.725 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:42:45.726 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:42:45.727 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:42:45.728 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:42:45.729 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:42:45.730 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:42:45.731 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:42:45.732 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:42:45.733 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:42:45.734 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:42:45.735 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:42:45.736 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:42:45.736 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:42:45.737 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:42:45.738 +02:00 [INF] get patient by id called at "2025-11-29T19:42:45.7387094+02:00"
2025-11-29 19:42:45.739 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:42:45.740 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:42:45.742 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:42:45.742 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:42:45.743 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:42:45.744 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:42:45.746 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:42:45.747 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:42:45.748 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:42:45.749 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:42:45.761 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:42:45.763 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:45.764 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:45.765 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:45.766 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:45.767 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:45.768 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:45.769 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:45.770 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:42:45.770 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:42:45.771 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-29 19:42:45.772 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:42:45.773 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 19:42:45.775 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:42:45.775 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:42:45.777 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:42:45.777 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:42:45.778 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:42:45.778 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:42:45.779 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:42:45.780 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 49.2809ms
2025-11-29 19:42:45.781 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:42:45.782 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:42:45.783 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:42:45.784 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:42:45.785 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 66.5434ms
2025-11-29 19:44:57.093 +02:00 [DBG] Connection id "0HNHFCB8HU7EU" is closing.
2025-11-29 19:44:57.095 +02:00 [DBG] Connection id "0HNHFCB8HU7EU" is closed. The last processed stream ID was 1.
2025-11-29 19:44:57.096 +02:00 [DBG] Connection id "0HNHFCB8HU7EU" received FIN.
2025-11-29 19:44:57.096 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7EU completed.
2025-11-29 19:44:57.097 +02:00 [DBG] Connection id "0HNHFCB8HU7EU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 19:44:57.099 +02:00 [DBG] Connection id "0HNHFCB8HU7EU" stopped.
2025-11-29 19:55:10.604 +02:00 [DBG] Connection id "0HNHFCB8HU7EV" accepted.
2025-11-29 19:55:10.605 +02:00 [DBG] Connection id "0HNHFCB8HU7EV" started.
2025-11-29 19:55:10.610 +02:00 [DBG] Connection 0HNHFCB8HU7EV established using the following protocol: "Tls13"
2025-11-29 19:55:10.611 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:55:10.613 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:55:10.614 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:55:10.615 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:55:10.615 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:55:10.616 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:55:10.616 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:55:10.617 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:55:10.618 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:55:10.619 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:55:10.620 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:55:10.621 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:55:10.622 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:55:10.623 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:55:10.624 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:55:10.625 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:55:10.626 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:55:10.627 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:55:10.628 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:55:10.629 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:55:10.629 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:55:10.630 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:55:10.631 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:55:10.632 +02:00 [INF] get patient by id called at "2025-11-29T19:55:10.6324327+02:00"
2025-11-29 19:55:10.633 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:55:10.633 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:55:10.635 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:55:10.635 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:55:10.636 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:55:10.696 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:55:10.697 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:55:10.697 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:55:10.698 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:55:10.699 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:55:10.721 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:55:10.723 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:55:10.724 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:55:10.725 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:55:10.726 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:55:10.727 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:55:10.728 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:55:10.729 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:55:10.730 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:55:10.731 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:55:10.732 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-29 19:55:10.733 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:55:10.734 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:55:10.735 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:55:10.735 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:55:10.737 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:55:10.737 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:55:10.738 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:55:10.738 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:55:10.739 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:55:10.740 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 114.9679ms
2025-11-29 19:55:10.741 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:55:10.742 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:55:10.742 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:55:10.743 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:55:10.744 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 133.2531ms
2025-11-29 19:55:10.812 +02:00 [DBG] Connection id "0HNHFCB8HU7EV" received FIN.
2025-11-29 19:55:10.813 +02:00 [DBG] Connection id "0HNHFCB8HU7EV" is closed. The last processed stream ID was 1.
2025-11-29 19:55:10.813 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7EV completed.
2025-11-29 19:55:10.814 +02:00 [DBG] Connection id "0HNHFCB8HU7EV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 19:55:10.816 +02:00 [DBG] Connection id "0HNHFCB8HU7EV" stopped.
2025-11-29 19:56:12.833 +02:00 [DBG] Connection id "0HNHFCB8HU7F0" accepted.
2025-11-29 19:56:12.834 +02:00 [DBG] Connection id "0HNHFCB8HU7F0" started.
2025-11-29 19:56:12.837 +02:00 [DBG] Connection 0HNHFCB8HU7F0 established using the following protocol: "Tls13"
2025-11-29 19:56:12.838 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:56:12.839 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:56:12.840 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:56:12.841 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:56:12.842 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:56:12.842 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:56:12.843 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:56:12.844 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:56:12.844 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:56:12.845 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:56:12.846 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:56:12.847 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:56:12.848 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:56:12.849 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:56:12.850 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:56:12.851 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:56:12.852 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:56:12.853 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:56:12.854 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:56:12.855 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:56:12.856 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:56:12.857 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:56:12.857 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:56:12.858 +02:00 [INF] get patient by id called at "2025-11-29T19:56:12.8586437+02:00"
2025-11-29 19:56:12.859 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:56:12.860 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:56:12.861 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:56:12.862 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:56:12.863 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:56:12.864 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:56:12.865 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:56:12.865 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:56:12.866 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:56:12.867 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:56:14.759 +02:00 [INF] Executed DbCommand (1,892ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:56:14.762 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:56:14.763 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:56:14.764 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:56:14.765 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:56:14.766 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:56:14.767 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:56:14.768 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:56:14.769 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:56:14.770 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:56:14.771 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-29 19:56:14.772 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:56:14.773 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 19:56:14.774 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:56:14.775 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:56:14.777 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:56:14.777 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:56:14.778 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:56:14.779 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:56:14.780 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:56:14.781 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 1929.501ms
2025-11-29 19:56:14.782 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:56:14.782 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:56:14.783 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:56:14.784 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 19:56:14.785 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 1946.9695ms
2025-11-29 19:57:26.672 +02:00 [DBG] Connection id "0HNHFCB8HU7F0" received FIN.
2025-11-29 19:57:26.673 +02:00 [DBG] Connection id "0HNHFCB8HU7F0" is closed. The last processed stream ID was 1.
2025-11-29 19:57:26.673 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7F0 completed.
2025-11-29 19:57:26.674 +02:00 [DBG] Connection id "0HNHFCB8HU7F0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 19:57:26.676 +02:00 [DBG] Connection id "0HNHFCB8HU7F0" stopped.
2025-11-29 19:59:54.069 +02:00 [DBG] Connection id "0HNHFCB8HU7F1" accepted.
2025-11-29 19:59:54.071 +02:00 [DBG] Connection id "0HNHFCB8HU7F1" started.
2025-11-29 19:59:54.074 +02:00 [DBG] Connection 0HNHFCB8HU7F1 established using the following protocol: "Tls13"
2025-11-29 19:59:54.075 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 19:59:54.077 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 19:59:54.078 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 19:59:54.079 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:59:54.079 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 19:59:54.080 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 19:59:54.080 +02:00 [INF] CORS policy execution successful.
2025-11-29 19:59:54.081 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 19:59:54.082 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:59:54.083 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 19:59:54.084 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 19:59:54.085 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 19:59:54.085 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 19:59:54.086 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 19:59:54.087 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 19:59:54.088 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:59:54.089 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 19:59:54.090 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 19:59:54.091 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 19:59:54.092 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:59:54.094 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 19:59:54.094 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 19:59:54.096 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 19:59:54.097 +02:00 [INF] get patient by id called at "2025-11-29T19:59:54.0975708+02:00"
2025-11-29 19:59:54.098 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 19:59:54.099 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 19:59:54.100 +02:00 [DBG] Creating DbConnection.
2025-11-29 19:59:54.101 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 19:59:54.102 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:59:54.102 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:59:54.103 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 19:59:54.104 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 19:59:54.105 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 19:59:54.106 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:59:54.123 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 19:59:54.125 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:59:54.126 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:59:54.127 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:59:54.128 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:59:54.128 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:59:54.129 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:59:54.130 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:59:54.131 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 19:59:54.132 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:59:54.133 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-29 19:59:54.134 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:59:54.135 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 19:59:54.136 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 19:59:54.136 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 19:59:54.138 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 19:59:54.138 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 19:59:54.139 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 19:59:54.139 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 19:59:54.140 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 19:59:54.141 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 52.6016ms
2025-11-29 19:59:54.142 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 19:59:54.142 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 19:59:54.143 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 19:59:54.144 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 19:59:54.145 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 69.6077ms
2025-11-29 20:00:54.572 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 20:00:54.575 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 20:00:54.575 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 20:00:54.576 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:00:54.578 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:00:54.578 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:00:54.579 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:00:54.580 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:00:54.581 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:00:54.582 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 20:00:54.583 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:00:54.584 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:00:54.585 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:00:54.587 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:00:54.588 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:00:54.589 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:00:54.591 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:00:54.592 +02:00 [INF] get all schedule called at "2025-11-29T20:00:54.5929508+02:00"
2025-11-29 20:00:54.593 +02:00 [INF] Fetching all schedules
2025-11-29 20:00:54.594 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:00:54.597 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:00:54.597 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:00:54.598 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:00:54.599 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:00:54.601 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:00:54.601 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:00:54.602 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:00:54.603 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:00:54.614 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:00:54.615 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.616 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.617 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.618 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.619 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.620 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.620 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.621 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.622 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.623 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.623 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.624 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.625 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.626 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.627 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.628 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.629 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.630 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.631 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.632 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.633 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.634 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.635 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.636 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.637 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.637 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.638 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.639 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.640 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.641 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.642 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.642 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.643 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.644 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.645 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.646 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.647 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.648 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.648 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.649 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.650 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.651 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.652 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:00:54.653 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:00:54.654 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 38ms reading results.
2025-11-29 20:00:54.654 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:00:54.655 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:00:54.656 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:00:54.658 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:00:54.658 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:00:54.658 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:00:54.659 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:00:54.660 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:00:54.661 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 72.3505ms
2025-11-29 20:00:54.662 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:00:54.663 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:00:54.664 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:00:54.664 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:00:54.665 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 92.9853ms
2025-11-29 20:03:06.681 +02:00 [DBG] Connection id "0HNHFCB8HU7F1" is closing.
2025-11-29 20:03:06.682 +02:00 [DBG] Connection id "0HNHFCB8HU7F1" is closed. The last processed stream ID was 3.
2025-11-29 20:03:06.683 +02:00 [DBG] Connection id "0HNHFCB8HU7F1" received FIN.
2025-11-29 20:03:06.684 +02:00 [DBG] Connection id "0HNHFCB8HU7F1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 20:03:06.684 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7F1 completed.
2025-11-29 20:03:06.686 +02:00 [DBG] Connection id "0HNHFCB8HU7F1" stopped.
2025-11-29 20:07:32.721 +02:00 [DBG] Connection id "0HNHFCB8HU7F2" accepted.
2025-11-29 20:07:32.722 +02:00 [DBG] Connection id "0HNHFCB8HU7F2" started.
2025-11-29 20:07:32.726 +02:00 [DBG] Connection 0HNHFCB8HU7F2 established using the following protocol: "Tls13"
2025-11-29 20:07:32.728 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 20:07:32.731 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 20:07:32.732 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 20:07:32.733 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:07:32.734 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:07:32.735 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:07:32.736 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:07:32.737 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:07:32.738 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:07:32.739 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 20:07:32.741 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:07:32.742 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:07:32.744 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:07:32.746 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:07:32.747 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:07:32.749 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:07:32.751 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:07:32.753 +02:00 [INF] get all schedule called at "2025-11-29T20:07:32.7533472+02:00"
2025-11-29 20:07:32.754 +02:00 [INF] Fetching all schedules
2025-11-29 20:07:32.755 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:07:32.757 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:07:32.758 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:07:32.759 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:07:32.795 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:07:32.796 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:07:32.797 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:07:32.798 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:07:32.799 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:07:32.812 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:07:32.814 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.815 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.816 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.817 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.817 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.818 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.819 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.820 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.821 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.822 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.822 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.823 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.824 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.825 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.826 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.827 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.828 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.829 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.830 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.830 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.831 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.832 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.833 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.834 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.835 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.836 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.836 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.837 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.838 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.839 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.840 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.841 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.842 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.843 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.844 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.845 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.846 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.846 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.847 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.848 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.849 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.850 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.850 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:32.851 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:07:32.852 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 38ms reading results.
2025-11-29 20:07:32.853 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:07:32.854 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:07:32.855 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:07:32.856 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:07:32.857 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:07:32.857 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:07:32.858 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:07:32.859 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:07:32.860 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 110.4173ms
2025-11-29 20:07:32.861 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:07:32.861 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:07:32.862 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:07:32.863 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:07:32.864 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 135.7572ms
2025-11-29 20:07:37.993 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 20:07:37.995 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 20:07:37.996 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 20:07:37.997 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 20:07:37.998 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:07:37.999 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:07:38.000 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:07:38.000 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:07:38.001 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 20:07:38.002 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 20:07:38.004 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:07:38.005 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:07:38.006 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:07:38.007 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:07:38.009 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:07:38.010 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 20:07:38.011 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 20:07:38.012 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 20:07:38.013 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 20:07:38.014 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 20:07:38.015 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 20:07:38.016 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 20:07:38.017 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 20:07:38.018 +02:00 [INF] get patient by id called at "2025-11-29T20:07:38.0187119+02:00"
2025-11-29 20:07:38.019 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 20:07:38.020 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:07:38.022 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:07:38.022 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:07:38.024 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:07:38.025 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:07:38.026 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:07:38.027 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:07:38.028 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:07:38.029 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:07:38.041 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:07:38.043 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:38.044 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:38.045 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:38.045 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:38.046 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:38.047 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:38.048 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:38.049 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:07:38.050 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:07:38.051 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-29 20:07:38.052 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:07:38.053 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:07:38.054 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 20:07:38.055 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:07:38.057 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:07:38.057 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:07:38.058 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:07:38.059 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:07:38.060 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 20:07:38.061 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 50.9217ms
2025-11-29 20:07:38.062 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 20:07:38.062 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:07:38.063 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:07:38.064 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:07:38.065 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 71.8779ms
2025-11-29 20:08:50.295 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-29 20:08:50.297 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-29 20:08:50.298 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-29 20:08:50.299 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 20:08:50.300 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:08:50.301 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:08:50.302 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:08:50.302 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:08:50.303 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 20:08:50.304 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-29 20:08:50.305 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:08:50.306 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:08:50.307 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:08:50.308 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:08:50.309 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:08:50.310 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-29 20:08:50.312 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-29 20:08:50.313 +02:00 [INF] Get All Branch called at "2025-11-29T20:08:50.3128951+02:00"
2025-11-29 20:08:50.313 +02:00 [INF] Fetching all branches
2025-11-29 20:08:50.314 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:08:50.316 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:08:50.316 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:08:50.317 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:50.318 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:50.319 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:08:50.320 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:08:50.320 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:08:50.321 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-29 20:08:50.326 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-29 20:08:50.327 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:50.328 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 20:08:50.329 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:50.330 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:08:50.331 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:08:50.332 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:08:50.333 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:08:50.333 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:08:50.333 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:08:50.334 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:08:50.336 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 25.8757ms
2025-11-29 20:08:50.337 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 20:08:50.338 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:08:50.338 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:50.339 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:08:50.340 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 45.1524ms
2025-11-29 20:08:50.883 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - null null
2025-11-29 20:08:50.886 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/GetAll'
2025-11-29 20:08:50.887 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)' with route pattern 'api/Specializations/GetAll' is valid for the request path '/api/Specializations/GetAll'
2025-11-29 20:08:50.888 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 20:08:50.889 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:08:50.889 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:08:50.890 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:08:50.891 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:08:50.891 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 20:08:50.892 +02:00 [INF] Route matched with {action = "GetAll", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Specialization.SpecializationDTO]]] GetAll() on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-29 20:08:50.893 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:08:50.894 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:08:50.895 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:08:50.896 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:08:50.897 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:08:50.898 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-29 20:08:50.900 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-29 20:08:50.900 +02:00 [INF] get all Specialization called at "2025-11-29T20:08:50.9009370+02:00"
2025-11-29 20:08:50.901 +02:00 [INF] Fetching all specializations in the system
2025-11-29 20:08:50.902 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:08:50.903 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:08:50.904 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:08:50.904 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:50.906 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:50.907 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:08:50.907 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:08:50.908 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:08:50.909 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-29 20:08:50.925 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-29 20:08:50.926 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.927 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.928 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.929 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.930 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.931 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.932 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.933 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.934 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.935 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.936 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.937 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.937 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.938 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.939 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.940 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.941 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.941 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.942 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.943 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.944 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.944 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.945 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.946 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.947 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.948 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.949 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.950 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.951 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.951 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:50.952 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:50.953 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 26ms reading results.
2025-11-29 20:08:50.954 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:50.955 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:08:50.956 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:08:50.957 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:08:50.958 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:08:50.958 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:08:50.959 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:08:50.959 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Specialization.SpecializationDTO, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:08:50.960 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.GetAll (Hospital) in 62.0685ms
2025-11-29 20:08:50.961 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 20:08:50.962 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:08:50.962 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:50.963 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:08:50.964 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - 200 null application/json; charset=utf-8 81.1671ms
2025-11-29 20:08:51.652 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-29 20:08:51.655 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-29 20:08:51.655 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-29 20:08:51.657 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 20:08:51.657 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:08:51.658 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:08:51.658 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:08:51.659 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:08:51.660 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 20:08:51.660 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-29 20:08:51.661 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:08:51.662 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:08:51.663 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:08:51.664 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:08:51.665 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:08:51.666 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-29 20:08:51.667 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-29 20:08:51.668 +02:00 [INF] Get All Branch called at "2025-11-29T20:08:51.6681810+02:00"
2025-11-29 20:08:51.668 +02:00 [INF] Fetching all branches
2025-11-29 20:08:51.669 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:08:51.670 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:08:51.671 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:08:51.672 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:51.672 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:51.673 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:08:51.674 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:08:51.675 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:08:51.675 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-29 20:08:51.678 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-29 20:08:51.679 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:51.680 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 20:08:51.680 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:51.681 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:08:51.682 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:08:51.684 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:08:51.684 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:08:51.685 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:08:51.685 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:08:51.686 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:08:51.687 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 20.6338ms
2025-11-29 20:08:51.687 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 20:08:51.688 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:08:51.689 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:51.690 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:08:51.691 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 38.4362ms
2025-11-29 20:08:52.518 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Services - null null
2025-11-29 20:08:52.520 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Services'
2025-11-29 20:08:52.521 +02:00 [DBG] Endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)' with route pattern 'api/Services' is valid for the request path '/api/Services'
2025-11-29 20:08:52.522 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-29 20:08:52.522 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:08:52.523 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:08:52.523 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:08:52.524 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:08:52.525 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-29 20:08:52.526 +02:00 [INF] Route matched with {action = "GetAll", controller = "Services"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.ServicesController (Hospital).
2025-11-29 20:08:52.527 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:08:52.528 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:08:52.529 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:08:52.530 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:08:52.531 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:08:52.532 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-29 20:08:52.533 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-29 20:08:52.534 +02:00 [INF] get all services called at "2025-11-29T20:08:52.5344636+02:00"
2025-11-29 20:08:52.535 +02:00 [INF] Fetching all services
2025-11-29 20:08:52.536 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:08:52.538 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:08:52.538 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:08:52.539 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:52.540 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:52.541 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:08:52.541 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:08:52.542 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:08:52.543 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[ServiceId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt]
FROM [Services] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[ServiceId] = [t].[ServiceId]
ORDER BY [s].[ServiceId], [t].[BranchId], [t].[ServiceId]
2025-11-29 20:08:52.549 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[ServiceId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt]
FROM [Services] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[ServiceId] = [t].[ServiceId]
ORDER BY [s].[ServiceId], [t].[BranchId], [t].[ServiceId]
2025-11-29 20:08:52.550 +02:00 [DBG] Context 'AppDbContext' started tracking 'Service' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:52.551 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:52.552 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:52.553 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:52.554 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:52.554 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:52.555 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-29 20:08:52.556 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:52.557 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:08:52.558 +02:00 [INF] 1 services retrieved
2025-11-29 20:08:52.558 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:08:52.560 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:08:52.560 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:08:52.561 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:08:52.561 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:08:52.562 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.ServiceDTOS.ServiceDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:08:52.563 +02:00 [INF] Executed action Hospital.Controllers.ServicesController.GetAll (Hospital) in 30.9737ms
2025-11-29 20:08:52.564 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-29 20:08:52.564 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:08:52.565 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:52.566 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:08:52.567 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Services - 200 null application/json; charset=utf-8 49.0863ms
2025-11-29 20:08:56.380 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-29 20:08:56.382 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-29 20:08:56.383 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-29 20:08:56.384 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 20:08:56.385 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:08:56.386 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:08:56.386 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:08:56.387 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:08:56.388 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 20:08:56.388 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-29 20:08:56.389 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:08:56.390 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:08:56.391 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:08:56.393 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:08:56.393 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:08:56.394 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-29 20:08:56.395 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-29 20:08:56.396 +02:00 [INF] Get All Branch called at "2025-11-29T20:08:56.3967319+02:00"
2025-11-29 20:08:56.397 +02:00 [INF] Fetching all branches
2025-11-29 20:08:56.398 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:08:56.399 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:08:56.399 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:08:56.400 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:56.401 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:56.402 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:08:56.403 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:08:56.403 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:08:56.404 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-29 20:08:56.406 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-29 20:08:56.407 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:56.408 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:08:56.409 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:56.410 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:08:56.411 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:08:56.412 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:08:56.413 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:08:56.413 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:08:56.414 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:08:56.415 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:08:56.416 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 21.6057ms
2025-11-29 20:08:56.417 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 20:08:56.418 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:08:56.419 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:56.419 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:08:56.420 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 40.1462ms
2025-11-29 20:08:57.645 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - null null
2025-11-29 20:08:57.648 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/GetAll'
2025-11-29 20:08:57.648 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)' with route pattern 'api/Specializations/GetAll' is valid for the request path '/api/Specializations/GetAll'
2025-11-29 20:08:57.649 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 20:08:57.650 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:08:57.650 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:08:57.651 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:08:57.652 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:08:57.652 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 20:08:57.653 +02:00 [INF] Route matched with {action = "GetAll", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Specialization.SpecializationDTO]]] GetAll() on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-29 20:08:57.654 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:08:57.655 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:08:57.656 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:08:57.657 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:08:57.658 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:08:57.659 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-29 20:08:57.662 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-29 20:08:57.663 +02:00 [INF] get all Specialization called at "2025-11-29T20:08:57.6630383+02:00"
2025-11-29 20:08:57.663 +02:00 [INF] Fetching all specializations in the system
2025-11-29 20:08:57.664 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:08:57.666 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:08:57.666 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:08:57.667 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:57.668 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:57.669 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:08:57.669 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:08:57.670 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:08:57.671 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-29 20:08:57.673 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-29 20:08:57.675 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.676 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.677 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.677 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.678 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.679 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.680 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.681 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.682 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.683 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.683 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.684 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.685 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.686 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.687 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.688 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.689 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.689 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.690 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.691 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.692 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.693 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.693 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.694 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.695 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.696 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.697 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.698 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.701 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.702 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:57.702 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 27ms reading results.
2025-11-29 20:08:57.703 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:57.704 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:08:57.705 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:08:57.706 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:08:57.707 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:08:57.708 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:08:57.708 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:08:57.709 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Specialization.SpecializationDTO, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:08:57.710 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.GetAll (Hospital) in 50.9628ms
2025-11-29 20:08:57.711 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 20:08:57.711 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:08:57.712 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:57.713 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:08:57.714 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - 200 null application/json; charset=utf-8 68.7958ms
2025-11-29 20:08:57.970 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Services - null null
2025-11-29 20:08:57.972 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Services'
2025-11-29 20:08:57.973 +02:00 [DBG] Endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)' with route pattern 'api/Services' is valid for the request path '/api/Services'
2025-11-29 20:08:57.974 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-29 20:08:57.974 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:08:57.975 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:08:57.975 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:08:57.976 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:08:57.977 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-29 20:08:57.977 +02:00 [INF] Route matched with {action = "GetAll", controller = "Services"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.ServicesController (Hospital).
2025-11-29 20:08:57.978 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:08:57.979 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:08:57.980 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:08:57.981 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:08:57.982 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:08:57.983 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-29 20:08:57.985 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-29 20:08:57.986 +02:00 [INF] get all services called at "2025-11-29T20:08:57.9863233+02:00"
2025-11-29 20:08:57.986 +02:00 [INF] Fetching all services
2025-11-29 20:08:57.987 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:08:57.989 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:08:57.989 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:08:57.990 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:57.991 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:57.991 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:08:57.992 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:08:57.993 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:08:57.994 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[ServiceId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt]
FROM [Services] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[ServiceId] = [t].[ServiceId]
ORDER BY [s].[ServiceId], [t].[BranchId], [t].[ServiceId]
2025-11-29 20:08:57.995 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[ServiceId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt]
FROM [Services] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[ServiceId] = [t].[ServiceId]
ORDER BY [s].[ServiceId], [t].[BranchId], [t].[ServiceId]
2025-11-29 20:08:57.997 +02:00 [DBG] Context 'AppDbContext' started tracking 'Service' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.998 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.998 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:57.999 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.000 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.001 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:58.002 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-29 20:08:58.003 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:58.004 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:08:58.004 +02:00 [INF] 1 services retrieved
2025-11-29 20:08:58.005 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:08:58.006 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:08:58.007 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:08:58.007 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:08:58.008 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:08:58.009 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.ServiceDTOS.ServiceDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:08:58.010 +02:00 [INF] Executed action Hospital.Controllers.ServicesController.GetAll (Hospital) in 26.7364ms
2025-11-29 20:08:58.011 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-29 20:08:58.011 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:08:58.012 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:58.013 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:08:58.014 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Services - 200 null application/json; charset=utf-8 44.0289ms
2025-11-29 20:08:58.268 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - null null
2025-11-29 20:08:58.270 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/GetAll'
2025-11-29 20:08:58.270 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)' with route pattern 'api/Specializations/GetAll' is valid for the request path '/api/Specializations/GetAll'
2025-11-29 20:08:58.271 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 20:08:58.272 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:08:58.273 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:08:58.273 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:08:58.274 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:08:58.274 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 20:08:58.275 +02:00 [INF] Route matched with {action = "GetAll", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Specialization.SpecializationDTO]]] GetAll() on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-29 20:08:58.276 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:08:58.277 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:08:58.278 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:08:58.279 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:08:58.280 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:08:58.281 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-29 20:08:58.283 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-29 20:08:58.284 +02:00 [INF] get all Specialization called at "2025-11-29T20:08:58.2842268+02:00"
2025-11-29 20:08:58.284 +02:00 [INF] Fetching all specializations in the system
2025-11-29 20:08:58.286 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:08:58.287 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:08:58.287 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:08:58.288 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:58.289 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:58.290 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:08:58.290 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:08:58.291 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:08:58.292 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-29 20:08:58.294 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-29 20:08:58.296 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.296 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.297 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.298 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.299 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.300 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.301 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.301 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.302 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.303 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.304 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.304 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.305 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.306 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.307 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.308 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.309 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.310 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.310 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.311 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.312 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.313 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.314 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.315 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.315 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.316 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.317 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.318 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.319 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.320 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.320 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:58.321 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:58.322 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 26ms reading results.
2025-11-29 20:08:58.323 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:58.324 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:08:58.324 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:08:58.326 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:08:58.326 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:08:58.327 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:08:58.327 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:08:58.328 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Specialization.SpecializationDTO, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:08:58.329 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.GetAll (Hospital) in 48.0408ms
2025-11-29 20:08:58.330 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 20:08:58.330 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:08:58.331 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:58.332 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:08:58.333 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - 200 null application/json; charset=utf-8 65.5509ms
2025-11-29 20:08:58.566 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-29 20:08:58.568 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-29 20:08:58.569 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-29 20:08:58.570 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 20:08:58.571 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:08:58.571 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:08:58.572 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:08:58.573 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:08:58.573 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 20:08:58.574 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-29 20:08:58.575 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:08:58.576 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:08:58.577 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:08:58.578 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:08:58.579 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:08:58.580 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-29 20:08:58.580 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-29 20:08:58.581 +02:00 [INF] Get All Branch called at "2025-11-29T20:08:58.5817360+02:00"
2025-11-29 20:08:58.582 +02:00 [INF] Fetching all branches
2025-11-29 20:08:58.583 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:08:58.584 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:08:58.585 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:08:58.585 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:58.586 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:58.587 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:08:58.587 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:08:58.588 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:08:58.589 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-29 20:08:58.590 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-29 20:08:58.592 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:58.592 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 20:08:58.593 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:58.594 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:08:58.595 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:08:58.596 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:08:58.597 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:08:58.597 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:08:58.598 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:08:58.599 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:08:58.600 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 19.9392ms
2025-11-29 20:08:58.600 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 20:08:58.601 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:08:58.602 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:58.603 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:08:58.604 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 37.1125ms
2025-11-29 20:08:59.491 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - null null
2025-11-29 20:08:59.493 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/GetAll'
2025-11-29 20:08:59.494 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)' with route pattern 'api/Specializations/GetAll' is valid for the request path '/api/Specializations/GetAll'
2025-11-29 20:08:59.495 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 20:08:59.496 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:08:59.497 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:08:59.497 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:08:59.498 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:08:59.498 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 20:08:59.499 +02:00 [INF] Route matched with {action = "GetAll", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Specialization.SpecializationDTO]]] GetAll() on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-29 20:08:59.500 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:08:59.501 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:08:59.502 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:08:59.503 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:08:59.504 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:08:59.505 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-29 20:08:59.506 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-29 20:08:59.507 +02:00 [INF] get all Specialization called at "2025-11-29T20:08:59.5074872+02:00"
2025-11-29 20:08:59.508 +02:00 [INF] Fetching all specializations in the system
2025-11-29 20:08:59.508 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:08:59.510 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:08:59.510 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:08:59.511 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:59.512 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:59.513 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:08:59.513 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:08:59.514 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:08:59.515 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-29 20:08:59.517 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-29 20:08:59.518 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.519 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.520 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.521 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.522 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.522 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.523 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.524 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.525 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.525 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.526 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.527 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.528 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.529 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.530 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.530 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.531 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.532 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.533 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.534 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.534 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.535 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.536 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.537 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.538 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.538 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.539 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.540 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.541 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.542 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.543 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.544 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:59.544 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 26ms reading results.
2025-11-29 20:08:59.545 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:59.546 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:08:59.547 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:08:59.548 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:08:59.549 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:08:59.549 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:08:59.550 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:08:59.551 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Specialization.SpecializationDTO, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:08:59.551 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.GetAll (Hospital) in 46.4673ms
2025-11-29 20:08:59.552 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 20:08:59.553 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:08:59.554 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:59.555 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:08:59.555 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - 200 null application/json; charset=utf-8 64.66ms
2025-11-29 20:08:59.782 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Services - null null
2025-11-29 20:08:59.784 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Services'
2025-11-29 20:08:59.785 +02:00 [DBG] Endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)' with route pattern 'api/Services' is valid for the request path '/api/Services'
2025-11-29 20:08:59.786 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-29 20:08:59.787 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:08:59.787 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:08:59.788 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:08:59.788 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:08:59.789 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-29 20:08:59.790 +02:00 [INF] Route matched with {action = "GetAll", controller = "Services"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.ServicesController (Hospital).
2025-11-29 20:08:59.791 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:08:59.792 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:08:59.793 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:08:59.794 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:08:59.795 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:08:59.796 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-29 20:08:59.797 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ServicesController (Hospital)
2025-11-29 20:08:59.798 +02:00 [INF] get all services called at "2025-11-29T20:08:59.7985772+02:00"
2025-11-29 20:08:59.799 +02:00 [INF] Fetching all services
2025-11-29 20:08:59.800 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:08:59.801 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:08:59.802 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:08:59.803 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:59.803 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:59.804 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:08:59.805 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:08:59.806 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:08:59.807 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[ServiceId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt]
FROM [Services] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[ServiceId] = [t].[ServiceId]
ORDER BY [s].[ServiceId], [t].[BranchId], [t].[ServiceId]
2025-11-29 20:08:59.808 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ServiceId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[ServiceId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt]
FROM [Services] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[ServiceId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchServices] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[ServiceId] = [t].[ServiceId]
ORDER BY [s].[ServiceId], [t].[BranchId], [t].[ServiceId]
2025-11-29 20:08:59.810 +02:00 [DBG] Context 'AppDbContext' started tracking 'Service' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.810 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.811 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.812 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchService' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.813 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:08:59.814 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:59.815 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-11-29 20:08:59.816 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:59.816 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:08:59.817 +02:00 [INF] 1 services retrieved
2025-11-29 20:08:59.818 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:08:59.819 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:08:59.820 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:08:59.820 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:08:59.821 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:08:59.821 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.ServiceDTOS.ServiceDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:08:59.822 +02:00 [INF] Executed action Hospital.Controllers.ServicesController.GetAll (Hospital) in 26.2962ms
2025-11-29 20:08:59.823 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ServicesController.GetAll (Hospital)'
2025-11-29 20:08:59.824 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:08:59.825 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:08:59.825 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:08:59.826 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Services - 200 null application/json; charset=utf-8 44.1707ms
2025-11-29 20:09:00.018 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - null null
2025-11-29 20:09:00.020 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Specializations/GetAll'
2025-11-29 20:09:00.021 +02:00 [DBG] Endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)' with route pattern 'api/Specializations/GetAll' is valid for the request path '/api/Specializations/GetAll'
2025-11-29 20:09:00.022 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 20:09:00.022 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:09:00.023 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:09:00.024 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:09:00.024 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:09:00.025 +02:00 [INF] Executing endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 20:09:00.025 +02:00 [INF] Route matched with {action = "GetAll", controller = "Specializations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Specialization.SpecializationDTO]]] GetAll() on controller Hospital.Controllers.SpecializationsController (Hospital).
2025-11-29 20:09:00.027 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:09:00.028 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:09:00.029 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:09:00.030 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:09:00.031 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:09:00.031 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-29 20:09:00.032 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.SpecializationsController (Hospital)
2025-11-29 20:09:00.033 +02:00 [INF] get all Specialization called at "2025-11-29T20:09:00.0336105+02:00"
2025-11-29 20:09:00.034 +02:00 [INF] Fetching all specializations in the system
2025-11-29 20:09:00.035 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:09:00.036 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:09:00.036 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:09:00.037 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:00.038 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:00.039 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:09:00.039 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:09:00.040 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:09:00.041 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-29 20:09:00.043 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[DoctorId], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt0], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt0], [t0].[UserName]
FROM [Specializations] AS [s]
LEFT JOIN (
    SELECT [b].[BranchId], [b].[SpecializationId], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt]
    FROM [BranchSpecializations] AS [b]
    INNER JOIN [Branches] AS [b0] ON [b].[BranchId] = [b0].[BranchId]
) AS [t] ON [s].[SpecializationId] = [t].[SpecializationId]
LEFT JOIN (
    SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
) AS [t0] ON [s].[SpecializationId] = [t0].[SpecializationId]
ORDER BY [s].[SpecializationId], [t].[BranchId], [t].[SpecializationId], [t].[BranchId0], [t0].[DoctorId]
2025-11-29 20:09:00.044 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.045 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.046 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.047 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.048 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.048 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.049 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.050 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.051 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.052 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.052 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.053 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.054 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.055 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.056 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.057 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.058 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.058 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.059 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.060 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.061 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.062 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.063 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.064 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.064 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.065 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.066 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.067 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.068 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.068 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchSpecialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.069 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:00.070 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:00.071 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 26ms reading results.
2025-11-29 20:09:00.072 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:00.073 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:09:00.074 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:09:00.075 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:09:00.076 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:09:00.076 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:09:00.077 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:09:00.077 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Specialization.SpecializationDTO, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:09:00.078 +02:00 [INF] Executed action Hospital.Controllers.SpecializationsController.GetAll (Hospital) in 46.8202ms
2025-11-29 20:09:00.079 +02:00 [INF] Executed endpoint 'Hospital.Controllers.SpecializationsController.GetAll (Hospital)'
2025-11-29 20:09:00.080 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:09:00.080 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:00.081 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:09:00.082 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Specializations/GetAll - 200 null application/json; charset=utf-8 64.1068ms
2025-11-29 20:09:00.271 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Branch/GetAll - null null
2025-11-29 20:09:00.273 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Branch/GetAll'
2025-11-29 20:09:00.274 +02:00 [DBG] Endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)' with route pattern 'api/Branch/GetAll' is valid for the request path '/api/Branch/GetAll'
2025-11-29 20:09:00.275 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 20:09:00.276 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:09:00.276 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:09:00.277 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:09:00.278 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:09:00.278 +02:00 [INF] Executing endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 20:09:00.279 +02:00 [INF] Route matched with {action = "GetAll", controller = "Branch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.BranchController (Hospital).
2025-11-29 20:09:00.280 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:09:00.281 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:09:00.282 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:09:00.283 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:09:00.284 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:09:00.285 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-29 20:09:00.286 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.BranchController (Hospital)
2025-11-29 20:09:00.287 +02:00 [INF] Get All Branch called at "2025-11-29T20:09:00.2872963+02:00"
2025-11-29 20:09:00.287 +02:00 [INF] Fetching all branches
2025-11-29 20:09:00.288 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:09:00.289 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:09:00.290 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:09:00.291 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:00.292 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:00.293 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:09:00.293 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:09:00.294 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:09:00.295 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-29 20:09:00.296 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
2025-11-29 20:09:00.298 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:00.299 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:09:00.300 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:00.301 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:09:00.302 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:09:00.303 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:09:00.304 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:09:00.304 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:09:00.305 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:09:00.306 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Branch.BranchDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:09:00.306 +02:00 [INF] Executed action Hospital.Controllers.BranchController.GetAll (Hospital) in 21.3942ms
2025-11-29 20:09:00.307 +02:00 [INF] Executed endpoint 'Hospital.Controllers.BranchController.GetAll (Hospital)'
2025-11-29 20:09:00.308 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:09:00.309 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:00.309 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:09:00.310 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Branch/GetAll - 200 null application/json; charset=utf-8 39.5615ms
2025-11-29 20:09:50.174 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 20:09:50.176 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 20:09:50.177 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 20:09:50.178 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:09:50.179 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:09:50.179 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:09:50.180 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:09:50.181 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:09:50.181 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:09:50.182 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 20:09:50.183 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:09:50.184 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:09:50.185 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:09:50.187 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:09:50.188 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:09:50.189 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:09:50.190 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:09:50.191 +02:00 [INF] get all schedule called at "2025-11-29T20:09:50.1911263+02:00"
2025-11-29 20:09:50.191 +02:00 [INF] Fetching all schedules
2025-11-29 20:09:50.193 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:09:50.195 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:09:50.195 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:09:50.196 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:50.197 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:50.198 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:09:50.199 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:09:50.200 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:09:50.201 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:09:50.210 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:09:50.211 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.212 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.213 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.214 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.215 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.216 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.216 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.217 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.218 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.218 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.219 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.220 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.221 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.222 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.223 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.224 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.225 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.226 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.226 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.227 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.228 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.229 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.230 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.231 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.232 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.232 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.233 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.234 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.235 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.236 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.237 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.237 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.238 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.239 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.240 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.241 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.241 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.242 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.243 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.244 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.245 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.246 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.247 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:50.247 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:50.248 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 37ms reading results.
2025-11-29 20:09:50.249 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:50.250 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:09:50.251 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:09:50.253 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:09:50.253 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:09:50.254 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:09:50.254 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:09:50.255 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:09:50.256 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 67.775ms
2025-11-29 20:09:50.257 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:09:50.258 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:09:50.259 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:50.259 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:09:50.260 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 86.6766ms
2025-11-29 20:09:56.550 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/1 - null null
2025-11-29 20:09:56.554 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/1'
2025-11-29 20:09:56.555 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/1'
2025-11-29 20:09:56.556 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:09:56.557 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:09:56.557 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:09:56.558 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:09:56.559 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:09:56.560 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:09:56.560 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 20:09:56.562 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:09:56.563 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:09:56.564 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:09:56.565 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:09:56.566 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:09:56.568 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:09:56.570 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:09:56.571 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:09:56.572 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 20:09:56.573 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:09:56.574 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:09:56.575 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:09:56.576 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:09:56.576 +02:00 [INF] Get  doctor By Id called at "2025-11-29T20:09:56.5769424+02:00"
2025-11-29 20:09:56.577 +02:00 [INF] Fetching doctor with ID 1
2025-11-29 20:09:56.578 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:09:56.580 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:09:56.580 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:09:56.581 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:56.582 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:56.583 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:09:56.583 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:09:56.584 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:09:56.585 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:09:56.603 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:09:56.605 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:56.606 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:56.607 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:56.608 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:56.609 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:56.610 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:56.611 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:56.612 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:56.613 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:56.614 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:56.615 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:09:56.616 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:56.617 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 11ms reading results.
2025-11-29 20:09:56.618 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:56.619 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:09:56.620 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:09:56.622 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:09:56.622 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:09:56.622 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:09:56.623 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:09:56.624 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 20:09:56.625 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 57.1865ms
2025-11-29 20:09:56.626 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:09:56.627 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:09:56.628 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:09:56.629 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:09:56.630 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/1 - 200 null application/json; charset=utf-8 79.5101ms
2025-11-29 20:10:30.573 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 20:10:30.575 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 20:10:30.575 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 20:10:30.576 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:10:30.577 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:10:30.577 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:10:30.578 +02:00 [DBG] The request is a preflight request.
2025-11-29 20:10:30.578 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.398ms
2025-11-29 20:10:30.580 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 20:10:30.582 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 20:10:30.583 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 20:10:30.584 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 20:10:30.585 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:10:30.585 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:10:30.586 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:10:30.586 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:10:30.587 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 20:10:30.591 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 20:10:30.592 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:10:30.593 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:10:30.594 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:10:30.596 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:10:30.597 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:10:30.598 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 20:10:30.601 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 20:10:30.602 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 20:10:30.603 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 20:10:30.604 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 20:10:30.606 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:00000025": started reading request body.
2025-11-29 20:10:30.607 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:00000025": done reading request body.
2025-11-29 20:10:30.613 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 20:10:30.614 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 20:10:30.615 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 20:10:30.615 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 20:10:30.624 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 20:10:30.626 +02:00 [INF] Add Appointment called at "2025-11-29T20:10:30.6264051+02:00"
2025-11-29 20:10:30.629 +02:00 [INF] Creating appointment for PatientId: 2, DoctorId: 1, Date: "2026-01-22", Shift: "Evening"
2025-11-29 20:10:30.640 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:10:30.648 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:10:30.649 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:10:30.649 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:30.650 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:30.653 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 20:10:30.660 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 20:10:30.662 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:30.663 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:30.665 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 20:10:30.666 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:10:30.679 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:10:30.681 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.682 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.683 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.684 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.685 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.686 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.686 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.687 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.688 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:30.689 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-29 20:10:30.690 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:30.691 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:30.692 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:10:30.693 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:10:30.703 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:10:30.704 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.705 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.706 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.707 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.708 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.708 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.709 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.710 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.711 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:30.711 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-29 20:10:30.714 +02:00 [DBG] Compiling query expression: 
'DbSet<Branch>()
    .FirstOrDefault(e => e.BranchId == __id_0)'
2025-11-29 20:10:30.718 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Branch>(
    asyncEnumerable: new SingleQueryingEnumerable<Branch>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Branch.Address (string) MaxLength(250), 1], [Property: Branch.BranchName (string) Required MaxLength(150), 2], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: Branch.Description (string), 4], [Property: Branch.Email (string) MaxLength(200), 5], [Property: Branch.ImageURL (string) MaxLength(300), 6], [Property: Branch.Latitude (double?), 7], [Property: Branch.Longitude (double?), 8], [Property: Branch.Phone (string) MaxLength(25), 9], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 10] }
            SELECT TOP(1) b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM Branches AS b
            WHERE b.BranchId == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Branch>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 20:10:30.719 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:30.720 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:30.720 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:10:30.721 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 20:10:30.724 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 20:10:30.726 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:30.726 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 20:10:30.734 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Any(a => a.PatientId == __patientId_0 && a.DoctorId == __doctorId_1 && a.Date == __date_2 && (int)a.Shift == (int)__shift_3)'
2025-11-29 20:10:30.739 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Appointments AS a
                WHERE (((a.PatientId == @__patientId_0) && (a.DoctorId == @__doctorId_1)) && (a.Date == @__date_2)) && (a.Shift == @__shift_3))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 20:10:30.747 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:30.748 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:30.750 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 20:10:30.751 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 20:10:30.758 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 20:10:30.760 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:30.762 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 20:10:30.768 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.771 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.773 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.774 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.775 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.775 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:10:30.777 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:10:30.778 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 20:10:30.779 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:10:30.780 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:10:30.785 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 20:10:30.792 +02:00 [DBG] Created transaction savepoint.
2025-11-29 20:10:30.793 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:30.794 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:30.797 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-29 20:10:30.798 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 20:10:30.804 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 20:10:30.807 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 20:10:30.809 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:30.810 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 20:10:30.812 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:30.813 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 20:10:30.815 +02:00 [DBG] Committing transaction.
2025-11-29 20:10:30.818 +02:00 [DBG] Committed transaction.
2025-11-29 20:10:30.820 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:30.821 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:10:30.822 +02:00 [INF] Appointment created successfully with ID: 27
2025-11-29 20:10:30.823 +02:00 [DBG] Disposing transaction.
2025-11-29 20:10:30.825 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:10:30.827 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:10:30.827 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:10:30.828 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:10:30.828 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:10:30.829 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 20:10:30.848 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[27],action=[GetById],controller=[Appointment])
2025-11-29 20:10:30.854 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/27 and 
2025-11-29 20:10:30.858 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/27
2025-11-29 20:10:30.859 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 260.714ms
2025-11-29 20:10:30.860 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 20:10:30.861 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:10:30.862 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:30.863 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 20:10:30.864 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 284.0518ms
2025-11-29 20:10:30.869 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 20:10:30.871 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 20:10:30.872 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 20:10:30.873 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:10:30.873 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:10:30.874 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:10:30.875 +02:00 [DBG] The request is a preflight request.
2025-11-29 20:10:30.876 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 6.5331ms
2025-11-29 20:10:30.877 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 20:10:30.882 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 20:10:30.883 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 20:10:30.884 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 20:10:30.885 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:10:30.886 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:10:30.887 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:10:30.913 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/29/2025 5:53:59 PM', Current time (UTC): '11/29/2025 6:10:30 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-11-29 20:10:30.919 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/29/2025 5:53:59 PM', Current time (UTC): '11/29/2025 6:10:30 PM'.
2025-11-29 20:10:30.924 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-29 20:10:30.926 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-29 20:10:30.931 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-29 20:10:30.931 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 401 0 null 54.3013ms
2025-11-29 20:10:30.933 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:00000029": started reading request body.
2025-11-29 20:10:30.934 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:00000029": done reading request body.
2025-11-29 20:10:30.935 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/refresh-token - text/plain 88
2025-11-29 20:10:30.937 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/refresh-token'
2025-11-29 20:10:30.937 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)' with route pattern 'api/Auth/refresh-token' is valid for the request path '/api/Auth/refresh-token'
2025-11-29 20:10:30.938 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)'
2025-11-29 20:10:30.939 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:10:30.940 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:10:30.940 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:10:30.941 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:10:30.942 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)'
2025-11-29 20:10:30.945 +02:00 [INF] Route matched with {action = "RefreshToken", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken(Hospital.Application.DTO.Auth.RefreshToken) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-29 20:10:30.946 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:10:30.947 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:10:30.948 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:10:30.949 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:10:30.950 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:10:30.951 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 20:10:30.961 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 20:10:30.962 +02:00 [DBG] Attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken' ...
2025-11-29 20:10:30.963 +02:00 [DBG] Attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken' using the name '' in request data ...
2025-11-29 20:10:30.964 +02:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'text/plain'.
2025-11-29 20:10:30.965 +02:00 [DBG] No input formatter was found to support the content type 'text/plain' for use with the [FromBody] attribute.
2025-11-29 20:10:30.972 +02:00 [DBG] Done attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken'.
2025-11-29 20:10:30.973 +02:00 [DBG] Done attempting to bind parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken'.
2025-11-29 20:10:30.973 +02:00 [DBG] Attempting to validate the bound parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken' ...
2025-11-29 20:10:30.975 +02:00 [DBG] Done attempting to validate the bound parameter 'tokendto' of type 'Hospital.Application.DTO.Auth.RefreshToken'.
2025-11-29 20:10:30.977 +02:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter'.
2025-11-29 20:10:30.978 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:10:30.979 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:10:30.981 +02:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-11-29 20:10:30.982 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-11-29 20:10:30.983 +02:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-11-29 20:10:30.999 +02:00 [INF] Executed action Hospital.Controllers.AuthController.RefreshToken (Hospital) in 47.6711ms
2025-11-29 20:10:31.000 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.RefreshToken (Hospital)'
2025-11-29 20:10:31.001 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/refresh-token - 415 null application/problem+json; charset=utf-8 65.7934ms
2025-11-29 20:10:31.003 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:0000002B": started reading request body.
2025-11-29 20:10:31.004 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:0000002B": done reading request body.
2025-11-29 20:10:43.101 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 20:10:43.103 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 20:10:43.104 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 20:10:43.105 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:10:43.105 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:10:43.106 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:10:43.106 +02:00 [DBG] The request is a preflight request.
2025-11-29 20:10:43.107 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.3821ms
2025-11-29 20:10:43.109 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 20:10:43.111 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 20:10:43.111 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 20:10:43.112 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 20:10:43.113 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:10:43.113 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:10:43.114 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:10:43.114 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:10:43.115 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 20:10:43.116 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 20:10:43.117 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:10:43.118 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:10:43.119 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:10:43.121 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:10:43.122 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:10:43.123 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 20:10:43.124 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 20:10:43.125 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 20:10:43.126 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 20:10:43.127 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 20:10:43.127 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:0000002F": started reading request body.
2025-11-29 20:10:43.128 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:0000002F": done reading request body.
2025-11-29 20:10:43.130 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 20:10:43.130 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 20:10:43.131 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 20:10:43.132 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 20:10:43.133 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 20:10:43.133 +02:00 [INF] Add Appointment called at "2025-11-29T20:10:43.1338420+02:00"
2025-11-29 20:10:43.134 +02:00 [INF] Creating appointment for PatientId: 2, DoctorId: 1, Date: "2026-01-22", Shift: "Evening"
2025-11-29 20:10:43.136 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:10:43.138 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:10:43.138 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:10:43.139 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:43.140 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:43.141 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 20:10:43.142 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 20:10:43.143 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:43.143 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:43.144 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:10:43.145 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:10:43.155 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:10:43.157 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.158 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.159 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.160 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.160 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.161 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.162 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.163 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.164 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:43.165 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-29 20:10:43.166 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:43.167 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:43.168 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:10:43.168 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:10:43.177 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:10:43.179 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.180 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.180 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.181 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.182 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.183 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.184 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.185 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:43.186 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:43.187 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-29 20:10:43.188 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:43.189 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:43.189 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:10:43.190 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 20:10:43.193 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 20:10:43.194 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:43.195 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:10:43.197 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:43.197 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:43.198 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:10:43.199 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 20:10:43.203 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 20:10:43.204 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:43.205 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:10:43.208 +02:00 [DBG] Rolling back transaction.
2025-11-29 20:10:43.210 +02:00 [DBG] Rolled back transaction.
2025-11-29 20:10:43.211 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:43.212 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:10:43.213 +02:00 [ERR] Failed to create appointment for PatientId: 2, DoctorId: 1
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
2025-11-29 20:10:43.231 +02:00 [DBG] Disposing transaction.
2025-11-29 20:10:43.232 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 108.2266ms
2025-11-29 20:10:43.233 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 20:10:43.234 +02:00 [ERR]  Exception caught: Patient already has an appointment with this doctor in this shift.
System.ArgumentException: Patient already has an appointment with this doctor in this shift.
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 109
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 143
   at Hospital.Infrastructure.Services.AppointmentService.AddAsync(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital.Infrastructure\Services\AppointmentService.cs:line 144
   at Hospital.API.Controllers.AppointmentController.Add(AddAppointmentDto dto) in D:\Hospital\Hospital\Hospital\Controllers\AppointmentController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Hospital.Middleware.GlobalExceptionHandler.InvokeAsync(HttpContext context) in D:\Hospital\Hospital\Hospital\Middleware\GlobalExceptionHandler.cs:line 22
2025-11-29 20:10:43.251 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:10:43.252 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:43.252 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:10:43.253 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 400 null application/json 144.8307ms
2025-11-29 20:10:46.692 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 20:10:46.695 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 20:10:46.695 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 20:10:46.697 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:10:46.698 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:10:46.699 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:10:46.700 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:10:46.701 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:10:46.701 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:10:46.702 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 20:10:46.703 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:10:46.705 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:10:46.706 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:10:46.707 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:10:46.708 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:10:46.709 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:10:46.710 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:10:46.711 +02:00 [INF] get all schedule called at "2025-11-29T20:10:46.7111671+02:00"
2025-11-29 20:10:46.711 +02:00 [INF] Fetching all schedules
2025-11-29 20:10:46.712 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:10:46.713 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:10:46.714 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:10:46.715 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:46.715 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:46.716 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:46.717 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:46.718 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:10:46.718 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:10:46.724 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:10:46.726 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.727 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.727 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.728 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.729 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.730 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.731 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.732 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.733 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.733 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.734 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.735 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.736 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.737 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.738 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.739 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.740 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.741 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.742 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.743 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.744 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.745 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.746 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.747 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.747 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.748 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.749 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.750 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.751 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.752 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.752 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.753 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.754 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.755 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.756 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.757 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.758 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.759 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.760 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.761 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.762 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.763 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.763 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:46.764 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:46.765 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 39ms reading results.
2025-11-29 20:10:46.766 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:46.767 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:10:46.768 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:10:46.770 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:10:46.770 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:10:46.771 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:10:46.771 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:10:46.772 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:10:46.774 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 64.7855ms
2025-11-29 20:10:46.775 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:10:46.775 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:10:46.776 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:46.777 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:10:46.778 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 85.6351ms
2025-11-29 20:10:55.195 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 20:10:55.197 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 20:10:55.198 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 20:10:55.200 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:10:55.200 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:10:55.201 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:10:55.202 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:10:55.202 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:10:55.203 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:10:55.204 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 20:10:55.205 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:10:55.206 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:10:55.208 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:10:55.209 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:10:55.210 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:10:55.211 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:10:55.213 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:10:55.214 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:10:55.215 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 20:10:55.215 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:10:55.216 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:10:55.217 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:10:55.218 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:10:55.219 +02:00 [INF] Get  doctor By Id called at "2025-11-29T20:10:55.2192481+02:00"
2025-11-29 20:10:55.220 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 20:10:55.220 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:10:55.222 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:10:55.223 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:10:55.224 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:55.224 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:55.225 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:55.226 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:55.227 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:10:55.228 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:10:55.230 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:10:55.232 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:55.233 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:55.234 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:55.235 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:55.235 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:55.236 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:55.237 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:55.238 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:55.239 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:55.240 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:55.241 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:55.241 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:55.242 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:55.243 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:55.244 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:55.245 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:55.245 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 20:10:55.246 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:55.247 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:10:55.248 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:10:55.249 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:10:55.250 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:10:55.250 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:10:55.251 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:10:55.252 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 20:10:55.252 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 41.6052ms
2025-11-29 20:10:55.253 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:10:55.254 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:10:55.255 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:55.256 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:10:55.256 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 61.8229ms
2025-11-29 20:10:58.589 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 20:10:58.590 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 20:10:58.591 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 20:10:58.592 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:10:58.593 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:10:58.593 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:10:58.594 +02:00 [DBG] The request is a preflight request.
2025-11-29 20:10:58.595 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 6.0727ms
2025-11-29 20:10:58.596 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 20:10:58.599 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 20:10:58.600 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 20:10:58.601 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 20:10:58.601 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:10:58.602 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:10:58.603 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:10:58.603 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:10:58.604 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 20:10:58.605 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 20:10:58.606 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:10:58.607 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:10:58.608 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:10:58.609 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:10:58.610 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:10:58.611 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 20:10:58.612 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 20:10:58.613 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 20:10:58.613 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 20:10:58.614 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 20:10:58.615 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:00000037": started reading request body.
2025-11-29 20:10:58.616 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:00000037": done reading request body.
2025-11-29 20:10:58.617 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 20:10:58.618 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 20:10:58.619 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 20:10:58.620 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 20:10:58.621 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 20:10:58.622 +02:00 [INF] Add Appointment called at "2025-11-29T20:10:58.6221142+02:00"
2025-11-29 20:10:58.622 +02:00 [INF] Creating appointment for PatientId: 2, DoctorId: 5, Date: "2026-01-03", Shift: "Afternoon"
2025-11-29 20:10:58.623 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:10:58.630 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:10:58.631 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:10:58.632 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:58.633 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:58.634 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 20:10:58.635 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 20:10:58.636 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:58.636 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:58.637 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:10:58.638 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:10:58.649 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:10:58.651 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.652 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.652 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.653 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.655 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.656 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.657 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.657 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.658 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:58.659 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-29 20:10:58.661 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:58.661 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:58.662 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:10:58.663 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:10:58.671 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:10:58.673 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.674 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.675 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.676 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.677 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.678 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.679 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.680 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.680 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.681 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.682 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.683 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.684 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.685 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.685 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.686 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:58.687 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-29 20:10:58.688 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:58.689 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:58.690 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:10:58.691 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 20:10:58.693 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 20:10:58.694 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:58.695 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:10:58.697 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:58.698 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:58.699 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:10:58.699 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 20:10:58.703 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 20:10:58.705 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:58.705 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 20:10:58.707 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.708 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.709 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.710 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.711 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.712 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:10:58.714 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:10:58.714 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 20:10:58.715 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:10:58.716 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:10:58.717 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 20:10:58.718 +02:00 [DBG] Created transaction savepoint.
2025-11-29 20:10:58.718 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:10:58.719 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:10:58.720 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:10:58.720 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 20:10:58.723 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 20:10:58.725 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 20:10:58.726 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:58.727 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:10:58.728 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:10:58.729 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 20:10:58.730 +02:00 [DBG] Committing transaction.
2025-11-29 20:10:58.731 +02:00 [DBG] Committed transaction.
2025-11-29 20:10:58.731 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:58.732 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:10:58.733 +02:00 [INF] Appointment created successfully with ID: 28
2025-11-29 20:10:58.734 +02:00 [DBG] Disposing transaction.
2025-11-29 20:10:58.735 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:10:58.736 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:10:58.737 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:10:58.737 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:10:58.737 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:10:58.738 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 20:10:58.740 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[28],action=[GetById],controller=[Appointment])
2025-11-29 20:10:58.741 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/28 and 
2025-11-29 20:10:58.742 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/28
2025-11-29 20:10:58.743 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 131.7745ms
2025-11-29 20:10:58.743 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 20:10:58.744 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:10:58.745 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:10:58.746 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:10:58.747 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 150.5175ms
2025-11-29 20:10:58.747 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 20:10:58.750 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 20:10:58.751 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 20:10:58.751 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:10:58.752 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:10:58.753 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:10:58.753 +02:00 [DBG] The request is a preflight request.
2025-11-29 20:10:58.754 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 6.6647ms
2025-11-29 20:10:58.755 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 20:10:58.757 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 20:10:58.758 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 20:10:58.759 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 20:10:58.760 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:10:58.760 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:10:58.761 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:10:58.762 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/29/2025 5:53:59 PM', Current time (UTC): '11/29/2025 6:10:58 PM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-11-29 20:10:58.763 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '11/29/2025 5:53:59 PM', Current time (UTC): '11/29/2025 6:10:58 PM'.
2025-11-29 20:10:58.764 +02:00 [DBG] Policy authentication schemes  did not succeed
2025-11-29 20:10:58.765 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-29 20:10:58.766 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-29 20:10:58.767 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 401 0 null 12.1861ms
2025-11-29 20:10:58.769 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:0000003B": started reading request body.
2025-11-29 20:10:58.770 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:0000003B": done reading request body.
2025-11-29 20:11:32.193 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-11-29 20:11:32.195 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 20:11:32.196 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 20:11:32.197 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:11:32.197 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:11:32.199 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:11:32.200 +02:00 [DBG] The request is a preflight request.
2025-11-29 20:11:32.200 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 7.6729ms
2025-11-29 20:11:32.202 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 54
2025-11-29 20:11:32.204 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 20:11:32.205 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-29 20:11:32.207 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 20:11:32.207 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:11:32.208 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:11:32.209 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:11:32.209 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:11:32.210 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 20:11:32.210 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-29 20:11:32.212 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:11:32.213 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:11:32.213 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:11:32.215 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:11:32.215 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:11:32.216 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 20:11:32.217 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 20:11:32.218 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 20:11:32.219 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-29 20:11:32.220 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 20:11:32.221 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:0000003F": started reading request body.
2025-11-29 20:11:32.222 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:0000003F": done reading request body.
2025-11-29 20:11:32.223 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-29 20:11:32.224 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 20:11:32.224 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 20:11:32.225 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 20:11:32.226 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 20:11:32.227 +02:00 [INF] Login called at "2025-11-29T20:11:32.2279230+02:00"
2025-11-29 20:11:32.228 +02:00 [INF] Login attempt for email: nour22110@gmail.com
2025-11-29 20:11:32.229 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:11:32.231 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:11:32.231 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:11:32.232 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.233 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.234 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:32.235 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:32.236 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:32.236 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 20:11:32.246 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 20:11:32.248 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:32.249 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.250 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 20:11:32.251 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.252 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:11:32.344 +02:00 [DBG] Creating JWT token for user a06c9a74-d53e-4235-a0b9-681147a73dfc
2025-11-29 20:11:32.346 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.348 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.349 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:32.350 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:11:32.351 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:32.352 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 20:11:32.357 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 20:11:32.359 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.360 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:11:32.362 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.363 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:11:32.366 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.367 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.368 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:32.369 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:32.371 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 20:11:32.372 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 20:11:32.380 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 20:11:32.382 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.383 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:11:32.385 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.386 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:11:32.387 +02:00 [DBG] JWT token created for user a06c9a74-d53e-4235-a0b9-681147a73dfc, expires at "2025-11-29T19:11:32.0000000Z"
2025-11-29 20:11:32.388 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.389 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.391 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:32.391 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:11:32.392 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:32.394 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 20:11:32.396 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 20:11:32.398 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.399 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:11:32.401 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.402 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:11:32.403 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.405 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.406 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:32.407 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:32.408 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 20:11:32.409 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 20:11:32.413 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 20:11:32.415 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.416 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:11:32.417 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.418 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:11:32.420 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:32.421 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:11:32.422 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:11:32.423 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 20:11:32.424 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:11:32.425 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:11:32.426 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.428 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.429 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:32.430 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:11:32.431 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 20:11:32.432 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 20:11:32.443 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 20:11:32.445 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.446 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:11:32.447 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.448 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:11:32.450 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:32.452 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 20:11:32.453 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.454 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.455 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:32.456 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:11:32.457 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:32.458 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 20:11:32.463 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 20:11:32.465 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:32.466 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:32.467 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.468 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 20:11:32.470 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.471 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:11:32.473 +02:00 [INF] Patient 2 logged in successfully
2025-11-29 20:11:32.474 +02:00 [INF] User nour22110@gmail.com logged in successfully with roles: Patient
2025-11-29 20:11:32.475 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:11:32.477 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:11:32.477 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:11:32.478 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:11:32.479 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:11:32.480 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-29 20:11:32.481 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 264.903ms
2025-11-29 20:11:32.482 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 20:11:32.483 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:11:32.484 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:32.485 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 20:11:32.487 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 285.0641ms
2025-11-29 20:11:34.318 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 20:11:34.320 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 20:11:34.321 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 20:11:34.322 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:11:34.322 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:11:34.323 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:11:34.324 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:11:34.325 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:11:34.326 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:11:34.327 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 20:11:34.328 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:11:34.329 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:11:34.330 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:11:34.331 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:11:34.332 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:11:34.333 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:11:34.335 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:11:34.336 +02:00 [INF] get all schedule called at "2025-11-29T20:11:34.3360994+02:00"
2025-11-29 20:11:34.336 +02:00 [INF] Fetching all schedules
2025-11-29 20:11:34.337 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:11:34.338 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:11:34.339 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:11:34.340 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:34.340 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:34.341 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:34.342 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:11:34.343 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:34.343 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:11:34.353 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:11:34.354 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.356 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.357 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.358 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.358 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.359 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.360 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.361 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.362 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.364 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.365 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.366 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.367 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.368 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.369 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.370 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.371 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.372 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.373 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.374 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.375 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.376 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.377 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.379 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.380 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.380 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.381 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.382 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.384 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.384 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.385 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.386 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.387 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.388 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.389 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.390 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.391 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.392 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.392 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.394 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.395 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.396 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.397 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:34.398 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:34.399 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 44ms reading results.
2025-11-29 20:11:34.400 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:34.401 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:11:34.402 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:11:34.404 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:11:34.404 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:11:34.405 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:11:34.405 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:11:34.407 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:11:34.408 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 74.5436ms
2025-11-29 20:11:34.410 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:11:34.410 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:11:34.411 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:34.412 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 20:11:34.413 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 95.1345ms
2025-11-29 20:11:43.582 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 20:11:43.585 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 20:11:43.585 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 20:11:43.587 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:11:43.587 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:11:43.588 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:11:43.588 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:11:43.589 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:11:43.590 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:11:43.590 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 20:11:43.591 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:11:43.592 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:11:43.594 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:11:43.595 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:11:43.596 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:11:43.597 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:11:43.599 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:11:43.600 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:11:43.601 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 20:11:43.601 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:11:43.602 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:11:43.603 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:11:43.604 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:11:43.605 +02:00 [INF] Get  doctor By Id called at "2025-11-29T20:11:43.6057336+02:00"
2025-11-29 20:11:43.606 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 20:11:43.607 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:11:43.608 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:11:43.609 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:11:43.610 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:43.611 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:43.611 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:43.612 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:43.613 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:43.614 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:11:43.624 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:11:43.626 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:43.627 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:43.629 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:43.630 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:43.630 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:43.631 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:43.632 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:43.633 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:43.634 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:43.635 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:43.636 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:43.637 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:43.638 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:43.639 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:43.640 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:43.641 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:43.641 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 15ms reading results.
2025-11-29 20:11:43.642 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:43.643 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:11:43.644 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:11:43.645 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:11:43.646 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:11:43.646 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:11:43.647 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:11:43.648 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 20:11:43.648 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 51.0741ms
2025-11-29 20:11:43.649 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:11:43.650 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:11:43.651 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:43.651 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:11:43.652 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 70.2479ms
2025-11-29 20:11:53.260 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 20:11:53.261 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 20:11:53.262 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 20:11:53.263 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:11:53.263 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:11:53.264 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:11:53.265 +02:00 [DBG] The request is a preflight request.
2025-11-29 20:11:53.266 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 5.9576ms
2025-11-29 20:11:53.267 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 20:11:53.269 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 20:11:53.270 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 20:11:53.271 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 20:11:53.271 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:11:53.272 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:11:53.272 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:11:53.273 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:11:53.274 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 20:11:53.274 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 20:11:53.275 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:11:53.276 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:11:53.277 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:11:53.278 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:11:53.279 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:11:53.280 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 20:11:53.281 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 20:11:53.282 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 20:11:53.283 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 20:11:53.283 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 20:11:53.284 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:00000047": started reading request body.
2025-11-29 20:11:53.285 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:00000047": done reading request body.
2025-11-29 20:11:53.286 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 20:11:53.287 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 20:11:53.287 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 20:11:53.288 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 20:11:53.289 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 20:11:53.290 +02:00 [INF] Add Appointment called at "2025-11-29T20:11:53.2901479+02:00"
2025-11-29 20:11:53.290 +02:00 [INF] Creating appointment for PatientId: 2, DoctorId: 5, Date: "2026-01-01", Shift: "Afternoon"
2025-11-29 20:11:53.292 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:11:53.293 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:11:53.293 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:11:53.294 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:53.295 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:53.296 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 20:11:53.297 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 20:11:53.298 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:53.299 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:11:53.300 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:53.301 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:11:53.311 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:11:53.313 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.314 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.315 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.316 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.317 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.317 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.318 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.319 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.320 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:53.321 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-29 20:11:53.322 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:53.323 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:11:53.323 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:53.324 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:11:53.334 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:11:53.336 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.337 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.338 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.339 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.340 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.341 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.342 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.343 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.344 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.345 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.347 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.348 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.349 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.350 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.351 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.352 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:53.353 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 16ms reading results.
2025-11-29 20:11:53.354 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:53.355 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:11:53.356 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:53.357 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 20:11:53.360 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 20:11:53.362 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:53.363 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:11:53.365 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:53.366 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:11:53.367 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:53.368 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 20:11:53.373 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 20:11:53.375 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:53.376 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:11:53.377 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.379 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.380 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.381 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.382 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.383 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:11:53.385 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:11:53.386 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 20:11:53.387 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:11:53.388 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:11:53.389 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 20:11:53.390 +02:00 [DBG] Created transaction savepoint.
2025-11-29 20:11:53.391 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:53.392 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:11:53.393 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:53.394 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 20:11:53.398 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 20:11:53.400 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 20:11:53.401 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:53.402 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 20:11:53.404 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.406 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 20:11:53.407 +02:00 [DBG] Committing transaction.
2025-11-29 20:11:53.408 +02:00 [DBG] Committed transaction.
2025-11-29 20:11:53.408 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:53.410 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:11:53.411 +02:00 [INF] Appointment created successfully with ID: 29
2025-11-29 20:11:53.412 +02:00 [DBG] Disposing transaction.
2025-11-29 20:11:53.412 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:11:53.414 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:11:53.414 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:11:53.415 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:11:53.415 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:11:53.416 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 20:11:53.417 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[29],action=[GetById],controller=[Appointment])
2025-11-29 20:11:53.419 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/29 and 
2025-11-29 20:11:53.420 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/29
2025-11-29 20:11:53.421 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 140.6206ms
2025-11-29 20:11:53.421 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 20:11:53.422 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:11:53.423 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:53.424 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:11:53.425 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 157.767ms
2025-11-29 20:11:53.425 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 20:11:53.428 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 20:11:53.429 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 20:11:53.430 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:11:53.431 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:11:53.431 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:11:53.432 +02:00 [DBG] The request is a preflight request.
2025-11-29 20:11:53.432 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 7.0865ms
2025-11-29 20:11:53.434 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 20:11:53.436 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 20:11:53.437 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 20:11:53.438 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 20:11:53.438 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:11:53.439 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:11:53.439 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:11:53.445 +02:00 [DBG] Successfully validated the token.
2025-11-29 20:11:53.446 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-29 20:11:53.448 +02:00 [DBG] Authorization was successful.
2025-11-29 20:11:53.449 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 20:11:53.452 +02:00 [INF] Route matched with {action = "CreatePayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePayment(Hospital.Controllers.CreatePaymentRequest, System.Threading.CancellationToken) on controller Hospital.Controllers.PaymentController (Hospital).
2025-11-29 20:11:53.453 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:11:53.454 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:11:53.455 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:11:53.456 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:11:53.457 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:11:53.458 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PaymentController (Hospital)
2025-11-29 20:11:53.468 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PaymentController (Hospital)
2025-11-29 20:11:53.469 +02:00 [DBG] Attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' ...
2025-11-29 20:11:53.469 +02:00 [DBG] Attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' using the name '' in request data ...
2025-11-29 20:11:53.470 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 20:11:53.472 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:0000004B": started reading request body.
2025-11-29 20:11:53.472 +02:00 [DBG] Connection id "0HNHFCB8HU7F2", Request id "0HNHFCB8HU7F2:0000004B": done reading request body.
2025-11-29 20:11:53.474 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Controllers.CreatePaymentRequest'
2025-11-29 20:11:53.474 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 20:11:53.475 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 20:11:53.476 +02:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' ...
2025-11-29 20:11:53.477 +02:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 20:11:53.478 +02:00 [DBG] Attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-11-29 20:11:53.479 +02:00 [DBG] Done attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-11-29 20:11:53.480 +02:00 [DBG] Attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-11-29 20:11:53.480 +02:00 [DBG] Done attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-11-29 20:11:53.482 +02:00 [INF] create payment by credite card called at "2025-11-29T20:11:53.4824601+02:00"
2025-11-29 20:11:53.485 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:11:53.487 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Payment)
    .Include(a => a.Patient)
    .ThenInclude(p => p.User)
    .Include(a => a.Doctor)
    .ThenInclude(d => d.User)
    .FirstOrDefault(a => a.AppointmentId == __appointmentId_0)'
2025-11-29 20:11:53.489 +02:00 [DBG] Including navigation: 'Appointment.Payment'.
2025-11-29 20:11:53.490 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-29 20:11:53.491 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-29 20:11:53.492 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-29 20:11:53.493 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 20:11:53.506 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Appointment>(
    asyncEnumerable: new SingleQueryingEnumerable<Appointment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 9], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
                1 -> Dictionary<IProperty, int> { [Property: Payment.PaymentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Payment.Amount (decimal) Required, 13], [Property: Payment.AppointmentId (int) Required FK Index, 14], [Property: Payment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Payment.Currency (string) Required MaxLength(3), 16], [Property: Payment.GatewayResponse (string), 17], [Property: Payment.PaymobMerchantOrderId (string) MaxLength(100), 18], [Property: Payment.PaymobOrderId (long?), 19], [Property: Payment.PaymobTransactionId (long?), 20], [Property: Payment.Status (PaymentStatus) Required MaxLength(20), 21], [Property: Payment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 22] }
                2 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Patient.EmergencyContact (string) MaxLength(150), 25], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 26], [Property: Patient.UserId (string) Required FK Index, 27] }
                3 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 28], [Property: User.AccessFailedCount (int) Required, 29], [Property: User.ConcurrencyStamp (string) Concurrency, 30], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.DateOfBirth (DateOnly?), 32], [Property: User.Email (string) Index MaxLength(256), 33], [Property: User.EmailConfirmed (bool) Required, 34], [Property: User.FullName (string) Required MaxLength(150), 35], [Property: User.Gender (GenderType?) MaxLength(10), 36], [Property: User.LockoutEnabled (bool) Required, 37], [Property: User.LockoutEnd (DateTimeOffset?), 38], [Property: User.NormalizedEmail (string) Index MaxLength(256), 39], [Property: User.NormalizedUserName (string) Index MaxLength(256), 40], [Property: User.PasswordHash (string), 41], [Property: User.PhoneNumber (string), 42], [Property: User.PhoneNumberConfirmed (bool) Required, 43], [Property: User.RefreshToken (string), 44], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 45], [Property: User.Role (string) Required MaxLength(50), 46], [Property: User.SecurityStamp (string), 47], [Property: User.TwoFactorEnabled (bool) Required, 48], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 49], [Property: User.UserName (string) MaxLength(256), 50] }
                4 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 51], [Property: Doctor.Available (bool?), 52], [Property: Doctor.Biography (string), 53], [Property: Doctor.ConsultationFees (decimal) Required, 54], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 55], [Property: Doctor.ExperienceYears (int?), 56], [Property: Doctor.ImageURL (string) MaxLength(300), 57], [Property: Doctor.SpecializationId (int) Required FK Index, 58], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 59], [Property: Doctor.UserId (string) Required FK Index, 60] }
                5 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 61], [Property: User.AccessFailedCount (int) Required, 62], [Property: User.ConcurrencyStamp (string) Concurrency, 63], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 64], [Property: User.DateOfBirth (DateOnly?), 65], [Property: User.Email (string) Index MaxLength(256), 66], [Property: User.EmailConfirmed (bool) Required, 67], [Property: User.FullName (string) Required MaxLength(150), 68], [Property: User.Gender (GenderType?) MaxLength(10), 69], [Property: User.LockoutEnabled (bool) Required, 70], [Property: User.LockoutEnd (DateTimeOffset?), 71], [Property: User.NormalizedEmail (string) Index MaxLength(256), 72], [Property: User.NormalizedUserName (string) Index MaxLength(256), 73], [Property: User.PasswordHash (string), 74], [Property: User.PhoneNumber (string), 75], [Property: User.PhoneNumberConfirmed (bool) Required, 76], [Property: User.RefreshToken (string), 77], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 78], [Property: User.Role (string) Required MaxLength(50), 79], [Property: User.SecurityStamp (string), 80], [Property: User.TwoFactorEnabled (bool) Required, 81], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 82], [Property: User.UserName (string) MaxLength(256), 83] }
            SELECT TOP(1) a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PaymentId, p.Amount, p.AppointmentId, p.CreatedAt, p.Currency, p.GatewayResponse, p.PaymobMerchantOrderId, p.PaymobOrderId, p.PaymobTransactionId, p.Status, p.UpdatedAt, p0.PatientId, p0.CreatedAt, p0.EmergencyContact, p0.UpdatedAt, p0.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DateOfBirth, u0.Email, u0.EmailConfirmed, u0.FullName, u0.Gender, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.RefreshToken, u0.RefreshTokenExpiryTime, u0.Role, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UpdatedAt, u0.UserName
            FROM Appointments AS a
            LEFT JOIN Payments AS p ON a.AppointmentId == p.AppointmentId
            INNER JOIN Patients AS p0 ON a.PatientId == p0.PatientId
            INNER JOIN Users AS u ON p0.UserId == u.Id
            INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
            INNER JOIN Users AS u0 ON d.UserId == u0.Id
            WHERE a.AppointmentId == @__appointmentId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 20:11:53.507 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:11:53.508 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:11:53.509 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:53.509 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:53.510 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:53.511 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:11:53.511 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:11:53.512 +02:00 [DBG] Executing DbCommand [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt], [p0].[PatientId], [p0].[CreatedAt], [p0].[EmergencyContact], [p0].[UpdatedAt], [p0].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName]
FROM [Appointments] AS [a]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
INNER JOIN [Patients] AS [p0] ON [a].[PatientId] = [p0].[PatientId]
INNER JOIN [Users] AS [u] ON [p0].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
WHERE [a].[AppointmentId] = @__appointmentId_0
2025-11-29 20:11:53.520 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt], [p0].[PatientId], [p0].[CreatedAt], [p0].[EmergencyContact], [p0].[UpdatedAt], [p0].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName]
FROM [Appointments] AS [a]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
INNER JOIN [Patients] AS [p0] ON [a].[PatientId] = [p0].[PatientId]
INNER JOIN [Users] AS [u] ON [p0].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
WHERE [a].[AppointmentId] = @__appointmentId_0
2025-11-29 20:11:53.522 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.524 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.525 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.525 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.526 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.527 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.528 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.529 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.530 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:53.531 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:53.532 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 9ms reading results.
2025-11-29 20:11:53.533 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:53.534 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:11:53.542 +02:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-11-29 20:11:53.545 +02:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-11-29 20:11:54.259 +02:00 [INF] Received HTTP response headers after 711.2652ms - 201
2025-11-29 20:11:54.260 +02:00 [INF] End processing HTTP request after 719.488ms - 201
2025-11-29 20:11:54.267 +02:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-11-29 20:11:54.268 +02:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-11-29 20:11:54.491 +02:00 [INF] Received HTTP response headers after 221.727ms - 201
2025-11-29 20:11:54.491 +02:00 [INF] End processing HTTP request after 224.4551ms - 201
2025-11-29 20:11:54.497 +02:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-11-29 20:11:54.498 +02:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-11-29 20:11:54.743 +02:00 [INF] Received HTTP response headers after 244.2314ms - 201
2025-11-29 20:11:54.745 +02:00 [INF] End processing HTTP request after 247.4425ms - 201
2025-11-29 20:11:54.748 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Payment.PaymentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:54.765 +02:00 [DBG] The navigation 'Payment.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:54.767 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:54.768 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:54.769 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:11:54.779 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:11:54.781 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 20:11:54.782 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:11:54.784 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:11:54.786 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:54.787 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:54.788 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:11:54.789 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:11:54.792 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-11-29 20:11:54.794 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-29 20:11:54.804 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-29 20:11:54.806 +02:00 [DBG] The foreign key property 'Payment.PaymentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 20:11:54.809 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:54.810 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 4ms reading results.
2025-11-29 20:11:54.811 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:54.812 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:11:54.815 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:11:54.816 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 20:11:54.818 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:11:54.820 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:11:54.821 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:11:54.821 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:11:54.822 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:11:54.822 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-29 20:11:54.828 +02:00 [INF] Executed action Hospital.Controllers.PaymentController.CreatePayment (Hospital) in 1369.5874ms
2025-11-29 20:11:54.829 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 20:11:54.830 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:11:54.830 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:11:54.831 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:11:54.832 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 200 null application/json; charset=utf-8 1398.8044ms
2025-11-29 20:12:38.000 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 20:12:38.002 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 20:12:38.003 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 20:12:38.005 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:12:38.006 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:12:38.007 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:12:38.008 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:12:38.010 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:12:38.011 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:12:38.012 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 20:12:38.014 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:12:38.016 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:12:38.017 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:12:38.018 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:12:38.019 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:12:38.021 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:12:38.022 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:12:38.023 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:12:38.025 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 20:12:38.026 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:12:38.027 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:12:38.028 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:12:38.029 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:12:38.030 +02:00 [INF] Get  doctor By Id called at "2025-11-29T20:12:38.0306594+02:00"
2025-11-29 20:12:38.031 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 20:12:38.033 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:12:38.035 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:12:38.036 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:12:38.036 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:12:38.038 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:12:38.039 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:12:38.040 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:12:38.041 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:12:38.042 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:12:38.053 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:12:38.056 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:12:38.057 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:12:38.058 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:12:38.059 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:12:38.060 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:12:38.061 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:12:38.062 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:12:38.064 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:12:38.065 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:12:38.066 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:12:38.067 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:12:38.068 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:12:38.069 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:12:38.070 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:12:38.071 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:12:38.072 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:12:38.073 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 17ms reading results.
2025-11-29 20:12:38.074 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:12:38.075 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:12:38.076 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:12:38.078 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:12:38.078 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:12:38.079 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:12:38.079 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:12:38.080 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 20:12:38.081 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 60.3777ms
2025-11-29 20:12:38.082 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:12:38.083 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:12:38.084 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:12:38.085 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:12:38.086 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 86.216ms
2025-11-29 20:12:41.828 +02:00 [DBG] Connection id "0HNHFCB8HU7F2" received FIN.
2025-11-29 20:12:41.829 +02:00 [DBG] Connection id "0HNHFCB8HU7F2" is closed. The last processed stream ID was 77.
2025-11-29 20:12:41.829 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7F2 completed.
2025-11-29 20:12:41.830 +02:00 [DBG] Connection id "0HNHFCB8HU7F2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 20:12:41.833 +02:00 [DBG] Connection id "0HNHFCB8HU7F2" stopped.
2025-11-29 20:13:32.893 +02:00 [DBG] Connection id "0HNHFCB8HU7F3" accepted.
2025-11-29 20:13:32.893 +02:00 [DBG] Connection id "0HNHFCB8HU7F3" received FIN.
2025-11-29 20:13:32.894 +02:00 [DBG] Connection id "0HNHFCB8HU7F3" started.
2025-11-29 20:13:32.894 +02:00 [DBG] Connection id "0HNHFCB8HU7F4" accepted.
2025-11-29 20:13:32.895 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 20:13:32.896 +02:00 [DBG] Connection id "0HNHFCB8HU7F4" started.
2025-11-29 20:13:32.898 +02:00 [DBG] Connection id "0HNHFCB8HU7F3" stopped.
2025-11-29 20:13:32.898 +02:00 [DBG] Connection id "0HNHFCB8HU7F3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 20:13:32.900 +02:00 [DBG] Connection 0HNHFCB8HU7F4 established using the following protocol: "Tls13"
2025-11-29 20:13:32.902 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Doctor/all - null null
2025-11-29 20:13:32.904 +02:00 [DBG] 2 candidate(s) found for the request path '/api/Doctor/all'
2025-11-29 20:13:32.905 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)' with route pattern 'api/Doctor/all' is valid for the request path '/api/Doctor/all'
2025-11-29 20:13:32.906 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/all'
2025-11-29 20:13:32.907 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-29 20:13:32.908 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:13:32.909 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:13:32.910 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-29 20:13:32.912 +02:00 [INF] Route matched with {action = "GetAll", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 20:13:32.914 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:13:32.915 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:13:32.916 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:13:32.917 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:13:32.918 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:13:32.919 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:13:32.920 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:13:32.922 +02:00 [INF] get all doctor in system called at "2025-11-29T20:13:32.9222725+02:00"
2025-11-29 20:13:32.923 +02:00 [INF] Fetching all doctors in the system
2025-11-29 20:13:32.925 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:13:32.927 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .Include(d => d.User)
    .Include(d => d.Specialization)
    .Include(d => d.Branches)
    .Include(d => d.Schedules)
    .ThenInclude(s => s.Branch)'
2025-11-29 20:13:32.929 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 20:13:32.930 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-29 20:13:32.931 +02:00 [DBG] Including navigation: 'Doctor.Branches'.
2025-11-29 20:13:32.933 +02:00 [DBG] Including navigation: 'Doctor.Schedules'.
2025-11-29 20:13:32.934 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-11-29 20:13:32.944 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-11-29 20:13:32.950 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Doctor>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
            1 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 10], [Property: User.AccessFailedCount (int) Required, 11], [Property: User.ConcurrencyStamp (string) Concurrency, 12], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: User.DateOfBirth (DateOnly?), 14], [Property: User.Email (string) Index MaxLength(256), 15], [Property: User.EmailConfirmed (bool) Required, 16], [Property: User.FullName (string) Required MaxLength(150), 17], [Property: User.Gender (GenderType?) MaxLength(10), 18], [Property: User.LockoutEnabled (bool) Required, 19], [Property: User.LockoutEnd (DateTimeOffset?), 20], [Property: User.NormalizedEmail (string) Index MaxLength(256), 21], [Property: User.NormalizedUserName (string) Index MaxLength(256), 22], [Property: User.PasswordHash (string), 23], [Property: User.PhoneNumber (string), 24], [Property: User.PhoneNumberConfirmed (bool) Required, 25], [Property: User.RefreshToken (string), 26], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 27], [Property: User.Role (string) Required MaxLength(50), 28], [Property: User.SecurityStamp (string), 29], [Property: User.TwoFactorEnabled (bool) Required, 30], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 31], [Property: User.UserName (string) MaxLength(256), 32] }
            2 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 33], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 34], [Property: Specialization.Description (string), 35], [Property: Specialization.ImageURL (string) MaxLength(300), 36], [Property: Specialization.Name (string) Required MaxLength(120), 37], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38] }
            3 -> 0
            4 -> 10
            5 -> 33
            6 -> Dictionary<IProperty, int> { [Property: BranchDoctor (Dictionary<string, object>).BranchesBranchId (no field, int) Indexer Required PK FK AfterSave:Throw, 39], [Property: BranchDoctor (Dictionary<string, object>).DoctorsDoctorId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 40] }
            7 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 41], [Property: Branch.Address (string) MaxLength(250), 42], [Property: Branch.BranchName (string) Required MaxLength(150), 43], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 44], [Property: Branch.Description (string), 45], [Property: Branch.Email (string) MaxLength(200), 46], [Property: Branch.ImageURL (string) MaxLength(300), 47], [Property: Branch.Latitude (double?), 48], [Property: Branch.Longitude (double?), 49], [Property: Branch.Phone (string) MaxLength(25), 50], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 51] }
            8 -> 39
            9 -> 40
            10 -> 41
            11 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 52], [Property: Schedule.BranchId (int) Required FK Index, 53], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 54], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 55], [Property: Schedule.DoctorId (int) Required FK Index, 56], [Property: Schedule.EndTime (DateTime) Required, 57], [Property: Schedule.Shift (AppointmentShift) Required, 58], [Property: Schedule.StartTime (DateTime) Required, 59], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 60] }
            12 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 61], [Property: Branch.Address (string) MaxLength(250), 62], [Property: Branch.BranchName (string) Required MaxLength(150), 63], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 64], [Property: Branch.Description (string), 65], [Property: Branch.Email (string) MaxLength(200), 66], [Property: Branch.ImageURL (string) MaxLength(300), 67], [Property: Branch.Latitude (double?), 68], [Property: Branch.Longitude (double?), 69], [Property: Branch.Phone (string) MaxLength(25), 70], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 71] }
            13 -> 52
            14 -> 61
        SELECT d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s.SpecializationId, s.CreatedAt, s.Description, s.ImageURL, s.Name, s.UpdatedAt, t.BranchesBranchId, t.DoctorsDoctorId, t.BranchId, t.Address, t.BranchName, t.CreatedAt, t.Description, t.Email, t.ImageURL, t.Latitude, t.Longitude, t.Phone, t.UpdatedAt, t0.ScheduleId, t0.BranchId, t0.CreatedAt, t0.DayOfWeek, t0.DoctorId, t0.EndTime, t0.Shift, t0.StartTime, t0.UpdatedAt, t0.BranchId0, t0.Address, t0.BranchName, t0.CreatedAt0, t0.Description, t0.Email, t0.ImageURL, t0.Latitude, t0.Longitude, t0.Phone, t0.UpdatedAt0
        FROM Doctors AS d
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s ON d.SpecializationId == s.SpecializationId
        LEFT JOIN 
        (
            SELECT d0.BranchesBranchId, d0.DoctorsDoctorId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
            FROM DoctorBranches AS d0
            INNER JOIN Branches AS b ON d0.BranchesBranchId == b.BranchId
        ) AS t ON d.DoctorId == t.DoctorsDoctorId
        LEFT JOIN 
        (
            SELECT s0.ScheduleId, s0.BranchId, s0.CreatedAt, s0.DayOfWeek, s0.DoctorId, s0.EndTime, s0.Shift, s0.StartTime, s0.UpdatedAt, b0.BranchId AS BranchId0, b0.Address, b0.BranchName, b0.CreatedAt AS CreatedAt0, b0.Description, b0.Email, b0.ImageURL, b0.Latitude, b0.Longitude, b0.Phone, b0.UpdatedAt AS UpdatedAt0
            FROM Schedules AS s0
            INNER JOIN Branches AS b0 ON s0.BranchId == b0.BranchId
        ) AS t0 ON d.DoctorId == t0.DoctorId
        ORDER BY d.DoctorId ASC, u.Id ASC, s.SpecializationId ASC, t.BranchesBranchId ASC, t.DoctorsDoctorId ASC, t.BranchId ASC, t0.ScheduleId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 20:13:32.952 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:13:32.953 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:13:32.954 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:13:32.955 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:13:32.956 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:13:32.956 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:13:32.957 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:13:32.958 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-11-29 20:13:32.975 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s].[SpecializationId], [s].[CreatedAt], [s].[Description], [s].[ImageURL], [s].[Name], [s].[UpdatedAt], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t].[Address], [t].[BranchName], [t].[CreatedAt], [t].[Description], [t].[Email], [t].[ImageURL], [t].[Latitude], [t].[Longitude], [t].[Phone], [t].[UpdatedAt], [t0].[ScheduleId], [t0].[BranchId], [t0].[CreatedAt], [t0].[DayOfWeek], [t0].[DoctorId], [t0].[EndTime], [t0].[Shift], [t0].[StartTime], [t0].[UpdatedAt], [t0].[BranchId0], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt0], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt0]
FROM [Doctors] AS [d]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t] ON [d].[DoctorId] = [t].[DoctorsDoctorId]
LEFT JOIN (
    SELECT [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt], [b0].[BranchId] AS [BranchId0], [b0].[Address], [b0].[BranchName], [b0].[CreatedAt] AS [CreatedAt0], [b0].[Description], [b0].[Email], [b0].[ImageURL], [b0].[Latitude], [b0].[Longitude], [b0].[Phone], [b0].[UpdatedAt] AS [UpdatedAt0]
    FROM [Schedules] AS [s0]
    INNER JOIN [Branches] AS [b0] ON [s0].[BranchId] = [b0].[BranchId]
) AS [t0] ON [d].[DoctorId] = [t0].[DoctorId]
ORDER BY [d].[DoctorId], [u].[Id], [s].[SpecializationId], [t].[BranchesBranchId], [t].[DoctorsDoctorId], [t].[BranchId], [t0].[ScheduleId]
2025-11-29 20:13:32.977 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.978 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.979 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.980 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.981 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.982 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.982 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.983 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.984 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.985 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.986 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.987 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.988 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.989 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.990 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.990 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.991 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.992 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.993 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.994 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.995 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.996 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.996 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.997 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:32.998 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.000 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.001 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.001 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.002 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.003 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.004 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.005 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.006 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.007 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.008 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.009 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.010 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.010 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.011 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.012 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.013 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.014 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.015 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.016 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.016 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:13:33.017 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:13:33.018 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 40ms reading results.
2025-11-29 20:13:33.019 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:13:33.020 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:13:33.028 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:13:33.030 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:13:33.030 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:13:33.031 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:13:33.031 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:13:33.032 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Doctor.DoctorDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:13:33.033 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetAll (Hospital) in 114.8071ms
2025-11-29 20:13:33.034 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetAll (Hospital)'
2025-11-29 20:13:33.035 +02:00 [DBG] Connection id "0HNHFCB8HU7F4" completed keep alive response.
2025-11-29 20:13:33.036 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:13:33.037 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:13:33.038 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:13:33.039 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Doctor/all - 200 null application/json; charset=utf-8 136.6114ms
2025-11-29 20:13:53.467 +02:00 [DBG] HttpMessageHandler expired after 120000ms for client 'IPaymobClient'
2025-11-29 20:14:03.469 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:14:03.473 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.9615ms - processed: 0 items - remaining: 1 items
2025-11-29 20:14:04.862 +02:00 [DBG] Connection id "0HNHFCB8HU7F5" accepted.
2025-11-29 20:14:04.863 +02:00 [DBG] Connection id "0HNHFCB8HU7F5" started.
2025-11-29 20:14:04.866 +02:00 [DBG] Connection 0HNHFCB8HU7F5 established using the following protocol: "Tls13"
2025-11-29 20:14:04.867 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-11-29 20:14:04.869 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 20:14:04.869 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 20:14:04.870 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:14:04.871 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:14:04.871 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:14:04.872 +02:00 [DBG] The request is a preflight request.
2025-11-29 20:14:04.873 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 5.6738ms
2025-11-29 20:14:04.874 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 62
2025-11-29 20:14:04.876 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 20:14:04.877 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-29 20:14:04.878 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 20:14:04.879 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:14:04.879 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:14:04.880 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:14:04.881 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:14:04.881 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 20:14:04.882 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-29 20:14:04.883 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:14:04.884 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:14:04.885 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:14:04.886 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:14:04.887 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:14:04.888 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 20:14:04.889 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 20:14:04.890 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 20:14:04.891 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-29 20:14:04.892 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 20:14:04.893 +02:00 [DBG] Connection id "0HNHFCB8HU7F5", Request id "0HNHFCB8HU7F5:00000003": started reading request body.
2025-11-29 20:14:04.894 +02:00 [DBG] Connection id "0HNHFCB8HU7F5", Request id "0HNHFCB8HU7F5:00000003": done reading request body.
2025-11-29 20:14:04.895 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-29 20:14:04.896 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 20:14:04.897 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 20:14:04.898 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 20:14:04.899 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 20:14:04.900 +02:00 [INF] Login called at "2025-11-29T20:14:04.9003410+02:00"
2025-11-29 20:14:04.900 +02:00 [INF] Login attempt for email: walaa.elbishlawy5@gmail.com
2025-11-29 20:14:04.901 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:14:04.903 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:14:04.903 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:14:04.904 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:04.905 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:04.906 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:14:04.907 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:14:04.908 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:14:04.908 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 20:14:04.913 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 20:14:04.915 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:04.915 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:04.916 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:14:04.917 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:04.918 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:14:04.998 +02:00 [DBG] Creating JWT token for user 16db9102-5e8f-4489-b499-3e3dd79e96e2
2025-11-29 20:14:04.999 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.001 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.002 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:14:05.003 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:14:05.004 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 20:14:05.005 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 20:14:05.009 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 20:14:05.011 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.012 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:14:05.013 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.014 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:14:05.016 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.017 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.018 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:14:05.019 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:14:05.020 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:14:05.021 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 20:14:05.027 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 20:14:05.029 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.030 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:14:05.031 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.032 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:14:05.033 +02:00 [DBG] JWT token created for user 16db9102-5e8f-4489-b499-3e3dd79e96e2, expires at "2025-11-29T19:14:05.0000000Z"
2025-11-29 20:14:05.035 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.036 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.037 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:14:05.038 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:14:05.038 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:14:05.039 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 20:14:05.041 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 20:14:05.042 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.043 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 20:14:05.044 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.045 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:14:05.046 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.047 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.048 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:14:05.048 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:14:05.049 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:14:05.050 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 20:14:05.053 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 20:14:05.055 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.055 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 20:14:05.056 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.057 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:14:05.059 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.060 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:14:05.061 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:14:05.061 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 20:14:05.062 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:14:05.063 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:14:05.065 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.066 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.067 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:14:05.067 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:14:05.068 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:14:05.069 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 20:14:05.076 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 20:14:05.078 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.079 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:14:05.080 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.081 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:14:05.082 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.083 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 20:14:05.085 +02:00 [DBG] Compiling query expression: 
'DbSet<Doctor>()
    .FirstOrDefault(d => d.UserId == __user_Id_0)'
2025-11-29 20:14:05.088 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Doctor>(
    asyncEnumerable: new SingleQueryingEnumerable<Doctor>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Doctor.Available (bool?), 1], [Property: Doctor.Biography (string), 2], [Property: Doctor.ConsultationFees (decimal) Required, 3], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 4], [Property: Doctor.ExperienceYears (int?), 5], [Property: Doctor.ImageURL (string) MaxLength(300), 6], [Property: Doctor.SpecializationId (int) Required FK Index, 7], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8], [Property: Doctor.UserId (string) Required FK Index, 9] }
            SELECT TOP(1) d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId
            FROM Doctors AS d
            WHERE d.UserId == @__user_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Doctor>, 
        Clinic.Infrastructure.Persistence.AppDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-29 20:14:05.090 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.090 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.091 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:14:05.092 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:14:05.093 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:14:05.094 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId]
FROM [Doctors] AS [d]
WHERE [d].[UserId] = @__user_Id_0
2025-11-29 20:14:05.099 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId]
FROM [Doctors] AS [d]
WHERE [d].[UserId] = @__user_Id_0
2025-11-29 20:14:05.100 +02:00 [DBG] The navigation 'User.DoctorProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.101 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.102 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.103 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 20:14:05.104 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.105 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:14:05.106 +02:00 [INF] Doctor 5 logged in successfully
2025-11-29 20:14:05.107 +02:00 [INF] User walaa.elbishlawy5@gmail.com logged in successfully with roles: Doctor
2025-11-29 20:14:05.108 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:14:05.109 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:14:05.110 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:14:05.110 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:14:05.111 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:14:05.112 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-29 20:14:05.113 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 224.6437ms
2025-11-29 20:14:05.114 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 20:14:05.115 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:14:05.115 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.116 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:14:05.117 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 242.8437ms
2025-11-29 20:14:05.153 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/schedule/doctor/5 - null null
2025-11-29 20:14:05.155 +02:00 [DBG] 1 candidate(s) found for the request path '/api/schedule/doctor/5'
2025-11-29 20:14:05.156 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetByDoctorId (Hospital)' with route pattern 'api/Schedule/doctor/{doctorId}' is valid for the request path '/api/schedule/doctor/5'
2025-11-29 20:14:05.157 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetByDoctorId (Hospital)'
2025-11-29 20:14:05.158 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:14:05.158 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:14:05.159 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:14:05.160 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:14:05.161 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetByDoctorId (Hospital)'
2025-11-29 20:14:05.165 +02:00 [INF] Route matched with {action = "GetByDoctorId", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetByDoctorId(Int32) on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 20:14:05.166 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:14:05.168 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:14:05.169 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:14:05.170 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:14:05.172 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:14:05.173 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:14:05.175 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:14:05.176 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:14:05.177 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 20:14:05.178 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:14:05.179 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:14:05.181 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:14:05.182 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:14:05.184 +02:00 [INF] get schedule by doctor id called at "2025-11-29T20:14:05.1844714+02:00"
2025-11-29 20:14:05.186 +02:00 [INF] Fetching schedules for DoctorId: 5
2025-11-29 20:14:05.188 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:14:05.190 +02:00 [DBG] Compiling query expression: 
'DbSet<Schedule>()
    .Where(s => s.DoctorId == __doctorId_0)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.User)
    .Include(s => s.Doctor)
    .ThenInclude(d => d.Specialization)
    .Include(s => s.Branch)'
2025-11-29 20:14:05.191 +02:00 [DBG] Including navigation: 'Schedule.Doctor'.
2025-11-29 20:14:05.192 +02:00 [DBG] Including navigation: 'Doctor.User'.
2025-11-29 20:14:05.193 +02:00 [DBG] Including navigation: 'Doctor.Specialization'.
2025-11-29 20:14:05.193 +02:00 [DBG] Including navigation: 'Schedule.Branch'.
2025-11-29 20:14:05.204 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Schedule>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Schedule.ScheduleId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Schedule.BranchId (int) Required FK Index, 1], [Property: Schedule.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Schedule.DayOfWeek (string) Required MaxLength(20), 3], [Property: Schedule.DoctorId (int) Required FK Index, 4], [Property: Schedule.EndTime (DateTime) Required, 5], [Property: Schedule.Shift (AppointmentShift) Required, 6], [Property: Schedule.StartTime (DateTime) Required, 7], [Property: Schedule.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 8] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 9], [Property: Doctor.Available (bool?), 10], [Property: Doctor.Biography (string), 11], [Property: Doctor.ConsultationFees (decimal) Required, 12], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Doctor.ExperienceYears (int?), 14], [Property: Doctor.ImageURL (string) MaxLength(300), 15], [Property: Doctor.SpecializationId (int) Required FK Index, 16], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 17], [Property: Doctor.UserId (string) Required FK Index, 18] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 19], [Property: User.AccessFailedCount (int) Required, 20], [Property: User.ConcurrencyStamp (string) Concurrency, 21], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: User.DateOfBirth (DateOnly?), 23], [Property: User.Email (string) Index MaxLength(256), 24], [Property: User.EmailConfirmed (bool) Required, 25], [Property: User.FullName (string) Required MaxLength(150), 26], [Property: User.Gender (GenderType?) MaxLength(10), 27], [Property: User.LockoutEnabled (bool) Required, 28], [Property: User.LockoutEnd (DateTimeOffset?), 29], [Property: User.NormalizedEmail (string) Index MaxLength(256), 30], [Property: User.NormalizedUserName (string) Index MaxLength(256), 31], [Property: User.PasswordHash (string), 32], [Property: User.PhoneNumber (string), 33], [Property: User.PhoneNumberConfirmed (bool) Required, 34], [Property: User.RefreshToken (string), 35], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 36], [Property: User.Role (string) Required MaxLength(50), 37], [Property: User.SecurityStamp (string), 38], [Property: User.TwoFactorEnabled (bool) Required, 39], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 40], [Property: User.UserName (string) MaxLength(256), 41] }
            3 -> Dictionary<IProperty, int> { [Property: Specialization.SpecializationId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Specialization.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Specialization.Description (string), 44], [Property: Specialization.ImageURL (string) MaxLength(300), 45], [Property: Specialization.Name (string) Required MaxLength(120), 46], [Property: Specialization.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 47] }
            4 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 48], [Property: Branch.Address (string) MaxLength(250), 49], [Property: Branch.BranchName (string) Required MaxLength(150), 50], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 51], [Property: Branch.Description (string), 52], [Property: Branch.Email (string) MaxLength(200), 53], [Property: Branch.ImageURL (string) MaxLength(300), 54], [Property: Branch.Latitude (double?), 55], [Property: Branch.Longitude (double?), 56], [Property: Branch.Phone (string) MaxLength(25), 57], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 58] }
        SELECT s.ScheduleId, s.BranchId, s.CreatedAt, s.DayOfWeek, s.DoctorId, s.EndTime, s.Shift, s.StartTime, s.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, s0.SpecializationId, s0.CreatedAt, s0.Description, s0.ImageURL, s0.Name, s0.UpdatedAt, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Schedules AS s
        INNER JOIN Doctors AS d ON s.DoctorId == d.DoctorId
        INNER JOIN Users AS u ON d.UserId == u.Id
        INNER JOIN Specializations AS s0 ON d.SpecializationId == s0.SpecializationId
        INNER JOIN Branches AS b ON s.BranchId == b.BranchId
        WHERE s.DoctorId == @__doctorId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Schedule>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 20:14:05.206 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:14:05.207 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:14:05.208 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.210 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.211 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:14:05.212 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:14:05.213 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 20:14:05.215 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE [s].[DoctorId] = @__doctorId_0
2025-11-29 20:14:05.228 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
WHERE [s].[DoctorId] = @__doctorId_0
2025-11-29 20:14:05.231 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.233 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.234 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.236 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.237 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.238 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.239 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.240 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.241 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.242 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.244 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.245 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.246 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.247 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.248 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:05.249 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.250 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 19ms reading results.
2025-11-29 20:14:05.253 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.254 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:14:05.256 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:14:05.258 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:14:05.258 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:14:05.259 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:14:05.260 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:14:05.261 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:14:05.262 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetByDoctorId (Hospital) in 89.1409ms
2025-11-29 20:14:05.264 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetByDoctorId (Hospital)'
2025-11-29 20:14:05.266 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:14:05.267 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:05.268 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-11-29 20:14:05.269 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/schedule/doctor/5 - 200 null application/json; charset=utf-8 116.5484ms
2025-11-29 20:14:13.475 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:14:13.476 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2025-11-29 20:14:16.476 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5/today - null null
2025-11-29 20:14:16.478 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5/today'
2025-11-29 20:14:16.480 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId:int}/today' is valid for the request path '/api/Doctor/5/today'
2025-11-29 20:14:16.481 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-11-29 20:14:16.482 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:14:16.482 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:14:16.483 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:14:16.484 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:14:16.485 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-11-29 20:14:16.488 +02:00 [INF] Route matched with {action = "GetTodayAppointmentsForDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTodayAppointmentsForDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 20:14:16.489 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:14:16.490 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:14:16.491 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:14:16.492 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:14:16.493 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:14:16.494 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:14:16.495 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:14:16.496 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:14:16.497 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 20:14:16.498 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:14:16.499 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:14:16.500 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:14:16.501 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:14:16.502 +02:00 [INF] GetTodayAppointmentsForDoctor  called at "2025-11-29T20:14:16.5025084+02:00"
2025-11-29 20:14:16.504 +02:00 [INF] Fetching today's appointments for doctor ID 5
2025-11-29 20:14:16.505 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:14:16.506 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:14:16.507 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:14:16.507 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:16.509 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:16.509 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:14:16.510 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:14:16.511 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:14:16.512 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:14:16.524 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:14:16.526 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.527 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.528 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.529 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.530 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.531 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.532 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.534 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.535 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.536 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.537 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.538 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.539 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.540 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.541 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.542 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:16.543 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 16ms reading results.
2025-11-29 20:14:16.544 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:16.545 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:14:16.549 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .ThenInclude(p => p.User)
    .Include(a => a.Branch)
    .Where(a => a.DoctorId == __doctorId_0 && a.Date == __date_1 && (int)a.Status == 2 || (int)a.Status == 3)'
2025-11-29 20:14:16.550 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-29 20:14:16.552 +02:00 [DBG] Including navigation: 'Patient.User'.
2025-11-29 20:14:16.553 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-29 20:14:16.566 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 9], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Patient.EmergencyContact (string) MaxLength(150), 14], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Patient.UserId (string) Required FK Index, 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (string) Required PK AfterSave:Throw, 17], [Property: User.AccessFailedCount (int) Required, 18], [Property: User.ConcurrencyStamp (string) Concurrency, 19], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: User.DateOfBirth (DateOnly?), 21], [Property: User.Email (string) Index MaxLength(256), 22], [Property: User.EmailConfirmed (bool) Required, 23], [Property: User.FullName (string) Required MaxLength(150), 24], [Property: User.Gender (GenderType?) MaxLength(10), 25], [Property: User.LockoutEnabled (bool) Required, 26], [Property: User.LockoutEnd (DateTimeOffset?), 27], [Property: User.NormalizedEmail (string) Index MaxLength(256), 28], [Property: User.NormalizedUserName (string) Index MaxLength(256), 29], [Property: User.PasswordHash (string), 30], [Property: User.PhoneNumber (string), 31], [Property: User.PhoneNumberConfirmed (bool) Required, 32], [Property: User.RefreshToken (string), 33], [Property: User.RefreshTokenExpiryTime (DateTime) Required, 34], [Property: User.Role (string) Required MaxLength(50), 35], [Property: User.SecurityStamp (string), 36], [Property: User.TwoFactorEnabled (bool) Required, 37], [Property: User.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 38], [Property: User.UserName (string) MaxLength(256), 39] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: Branch.Address (string) MaxLength(250), 41], [Property: Branch.BranchName (string) Required MaxLength(150), 42], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 43], [Property: Branch.Description (string), 44], [Property: Branch.Email (string) MaxLength(200), 45], [Property: Branch.ImageURL (string) MaxLength(300), 46], [Property: Branch.Latitude (double?), 47], [Property: Branch.Longitude (double?), 48], [Property: Branch.Phone (string) MaxLength(25), 49], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 50] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DateOfBirth, u.Email, u.EmailConfirmed, u.FullName, u.Gender, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.RefreshToken, u.RefreshTokenExpiryTime, u.Role, u.SecurityStamp, u.TwoFactorEnabled, u.UpdatedAt, u.UserName, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Users AS u ON p.UserId == u.Id
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE (((a.DoctorId == @__doctorId_0) && (a.Date == @__date_1)) && (a.Status == N'Confirmed')) || (a.Status == N'Completed')), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 20:14:16.567 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:16.568 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:16.569 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:14:16.570 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:14:16.571 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:14:16.572 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE ([a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed') OR [a].[Status] = N'Completed'
2025-11-29 20:14:16.588 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__doctorId_0='?' (DbType = Int32), @__date_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE ([a].[DoctorId] = @__doctorId_0 AND [a].[Date] = @__date_1 AND [a].[Status] = N'Confirmed') OR [a].[Status] = N'Completed'
2025-11-29 20:14:16.590 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.591 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.592 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.593 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.594 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.595 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:14:16.596 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:16.597 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-11-29 20:14:16.598 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:16.599 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:14:16.604 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:14:16.605 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:14:16.606 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:14:16.606 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:14:16.607 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:14:16.608 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppoinmentandPaientDetaliesDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:14:16.610 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital) in 116.332ms
2025-11-29 20:14:16.611 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetTodayAppointmentsForDoctor (Hospital)'
2025-11-29 20:14:16.612 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:14:16.613 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:14:16.614 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:14:16.614 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5/today - 200 null application/json; charset=utf-8 137.974ms
2025-11-29 20:14:23.478 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:14:23.479 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0041ms - processed: 0 items - remaining: 1 items
2025-11-29 20:14:33.479 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:14:33.480 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0069ms - processed: 0 items - remaining: 1 items
2025-11-29 20:14:43.481 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:14:43.482 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2025-11-29 20:14:53.483 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:14:53.484 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0056ms - processed: 0 items - remaining: 1 items
2025-11-29 20:15:03.485 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:15:03.485 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2025-11-29 20:15:13.486 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:15:13.487 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2025-11-29 20:15:23.488 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:15:23.489 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2025-11-29 20:15:33.491 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:15:33.492 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-11-29 20:15:43.493 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:15:43.494 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0065ms - processed: 0 items - remaining: 1 items
2025-11-29 20:15:44.082 +02:00 [DBG] Connection id "0HNHFCB8HU7F4" disconnecting.
2025-11-29 20:15:44.083 +02:00 [DBG] Connection id "0HNHFCB8HU7F4" stopped.
2025-11-29 20:15:44.085 +02:00 [DBG] Connection id "0HNHFCB8HU7F4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 20:15:53.495 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:15:53.496 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0039ms - processed: 0 items - remaining: 1 items
2025-11-29 20:16:03.499 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:16:03.500 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2025-11-29 20:16:13.501 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:16:13.503 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-11-29 20:16:23.505 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:16:23.506 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0032ms - processed: 0 items - remaining: 1 items
2025-11-29 20:16:28.102 +02:00 [DBG] Connection id "0HNHFCB8HU7F5" is closing.
2025-11-29 20:16:28.103 +02:00 [DBG] Connection id "0HNHFCB8HU7F5" is closed. The last processed stream ID was 7.
2025-11-29 20:16:28.104 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7F5 completed.
2025-11-29 20:16:28.105 +02:00 [DBG] Connection id "0HNHFCB8HU7F5" received FIN.
2025-11-29 20:16:28.105 +02:00 [DBG] Connection id "0HNHFCB8HU7F5" stopped.
2025-11-29 20:16:28.107 +02:00 [DBG] Connection id "0HNHFCB8HU7F5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 20:16:33.508 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:16:33.510 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-11-29 20:16:43.511 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:16:43.512 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2025-11-29 20:16:53.514 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:16:53.515 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0034ms - processed: 0 items - remaining: 1 items
2025-11-29 20:17:03.516 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:17:03.518 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-11-29 20:17:13.519 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:17:13.520 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2025-11-29 20:17:19.530 +02:00 [DBG] Connection id "0HNHFCB8HU7F6" accepted.
2025-11-29 20:17:19.530 +02:00 [DBG] Connection id "0HNHFCB8HU7F6" received FIN.
2025-11-29 20:17:19.530 +02:00 [DBG] Connection id "0HNHFCB8HU7F6" started.
2025-11-29 20:17:19.531 +02:00 [DBG] Connection id "0HNHFCB8HU7F7" accepted.
2025-11-29 20:17:19.532 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 20:17:19.533 +02:00 [DBG] Connection id "0HNHFCB8HU7F7" started.
2025-11-29 20:17:19.534 +02:00 [DBG] Connection id "0HNHFCB8HU7F6" stopped.
2025-11-29 20:17:19.535 +02:00 [DBG] Connection id "0HNHFCB8HU7F6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 20:17:19.538 +02:00 [DBG] Connection 0HNHFCB8HU7F7 established using the following protocol: "Tls13"
2025-11-29 20:17:19.539 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAll - null null
2025-11-29 20:17:19.540 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/GetAll'
2025-11-29 20:17:19.541 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)' with route pattern 'api/Appointment/GetAll' is valid for the request path '/api/Appointment/GetAll'
2025-11-29 20:17:19.542 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-29 20:17:19.542 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:17:19.543 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:17:19.544 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-29 20:17:19.546 +02:00 [INF] Route matched with {action = "GetAll", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 20:17:19.547 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:17:19.548 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:17:19.549 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:17:19.550 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:17:19.551 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:17:19.552 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 20:17:19.553 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 20:17:19.554 +02:00 [INF] Get All Appointments called at "2025-11-29T20:17:19.5543946+02:00"
2025-11-29 20:17:19.555 +02:00 [INF] Fetching all appointments
2025-11-29 20:17:19.556 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:17:19.558 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Include(a => a.Patient)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)'
2025-11-29 20:17:19.559 +02:00 [DBG] Including navigation: 'Appointment.Patient'.
2025-11-29 20:17:19.559 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-29 20:17:19.560 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-29 20:17:19.567 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 9], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
            1 -> Dictionary<IProperty, int> { [Property: Patient.PatientId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Patient.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 13], [Property: Patient.EmergencyContact (string) MaxLength(150), 14], [Property: Patient.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 15], [Property: Patient.UserId (string) Required FK Index, 16] }
            2 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: Doctor.Available (bool?), 18], [Property: Doctor.Biography (string), 19], [Property: Doctor.ConsultationFees (decimal) Required, 20], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 21], [Property: Doctor.ExperienceYears (int?), 22], [Property: Doctor.ImageURL (string) MaxLength(300), 23], [Property: Doctor.SpecializationId (int) Required FK Index, 24], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 25], [Property: Doctor.UserId (string) Required FK Index, 26] }
            3 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 27], [Property: Branch.Address (string) MaxLength(250), 28], [Property: Branch.BranchName (string) Required MaxLength(150), 29], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: Branch.Description (string), 31], [Property: Branch.Email (string) MaxLength(200), 32], [Property: Branch.ImageURL (string) MaxLength(300), 33], [Property: Branch.Latitude (double?), 34], [Property: Branch.Longitude (double?), 35], [Property: Branch.Phone (string) MaxLength(25), 36], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 37] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, p.PatientId, p.CreatedAt, p.EmergencyContact, p.UpdatedAt, p.UserId, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Patients AS p ON a.PatientId == p.PatientId
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 20:17:19.568 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:17:19.568 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:17:19.569 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:17:19.570 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:17:19.571 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:17:19.571 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:17:19.572 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:17:19.573 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
2025-11-29 20:17:19.579 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Patients] AS [p] ON [a].[PatientId] = [p].[PatientId]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
2025-11-29 20:17:19.580 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.581 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.582 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.583 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.583 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.584 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.585 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.586 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.587 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.587 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.588 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.589 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.590 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.590 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.591 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.592 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.593 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.594 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.594 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.595 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.596 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.597 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.597 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.598 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.599 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.600 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.601 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.602 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.602 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.603 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.604 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.605 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.606 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.606 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.607 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.608 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.609 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.610 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.610 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.611 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.612 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.613 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.613 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.614 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.615 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.616 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.617 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.618 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.618 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.619 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.620 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.621 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.622 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.622 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.623 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.624 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.625 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.625 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.626 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.627 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.628 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.629 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.630 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.630 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.631 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.632 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.633 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.634 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.634 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.635 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.636 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.637 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.638 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.638 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.639 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.640 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.641 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.642 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.642 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.643 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.644 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.645 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.646 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.647 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.647 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.648 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.649 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.650 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.650 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.651 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.652 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.653 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.654 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.655 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.656 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.657 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.657 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.658 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:17:19.659 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:17:19.660 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 79ms reading results.
2025-11-29 20:17:19.661 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:17:19.662 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:17:19.665 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:17:19.667 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:17:19.667 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:17:19.668 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:17:19.668 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:17:19.669 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:17:19.670 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetAll (Hospital) in 118.5076ms
2025-11-29 20:17:19.671 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetAll (Hospital)'
2025-11-29 20:17:19.672 +02:00 [DBG] Connection id "0HNHFCB8HU7F7" completed keep alive response.
2025-11-29 20:17:19.672 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:17:19.673 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:17:19.674 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:17:19.675 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/GetAll - 200 null application/json; charset=utf-8 135.9988ms
2025-11-29 20:17:23.521 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:17:23.522 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0221ms - processed: 0 items - remaining: 1 items
2025-11-29 20:17:33.524 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:17:33.526 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0033ms - processed: 0 items - remaining: 1 items
2025-11-29 20:17:43.526 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:17:43.527 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2025-11-29 20:17:53.528 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:17:53.530 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2025-11-29 20:18:03.532 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:18:03.534 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-11-29 20:18:13.536 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:18:13.538 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0828ms - processed: 0 items - remaining: 1 items
2025-11-29 20:18:23.539 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:18:23.541 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 1 items
2025-11-29 20:18:33.541 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:18:33.543 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0029ms - processed: 0 items - remaining: 1 items
2025-11-29 20:18:43.544 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:18:43.545 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.003ms - processed: 0 items - remaining: 1 items
2025-11-29 20:18:53.547 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:18:53.548 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0219ms - processed: 0 items - remaining: 1 items
2025-11-29 20:19:03.550 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:19:03.552 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0037ms - processed: 0 items - remaining: 1 items
2025-11-29 20:19:13.553 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:19:13.555 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-11-29 20:19:23.556 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:19:23.558 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-11-29 20:19:31.198 +02:00 [DBG] Connection id "0HNHFCB8HU7F7" disconnecting.
2025-11-29 20:19:31.200 +02:00 [DBG] Connection id "0HNHFCB8HU7F7" stopped.
2025-11-29 20:19:31.201 +02:00 [DBG] Connection id "0HNHFCB8HU7F7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 20:19:33.559 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:19:33.561 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-11-29 20:19:43.562 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:19:43.564 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-11-29 20:19:53.565 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:19:53.568 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2025-11-29 20:20:03.568 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:20:03.570 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-11-29 20:20:13.570 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:20:13.571 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0026ms - processed: 0 items - remaining: 1 items
2025-11-29 20:20:23.572 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:20:23.575 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0036ms - processed: 0 items - remaining: 1 items
2025-11-29 20:20:33.575 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:20:33.577 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-11-29 20:20:43.577 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:20:43.579 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-11-29 20:20:53.580 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:20:53.582 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-11-29 20:21:03.583 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:21:03.586 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-11-29 20:21:13.587 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:21:13.588 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0028ms - processed: 0 items - remaining: 1 items
2025-11-29 20:21:23.589 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:21:23.591 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-11-29 20:21:33.592 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:21:33.594 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-11-29 20:21:43.596 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:21:43.597 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-11-29 20:21:53.600 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:21:53.601 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-11-29 20:22:03.602 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:22:03.603 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-11-29 20:22:13.603 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:22:13.605 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-11-29 20:22:23.607 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:22:23.609 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-11-29 20:22:33.609 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:22:33.611 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-11-29 20:22:43.612 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:22:43.614 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2025-11-29 20:22:53.615 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:22:53.617 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 1 items
2025-11-29 20:23:03.619 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:23:03.620 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0024ms - processed: 0 items - remaining: 1 items
2025-11-29 20:23:13.621 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:23:13.622 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0831ms - processed: 0 items - remaining: 1 items
2025-11-29 20:23:23.624 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:23:23.625 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-11-29 20:23:33.627 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:23:33.629 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-11-29 20:23:43.630 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:23:43.632 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-11-29 20:23:53.633 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:23:53.635 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-11-29 20:24:03.636 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:24:03.639 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0047ms - processed: 0 items - remaining: 1 items
2025-11-29 20:24:13.640 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:24:13.641 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-11-29 20:24:23.642 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:24:23.645 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:24:33.646 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:24:33.647 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:24:43.651 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:24:43.651 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:24:53.652 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:24:53.653 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:25:03.654 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:25:03.656 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:25:13.658 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:25:13.659 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-11-29 20:25:23.661 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:25:23.664 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0175ms - processed: 0 items - remaining: 1 items
2025-11-29 20:25:33.666 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:25:33.667 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:25:43.668 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:25:43.669 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:25:53.670 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:25:53.672 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-11-29 20:26:03.673 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:26:03.675 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2025-11-29 20:26:13.676 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:26:13.677 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:26:23.679 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:26:23.681 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:26:33.682 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:26:33.683 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-11-29 20:26:43.684 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:26:43.685 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-11-29 20:26:53.686 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:26:53.688 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-11-29 20:27:03.690 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:27:03.691 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-11-29 20:27:13.692 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:27:13.694 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:27:23.696 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:27:23.697 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:27:33.698 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:27:33.699 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:27:43.701 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:27:43.703 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:27:53.703 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:27:53.706 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:28:03.707 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:28:03.709 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-11-29 20:28:13.710 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:28:13.712 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:28:23.713 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:28:23.714 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:28:33.716 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:28:33.717 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:28:43.719 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:28:43.720 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2025-11-29 20:28:53.722 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:28:53.723 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:29:03.725 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:29:03.727 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:29:13.728 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:29:13.729 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-11-29 20:29:23.730 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:29:23.731 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:29:33.732 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:29:33.734 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:29:43.736 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:29:43.737 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:29:53.739 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:29:53.740 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:30:03.741 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:30:03.743 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:30:13.744 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:30:13.746 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:30:23.747 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:30:23.749 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-11-29 20:30:33.751 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:30:33.752 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-11-29 20:30:43.754 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:30:43.755 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-11-29 20:30:53.757 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:30:53.759 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:31:03.760 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:31:03.762 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:31:13.763 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:31:13.765 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-11-29 20:31:23.766 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:31:23.767 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-11-29 20:31:33.768 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:31:33.769 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-11-29 20:31:43.771 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:31:43.772 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:31:53.773 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:31:53.775 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:32:03.776 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:32:03.777 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:32:13.779 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:32:13.781 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:32:23.782 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:32:23.783 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:32:33.785 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:32:33.785 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:32:35.246 +02:00 [DBG] Connection id "0HNHFCB8HU7F8" accepted.
2025-11-29 20:32:35.247 +02:00 [DBG] Connection id "0HNHFCB8HU7F8" started.
2025-11-29 20:32:35.247 +02:00 [DBG] Connection id "0HNHFCB8HU7F8" received FIN.
2025-11-29 20:32:35.247 +02:00 [DBG] Connection id "0HNHFCB8HU7F9" accepted.
2025-11-29 20:32:35.248 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-11-29 20:32:35.249 +02:00 [DBG] Connection id "0HNHFCB8HU7F9" started.
2025-11-29 20:32:35.250 +02:00 [DBG] Connection id "0HNHFCB8HU7F8" stopped.
2025-11-29 20:32:35.251 +02:00 [DBG] Connection id "0HNHFCB8HU7F8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 20:32:35.253 +02:00 [DBG] Connection 0HNHFCB8HU7F9 established using the following protocol: "Tls13"
2025-11-29 20:32:35.254 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7217/api/Appointment/patient/1 - null null
2025-11-29 20:32:35.257 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment/patient/1'
2025-11-29 20:32:35.257 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)' with route pattern 'api/Appointment/patient/{patientId:int}' is valid for the request path '/api/Appointment/patient/1'
2025-11-29 20:32:35.258 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-11-29 20:32:35.259 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:32:35.259 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:32:35.260 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-11-29 20:32:35.262 +02:00 [INF] Route matched with {action = "GetByPatientId", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByPatientId(Int32) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 20:32:35.263 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:32:35.264 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:32:35.265 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:32:35.266 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:32:35.267 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:32:35.268 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 20:32:35.269 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 20:32:35.270 +02:00 [DBG] Attempting to bind parameter 'patientId' of type 'System.Int32' ...
2025-11-29 20:32:35.270 +02:00 [DBG] Attempting to bind parameter 'patientId' of type 'System.Int32' using the name 'patientId' in request data ...
2025-11-29 20:32:35.271 +02:00 [DBG] Done attempting to bind parameter 'patientId' of type 'System.Int32'.
2025-11-29 20:32:35.272 +02:00 [DBG] Done attempting to bind parameter 'patientId' of type 'System.Int32'.
2025-11-29 20:32:35.273 +02:00 [DBG] Attempting to validate the bound parameter 'patientId' of type 'System.Int32' ...
2025-11-29 20:32:35.274 +02:00 [DBG] Done attempting to validate the bound parameter 'patientId' of type 'System.Int32'.
2025-11-29 20:32:35.275 +02:00 [INF] Get Appointment by GetByPatientId  called at "2025-11-29T20:32:35.2752731+02:00"
2025-11-29 20:32:35.276 +02:00 [INF] Fetching appointments for PatientId: 1
2025-11-29 20:32:35.277 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:32:35.278 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:32:35.279 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:32:35.280 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:32:35.316 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:32:35.317 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:32:35.318 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:32:35.318 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:32:35.319 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:32:35.337 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:32:35.339 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.339 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.340 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.341 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:32:35.342 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 3ms reading results.
2025-11-29 20:32:35.343 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:32:35.344 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:32:35.346 +02:00 [DBG] Compiling query expression: 
'DbSet<Appointment>()
    .Where(a => a.PatientId == __patientId_0)
    .Include(a => a.Doctor)
    .Include(a => a.Branch)'
2025-11-29 20:32:35.347 +02:00 [DBG] Including navigation: 'Appointment.Doctor'.
2025-11-29 20:32:35.348 +02:00 [DBG] Including navigation: 'Appointment.Branch'.
2025-11-29 20:32:35.353 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Appointment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Appointment.AppointmentId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Appointment.BranchId (int) Required FK Index, 1], [Property: Appointment.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 2], [Property: Appointment.CreatedBy (string) FK Index, 3], [Property: Appointment.Date (DateOnly) Required, 4], [Property: Appointment.DoctorId (int) Required FK Index, 5], [Property: Appointment.Notes (string), 6], [Property: Appointment.PatientId (int) Required FK Index, 7], [Property: Appointment.PaymentMethod (PaymentMethod) Required, 8], [Property: Appointment.Shift (AppointmentShift) Required MaxLength(20), 9], [Property: Appointment.Status (AppointmentStatus) Required MaxLength(20), 10], [Property: Appointment.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 11] }
            1 -> Dictionary<IProperty, int> { [Property: Doctor.DoctorId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Doctor.Available (bool?), 13], [Property: Doctor.Biography (string), 14], [Property: Doctor.ConsultationFees (decimal) Required, 15], [Property: Doctor.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 16], [Property: Doctor.ExperienceYears (int?), 17], [Property: Doctor.ImageURL (string) MaxLength(300), 18], [Property: Doctor.SpecializationId (int) Required FK Index, 19], [Property: Doctor.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: Doctor.UserId (string) Required FK Index, 21] }
            2 -> Dictionary<IProperty, int> { [Property: Branch.BranchId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: Branch.Address (string) MaxLength(250), 23], [Property: Branch.BranchName (string) Required MaxLength(150), 24], [Property: Branch.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 25], [Property: Branch.Description (string), 26], [Property: Branch.Email (string) MaxLength(200), 27], [Property: Branch.ImageURL (string) MaxLength(300), 28], [Property: Branch.Latitude (double?), 29], [Property: Branch.Longitude (double?), 30], [Property: Branch.Phone (string) MaxLength(25), 31], [Property: Branch.UpdatedAt (DateTime) Required ValueGenerated.OnAdd, 32] }
        SELECT a.AppointmentId, a.BranchId, a.CreatedAt, a.CreatedBy, a.Date, a.DoctorId, a.Notes, a.PatientId, a.PaymentMethod, a.Shift, a.Status, a.UpdatedAt, d.DoctorId, d.Available, d.Biography, d.ConsultationFees, d.CreatedAt, d.ExperienceYears, d.ImageURL, d.SpecializationId, d.UpdatedAt, d.UserId, b.BranchId, b.Address, b.BranchName, b.CreatedAt, b.Description, b.Email, b.ImageURL, b.Latitude, b.Longitude, b.Phone, b.UpdatedAt
        FROM Appointments AS a
        INNER JOIN Doctors AS d ON a.DoctorId == d.DoctorId
        INNER JOIN Branches AS b ON a.BranchId == b.BranchId
        WHERE a.PatientId == @__patientId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Appointment>, 
    Clinic.Infrastructure.Persistence.AppDbContext, 
    False, 
    False, 
    True
)'
2025-11-29 20:32:35.355 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:32:35.355 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:32:35.356 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:32:35.357 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:32:35.358 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:32:35.358 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[PatientId] = @__patientId_0
2025-11-29 20:32:35.364 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__patientId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Appointments] AS [a]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Branches] AS [b] ON [a].[BranchId] = [b].[BranchId]
WHERE [a].[PatientId] = @__patientId_0
2025-11-29 20:32:35.366 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.367 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.367 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.368 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.369 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.370 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.371 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.372 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.373 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.373 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.374 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.375 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.376 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.377 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.378 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.379 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.379 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.380 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.381 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.382 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.382 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.383 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.384 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.385 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.386 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.386 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.387 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.388 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.389 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.390 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.390 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.391 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.392 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.393 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.393 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.394 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.395 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.396 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.397 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.398 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.398 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.399 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.400 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.401 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.401 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.402 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.403 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.403 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.404 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.405 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.407 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.407 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.408 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.409 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.410 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.411 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.412 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.413 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.414 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.415 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.415 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.416 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.417 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.418 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.419 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.419 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.420 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.421 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.422 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.423 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.423 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.424 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.425 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.426 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.427 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.427 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.428 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:32:35.429 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:32:35.430 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 63ms reading results.
2025-11-29 20:32:35.431 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:32:35.431 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:32:35.433 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:32:35.434 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:32:35.434 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:32:35.435 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:32:35.435 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:32:35.436 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Appointment.AppointmentDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:32:35.438 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital) in 169.6329ms
2025-11-29 20:32:35.438 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.GetByPatientId (Hospital)'
2025-11-29 20:32:35.440 +02:00 [DBG] Connection id "0HNHFCB8HU7F9" completed keep alive response.
2025-11-29 20:32:35.441 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:32:35.441 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:32:35.442 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:32:35.443 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7217/api/Appointment/patient/1 - 200 null application/json; charset=utf-8 188.5589ms
2025-11-29 20:32:43.787 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:32:43.788 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-11-29 20:32:53.790 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:32:53.792 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:33:03.793 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:33:03.795 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:33:13.796 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:33:13.798 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-11-29 20:33:23.799 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:33:23.801 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:33:33.802 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:33:33.804 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:33:43.805 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:33:43.807 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:33:53.809 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:33:53.810 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:34:03.811 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:34:03.812 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:34:13.813 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:34:13.815 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:34:23.816 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:34:23.818 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:34:33.820 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:34:33.821 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:34:43.822 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:34:43.824 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-11-29 20:34:46.684 +02:00 [DBG] Connection id "0HNHFCB8HU7F9" disconnecting.
2025-11-29 20:34:46.685 +02:00 [DBG] Connection id "0HNHFCB8HU7F9" stopped.
2025-11-29 20:34:46.686 +02:00 [DBG] Connection id "0HNHFCB8HU7F9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 20:34:53.826 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:34:53.828 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:35:03.829 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:35:03.830 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:35:13.831 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:35:13.832 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:35:23.834 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:35:23.835 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:35:33.837 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:35:33.839 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:35:43.840 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:35:43.841 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:35:53.843 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:35:53.845 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:36:03.845 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:36:03.847 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:36:13.850 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:36:13.852 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:36:23.854 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:36:23.855 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:36:33.855 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:36:33.857 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:36:43.859 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:36:43.861 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-11-29 20:36:53.862 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:36:53.863 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:37:03.865 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:37:03.866 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 1 items
2025-11-29 20:37:13.868 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:37:13.869 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:37:23.870 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:37:23.871 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:37:33.872 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:37:33.874 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:37:43.876 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:37:43.878 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:37:53.880 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:37:53.881 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 1 items
2025-11-29 20:38:03.882 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:38:03.883 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:38:13.885 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:38:13.886 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-11-29 20:38:23.887 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:38:23.889 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-11-29 20:38:33.890 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:38:33.891 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0093ms - processed: 0 items - remaining: 1 items
2025-11-29 20:38:43.893 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:38:43.895 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-11-29 20:38:53.896 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:38:53.897 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:39:03.898 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:39:03.899 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:39:13.901 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:39:13.903 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-11-29 20:39:23.904 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:39:23.905 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-11-29 20:39:33.906 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:39:33.908 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:39:43.909 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:39:43.910 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:39:53.911 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:39:53.912 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:40:03.912 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:40:03.914 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-11-29 20:40:13.916 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:40:13.918 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:40:23.919 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:40:23.921 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-11-29 20:40:33.922 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:40:33.924 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:40:43.926 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:40:43.928 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:40:53.929 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:40:53.930 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:41:03.932 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:41:03.932 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:41:13.933 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:41:13.935 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:41:23.936 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:41:23.938 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-11-29 20:41:33.939 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:41:33.940 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-11-29 20:41:43.940 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:41:43.942 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:41:53.943 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:41:53.945 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:42:03.947 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:42:03.949 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:42:13.951 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:42:13.953 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-11-29 20:42:23.955 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:42:23.956 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:42:33.957 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:42:33.958 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-11-29 20:42:43.960 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:42:43.962 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:42:53.963 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:42:53.964 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:43:03.965 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:43:03.966 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-11-29 20:43:13.968 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:43:13.969 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:43:23.970 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:43:23.972 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:43:33.973 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:43:33.975 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:43:43.977 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:43:43.979 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0006ms - processed: 0 items - remaining: 1 items
2025-11-29 20:43:53.980 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:43:53.981 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0005ms - processed: 0 items - remaining: 1 items
2025-11-29 20:44:03.983 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:44:03.985 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-11-29 20:44:13.987 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:44:13.988 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-11-29 20:44:23.989 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:44:23.991 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:44:33.991 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:44:33.993 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:44:43.994 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:44:43.995 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-11-29 20:44:53.997 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:44:53.998 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-11-29 20:45:03.999 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:45:04.000 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:45:11.667 +02:00 [DBG] Connection id "0HNHFCB8HU7FA" accepted.
2025-11-29 20:45:11.669 +02:00 [DBG] Connection id "0HNHFCB8HU7FA" started.
2025-11-29 20:45:11.673 +02:00 [DBG] Connection 0HNHFCB8HU7FA established using the following protocol: "Tls13"
2025-11-29 20:45:11.674 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - null null
2025-11-29 20:45:11.676 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 20:45:11.677 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 20:45:11.678 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:45:11.678 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:45:11.679 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:45:11.679 +02:00 [DBG] The request is a preflight request.
2025-11-29 20:45:11.680 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Auth/login - 204 null null 5.8291ms
2025-11-29 20:45:11.682 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Auth/login - application/json 54
2025-11-29 20:45:11.684 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-11-29 20:45:11.685 +02:00 [DBG] Endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-11-29 20:45:11.686 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 20:45:11.686 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:45:11.687 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:45:11.687 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:45:11.688 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:45:11.689 +02:00 [INF] Executing endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 20:45:11.690 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginAsync(Hospital.Domain.Models.LoginModel) on controller Hospital.Controllers.AuthController (Hospital).
2025-11-29 20:45:11.691 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:45:11.692 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:45:11.693 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:45:11.694 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:45:11.695 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:45:11.696 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 20:45:11.697 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.AuthController (Hospital)
2025-11-29 20:45:11.698 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 20:45:11.699 +02:00 [DBG] Attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel' using the name '' in request data ...
2025-11-29 20:45:11.700 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 20:45:11.701 +02:00 [DBG] Connection id "0HNHFCB8HU7FA", Request id "0HNHFCB8HU7FA:00000003": started reading request body.
2025-11-29 20:45:11.702 +02:00 [DBG] Connection id "0HNHFCB8HU7FA", Request id "0HNHFCB8HU7FA:00000003": done reading request body.
2025-11-29 20:45:11.703 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Domain.Models.LoginModel'
2025-11-29 20:45:11.704 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 20:45:11.705 +02:00 [DBG] Done attempting to bind parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 20:45:11.705 +02:00 [DBG] Attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel' ...
2025-11-29 20:45:11.706 +02:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'Hospital.Domain.Models.LoginModel'.
2025-11-29 20:45:11.707 +02:00 [INF] Login called at "2025-11-29T20:45:11.7073077+02:00"
2025-11-29 20:45:11.707 +02:00 [INF] Login attempt for email: nour22110@gmail.com
2025-11-29 20:45:11.709 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:45:11.710 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:45:11.711 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:45:11.711 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.747 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.749 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:45:11.749 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:45:11.750 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:45:11.751 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 20:45:11.762 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-29 20:45:11.763 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:11.765 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.766 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 20:45:11.767 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.768 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:45:11.830 +02:00 [DBG] Creating JWT token for user a06c9a74-d53e-4235-a0b9-681147a73dfc
2025-11-29 20:45:11.832 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.833 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.834 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:45:11.835 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:45:11.836 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:45:11.837 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 20:45:11.839 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-11-29 20:45:11.841 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.842 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 20:45:11.843 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.844 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:45:11.845 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.846 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.847 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:45:11.847 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:45:11.848 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:45:11.849 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 20:45:11.855 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 20:45:11.857 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.857 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 20:45:11.858 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.859 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:45:11.860 +02:00 [DBG] JWT token created for user a06c9a74-d53e-4235-a0b9-681147a73dfc, expires at "2025-11-29T19:45:11.0000000Z"
2025-11-29 20:45:11.862 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.863 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.864 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:45:11.864 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:45:11.865 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:45:11.866 +02:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 20:45:11.868 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-11-29 20:45:11.869 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.870 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:45:11.871 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.872 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:45:11.874 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.875 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.876 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:45:11.876 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:45:11.877 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:45:11.878 +02:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 20:45:11.881 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-29 20:45:11.883 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.884 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:45:11.885 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.886 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:45:11.887 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:11.888 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:45:11.889 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:45:11.890 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 20:45:11.891 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:45:11.892 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:45:11.893 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.894 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.894 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:45:11.895 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:45:11.896 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:45:11.897 +02:00 [DBG] Executing DbCommand [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 20:45:11.902 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p22='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p23='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 150), @p7='?' (Size = 10), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (DbType = DateTime2), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [CreatedAt] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [Gender] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiryTime] = @p16, [Role] = @p17, [SecurityStamp] = @p18, [TwoFactorEnabled] = @p19, [UpdatedAt] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-11-29 20:45:11.904 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.905 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:45:11.906 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.907 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:45:11.908 +02:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:11.909 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 20:45:11.911 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.912 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.913 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:45:11.914 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:45:11.914 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:45:11.915 +02:00 [DBG] Executing DbCommand [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 20:45:11.919 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId]
FROM [Patients] AS [p]
WHERE [p].[UserId] = @__user_Id_0
2025-11-29 20:45:11.921 +02:00 [DBG] The navigation 'User.PatientProfile' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:11.921 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:11.922 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.923 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-11-29 20:45:11.924 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.925 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:45:11.926 +02:00 [INF] Patient 2 logged in successfully
2025-11-29 20:45:11.927 +02:00 [INF] User nour22110@gmail.com logged in successfully with roles: Patient
2025-11-29 20:45:11.928 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:45:11.929 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:45:11.930 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:45:11.930 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:45:11.931 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:45:11.932 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Domain.Models.AuthModel'.
2025-11-29 20:45:11.933 +02:00 [INF] Executed action Hospital.Controllers.AuthController.LoginAsync (Hospital) in 236.4728ms
2025-11-29 20:45:11.933 +02:00 [INF] Executed endpoint 'Hospital.Controllers.AuthController.LoginAsync (Hospital)'
2025-11-29 20:45:11.934 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:45:11.935 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:11.936 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:45:11.937 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Auth/login - 200 null application/json; charset=utf-8 254.6613ms
2025-11-29 20:45:14.003 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:45:14.003 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-11-29 20:45:14.428 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 20:45:14.431 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 20:45:14.432 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 20:45:14.433 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 20:45:14.434 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:45:14.435 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:45:14.437 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:45:14.437 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:45:14.438 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 20:45:14.439 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 20:45:14.441 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:45:14.442 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:45:14.443 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:45:14.444 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:45:14.445 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:45:14.447 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 20:45:14.448 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 20:45:14.449 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 20:45:14.450 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 20:45:14.451 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 20:45:14.452 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 20:45:14.453 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 20:45:14.455 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 20:45:14.456 +02:00 [INF] get patient by id called at "2025-11-29T20:45:14.4560810+02:00"
2025-11-29 20:45:14.456 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 20:45:14.457 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:45:14.460 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:45:14.460 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:45:14.461 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:14.462 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:14.464 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:45:14.465 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:45:14.466 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-29 20:45:14.467 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:45:14.481 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:45:14.483 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:14.485 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:14.485 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:14.486 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:14.487 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:14.488 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:14.489 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:14.490 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:14.490 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:14.491 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-29 20:45:14.492 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:14.493 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:45:14.495 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 20:45:14.495 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:45:14.497 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:45:14.497 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:45:14.498 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:45:14.498 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:45:14.499 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 20:45:14.500 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 53.3885ms
2025-11-29 20:45:14.501 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 20:45:14.502 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:45:14.503 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:14.504 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:45:14.505 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 76.2836ms
2025-11-29 20:45:24.004 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:45:24.005 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-11-29 20:45:34.006 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:45:34.008 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-11-29 20:45:43.763 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 20:45:43.765 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 20:45:43.766 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 20:45:43.767 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:45:43.768 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:45:43.768 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:45:43.769 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:45:43.770 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:45:43.771 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:45:43.772 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 20:45:43.773 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:45:43.774 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:45:43.775 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:45:43.777 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:45:43.778 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:45:43.779 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:45:43.780 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:45:43.780 +02:00 [INF] get all schedule called at "2025-11-29T20:45:43.7809112+02:00"
2025-11-29 20:45:43.781 +02:00 [INF] Fetching all schedules
2025-11-29 20:45:43.782 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:45:43.783 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:45:43.784 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:45:43.785 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:43.786 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:43.786 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:45:43.787 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:45:43.788 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:45:43.789 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:45:43.799 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:45:43.801 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.801 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.802 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.803 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.804 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.805 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.806 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.807 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.808 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.808 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.809 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.810 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.811 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.812 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.813 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.814 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.815 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.816 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.816 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.817 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.818 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.819 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.820 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.821 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.821 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.822 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.823 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.824 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.825 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.825 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.826 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.827 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.828 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.829 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.830 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.831 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.831 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.832 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.833 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.834 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.835 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.836 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.836 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:43.837 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:43.838 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 37ms reading results.
2025-11-29 20:45:43.839 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:43.840 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:45:43.841 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:45:43.842 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:45:43.842 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:45:43.843 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:45:43.843 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:45:43.844 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:45:43.845 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 66.6183ms
2025-11-29 20:45:43.846 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:45:43.847 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:45:43.848 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:43.849 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:45:43.850 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 86.2486ms
2025-11-29 20:45:44.009 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:45:44.009 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-11-29 20:45:44.919 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Patient/2 - null null
2025-11-29 20:45:44.921 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Patient/2'
2025-11-29 20:45:44.922 +02:00 [DBG] Endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)' with route pattern 'api/Patient/{id}' is valid for the request path '/api/Patient/2'
2025-11-29 20:45:44.923 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 20:45:44.924 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:45:44.924 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:45:44.925 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:45:44.926 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:45:44.926 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 20:45:44.927 +02:00 [INF] Route matched with {action = "GetPatientById", controller = "Patient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPatientById(Int32) on controller Hospital.Controllers.PatientController (Hospital).
2025-11-29 20:45:44.928 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:45:44.930 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:45:44.931 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:45:44.932 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:45:44.933 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:45:44.934 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 20:45:44.935 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PatientController (Hospital)
2025-11-29 20:45:44.936 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-11-29 20:45:44.937 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-11-29 20:45:44.938 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 20:45:44.939 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-11-29 20:45:44.939 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-11-29 20:45:44.940 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-11-29 20:45:44.941 +02:00 [INF] get patient by id called at "2025-11-29T20:45:44.9414367+02:00"
2025-11-29 20:45:44.942 +02:00 [INF] Fetching patient with ID: 2
2025-11-29 20:45:44.942 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:45:44.944 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:45:44.945 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:45:44.945 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:44.946 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:44.947 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:45:44.948 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:45:44.949 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:45:44.949 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:45:44.959 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:45:44.961 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:44.962 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:44.962 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:44.963 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:44.964 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:44.965 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:44.966 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:44.967 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:45:44.968 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:44.969 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-29 20:45:44.970 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:44.971 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:45:44.972 +02:00 [INF] Patient with ID 2 retrieved successfully
2025-11-29 20:45:44.973 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:45:44.974 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:45:44.974 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:45:44.975 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:45:44.975 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:45:44.976 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Patient.PatientDto'.
2025-11-29 20:45:44.977 +02:00 [INF] Executed action Hospital.Controllers.PatientController.GetPatientById (Hospital) in 43.2876ms
2025-11-29 20:45:44.978 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PatientController.GetPatientById (Hospital)'
2025-11-29 20:45:44.979 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:45:44.980 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:45:44.981 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:45:44.982 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Patient/2 - 200 null application/json; charset=utf-8 62.7748ms
2025-11-29 20:45:54.010 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:45:54.012 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 1 items
2025-11-29 20:46:04.013 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:46:04.014 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-11-29 20:46:14.014 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:46:14.016 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:46:24.017 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:46:24.018 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:46:27.202 +02:00 [DBG] Connection id "0HNHFCB8HU7FA" received FIN.
2025-11-29 20:46:27.204 +02:00 [DBG] Connection id "0HNHFCB8HU7FA" is closed. The last processed stream ID was 9.
2025-11-29 20:46:27.205 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7FA completed.
2025-11-29 20:46:27.205 +02:00 [DBG] Connection id "0HNHFCB8HU7FA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 20:46:27.209 +02:00 [DBG] Connection id "0HNHFCB8HU7FA" stopped.
2025-11-29 20:46:29.623 +02:00 [DBG] Connection id "0HNHFCB8HU7FB" accepted.
2025-11-29 20:46:29.623 +02:00 [DBG] Connection id "0HNHFCB8HU7FB" started.
2025-11-29 20:46:29.627 +02:00 [DBG] Connection 0HNHFCB8HU7FB established using the following protocol: "Tls13"
2025-11-29 20:46:29.628 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 20:46:29.630 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 20:46:29.631 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 20:46:29.632 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:46:29.633 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:46:29.633 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:46:29.634 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:46:29.634 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:46:29.635 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:46:29.636 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 20:46:29.637 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:46:29.638 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:46:29.639 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:46:29.640 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:46:29.641 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:46:29.641 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:46:29.642 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:46:29.643 +02:00 [INF] get all schedule called at "2025-11-29T20:46:29.6435641+02:00"
2025-11-29 20:46:29.644 +02:00 [INF] Fetching all schedules
2025-11-29 20:46:29.645 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:46:29.646 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:46:29.646 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:46:29.647 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:46:29.648 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:46:29.649 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:46:29.649 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:46:29.650 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:46:29.651 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:46:29.666 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:46:29.667 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.668 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.669 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.670 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.671 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.672 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.673 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.674 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.675 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.675 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.676 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.677 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.679 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.679 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.680 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.681 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.682 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.683 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.684 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.685 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.685 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.686 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.687 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.688 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.689 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.689 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.690 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.692 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.693 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.693 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.694 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.695 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.696 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.697 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.698 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.698 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.699 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.700 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.701 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.702 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.703 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.704 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.705 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:29.706 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:46:29.707 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 40ms reading results.
2025-11-29 20:46:29.708 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:46:29.709 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:46:29.710 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:46:29.711 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:46:29.712 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:46:29.712 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:46:29.713 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:46:29.714 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:46:29.715 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 73.3893ms
2025-11-29 20:46:29.716 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:46:29.716 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:46:29.717 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:46:29.718 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:46:29.719 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 90.6955ms
2025-11-29 20:46:34.019 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:46:34.019 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:46:34.596 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 20:46:34.599 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 20:46:34.600 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 20:46:34.601 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:46:34.601 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:46:34.602 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:46:34.603 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:46:34.603 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:46:34.604 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:46:34.605 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 20:46:34.606 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:46:34.607 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:46:34.607 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:46:34.609 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:46:34.610 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:46:34.611 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:46:34.613 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:46:34.613 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:46:34.614 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 20:46:34.615 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:46:34.616 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:46:34.617 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:46:34.618 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:46:34.619 +02:00 [INF] Get  doctor By Id called at "2025-11-29T20:46:34.6191206+02:00"
2025-11-29 20:46:34.619 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 20:46:34.620 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:46:34.621 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:46:34.622 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:46:34.623 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:46:34.623 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:46:34.624 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:46:34.625 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:46:34.626 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:46:34.627 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:46:34.637 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:46:34.639 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:34.640 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:34.641 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:34.642 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:34.642 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:34.643 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:34.645 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:34.646 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:34.646 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:34.647 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:34.648 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:34.649 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:34.649 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:34.651 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:34.651 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:46:34.652 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:46:34.653 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 20:46:34.654 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:46:34.655 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:46:34.656 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:46:34.658 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:46:34.659 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:46:34.659 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:46:34.660 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:46:34.661 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 20:46:34.661 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 50.4314ms
2025-11-29 20:46:34.662 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:46:34.663 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:46:34.664 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:46:34.665 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:46:34.666 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 69.4419ms
2025-11-29 20:46:44.020 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:46:44.021 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:46:54.022 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:46:54.023 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 1 items
2025-11-29 20:47:04.023 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:47:04.024 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0031ms - processed: 0 items - remaining: 1 items
2025-11-29 20:47:14.027 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:47:14.029 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:47:24.030 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:47:24.031 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:47:34.033 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:47:34.035 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-11-29 20:47:39.948 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Schedule/ - null null
2025-11-29 20:47:39.950 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Schedule/'
2025-11-29 20:47:39.951 +02:00 [DBG] Endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)' with route pattern 'api/Schedule' is valid for the request path '/api/Schedule/'
2025-11-29 20:47:39.952 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:47:39.953 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:47:39.954 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:47:39.955 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:47:39.956 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:47:39.956 +02:00 [INF] Executing endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:47:39.957 +02:00 [INF] Route matched with {action = "GetAll", controller = "Schedule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Hospital.Application.DTO.Schedule.ScheduleDto]]] GetAll() on controller Hospital.Controllers.ScheduleController (Hospital).
2025-11-29 20:47:39.958 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:47:39.959 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:47:39.960 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:47:39.962 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:47:39.963 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:47:39.964 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:47:39.965 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.ScheduleController (Hospital)
2025-11-29 20:47:39.966 +02:00 [INF] get all schedule called at "2025-11-29T20:47:39.9660212+02:00"
2025-11-29 20:47:39.966 +02:00 [INF] Fetching all schedules
2025-11-29 20:47:39.967 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:47:39.969 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:47:39.969 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:47:39.970 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:39.971 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:39.972 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:47:39.972 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:47:39.973 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:47:39.974 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:47:39.982 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[ScheduleId], [s].[BranchId], [s].[CreatedAt], [s].[DayOfWeek], [s].[DoctorId], [s].[EndTime], [s].[Shift], [s].[StartTime], [s].[UpdatedAt], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [s0].[SpecializationId], [s0].[CreatedAt], [s0].[Description], [s0].[ImageURL], [s0].[Name], [s0].[UpdatedAt], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Schedules] AS [s]
INNER JOIN [Doctors] AS [d] ON [s].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
INNER JOIN [Specializations] AS [s0] ON [d].[SpecializationId] = [s0].[SpecializationId]
INNER JOIN [Branches] AS [b] ON [s].[BranchId] = [b].[BranchId]
2025-11-29 20:47:39.985 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:39.986 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:39.987 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:39.988 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:39.989 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:39.990 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:39.991 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:39.992 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:39.993 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:39.994 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:39.995 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:39.996 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:39.997 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:39.998 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:39.999 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.000 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.001 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.002 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.003 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.005 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.005 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.006 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.007 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.008 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.009 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.010 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.011 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.012 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.013 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.014 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.015 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.017 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.017 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.018 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.019 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.020 +02:00 [DBG] The navigation 'Schedule.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.021 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.022 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.023 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.025 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.026 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.027 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.028 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:40.029 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:40.030 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 45ms reading results.
2025-11-29 20:47:40.031 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:40.032 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:47:40.033 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:47:40.035 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:47:40.036 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:47:40.037 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:47:40.037 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:47:40.038 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Hospital.Application.DTO.Schedule.ScheduleDto, Hospital.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 20:47:40.041 +02:00 [INF] Executed action Hospital.Controllers.ScheduleController.GetAll (Hospital) in 76.5627ms
2025-11-29 20:47:40.042 +02:00 [INF] Executed endpoint 'Hospital.Controllers.ScheduleController.GetAll (Hospital)'
2025-11-29 20:47:40.043 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:47:40.043 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:40.044 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:47:40.045 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Schedule/ - 200 null application/json; charset=utf-8 97.7634ms
2025-11-29 20:47:40.333 +02:00 [DBG] Connection id "0HNHFCB8HU7FB" received FIN.
2025-11-29 20:47:40.334 +02:00 [DBG] Connection id "0HNHFCB8HU7FB" is closed. The last processed stream ID was 5.
2025-11-29 20:47:40.334 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7FB completed.
2025-11-29 20:47:40.335 +02:00 [DBG] Connection id "0HNHFCB8HU7FB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 20:47:40.337 +02:00 [DBG] Connection id "0HNHFCB8HU7FB" stopped.
2025-11-29 20:47:44.036 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:47:44.037 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-11-29 20:47:46.376 +02:00 [DBG] Connection id "0HNHFCB8HU7FC" accepted.
2025-11-29 20:47:46.377 +02:00 [DBG] Connection id "0HNHFCB8HU7FC" started.
2025-11-29 20:47:46.382 +02:00 [DBG] Connection 0HNHFCB8HU7FC established using the following protocol: "Tls13"
2025-11-29 20:47:46.383 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7217/api/Doctor/5 - null null
2025-11-29 20:47:46.385 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Doctor/5'
2025-11-29 20:47:46.385 +02:00 [DBG] Endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)' with route pattern 'api/Doctor/{doctorId}' is valid for the request path '/api/Doctor/5'
2025-11-29 20:47:46.386 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:47:46.387 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:47:46.388 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:47:46.388 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:47:46.389 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:47:46.390 +02:00 [INF] Executing endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:47:46.390 +02:00 [INF] Route matched with {action = "GetDoctor", controller = "Doctor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDoctor(Int32) on controller Hospital.Controllers.DoctorController (Hospital).
2025-11-29 20:47:46.391 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:47:46.392 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:47:46.393 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:47:46.395 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:47:46.396 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:47:46.397 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:47:46.398 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.DoctorController (Hospital)
2025-11-29 20:47:46.398 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:47:46.399 +02:00 [DBG] Attempting to bind parameter 'doctorId' of type 'System.Int32' using the name 'doctorId' in request data ...
2025-11-29 20:47:46.400 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:47:46.401 +02:00 [DBG] Done attempting to bind parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:47:46.402 +02:00 [DBG] Attempting to validate the bound parameter 'doctorId' of type 'System.Int32' ...
2025-11-29 20:47:46.403 +02:00 [DBG] Done attempting to validate the bound parameter 'doctorId' of type 'System.Int32'.
2025-11-29 20:47:46.404 +02:00 [INF] Get  doctor By Id called at "2025-11-29T20:47:46.4044450+02:00"
2025-11-29 20:47:46.405 +02:00 [INF] Fetching doctor with ID 5
2025-11-29 20:47:46.406 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:47:46.407 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:47:46.408 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:47:46.408 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:46.409 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:46.410 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:47:46.411 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:47:46.412 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:47:46.412 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:47:46.420 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:47:46.422 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:46.423 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:46.424 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:46.424 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:46.425 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:46.426 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:46.427 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:46.428 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:46.429 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:46.430 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:46.431 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:46.432 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:46.433 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:46.433 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:46.434 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:46.435 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:46.436 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 14ms reading results.
2025-11-29 20:47:46.437 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:46.438 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:47:46.439 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:47:46.440 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:47:46.441 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:47:46.441 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:47:46.442 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:47:46.443 +02:00 [INF] Executing OkObjectResult, writing value of type 'Hospital.Application.DTO.Doctor.DoctorDto'.
2025-11-29 20:47:46.444 +02:00 [INF] Executed action Hospital.Controllers.DoctorController.GetDoctor (Hospital) in 47.1396ms
2025-11-29 20:47:46.445 +02:00 [INF] Executed endpoint 'Hospital.Controllers.DoctorController.GetDoctor (Hospital)'
2025-11-29 20:47:46.445 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:47:46.446 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:46.447 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:47:46.448 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7217/api/Doctor/5 - 200 null application/json; charset=utf-8 65.0413ms
2025-11-29 20:47:54.039 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:47:54.040 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 1 items
2025-11-29 20:47:57.391 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Appointment - null null
2025-11-29 20:47:57.393 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 20:47:57.394 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 20:47:57.395 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:47:57.395 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:47:57.396 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:47:57.397 +02:00 [DBG] The request is a preflight request.
2025-11-29 20:47:57.397 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Appointment - 204 null null 6.1212ms
2025-11-29 20:47:57.399 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Appointment - application/json 100
2025-11-29 20:47:57.401 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Appointment'
2025-11-29 20:47:57.401 +02:00 [DBG] Endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)' with route pattern 'api/Appointment' is valid for the request path '/api/Appointment'
2025-11-29 20:47:57.402 +02:00 [DBG] Request matched endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 20:47:57.403 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:47:57.403 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:47:57.404 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:47:57.405 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-29 20:47:57.405 +02:00 [INF] Executing endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 20:47:57.406 +02:00 [INF] Route matched with {action = "Add", controller = "Appointment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Add(Hospital.Application.DTO.Appointment.AddAppointmentDto) on controller Hospital.API.Controllers.AppointmentController (Hospital).
2025-11-29 20:47:57.407 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:47:57.408 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:47:57.409 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:47:57.410 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:47:57.411 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:47:57.412 +02:00 [DBG] Executing controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 20:47:57.413 +02:00 [DBG] Executed controller factory for controller Hospital.API.Controllers.AppointmentController (Hospital)
2025-11-29 20:47:57.414 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 20:47:57.415 +02:00 [DBG] Attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' using the name '' in request data ...
2025-11-29 20:47:57.415 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 20:47:57.416 +02:00 [DBG] Connection id "0HNHFCB8HU7FC", Request id "0HNHFCB8HU7FC:00000005": started reading request body.
2025-11-29 20:47:57.417 +02:00 [DBG] Connection id "0HNHFCB8HU7FC", Request id "0HNHFCB8HU7FC:00000005": done reading request body.
2025-11-29 20:47:57.418 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'
2025-11-29 20:47:57.418 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 20:47:57.419 +02:00 [DBG] Done attempting to bind parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 20:47:57.420 +02:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto' ...
2025-11-29 20:47:57.421 +02:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'Hospital.Application.DTO.Appointment.AddAppointmentDto'.
2025-11-29 20:47:57.422 +02:00 [INF] Add Appointment called at "2025-11-29T20:47:57.4220796+02:00"
2025-11-29 20:47:57.422 +02:00 [INF] Creating appointment for PatientId: 2, DoctorId: 5, Date: "2026-01-24", Shift: "Afternoon"
2025-11-29 20:47:57.423 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:47:57.425 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:47:57.425 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:47:57.426 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:57.427 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:57.428 +02:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-29 20:47:57.429 +02:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-29 20:47:57.430 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:47:57.431 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:47:57.432 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:47:57.432 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:47:57.443 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[PatientId], [t].[CreatedAt], [t].[EmergencyContact], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t0].[RecordId], [t0].[AppointmentId], [t0].[CreatedAt], [t0].[Diagnosis], [t0].[DoctorId], [t0].[Notes], [t0].[PatientId], [t0].[TreatmentPlan], [t0].[UpdatedAt], [t0].[DoctorId0], [t0].[Available], [t0].[Biography], [t0].[ConsultationFees], [t0].[CreatedAt0], [t0].[ExperienceYears], [t0].[ImageURL], [t0].[SpecializationId], [t0].[UpdatedAt0], [t0].[UserId], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[CreatedAt1], [t0].[DateOfBirth], [t0].[Email], [t0].[EmailConfirmed], [t0].[FullName], [t0].[Gender], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[RefreshToken], [t0].[RefreshTokenExpiryTime], [t0].[Role], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UpdatedAt1], [t0].[UserName]
FROM (
    SELECT TOP(1) [p].[PatientId], [p].[CreatedAt], [p].[EmergencyContact], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName]
    FROM [Patients] AS [p]
    INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
    WHERE [p].[PatientId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [m].[RecordId], [m].[AppointmentId], [m].[CreatedAt], [m].[Diagnosis], [m].[DoctorId], [m].[Notes], [m].[PatientId], [m].[TreatmentPlan], [m].[UpdatedAt], [d].[DoctorId] AS [DoctorId0], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt] AS [CreatedAt0], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt] AS [UpdatedAt0], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt] AS [CreatedAt1], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt] AS [UpdatedAt1], [u0].[UserName]
    FROM [MedicalRecords] AS [m]
    INNER JOIN [Doctors] AS [d] ON [m].[DoctorId] = [d].[DoctorId]
    INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
) AS [t0] ON [t].[PatientId] = [t0].[PatientId]
ORDER BY [t].[PatientId], [t].[Id], [t0].[RecordId], [t0].[DoctorId0]
2025-11-29 20:47:57.445 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.447 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.447 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.449 +02:00 [DBG] Context 'AppDbContext' started tracking 'MedicalRecord' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.449 +02:00 [DBG] The navigation 'MedicalRecord.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.450 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.451 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.452 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.452 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:57.453 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 8ms reading results.
2025-11-29 20:47:57.455 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:47:57.455 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:47:57.456 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:47:57.457 +02:00 [DBG] Executing DbCommand [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:47:57.459 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__doctorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[DoctorId], [t].[Available], [t].[Biography], [t].[ConsultationFees], [t].[CreatedAt], [t].[ExperienceYears], [t].[ImageURL], [t].[SpecializationId], [t].[UpdatedAt], [t].[UserId], [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt0], [t].[DateOfBirth], [t].[Email], [t].[EmailConfirmed], [t].[FullName], [t].[Gender], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[RefreshToken], [t].[RefreshTokenExpiryTime], [t].[Role], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UpdatedAt0], [t].[UserName], [t].[SpecializationId0], [t].[CreatedAt1], [t].[Description], [t].[ImageURL0], [t].[Name], [t].[UpdatedAt1], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId], [t0].[Address], [t0].[BranchName], [t0].[CreatedAt], [t0].[Description], [t0].[Email], [t0].[ImageURL], [t0].[Latitude], [t0].[Longitude], [t0].[Phone], [t0].[UpdatedAt], [s0].[ScheduleId], [s0].[BranchId], [s0].[CreatedAt], [s0].[DayOfWeek], [s0].[DoctorId], [s0].[EndTime], [s0].[Shift], [s0].[StartTime], [s0].[UpdatedAt]
FROM (
    SELECT TOP(1) [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt] AS [CreatedAt0], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt] AS [UpdatedAt0], [u].[UserName], [s].[SpecializationId] AS [SpecializationId0], [s].[CreatedAt] AS [CreatedAt1], [s].[Description], [s].[ImageURL] AS [ImageURL0], [s].[Name], [s].[UpdatedAt] AS [UpdatedAt1]
    FROM [Doctors] AS [d]
    INNER JOIN [Users] AS [u] ON [d].[UserId] = [u].[Id]
    INNER JOIN [Specializations] AS [s] ON [d].[SpecializationId] = [s].[SpecializationId]
    WHERE [d].[DoctorId] = @__doctorId_0
) AS [t]
LEFT JOIN (
    SELECT [d0].[BranchesBranchId], [d0].[DoctorsDoctorId], [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
    FROM [DoctorBranches] AS [d0]
    INNER JOIN [Branches] AS [b] ON [d0].[BranchesBranchId] = [b].[BranchId]
) AS [t0] ON [t].[DoctorId] = [t0].[DoctorsDoctorId]
LEFT JOIN [Schedules] AS [s0] ON [t].[DoctorId] = [s0].[DoctorId]
ORDER BY [t].[DoctorId], [t].[Id], [t].[SpecializationId0], [t0].[BranchesBranchId], [t0].[DoctorsDoctorId], [t0].[BranchId]
2025-11-29 20:47:57.461 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.462 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.463 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.463 +02:00 [DBG] The navigation 'Doctor.Specialization' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.464 +02:00 [DBG] Context 'AppDbContext' started tracking 'Specialization' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.465 +02:00 [DBG] Context 'AppDbContext' started tracking 'BranchDoctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.466 +02:00 [DBG] Context 'AppDbContext' started tracking 'Branch' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.467 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.468 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.469 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.469 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.470 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.471 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.472 +02:00 [DBG] The navigation 'Schedule.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.473 +02:00 [DBG] Context 'AppDbContext' started tracking 'Schedule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.474 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:57.475 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 13ms reading results.
2025-11-29 20:47:57.476 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:47:57.476 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:47:57.477 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:47:57.478 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 20:47:57.481 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[BranchId], [b].[Address], [b].[BranchName], [b].[CreatedAt], [b].[Description], [b].[Email], [b].[ImageURL], [b].[Latitude], [b].[Longitude], [b].[Phone], [b].[UpdatedAt]
FROM [Branches] AS [b]
WHERE [b].[BranchId] = @__id_0
2025-11-29 20:47:57.483 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:57.484 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 20:47:57.485 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:47:57.485 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:47:57.486 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:47:57.487 +02:00 [DBG] Executing DbCommand [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 20:47:57.492 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__patientId_0='?' (DbType = Int32), @__doctorId_1='?' (DbType = Int32), @__date_2='?' (DbType = DateTime2), @__shift_3='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Appointments] AS [a]
        WHERE [a].[PatientId] = @__patientId_0 AND [a].[DoctorId] = @__doctorId_1 AND [a].[Date] = @__date_2 AND [a].[Shift] = @__shift_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-29 20:47:57.494 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:57.495 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-11-29 20:47:57.496 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Appointment.AppointmentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.497 +02:00 [DBG] The navigation 'Appointment.Branch' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.498 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.499 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.499 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.500 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:47:57.501 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:47:57.502 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 20:47:57.503 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:47:57.503 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:47:57.505 +02:00 [DBG] Creating transaction savepoint.
2025-11-29 20:47:57.505 +02:00 [DBG] Created transaction savepoint.
2025-11-29 20:47:57.506 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:47:57.507 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:47:57.508 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:47:57.509 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 20:47:57.512 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Size = 450), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Size = 20), @p9='?' (Size = 20), @p10='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Appointments] ([BranchId], [CreatedAt], [CreatedBy], [Date], [DoctorId], [Notes], [PatientId], [PaymentMethod], [Shift], [Status], [UpdatedAt])
OUTPUT INSERTED.[AppointmentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-29 20:47:57.514 +02:00 [DBG] The foreign key property 'Appointment.AppointmentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 20:47:57.515 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:57.516 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:47:57.517 +02:00 [DBG] An entity of type 'Appointment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.518 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 20:47:57.518 +02:00 [DBG] Committing transaction.
2025-11-29 20:47:57.519 +02:00 [DBG] Committed transaction.
2025-11-29 20:47:57.520 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:57.520 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:47:57.521 +02:00 [INF] Appointment created successfully with ID: 30
2025-11-29 20:47:57.522 +02:00 [DBG] Disposing transaction.
2025-11-29 20:47:57.523 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:47:57.524 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:47:57.525 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:47:57.525 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:47:57.526 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:47:57.526 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'Hospital.Application.DTO.Appointment.AppointmentDto'.
2025-11-29 20:47:57.527 +02:00 [DBG] Found the endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] for address (id=[30],action=[GetById],controller=[Appointment])
2025-11-29 20:47:57.529 +02:00 [DBG] Successfully processed template api/Appointment/{id:int} for Hospital.API.Controllers.AppointmentController.GetById (Hospital) resulting in /api/Appointment/30 and 
2025-11-29 20:47:57.530 +02:00 [DBG] Link generation succeeded for endpoints ["Hospital.API.Controllers.AppointmentController.GetById (Hospital)"] with result /api/Appointment/30
2025-11-29 20:47:57.531 +02:00 [INF] Executed action Hospital.API.Controllers.AppointmentController.Add (Hospital) in 119.1661ms
2025-11-29 20:47:57.532 +02:00 [INF] Executed endpoint 'Hospital.API.Controllers.AppointmentController.Add (Hospital)'
2025-11-29 20:47:57.533 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:47:57.533 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:57.534 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:47:57.535 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Appointment - 201 null application/json; charset=utf-8 136.3933ms
2025-11-29 20:47:57.536 +02:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - null null
2025-11-29 20:47:57.539 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 20:47:57.539 +02:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2025-11-29 20:47:57.540 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:47:57.541 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:47:57.541 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:47:57.542 +02:00 [DBG] The request is a preflight request.
2025-11-29 20:47:57.542 +02:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7217/api/Payment/create - 204 null null 5.9268ms
2025-11-29 20:47:57.543 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7217/api/Payment/create - application/json 20
2025-11-29 20:47:57.546 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Payment/create'
2025-11-29 20:47:57.547 +02:00 [DBG] Endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)' with route pattern 'api/Payment/create' is valid for the request path '/api/Payment/create'
2025-11-29 20:47:57.548 +02:00 [DBG] Request matched endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 20:47:57.548 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-29 20:47:57.549 +02:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2025-11-29 20:47:57.549 +02:00 [INF] CORS policy execution successful.
2025-11-29 20:47:57.550 +02:00 [DBG] Successfully validated the token.
2025-11-29 20:47:57.551 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-29 20:47:57.552 +02:00 [DBG] Authorization was successful.
2025-11-29 20:47:57.553 +02:00 [INF] Executing endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 20:47:57.553 +02:00 [INF] Route matched with {action = "CreatePayment", controller = "Payment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePayment(Hospital.Controllers.CreatePaymentRequest, System.Threading.CancellationToken) on controller Hospital.Controllers.PaymentController (Hospital).
2025-11-29 20:47:57.555 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-29 20:47:57.555 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-29 20:47:57.556 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-29 20:47:57.557 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-29 20:47:57.559 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-29 20:47:57.560 +02:00 [DBG] Executing controller factory for controller Hospital.Controllers.PaymentController (Hospital)
2025-11-29 20:47:57.562 +02:00 [DBG] Executed controller factory for controller Hospital.Controllers.PaymentController (Hospital)
2025-11-29 20:47:57.562 +02:00 [DBG] Attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' ...
2025-11-29 20:47:57.563 +02:00 [DBG] Attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' using the name '' in request data ...
2025-11-29 20:47:57.564 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-29 20:47:57.565 +02:00 [DBG] Connection id "0HNHFCB8HU7FC", Request id "0HNHFCB8HU7FC:00000009": started reading request body.
2025-11-29 20:47:57.566 +02:00 [DBG] Connection id "0HNHFCB8HU7FC", Request id "0HNHFCB8HU7FC:00000009": done reading request body.
2025-11-29 20:47:57.567 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'Hospital.Controllers.CreatePaymentRequest'
2025-11-29 20:47:57.568 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 20:47:57.569 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 20:47:57.570 +02:00 [DBG] Attempting to validate the bound parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest' ...
2025-11-29 20:47:57.571 +02:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'Hospital.Controllers.CreatePaymentRequest'.
2025-11-29 20:47:57.572 +02:00 [DBG] Attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-11-29 20:47:57.573 +02:00 [DBG] Done attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-11-29 20:47:57.574 +02:00 [DBG] Attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-11-29 20:47:57.575 +02:00 [DBG] Done attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-11-29 20:47:57.576 +02:00 [INF] create payment by credite card called at "2025-11-29T20:47:57.5762743+02:00"
2025-11-29 20:47:57.577 +02:00 [DBG] Entity Framework Core 8.0.21 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.21' with options: None
2025-11-29 20:47:57.579 +02:00 [DBG] Creating DbConnection.
2025-11-29 20:47:57.579 +02:00 [DBG] Created DbConnection. (0ms).
2025-11-29 20:47:57.581 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:57.582 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:57.582 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:47:57.583 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:47:57.584 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:47:57.585 +02:00 [DBG] Executing DbCommand [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt], [p0].[PatientId], [p0].[CreatedAt], [p0].[EmergencyContact], [p0].[UpdatedAt], [p0].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName]
FROM [Appointments] AS [a]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
INNER JOIN [Patients] AS [p0] ON [a].[PatientId] = [p0].[PatientId]
INNER JOIN [Users] AS [u] ON [p0].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
WHERE [a].[AppointmentId] = @__appointmentId_0
2025-11-29 20:47:57.594 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__appointmentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[AppointmentId], [a].[BranchId], [a].[CreatedAt], [a].[CreatedBy], [a].[Date], [a].[DoctorId], [a].[Notes], [a].[PatientId], [a].[PaymentMethod], [a].[Shift], [a].[Status], [a].[UpdatedAt], [p].[PaymentId], [p].[Amount], [p].[AppointmentId], [p].[CreatedAt], [p].[Currency], [p].[GatewayResponse], [p].[PaymobMerchantOrderId], [p].[PaymobOrderId], [p].[PaymobTransactionId], [p].[Status], [p].[UpdatedAt], [p0].[PatientId], [p0].[CreatedAt], [p0].[EmergencyContact], [p0].[UpdatedAt], [p0].[UserId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DateOfBirth], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[Gender], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UpdatedAt], [u].[UserName], [d].[DoctorId], [d].[Available], [d].[Biography], [d].[ConsultationFees], [d].[CreatedAt], [d].[ExperienceYears], [d].[ImageURL], [d].[SpecializationId], [d].[UpdatedAt], [d].[UserId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DateOfBirth], [u0].[Email], [u0].[EmailConfirmed], [u0].[FullName], [u0].[Gender], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[RefreshToken], [u0].[RefreshTokenExpiryTime], [u0].[Role], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UpdatedAt], [u0].[UserName]
FROM [Appointments] AS [a]
LEFT JOIN [Payments] AS [p] ON [a].[AppointmentId] = [p].[AppointmentId]
INNER JOIN [Patients] AS [p0] ON [a].[PatientId] = [p0].[PatientId]
INNER JOIN [Users] AS [u] ON [p0].[UserId] = [u].[Id]
INNER JOIN [Doctors] AS [d] ON [a].[DoctorId] = [d].[DoctorId]
INNER JOIN [Users] AS [u0] ON [d].[UserId] = [u0].[Id]
WHERE [a].[AppointmentId] = @__appointmentId_0
2025-11-29 20:47:57.596 +02:00 [DBG] Context 'AppDbContext' started tracking 'Appointment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.597 +02:00 [DBG] The navigation 'Appointment.Patient' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.598 +02:00 [DBG] Context 'AppDbContext' started tracking 'Patient' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.599 +02:00 [DBG] The navigation 'Patient.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.600 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.601 +02:00 [DBG] The navigation 'Appointment.Doctor' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.602 +02:00 [DBG] Context 'AppDbContext' started tracking 'Doctor' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.603 +02:00 [DBG] The navigation 'Doctor.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.604 +02:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:57.605 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:57.606 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-11-29 20:47:57.608 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:57.609 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (1ms).
2025-11-29 20:47:57.610 +02:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-11-29 20:47:57.611 +02:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/auth/tokens
2025-11-29 20:47:58.810 +02:00 [INF] Received HTTP response headers after 1198.0744ms - 201
2025-11-29 20:47:58.812 +02:00 [INF] End processing HTTP request after 1201.4743ms - 201
2025-11-29 20:47:58.813 +02:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-11-29 20:47:58.814 +02:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/ecommerce/orders
2025-11-29 20:47:59.111 +02:00 [INF] Received HTTP response headers after 296.8024ms - 201
2025-11-29 20:47:59.112 +02:00 [INF] End processing HTTP request after 299.647ms - 201
2025-11-29 20:47:59.113 +02:00 [INF] Start processing HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-11-29 20:47:59.114 +02:00 [INF] Sending HTTP request POST https://accept.paymob.com/api/acceptance/payment_keys
2025-11-29 20:47:59.399 +02:00 [INF] Received HTTP response headers after 284.0403ms - 201
2025-11-29 20:47:59.401 +02:00 [INF] End processing HTTP request after 287.6177ms - 201
2025-11-29 20:47:59.402 +02:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Payment.PaymentId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:59.403 +02:00 [DBG] The navigation 'Payment.Appointment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:59.404 +02:00 [DBG] The navigation 'Appointment.Payment' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:59.405 +02:00 [DBG] Context 'AppDbContext' started tracking 'Payment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:59.406 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:47:59.406 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:47:59.407 +02:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-11-29 20:47:59.408 +02:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-11-29 20:47:59.409 +02:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-11-29 20:47:59.411 +02:00 [DBG] Opening connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:59.412 +02:00 [DBG] Opened connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:59.413 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-29 20:47:59.414 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-29 20:47:59.414 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-29 20:47:59.415 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-29 20:47:59.418 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Precision = 10) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 3), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (DbType = Int64), @p7='?' (DbType = Int64), @p8='?' (Size = 20), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [AppointmentId], [CreatedAt], [Currency], [GatewayResponse], [PaymobMerchantOrderId], [PaymobOrderId], [PaymobTransactionId], [Status], [UpdatedAt])
OUTPUT INSERTED.[PaymentId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-11-29 20:47:59.420 +02:00 [DBG] The foreign key property 'Payment.PaymentId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-11-29 20:47:59.421 +02:00 [DBG] Closing data reader to 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:59.421 +02:00 [DBG] A data reader for 'HospitalDB' on server '.\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-11-29 20:47:59.422 +02:00 [DBG] Closing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:59.423 +02:00 [DBG] Closed connection to database 'HospitalDB' on server '.\SQLEXPRESS' (0ms).
2025-11-29 20:47:59.424 +02:00 [DBG] An entity of type 'Payment' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-29 20:47:59.425 +02:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-11-29 20:47:59.426 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-29 20:47:59.428 +02:00 [DBG] No information found on request to perform content negotiation.
2025-11-29 20:47:59.428 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-29 20:47:59.429 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-29 20:47:59.429 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-29 20:47:59.430 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType5`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-29 20:47:59.431 +02:00 [INF] Executed action Hospital.Controllers.PaymentController.CreatePayment (Hospital) in 1871.124ms
2025-11-29 20:47:59.432 +02:00 [INF] Executed endpoint 'Hospital.Controllers.PaymentController.CreatePayment (Hospital)'
2025-11-29 20:47:59.433 +02:00 [DBG] 'AppDbContext' disposed.
2025-11-29 20:47:59.434 +02:00 [DBG] Disposing connection to database 'HospitalDB' on server '.\SQLEXPRESS'.
2025-11-29 20:47:59.434 +02:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-11-29 20:47:59.435 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7217/api/Payment/create - 200 null application/json; charset=utf-8 1892.0337ms
2025-11-29 20:48:04.041 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:48:04.042 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:48:14.043 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:48:14.045 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0007ms - processed: 0 items - remaining: 1 items
2025-11-29 20:48:24.046 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:48:24.047 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:48:34.048 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:48:34.050 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 1 items
2025-11-29 20:48:44.051 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:48:44.052 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:48:54.054 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:48:54.055 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0008ms - processed: 0 items - remaining: 1 items
2025-11-29 20:49:04.056 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:49:04.057 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:49:14.057 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:49:14.058 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 1 items
2025-11-29 20:49:24.060 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:49:24.062 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:49:34.064 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:49:34.065 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:49:44.067 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:49:44.069 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:49:54.070 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 1 items
2025-11-29 20:49:54.071 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0009ms - processed: 0 items - remaining: 1 items
2025-11-29 20:49:57.561 +02:00 [DBG] HttpMessageHandler expired after 120000ms for client 'IPaymobClient'
2025-11-29 20:50:04.072 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:50:04.073 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 20:50:11.177 +02:00 [DBG] Connection id "0HNHFCB8HU7FC" is closing.
2025-11-29 20:50:11.179 +02:00 [DBG] Connection id "0HNHFCB8HU7FC" is closed. The last processed stream ID was 9.
2025-11-29 20:50:11.180 +02:00 [DBG] The connection queue processing loop for 0HNHFCB8HU7FC completed.
2025-11-29 20:50:11.180 +02:00 [DBG] Connection id "0HNHFCB8HU7FC" received FIN.
2025-11-29 20:50:11.181 +02:00 [DBG] Connection id "0HNHFCB8HU7FC" stopped.
2025-11-29 20:50:11.182 +02:00 [DBG] Connection id "0HNHFCB8HU7FC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-11-29 20:50:14.076 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:50:14.077 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 20:50:24.079 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:50:24.080 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 20:50:34.082 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:50:34.083 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 20:50:44.083 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:50:44.084 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 20:50:54.086 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:50:54.087 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2025-11-29 20:51:04.088 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:51:04.090 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 20:51:14.091 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:51:14.091 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 2 items
2025-11-29 20:51:24.093 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:51:24.094 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 20:51:34.096 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:51:34.097 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 20:51:44.099 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:51:44.100 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 20:51:54.102 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:51:54.103 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 20:52:04.105 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:52:04.106 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 20:52:14.108 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:52:14.109 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 20:52:24.110 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:52:24.112 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 20:52:34.112 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:52:34.114 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 20:52:44.115 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:52:44.117 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 20:52:54.118 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:52:54.119 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-11-29 20:53:04.121 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:53:04.122 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 20:53:14.123 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:53:14.125 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 20:53:24.126 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:53:24.128 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 20:53:34.129 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:53:34.130 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 20:53:44.131 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:53:44.132 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 20:53:54.133 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:53:54.134 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-11-29 20:54:04.137 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:54:04.138 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2025-11-29 20:54:14.139 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:54:14.140 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 20:54:24.140 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:54:24.141 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 20:54:34.142 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:54:34.143 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2025-11-29 20:54:44.143 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:54:44.144 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 20:54:54.146 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:54:54.146 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 20:55:04.148 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:55:04.149 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-11-29 20:55:14.151 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:55:14.152 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 20:55:24.154 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:55:24.155 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 20:55:34.157 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:55:34.158 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 20:55:44.158 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:55:44.159 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 20:55:54.160 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:55:54.162 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 20:56:04.162 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:56:04.164 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-11-29 20:56:14.165 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:56:14.166 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0018ms - processed: 0 items - remaining: 2 items
2025-11-29 20:56:24.168 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:56:24.169 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2025-11-29 20:56:34.169 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:56:34.170 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 20:56:44.171 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:56:44.172 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 20:56:54.173 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:56:54.175 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 20:57:04.176 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:57:04.177 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 20:57:14.178 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:57:14.179 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2025-11-29 20:57:24.180 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:57:24.180 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 20:57:34.182 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:57:34.185 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 20:57:44.187 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:57:44.188 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 20:57:54.189 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:57:54.190 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 20:58:04.192 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:58:04.193 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-11-29 20:58:14.195 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:58:14.196 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 20:58:24.196 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:58:24.196 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 20:58:34.198 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:58:34.198 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 20:58:44.199 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:58:44.200 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 20:58:54.202 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:58:54.202 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 20:59:04.203 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:59:04.204 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 20:59:14.205 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:59:14.206 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-11-29 20:59:24.207 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:59:24.208 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 20:59:34.209 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:59:34.210 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 20:59:44.211 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:59:44.212 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 20:59:54.214 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 20:59:54.215 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 21:00:04.217 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:00:04.218 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:00:14.219 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:00:14.220 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:00:24.220 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:00:24.221 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:00:34.223 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:00:34.223 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 21:00:44.224 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:00:44.226 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 21:00:54.227 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:00:54.228 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 21:01:04.229 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:01:04.230 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:01:14.231 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:01:14.232 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:01:24.233 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:01:24.234 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:01:34.237 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:01:34.239 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 21:01:44.239 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:01:44.241 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:01:54.242 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:01:54.243 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:02:04.245 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:02:04.246 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:02:14.247 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:02:14.249 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:02:24.250 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:02:24.251 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 21:02:34.252 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:02:34.253 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-11-29 21:02:44.253 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:02:44.255 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:02:54.255 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:02:54.257 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 2 items
2025-11-29 21:03:04.259 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:03:04.261 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:03:14.262 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:03:14.264 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 21:03:24.266 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:03:24.266 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:03:34.268 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:03:34.269 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 21:03:44.270 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:03:44.271 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-11-29 21:03:54.272 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:03:54.274 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:04:04.275 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:04:04.276 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 21:04:14.279 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:04:14.279 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:04:24.280 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:04:24.282 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:04:34.283 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:04:34.284 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:04:44.285 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:04:44.287 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:04:54.288 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:04:54.289 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 21:05:04.290 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:05:04.291 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-11-29 21:05:14.293 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:05:14.294 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-11-29 21:05:24.296 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:05:24.297 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:05:34.297 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:05:34.298 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:05:44.299 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:05:44.300 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:05:54.301 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:05:54.302 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:06:04.303 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:06:04.305 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:06:14.305 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:06:14.306 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:06:24.307 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:06:24.308 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:06:34.309 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:06:34.310 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:06:44.310 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:06:44.311 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:06:54.312 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:06:54.314 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:07:04.314 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:07:04.316 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:07:14.315 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:07:14.317 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2025-11-29 21:07:24.319 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:07:24.320 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:07:34.321 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:07:34.322 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:07:44.324 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:07:44.325 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:07:54.327 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:07:54.329 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:08:04.330 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:08:04.332 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:08:14.332 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:08:14.334 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:08:24.336 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:08:24.337 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 21:08:34.339 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:08:34.340 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:08:44.342 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:08:44.344 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:08:54.345 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:08:54.347 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:09:04.349 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:09:04.351 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:09:14.352 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:09:14.353 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 21:09:24.354 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:09:24.355 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-11-29 21:09:34.356 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:09:34.358 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:09:44.359 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:09:44.360 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:09:54.362 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:09:54.364 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:10:04.365 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:10:04.366 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 21:10:14.367 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:10:14.368 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:10:24.369 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:10:24.370 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 21:10:34.371 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:10:34.373 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 21:10:44.374 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:10:44.375 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 21:10:54.376 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:10:54.377 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:11:04.379 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:11:04.381 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:11:14.381 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:11:14.382 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:11:24.383 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:11:24.384 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:11:34.385 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:11:34.386 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 21:11:44.388 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:11:44.390 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2025-11-29 21:11:54.391 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:11:54.392 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 21:12:04.393 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:12:04.396 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:12:14.395 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:12:14.396 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:12:24.398 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:12:24.399 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-11-29 21:12:34.400 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:12:34.402 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 21:12:44.402 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:12:44.403 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:12:54.404 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:12:54.405 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:13:04.406 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:13:04.407 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:13:14.407 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:13:14.408 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2025-11-29 21:13:24.409 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:13:24.410 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:13:34.412 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:13:34.413 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:13:44.414 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:13:44.416 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:13:54.417 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:13:54.418 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:14:04.419 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:14:04.420 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:14:14.421 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:14:14.423 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:14:24.424 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:14:24.425 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0027ms - processed: 0 items - remaining: 2 items
2025-11-29 21:14:34.426 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:14:34.428 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2025-11-29 21:14:44.428 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:14:44.430 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:14:54.431 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:14:54.432 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:15:04.433 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:15:04.434 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:15:14.435 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:15:14.436 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2025-11-29 21:15:24.437 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:15:24.439 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:15:34.440 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:15:34.442 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:15:44.443 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:15:44.444 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 21:15:54.446 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:15:54.447 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 21:16:04.448 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:16:04.449 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 21:16:14.449 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:16:14.451 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:16:24.452 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:16:24.453 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:16:34.455 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:16:34.456 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 2 items
2025-11-29 21:16:44.457 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:16:44.459 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 21:16:54.461 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:16:54.462 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:17:04.463 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:17:04.465 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:17:14.466 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:17:14.467 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0013ms - processed: 0 items - remaining: 2 items
2025-11-29 21:17:24.468 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:17:24.470 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:17:34.471 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:17:34.472 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:17:44.473 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:17:44.474 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:17:54.475 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:17:54.477 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:18:04.479 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:18:04.480 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:18:14.481 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:18:14.483 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:18:24.485 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:18:24.486 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0012ms - processed: 0 items - remaining: 2 items
2025-11-29 21:18:34.486 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:18:34.487 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0015ms - processed: 0 items - remaining: 2 items
2025-11-29 21:18:44.489 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:18:44.490 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 21:18:54.491 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:18:54.492 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:19:04.493 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:19:04.494 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 2 items
2025-11-29 21:19:14.497 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:19:14.498 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 2 items
2025-11-29 21:19:24.499 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:19:24.501 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 21:19:34.502 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:19:34.503 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.001ms - processed: 0 items - remaining: 2 items
2025-11-29 21:19:44.505 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:19:44.506 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:19:47.307 +02:00 [DBG] Config reload token fired. Checking for changes...
2025-11-29 21:19:47.562 +02:00 [DBG] Config reload token fired. Checking for changes...
2025-11-29 21:19:54.507 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:19:54.509 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:20:04.510 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:20:04.511 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0011ms - processed: 0 items - remaining: 2 items
2025-11-29 21:20:14.511 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:20:14.513 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 2 items
2025-11-29 21:20:24.514 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:20:24.515 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
2025-11-29 21:20:32.594 +02:00 [DBG] Config reload token fired. Checking for changes...
2025-11-29 21:20:32.846 +02:00 [DBG] Config reload token fired. Checking for changes...
2025-11-29 21:20:34.517 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:20:34.517 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0016ms - processed: 0 items - remaining: 2 items
2025-11-29 21:20:44.519 +02:00 [DBG] Starting HttpMessageHandler cleanup cycle with 2 items
2025-11-29 21:20:44.520 +02:00 [DBG] Ending HttpMessageHandler cleanup cycle after 0.0014ms - processed: 0 items - remaining: 2 items
